!function(e){"use strict";var t=function(e){function t(e,a){babelHelpers.classCallCheck(this,t);var s=babelHelpers.possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,a));return s.sdk=akamai.amp.ns_,null!=s.sdk&&null==s.streamingTag&&s.createStreamingTag(),s}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"onready",value:function(){var e=this.player.ads;null!=e&&(this.bindHandlers(["stop","onadstarted","onaderror"]),e.addEventListener("started",this.onadstarted),e.addEventListener("ended",this.stop),e.addEventListener("skipped",this.stop),e.addEventListener("error",this.onaderror))}},{key:"createStreamingTag",value:function(){null!=this.streamingTag&&this.streamingTag.stop(),this.streamingTag=null,this.streamingTag=new this.sdk.StreamingTag({customerC2:this.config.clientId})}},{key:"getMetaData",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t={},a=e?this.data.metadata.ads:this.data.metadata.video;for(var s in a){var n=a[s];"null"!=n&&null!=n&&(t[s]=n)}return t}},{key:"onmediachange",value:function(){this.createStreamingTag(),this.logger.log("[AMP ComscoreStreamsense Event] Media Change, StreamTag ReInitialize")}},{key:"onplaying",value:function(){var e=this.player.ads;null!=e&&(e.getInProgress()||e.inProgress)||(this.streamingTag.playVideoContentPart(this.getMetaData()),this.logger.log("[AMP ComscoreStreamsense Event] Content Play"))}},{key:"onpaused",value:function(){this.stop()}},{key:"stop",value:function(){this.streamingTag.stop()}},{key:"onended",value:function(){this.createStreamingTag(),this.logger.log("[AMP ComscoreStreamsense Event] End")}},{key:"onadstarted",value:function(){this.streamingTag.playVideoAdvertisement(this.getMetaData(!0)),this.logger.log("[AMP ComscoreStreamsense Event] : Ad Start")}},{key:"onaderror",value:function(){this.onadstarted(),this.stop()}}]),t}(akamai.amp.Plugin);akamai.amp.AMP.registerPlugin("comscorestreamsense",akamai.amp.Plugin.createFactory(t)),e.ComscoreStreamsense=t}(this.akamai.amp.comscorestreamsense=this.akamai.amp.comscorestreamsense||{});
//# sourceMappingURL=Comscorestreamsense.min.js.map