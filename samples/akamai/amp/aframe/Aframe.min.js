!function(e){"use strict";var t=function(){function e(t,i){babelHelpers.classCallCheck(this,e),this.NAME="mouse-rotation",this.register(t,i)}return babelHelpers.createClass(e,[{key:"register",value:function(e,t){AFRAME.registerComponent(this.NAME,{schema:{enabled:{default:e||!1},dx:{default:2},dy:{default:2},speed:{default:null!=t?t/10:.3}},rotateEnd_:null,init:function(){this.onMouseUp_=this.onMouseUp_.bind(this),this.onMouseDown_=this.onMouseDown_.bind(this),this.onMouseMove_=this.onMouseMove_.bind(this),this.directionX=0,this.directionY=0,this.rotateStart_=new THREE.Vector2,this.rotateEnd_=new THREE.Vector2,this.rotateDelta_=new THREE.Vector2,this.isDragging_=!1},play:function(){window.addEventListener("mousemove",this.onMouseMove_),window.addEventListener("mousedown",this.onMouseDown_),window.addEventListener("mouseup",this.onMouseUp_)},pause:function(){window.addEventListener("mousemove",this.onMouseMove_),window.addEventListener("mousedown",this.onMouseDown_),window.addEventListener("mouseup",this.onMouseUp_)},isPointerLocked_:function(){var e=document.pointerLockElement||document.mozPointerLockElement||document.webkitPointerLockElement;return void 0!==e},onMouseUp_:function(e){this.directionX=0,this.isDragging_=!1},onMouseDown_:function(e){this.rotateStart_.set(e.clientX,e.clientY),this.isDragging_=!0},onMouseMove_:function(e){if(this.isDragging_||this.isPointerLocked_()){if(this.isPointerLocked_())this.rotateEnd_.set(e.clientX,e.clientY);else{var t=e.movementX||e.mozMovementX||0,i=e.movementY||e.mozMovementY||0;this.rotateEnd_.set(this.rotateStart_.x-t,this.rotateStart_.y-i)}this.rotateDelta_.subVectors(this.rotateEnd_,this.rotateStart_),this.rotateStart_.copy(this.rotateEnd_),this.directionX=t*this.data.speed}},tick:function(e,t){if(this.data.enabled){var i=this.el.getAttribute("rotation");i&&((this.directionX||this.directionY)&&(i.x+=this.data.dx*this.directionY,i.y+=this.data.dy*this.directionX,this.el.setAttribute("rotation",i)),this.data.speed!==this.schema.speed.default&&(this.data.speed=this.schema.speed.default))}}})}},{key:"update",value:function(e){var t=void 0;null!=(t=AFRAME.components[this.NAME])&&10>e&&null!=t.schema&&(t.schema.speed.default=e/10)}}]),e}(),i=function(e){function i(e,s){babelHelpers.classCallCheck(this,i);var n=babelHelpers.possibleConstructorReturn(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,e,s));return n.container=e.container,n.scene=document.createElement("a-scene"),n.sphere=document.createElement("a-videosphere"),n.sky=document.createElement("a-sky"),n.scene.setAttribute("vr-mode-ui","enabled: "+n.isCompatible()),n.sphere.setAttribute("rotation",n.config.data.rotation||"0 180 0"),n.pattern="undefined"!=typeof s.data.pattern?new RegExp(s.data.pattern,"i"):new RegExp("360","i"),n.pattern=s.data.strict?n.pattern:new RegExp("","i"),null!=s.mouse&&s.mouse.speed&&(n.mouse=new t(!0,s.mouse.speed)),n}return babelHelpers.inherits(i,e),babelHelpers.createClass(i,[{key:"onready",value:function(e){this.initComponent(),this.player.addEventListener("mediachange",this.onMediaChangeHandler.bind(this))}},{key:"onMediaChangeHandler",value:function(){var e=null!==this.player.media?this.player.media:this.player.getMedia(),t=this.scene.getChildEntities().indexOf(this.sphere)>-1,i=this.scene.getChildEntities().indexOf(this.sky)>-1,s="undefined"!=typeof e.category?e.category:"";switch(e.medium){case"audio":this.sky.setAttribute("src",e.poster),this.scene.appendChild(this.sky),this.player.setDisplayState("aframe-sky"),t&&this.scene.removeChild(this.sphere);break;default:this.pattern.test(s)?(this.player.setDisplayState("aframe-sphere"),i&&this.scene.removeChild(this.sky),this.scene.appendChild(this.sphere)):(this.player.setDisplayState("non-sphere"),t&&this.scene.removeChild(this.sphere))}}},{key:"initComponent",value:function(){this.player.mediaElement.setAttribute("id","videoamp"),this.sphere.setAttribute("src","#videoamp"),this.sphere.setAttribute("mouse-rotation",""),this.scene.appendChild(this.sphere);var e=document.createElement("div");e.className="amp-vr",e.appendChild(this.scene),this.container.appendChild(e)}},{key:"updateMouseSpeed",value:function(e){this.mouse&&this.mouse.update(e)}},{key:"isCompatible",value:function(){var e="function"==typeof navigator.getVRDisplays;return e===!1&&console.log("Your browser is not compatible with A-Frame check this page out https://get.webgl.org/"),e}}]),i}(akamai.amp.Plugin);akamai.amp.AMP.registerPlugin("aframe","function"==typeof akamai.amp.Plugin.createFactory?akamai.amp.Plugin.createFactory(i):i.factory),e.Aframe=i}(this.akamai.amp.aframe=this.akamai.amp.aframe||{});
//# sourceMappingURL=Aframe.min.js.map