!function(e){var r=e.babelHelpers={};r.typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r.jsx=function(){var e="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103;return function(r,t,n,o){var i=r&&r.defaultProps,u=arguments.length-3;if(t||0===u||(t={}),t&&i)for(var a in i)void 0===t[a]&&(t[a]=i[a]);else t||(t=i||{});if(1===u)t.children=o;else if(u>1){for(var f=Array(u),l=0;l<u;l++)f[l]=arguments[l+3];t.children=f}return{$$typeof:e,type:r,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}}(),r.asyncIterator=function(e){if("function"==typeof Symbol){if(Symbol.asyncIterator){var r=e[Symbol.asyncIterator];if(null!=r)return r.call(e)}if(Symbol.iterator)return e[Symbol.iterator]()}throw new TypeError("Object is not async iterable")},r.asyncGenerator=function(){function e(e){this.value=e}function r(r){function t(e,r){return new Promise(function(t,o){var a={key:e,arg:r,resolve:t,reject:o,next:null};u?u=u.next=a:(i=u=a,n(e,r))})}function n(t,i){try{var u=r[t](i),a=u.value;a instanceof e?Promise.resolve(a.value).then(function(e){n("next",e)},function(e){n("throw",e)}):o(u.done?"return":"normal",u.value)}catch(e){o("throw",e)}}function o(e,r){switch(e){case"return":i.resolve({value:r,done:!0});break;case"throw":i.reject(r);break;default:i.resolve({value:r,done:!1})}i=i.next,i?n(i.key,i.arg):u=null}var i,u;this._invoke=t,"function"!=typeof r.return&&(this.return=void 0)}return"function"==typeof Symbol&&Symbol.asyncIterator&&(r.prototype[Symbol.asyncIterator]=function(){return this}),r.prototype.next=function(e){return this._invoke("next",e)},r.prototype.throw=function(e){return this._invoke("throw",e)},r.prototype.return=function(e){return this._invoke("return",e)},{wrap:function(e){return function(){return new r(e.apply(this,arguments))}},await:function(r){return new e(r)}}}(),r.asyncGeneratorDelegate=function(e,r){function t(t,n){return o=!0,n=new Promise(function(r){r(e[t](n))}),{done:!1,value:r(n)}}var n={},o=!1;return"function"==typeof Symbol&&Symbol.iterator&&(n[Symbol.iterator]=function(){return this}),n.next=function(e){return o?(o=!1,e):t("next",e)},"function"==typeof e.throw&&(n.throw=function(e){if(o)throw o=!1,e;return t("throw",e)}),"function"==typeof e.return&&(n.return=function(e){return t("return",e)}),n},r.asyncToGenerator=function(e){return function(){var r=e.apply(this,arguments);return new Promise(function(e,t){function n(o,i){try{var u=r[o](i),a=u.value}catch(e){return void t(e)}return u.done?void e(a):Promise.resolve(a).then(function(e){n("next",e)},function(e){n("throw",e)})}return n("next")})}},r.classCallCheck=function(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")},r.createClass=function(){function e(e,r){for(var t=0;t<r.length;t++){var n=r[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(r,t,n){return t&&e(r.prototype,t),n&&e(r,n),r}}(),r.defineEnumerableProperties=function(e,r){for(var t in r){var n=r[t];n.configurable=n.enumerable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,t,n)}return e},r.defaults=function(e,r){for(var t=Object.getOwnPropertyNames(r),n=0;n<t.length;n++){var o=t[n],i=Object.getOwnPropertyDescriptor(r,o);i&&i.configurable&&void 0===e[o]&&Object.defineProperty(e,o,i)}return e},r.defineProperty=function(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e},r.extends=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e},r.get=function e(r,t,n){null===r&&(r=Function.prototype);var o=Object.getOwnPropertyDescriptor(r,t);if(void 0===o){var i=Object.getPrototypeOf(r);return null===i?void 0:e(i,t,n)}if("value"in o)return o.value;var u=o.get;if(void 0!==u)return u.call(n)},r.inherits=function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function, not "+typeof r);e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),r&&(Object.setPrototypeOf?Object.setPrototypeOf(e,r):e.__proto__=r)},r.instanceof=function(e,r){return null!=r&&"undefined"!=typeof Symbol&&r[Symbol.hasInstance]?r[Symbol.hasInstance](e):e instanceof r},r.interopRequireDefault=function(e){return e&&e.__esModule?e:{default:e}},r.interopRequireWildcard=function(e){if(e&&e.__esModule)return e;var r={};if(null!=e)for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(r[t]=e[t]);return r.default=e,r},r.newArrowCheck=function(e,r){if(e!==r)throw new TypeError("Cannot instantiate an arrow function")},r.objectDestructuringEmpty=function(e){if(null==e)throw new TypeError("Cannot destructure undefined")},r.objectWithoutProperties=function(e,r){var t={};for(var n in e)r.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t},r.possibleConstructorReturn=function(e,r){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!r||"object"!=typeof r&&"function"!=typeof r?e:r},r.selfGlobal="undefined"==typeof e?self:e,r.set=function e(r,t,n,o){var i=Object.getOwnPropertyDescriptor(r,t);if(void 0===i){var u=Object.getPrototypeOf(r);null!==u&&e(u,t,n,o)}else if("value"in i&&i.writable)i.value=n;else{var a=i.set;void 0!==a&&a.call(o,n)}return n},r.slicedToArray=function(){function e(e,r){var t=[],n=!0,o=!1,i=void 0;try{for(var u,a=e[Symbol.iterator]();!(n=(u=a.next()).done)&&(t.push(u.value),!r||t.length!==r);n=!0);}catch(e){o=!0,i=e}finally{try{!n&&a.return&&a.return()}finally{if(o)throw i}}return t}return function(r,t){if(Array.isArray(r))return r;if(Symbol.iterator in Object(r))return e(r,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),r.slicedToArrayLoose=function(e,r){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e)){for(var t,n=[],o=e[Symbol.iterator]();!(t=o.next()).done&&(n.push(t.value),!r||n.length!==r););return n}throw new TypeError("Invalid attempt to destructure non-iterable instance")},r.taggedTemplateLiteral=function(e,r){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(r)}}))},r.taggedTemplateLiteralLoose=function(e,r){return e.raw=r,e},r.temporalRef=function(e,r,t){if(e===t)throw new ReferenceError(r+" is not defined - temporal dead zone");return e},r.temporalUndefined={},r.toArray=function(e){return Array.isArray(e)?e:Array.from(e)},r.toConsumableArray=function(e){if(Array.isArray(e)){for(var r=0,t=Array(e.length);r<e.length;r++)t[r]=e[r];return t}return Array.from(e)}}("undefined"==typeof global?self:global);
try{var ce=new window.CustomEvent("test");ce.preventDefault();if(!0!==ce.defaultPrevented)throw Error("Could not prevent default");}catch(e){var CustomEvent=function(d,a){var b,c;a=a||{bubbles:!1,cancelable:!1,detail:void 0};b=document.createEvent("CustomEvent");b.initCustomEvent(d,a.bubbles,a.cancelable,a.detail);c=b.preventDefault;b.preventDefault=function(){c.call(this);try{Object.defineProperty(this,"defaultPrevented",{get:function(){return!0}})}catch(f){this.defaultPrevented=!0}};return b};CustomEvent.prototype=
window.Event.prototype;window.CustomEvent=CustomEvent};
!function(t,e){if(!t.ES6Promise){t.ES6Promise=e();t.ES6Promise.polyfill()}}(this,function(){"use strict";function t(t){return"function"==typeof t||"object"==typeof t&&null!==t}function e(t){return"function"==typeof t}function n(t){I=t}function r(t){J=t}function o(){return function(){return process.nextTick(a)}}function i(){return"undefined"!=typeof H?function(){H(a)}:c()}function s(){var t=0,e=new V(a),n=document.createTextNode("");return e.observe(n,{characterData:!0}),function(){n.data=t=++t%2}}function u(){var t=new MessageChannel;return t.port1.onmessage=a,function(){return t.port2.postMessage(0)}}function c(){var t=setTimeout;return function(){return t(a,1)}}function a(){for(var t=0;t<G;t+=2){var e=$[t],n=$[t+1];e(n),$[t]=void 0,$[t+1]=void 0}G=0}function f(){try{var t=require,e=t("vertx");return H=e.runOnLoop||e.runOnContext,i()}catch(n){return c()}}function l(t,e){var n=arguments,r=this,o=new this.constructor(p);void 0===o[et]&&k(o);var i=r._state;return i?!function(){var t=n[i-1];J(function(){return x(i,o,t,r._result)})}():E(r,o,t,e),o}function h(t){var e=this;if(t&&"object"==typeof t&&t.constructor===e)return t;var n=new e(p);return g(n,t),n}function p(){}function v(){return new TypeError("You cannot resolve a promise with itself")}function d(){return new TypeError("A promises callback cannot return that same promise.")}function _(t){try{return t.then}catch(e){return it.error=e,it}}function y(t,e,n,r){try{t.call(e,n,r)}catch(o){return o}}function m(t,e,n){J(function(t){var r=!1,o=y(n,e,function(n){r||(r=!0,e!==n?g(t,n):S(t,n))},function(e){r||(r=!0,j(t,e))},"Settle: "+(t._label||" unknown promise"));!r&&o&&(r=!0,j(t,o))},t)}function b(t,e){e._state===rt?S(t,e._result):e._state===ot?j(t,e._result):E(e,void 0,function(e){return g(t,e)},function(e){return j(t,e)})}function w(t,n,r){n.constructor===t.constructor&&r===l&&n.constructor.resolve===h?b(t,n):r===it?j(t,it.error):void 0===r?S(t,n):e(r)?m(t,n,r):S(t,n)}function g(e,n){e===n?j(e,v()):t(n)?w(e,n,_(n)):S(e,n)}function A(t){t._onerror&&t._onerror(t._result),P(t)}function S(t,e){t._state===nt&&(t._result=e,t._state=rt,0!==t._subscribers.length&&J(P,t))}function j(t,e){t._state===nt&&(t._state=ot,t._result=e,J(A,t))}function E(t,e,n,r){var o=t._subscribers,i=o.length;t._onerror=null,o[i]=e,o[i+rt]=n,o[i+ot]=r,0===i&&t._state&&J(P,t)}function P(t){var e=t._subscribers,n=t._state;if(0!==e.length){for(var r=void 0,o=void 0,i=t._result,s=0;s<e.length;s+=3)r=e[s],o=e[s+n],r?x(n,r,o,i):o(i);t._subscribers.length=0}}function T(){this.error=null}function M(t,e){try{return t(e)}catch(n){return st.error=n,st}}function x(t,n,r,o){var i=e(r),s=void 0,u=void 0,c=void 0,a=void 0;if(i){if(s=M(r,o),s===st?(a=!0,u=s.error,s=null):c=!0,n===s)return void j(n,d())}else s=o,c=!0;n._state!==nt||(i&&c?g(n,s):a?j(n,u):t===rt?S(n,s):t===ot&&j(n,s))}function C(t,e){try{e(function(e){g(t,e)},function(e){j(t,e)})}catch(n){j(t,n)}}function O(){return ut++}function k(t){t[et]=ut++,t._state=void 0,t._result=void 0,t._subscribers=[]}function Y(t,e){this._instanceConstructor=t,this.promise=new t(p),this.promise[et]||k(this.promise),B(e)?(this._input=e,this.length=e.length,this._remaining=e.length,this._result=new Array(this.length),0===this.length?S(this.promise,this._result):(this.length=this.length||0,this._enumerate(),0===this._remaining&&S(this.promise,this._result))):j(this.promise,q())}function q(){return new Error("Array Methods must be provided an Array")}function F(t){return new Y(this,t).promise}function D(t){var e=this;return new e(B(t)?function(n,r){for(var o=t.length,i=0;i<o;i++)e.resolve(t[i]).then(n,r)}:function(t,e){return e(new TypeError("You must pass an array to race."))})}function K(t){var e=this,n=new e(p);return j(n,t),n}function L(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function N(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}function U(t){this[et]=O(),this._result=this._state=void 0,this._subscribers=[],p!==t&&("function"!=typeof t&&L(),this instanceof U?C(this,t):N())}function W(){var t=void 0;if("undefined"!=typeof global)t=global;else if("undefined"!=typeof self)t=self;else try{t=Function("return this")()}catch(e){throw new Error("polyfill failed because global object is unavailable in this environment")}var n=t.Promise;if(n){var r=null;try{r=Object.prototype.toString.call(n.resolve())}catch(e){}if("[object Promise]"===r&&!n.cast)return}t.Promise=U}var z=void 0;z=Array.isArray?Array.isArray:function(t){return"[object Array]"===Object.prototype.toString.call(t)};var B=z,G=0,H=void 0,I=void 0,J=function(t,e){$[G]=t,$[G+1]=e,G+=2,2===G&&(I?I(a):tt())},Q="undefined"!=typeof window?window:void 0,R=Q||{},V=R.MutationObserver||R.WebKitMutationObserver,X="undefined"==typeof self&&"undefined"!=typeof process&&"[object process]"==={}.toString.call(process),Z="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel,$=new Array(1e3),tt=void 0;tt=X?o():V?s():Z?u():void 0===Q&&"function"==typeof require?f():c();var et=Math.random().toString(36).substring(16),nt=void 0,rt=1,ot=2,it=new T,st=new T,ut=0;return Y.prototype._enumerate=function(){for(var t=this.length,e=this._input,n=0;this._state===nt&&n<t;n++)this._eachEntry(e[n],n)},Y.prototype._eachEntry=function(t,e){var n=this._instanceConstructor,r=n.resolve;if(r===h){var o=_(t);if(o===l&&t._state!==nt)this._settledAt(t._state,e,t._result);else if("function"!=typeof o)this._remaining--,this._result[e]=t;else if(n===U){var i=new n(p);w(i,t,o),this._willSettleAt(i,e)}else this._willSettleAt(new n(function(e){return e(t)}),e)}else this._willSettleAt(r(t),e)},Y.prototype._settledAt=function(t,e,n){var r=this.promise;r._state===nt&&(this._remaining--,t===ot?j(r,n):this._result[e]=n),0===this._remaining&&S(r,this._result)},Y.prototype._willSettleAt=function(t,e){var n=this;E(t,void 0,function(t){return n._settledAt(rt,e,t)},function(t){return n._settledAt(ot,e,t)})},U.all=F,U.race=D,U.resolve=h,U.reject=K,U._setScheduler=n,U._setAsap=r,U._asap=J,U.prototype={constructor:U,then:l,"catch":function(t){return this.then(null,t)}},U.polyfill=W,U.Promise=U,U});
(function(n){function i(a,d){this.setNotifyMethod(a);this.setNotifyContext(d)}function j(a,d,b){this.name=a;this.body=d;this.type=b}function k(){}function m(){}function l(){this.subCommands=[];this.initializeMacroCommand()}function g(a,d){this.mediatorName=a||this.constructor.NAME;this.viewComponent=d}function h(a,d){this.proxyName=a||this.constructor.NAME;null!=d&&this.setData(d)}function b(a){if(null!=b.instanceMap[a])throw Error(b.MULTITON_MSG);this.initializeNotifier(a);b.instanceMap[a]=this;
this.initializeFacade()}function c(a){if(null!=c.instanceMap[a])throw Error(c.MULTITON_MSG);this.multitonKey=a;c.instanceMap[this.multitonKey]=this;this.mediatorMap=[];this.observerMap=[];this.initializeView()}function e(a){if(e.instanceMap[a])throw Error(e.MULTITON_MSG);this.multitonKey=a;e.instanceMap[a]=this;this.proxyMap=[];this.initializeModel()}function f(a){if(null!=f.instanceMap[a])throw Error(f.MULTITON_MSG);this.multitonKey=a;f.instanceMap[this.multitonKey]=this;this.commandMap=[];this.initializeController()}
function p(a,d,b){for(var a=a.split("."),b=b||o.global,c,e,f=0,g=a.length;f<g;f++)c=b,e=a[f],b=null==b[e]?b[e]={}:b[e];return null==d?b:c[e]=d}null==n&&(n=window);if(!n.puremvc){i.prototype.setNotifyMethod=function(a){this.notify=a};i.prototype.setNotifyContext=function(a){this.context=a};i.prototype.getNotifyMethod=function(){return this.notify};i.prototype.getNotifyContext=function(){return this.context};i.prototype.notifyObserver=function(a){this.getNotifyMethod().call(this.getNotifyContext(),
a)};i.prototype.compareNotifyContext=function(a){return a===this.context};i.prototype.notify=null;i.prototype.context=null;j.prototype.getName=function(){return this.name};j.prototype.setBody=function(a){this.body=a};j.prototype.getBody=function(){return this.body};j.prototype.setType=function(a){this.type=a};j.prototype.getType=function(){return this.type};j.prototype.toString=function(){var a="Notification Name: "+this.getName(),a=a+("\nBody:"+(null==this.body?"null":this.body.toString()));return a+=
"\nType:"+(null==this.type?"null":this.type)};j.prototype.name=null;j.prototype.type=null;j.prototype.body=null;k.prototype.sendNotification=function(a,d,b){var c=this.getFacade();c&&c.sendNotification(a,d,b)};k.prototype.initializeNotifier=function(a){this.multitonKey=""+a;this.facade=this.getFacade()};k.prototype.getFacade=function(){if(null==this.multitonKey)throw Error(k.MULTITON_MSG);return b.getInstance(this.multitonKey)};k.prototype.multitonKey=null;k.MULTITON_MSG="multitonKey for this Notifier not yet initialized!";
m.prototype=new k;m.prototype.constructor=m;m.prototype.execute=function(){};l.prototype=new k;l.prototype.constructor=l;l.prototype.subCommands=null;l.prototype.initializeMacroCommand=function(){};l.prototype.addSubCommand=function(a){this.subCommands.push(a)};l.prototype.execute=function(a){for(;0<this.subCommands.length;){var d=new (this.subCommands.shift());d.initializeNotifier(this.multitonKey);d.execute(a)}};g.NAME="Mediator";g.prototype=new k;g.prototype.constructor=g;g.prototype.getMediatorName=
function(){return this.mediatorName};g.prototype.setViewComponent=function(a){this.viewComponent=a};g.prototype.getViewComponent=function(){return this.viewComponent};g.prototype.listNotificationInterests=function(){return[]};g.prototype.handleNotification=function(){};g.prototype.onRegister=function(){};g.prototype.onRemove=function(){};g.prototype.mediatorName=null;g.prototype.viewComponent=null;h.NAME="Proxy";h.prototype=new k;h.prototype.constructor=h;h.prototype.getProxyName=function(){return this.proxyName};
h.prototype.setData=function(a){this.data=a};h.prototype.getData=function(){return this.data};h.prototype.onRegister=function(){};h.prototype.onRemove=function(){};h.prototype.proxyName=null;h.prototype.data=null;b.prototype.initializeFacade=function(){this.initializeModel();this.initializeController();this.initializeView()};b.getInstance=function(a){if(null==a)return null;null==b.instanceMap[a]&&(b.instanceMap[a]=new b(a));return b.instanceMap[a]};b.prototype.initializeController=function(){if(null==
this.controller)this.controller=f.getInstance(this.multitonKey)};b.prototype.initializeModel=function(){if(null==this.model)this.model=e.getInstance(this.multitonKey)};b.prototype.initializeView=function(){if(null==this.view)this.view=c.getInstance(this.multitonKey)};b.prototype.registerCommand=function(a,d){this.controller.registerCommand(a,d)};b.prototype.removeCommand=function(a){this.controller.removeCommand(a)};b.prototype.hasCommand=function(a){return this.controller.hasCommand(a)};b.prototype.registerProxy=
function(a){this.model.registerProxy(a)};b.prototype.retrieveProxy=function(a){return this.model.retrieveProxy(a)};b.prototype.removeProxy=function(a){var d=null;null!=this.model&&(d=this.model.removeProxy(a));return d};b.prototype.hasProxy=function(a){return this.model.hasProxy(a)};b.prototype.registerMediator=function(a){null!=this.view&&this.view.registerMediator(a)};b.prototype.retrieveMediator=function(a){return this.view.retrieveMediator(a)};b.prototype.removeMediator=function(a){var d=null;
null!=this.view&&(d=this.view.removeMediator(a));return d};b.prototype.hasMediator=function(a){return this.view.hasMediator(a)};b.prototype.sendNotification=function(a,d,b){this.notifyObservers(new j(a,d,b))};b.prototype.notifyObservers=function(a){null!=this.view&&this.view.notifyObservers(a)};b.prototype.initializeNotifier=function(a){this.multitonKey=a};b.hasCore=function(a){return null!=b.instanceMap[a]};b.removeCore=function(a){null!=b.instanceMap[a]&&(e.removeModel(a),c.removeView(a),f.removeController(a),
delete b.instanceMap[a])};b.prototype.controller=null;b.prototype.model=null;b.prototype.view=null;b.prototype.multitonKey=null;b.instanceMap=[];b.MULTITON_MSG="Facade instance for this Multiton key already constructed!";c.prototype.initializeView=function(){};c.getInstance=function(a){if(null==a)return null;null==c.instanceMap[a]&&(c.instanceMap[a]=new c(a));return c.instanceMap[a]};c.prototype.registerObserver=function(a,d){null!=this.observerMap[a]?this.observerMap[a].push(d):this.observerMap[a]=
[d]};c.prototype.notifyObservers=function(a){if(null!=this.observerMap[a.getName()]){for(var d=this.observerMap[a.getName()],b=[],c,e=0;e<d.length;e++)c=d[e],b.push(c);for(e=0;e<b.length;e++)c=b[e],c.notifyObserver(a)}};c.prototype.removeObserver=function(a,d){for(var b=this.observerMap[a],c=0;c<b.length;c++)if(!0==b[c].compareNotifyContext(d)){b.splice(c,1);break}0==b.length&&delete this.observerMap[a]};c.prototype.registerMediator=function(a){if(null==this.mediatorMap[a.getMediatorName()]){a.initializeNotifier(this.multitonKey);
this.mediatorMap[a.getMediatorName()]=a;var d=a.listNotificationInterests();if(0<d.length)for(var b=new i(a.handleNotification,a),c=0;c<d.length;c++)this.registerObserver(d[c],b);a.onRegister()}};c.prototype.retrieveMediator=function(a){return this.mediatorMap[a]};c.prototype.removeMediator=function(a){var d=this.mediatorMap[a];if(d){for(var b=d.listNotificationInterests(),c=0;c<b.length;c++)this.removeObserver(b[c],d);delete this.mediatorMap[a];d.onRemove()}return d};c.prototype.hasMediator=function(a){return null!=
this.mediatorMap[a]};c.removeView=function(a){delete c.instanceMap[a]};c.prototype.mediatorMap=null;c.prototype.observerMap=null;c.instanceMap=[];c.prototype.multitonKey=null;c.MULTITON_MSG="View instance for this Multiton key already constructed!";e.prototype.initializeModel=function(){};e.getInstance=function(a){if(null==a)return null;null==e.instanceMap[a]&&(e.instanceMap[a]=new e(a));return e.instanceMap[a]};e.prototype.registerProxy=function(a){a.initializeNotifier(this.multitonKey);this.proxyMap[a.getProxyName()]=
a;a.onRegister()};e.prototype.retrieveProxy=function(a){return this.proxyMap[a]};e.prototype.hasProxy=function(a){return null!=this.proxyMap[a]};e.prototype.removeProxy=function(a){var b=this.proxyMap[a];b&&(this.proxyMap[a]=null,b.onRemove());return b};e.removeModel=function(a){delete e.instanceMap[a]};e.prototype.proxyMap=null;e.instanceMap=[];e.MULTITON_MSG="Model instance for this Multiton key already constructed!";f.prototype.initializeController=function(){this.view=c.getInstance(this.multitonKey)};
f.getInstance=function(a){if(null==a)return null;null==this.instanceMap[a]&&(this.instanceMap[a]=new this(a));return this.instanceMap[a]};f.prototype.executeCommand=function(a){var b=this.commandMap[a.getName()];null!=b&&(b=new b,b.initializeNotifier(this.multitonKey),b.execute(a))};f.prototype.registerCommand=function(a,b){null==this.commandMap[a]&&this.view.registerObserver(a,new i(this.executeCommand,this));this.commandMap[a]=b};f.prototype.hasCommand=function(a){return null!=this.commandMap[a]};
f.prototype.removeCommand=function(a){this.hasCommand(a)&&(this.view.removeObserver(a,this),this.commandMap[a]=null)};f.removeController=function(a){delete this.instanceMap[a]};f.prototype.view=null;f.prototype.commandMap=null;f.prototype.multitonKey=null;f.instanceMap=[];f.MULTITON_MSG="controller key for this Multiton key already constructed";var o={global:function(){return this}(),extend:function(a,b){if("function"!==typeof a)throw new TypeError("#extend- child should be Function");if("function"!==
typeof b)throw new TypeError("#extend- parent should be Function");if(b!==a){var c=new Function;c.prototype=b.prototype;a.prototype=new c;return a.prototype.constructor=a}},decorate:function(a,b){for(var c in b)a[c]=b[c];return a}};n.puremvc={View:c,Model:e,Controller:f,SimpleCommand:m,MacroCommand:l,Facade:b,Mediator:g,Observer:i,Notification:j,Notifier:k,Proxy:h,define:function(a,b,c){a||(a={});var e=a.name,f=a.parent,g="function"===typeof f,h=a.scope||null;if("parent"in a&&!g)throw new TypeError("Class parent must be Function");
if(a.hasOwnProperty("constructor")){if(a=a.constructor,"function"!==typeof a)throw new TypeError("Class constructor must be Function");}else a=g?function(){f.apply(this,arguments)}:new Function;g&&o.extend(a,f);if(b)g=a.prototype,o.decorate(g,b),g.constructor=a;c&&o.decorate(a,c);if(e){if("string"!==typeof e)throw new TypeError("Class name must be primitive string");p(e,a,h)}return a},declare:p}}})(this);

(function(){function ti(){var a,b,c,e=this;b=null;this.getSDK=function(){return b};this.setSDK=function(c){var e;b=c;a();for(e in b)c=b[e],window[e]=c;return b};this.saveSDK=function(a,b){var e,d;if(null!=b&&null!=a&&""!==a){if(null==b.main)for(e in b)if(d=b[e],(null!=d?d.VERSION:void 0)===a){b.main=d;break}null==b.version&&(b.version=a);c.push(b);return this[a]=b}};c=[];this.getVersions=function(){return c.slice()};this.getVersion=function(a){return this[a]};this.setVersion=function(a){b=this.getVersion(a);
if(null==b)return null;this.setSDK(b);return b};this.revert=function(){return this.setSDK(c[0])};this.noConflict=function(){var a;a=this.getSDK();this.revert();return a};this.create=function(){var a;a=function(a,b){this.prototype=a.prototype;return a.apply(this,b)};return function(c){return new a(b.main,arguments)}}();a=function(){var a,c,d;if(null!=(c=window.com)&&null!=(d=c.akamai)&&d.amp)for(a in window)if(c=window[a],(c===window.AMP||c===window.AMPremier)&&null!=(null!=c?c.VERSION:void 0)&&""!==
c.VERSION&&c.VERSION!==(null!=b?b.version:void 0)&&null==e[c.VERSION]){a={};a.main=c;a.com=window.com;window.AMP&&(a.AMP=window.AMP);window.AMPPremier&&(a.AMPremier=window.AMPPremier);window.Utils&&(a.Utils=window.Utils);window.QueryString&&(a.QueryString=window.QueryString);window.QueryParams&&(a.QueryParams=window.QueryParams);e.saveSDK(c.VERSION,a);break}};a()}var ki;null==window.AKAMAI_MEDIA_PLAYER&&(window.AKAMAI_MEDIA_PLAYER=new ti);if(null==window.AKAMAI_MEDIA_PLAYER["AMP Premier v2.68.16"]){ki=
window.AKAMAI_MEDIA_PLAYER["AMP Premier v2.68.16"]={};var ui=function(a){return{}.hasOwnProperty(a)},f=function(a,b){function c(){this.constructor=a}for(var e in b)ui.call(b,e)&&(a[e]=b[e]);c.prototype=b.prototype;a.prototype=new c;a.__super__=b.prototype;return a},ve=function(a){for(var b=0,c=this.length;b<c;b++)if(b in this&&this[b]===a)return b;return-1},vi=function(a,b){return function(){return a.apply(b,arguments)}},vc=function(){};vc.construct=function(){var a,b,c;c=this.deserialize(window.location.search);
for(a in c)b=c[a],vc[a]=b;return!0};vc.serialize=function(a,b){var c,e,m,d;m=[];for(e in a)d=a[e],null!=d&&(c=b?b+"["+e+"]":e,m.push("object"===typeof d?this.serialize(d,c):encodeURIComponent(c)+"\x3d"+encodeURIComponent(d)));return m.join("\x26")};vc.deserialize=function(a){var b;null!=a&&(b={},a=a.replace(/^[^?]*\?/,""),a.replace(/([^?=&]+)(=([^&]*))?/g,function(a,e,m,d){b[decodeURIComponent(e)]=decodeURIComponent(d)}));return b};vc.constructed=vc.construct();var v=function(a,b){this.config=a;v.__super__.constructor.call(this,
b)};f(v,puremvc.Proxy);v.NAME="ModuleProxy";v.prototype.defaults=null;v.prototype.config=null;v.prototype.initializeNotifier=function(a){v.__super__.initializeNotifier.call(this,a);this.createData()};v.prototype.createData=function(){this.setData(this.config)};v.prototype.getDefaults=function(){return this.defaults||{}};v.prototype.setData=function(a){var b,c,e,m;null==a&&(a={});e={};m=this.getDefaults();for(c in m)b=m[c],b=c in a?a[c]:b,e[c]=b;v.__super__.setData.call(this,e);return a};v.prototype.destroy=
function(){};var M=function(a){this.viewComponent=a;M.__super__.constructor.call(this,this.getModuleName()+"-"+Date.now());this.dispatcher=new gb(this);this.logger=ha;this.moduleMap={}};f(M,puremvc.Facade);M.prototype.logger=null;M.prototype.config=null;M.prototype.moduleName=null;M.prototype.moduleMap=null;M.prototype.viewComponent=null;M.prototype.dispatcher=null;M.prototype.oninitialized=null;M.prototype.onerror=null;M.prototype.parentModule=null;M.prototype.initialize=function(a,b){this.config=
a;this.parentModule=b;this.loadModuleResources()};M.prototype.loadModuleResources=function(){var a,b,c,e;if(0<!(null!=(a=this.config.resources)&&a.length))this.resourcesLoaded();else{e=this.config.resources;b=0;for(c=e.length;b<c;b++)a=e[b],a.src=this.evaluatePaths(a.src),null!=a.debug&&(a.debug=this.evaluatePaths(a.debug));n.addResources(this.config.resources,this.resourcesLoaded.bind(this),this.resourcesError.bind(this))}};M.prototype.evaluatePaths=function(a){var b,c,e;if(null!=a)return b=this.config.paths||
(null!=(c=this.parentModule)?null!=(e=c.config)?e.paths:void 0:void 0),null!=b&&(a=a.replace(/#{paths\.[^}]*}/g,function(a){return Qb.eval(a,null,null,null,b)})),a};M.prototype.resourcesError=function(a){if("function"===typeof this.onerror)this.onerror(this)};M.prototype.resourcesLoaded=function(){this.createFramework();if("function"===typeof this.oninitialized)this.oninitialized(this)};M.prototype.createFramework=function(){this.createModel();this.createController();this.createView()};M.prototype.createModel=
function(){this.registerProxy(new v(this.config))};M.prototype.createView=function(){};M.prototype.createController=function(){this.registerCommand(d.DISPATCH_EVENT,we)};M.prototype.getModuleName=function(){return this.moduleName};M.prototype.getConfig=function(){return this.config};M.prototype.hasModule=function(a){return null!=this.moduleMap[a]};M.prototype.getModules=function(){var a,b,c,e;b={};e=this.moduleMap;for(a in e)c=e[a],b[a]=c.module;return b};M.prototype.registerModule=function(a){var b,
c;c=a.getModuleName();null!=a&&null==this.moduleMap[c]&&(b=new ac(a),this.moduleMap[c]=b,this.registerMediator(b),a.onRegister())};M.prototype.retrieveModule=function(a){return this.moduleMap[a].module};M.prototype.removeModule=function(a){var b;b=this.moduleMap[a];if(null!=b)return delete this.moduleMap[a],this.removeMediator(a),a=b.module,a.onRemove.call(a),a};M.prototype.listNotificationInterests=function(){return[]};M.prototype.listNotificationPublications=function(){return[]};M.prototype.getViewComponent=
function(){return this.viewComponent};M.prototype.setViewComponent=function(a){return this.viewComponent=a};M.prototype.onRegister=function(){};M.prototype.onRemove=function(){};M.prototype.destroy=function(){var a,b,c,e;if(null!=this.getModules())for(a in c=this.getModules(),c)b=c[a],this.removeModule(a),b.destroy();null!=(e=this.retrieveProxy(v.NAME))&&"function"===typeof e.destroy&&e.destroy();puremvc.Facade.removeCore(this.multitonKey);null!=this.viewComponent&&(this.viewComponent.innerHTML="",
this.viewComponent.className="");for(a in this){try{this[a]=null}catch(m){}delete this[a]}};M.prototype.addEventListener=function(a,b){this.dispatcher.addEventListener(a,b)};M.prototype.once=function(a,b){this.dispatcher.once(a,b)};M.prototype.logEvent=function(a){var b;!0!==/(timeupdate|progress)/.test(a.type)&&(b=this.getModuleName().toUpperCase(),a.dispatcher&&(b+=" "+a.dispatcher),this.logger.log("["+b+" EVENT] "+a.type,a))};M.prototype.dispatchEvent=function(a){this.logEvent(a);this.dispatcher.dispatchEvent(a)};
M.prototype.removeEventListener=function(a,b){this.dispatcher.removeEventListener(a,b)};var gb=function(a){this._target=null!=a?a:this;this._listenerMap={}};gb.prototype.addEventListener=function(a,b,c){null!=b&&null!=a&&(null==this._listenerMap[a]&&(this._listenerMap[a]=[]),-1===this._listenerMap[a].indexOf(b)&&this._listenerMap[a].push(b))};gb.prototype.once=function(a,b){b.once=!0;this.addEventListener(a,b)};gb.prototype.dispatchEvent=function(a){var b,c,e,m,d;c=this._listenerMap[a.type];b=this._target["on"+
a.type];a.target=this._target;e=null;null!=b&&b.apply(this._target,[a]);if(null!=c){m=0;for(d=c.length;m<d;m++)b=c[m],b.apply(this._target,[a]),!0===b.once&&(null==e&&(e=[]),e.push(b));if(0<(null!=e?e.length:void 0))for(a=0,m=e.length;a<m;a++)b=e[a],c.splice(c.indexOf(b),1)}};gb.prototype.removeEventListener=function(a,b,c){if(null!=b&&null!=a&&(a=this._listenerMap[a],null!=a&&(b=null!=a?a.indexOf(b):void 0,-1!==b)))return a.splice(b,1)};var hb=function(a){this.list=null!=a?a:[];hb.__super__.constructor.call(this);
this.handlers={change:this.changeHandler.bind(this)}};f(hb,gb);hb.prototype.onchange=null;hb.prototype.list=null;hb.prototype.changeHandler=function(a){this.dispatchEvent(a)};hb.prototype.add=function(a,b){null==b&&(b=!0);this.list.push(a);a.addEventListener("change",this.handlers.change);!0===b&&this.dispatchEvent({type:"addtrack"})};hb.prototype.set=function(a){var b,c,e,m;this.clear();if(null!=a&&0!==a.length){b=e=0;for(m=a.length;e<m;b=++e)c=a[b],this.add(c,!1),this[b]=null,delete this[b];this.dispatchEvent({type:"addtrack"})}};
hb.prototype.item=function(a){return this.list[a]};hb.prototype.remove=function(a,b){var c;null==b&&(b=!0);if(0<=ve.call(this,a))return c=this.list.splice(a,1),c.removeEventListener("change",this.handlers.change),!0===b&&this.dispatchEvent({type:"removetrack"}),c};hb.prototype.clear=function(){var a,b,c,e;if(0!==this.list.length){a=c=0;for(e=this.length;c<e;a=++c)b=this[a],this.remove(b,!1),this.list[a]=null,delete this.list[a];this.dispatchEvent({type:"removetrack"})}};hb.prototype.forEach=function(a,
b){var c,e,m,d,h;if(null!=a)for(h=this.list,c=m=0,d=h.length;m<d;c=++m)e=h[c],a.call(b,e,c,this.list)};hb.prototype.getTrackById=function(a){var b,c,e,m;m=this.list;c=0;for(e=m.length;c<e;c++)if(b=m[c],b.id===a)return b};hb.prototype.getLength=function(){return this.list.length};var li=function(a){a.className=bc.PREFIX+"player";a=Ya.create("install-flash",a);Ya.create(null,a,"p","To view this page ensure that Adobe Flash Player version 10.2.0 or greater is installed.");a=Ya.create(null,a,"a");a.href=
"http://www.adobe.com/go/getflashplayer";a=Ya.create(null,a,"img");a.src="//www.adobe.com/images/shared/download_buttons/get_flash_player.gif";a.alt="Get Adobe Flash player"};li.prototype.initialize=function(){};li.prototype.getModules=function(){return[]};var xe=function(){this.map={}};xe.prototype.map=null;xe.prototype.add=function(a,b){this.map[a]=b};xe.prototype.item=function(a){return this.map[a]};xe.prototype.remove=function(a){var b;b=this.map[a];null!=b&&(this.map[a]=null,delete this.map[a]);
return b};var Kf=function(a,b,c){this.key=a;this.token=b;this.expiration=c};Kf.prototype.key=null;Kf.prototype.token=null;Kf.prototype.expiration=null;var xd=function(){xd.__super__.constructor.call(this)};f(xd,xe);xd.prototype.add=function(a,b,c){var e,m;m=ha.enabled&&null!=a.debug?a.debug:a.src;e=this.item(m);!1===a.enabled||!0===(null!=e?e.loaded:void 0)?b():!1===(null!=e?e.loaded:void 0)?e.callbacks.push(b):(a.loaded=!1,a.callbacks=[b],b=this.resourceLoaded.bind(a),xd.__super__.add.call(this,
m,a),a.type===g.mimeTypes.js?g.loadScript(m,b,document.body,c):(a.type===g.mimeTypes.css&&g.loadStyleSheet(m),b()))};xd.prototype.resourceLoaded=function(){var a,b,c,e;this.loaded=!0;b=this.callbacks;this.callbacks=null;delete this.callbacks;c=0;for(e=b.length;c<e;c++)a=b[c],a()};xd.prototype.addResources=function(a,b,c){var e,m,d,h=this;0<!(null!=a&&a.length)?b():(m=0,d=function(){h.add(a[m],e,c)},e=function(){m++;m>=a.length?b():d()},d())};var ye=function(){ye.__super__.constructor.call(this)};
f(ye,puremvc.SimpleCommand);ye.prototype.execute=function(a){var b;this.sendNotification(d.READY,this.facade.config);a=null!=(b=this.facade.config)?b.media:void 0;null!=a&&setTimeout(this.sendNotification.bind(this,d.SET_MEDIA,a),0)};var K=function(){K.__super__.constructor.call(this)};f(K,puremvc.SimpleCommand);K.prototype.applicationState=null;K.prototype.media=null;K.prototype.player=null;K.prototype.playback=null;K.prototype.config=null;K.prototype.logger=null;K.prototype.bindings=null;K.prototype.params=
null;K.prototype.playerCore=null;K.prototype.security=null;K.prototype.tracks=null;K.prototype.initializeNotifier=function(a){var b;K.__super__.initializeNotifier.call(this,a);this.player=this.facade.player||this.facade;this.applicationState=this.player.appState;this.media=this.player.mediaProxy;this.config=this.player.configuration;this.logger=this.player.logger;this.bindings=this.player.bindings;this.params=this.player.params;this.playerCore=this.player.playerCore;this.security=this.player.security;
this.tracks=this.player.tracks;this.playback=(null!=(b=this.player.playerCore)?b.getActivePlaybackCore():void 0)||this.player.playback};var ze=function(){ze.__super__.constructor.call(this)};f(ze,K);ze.prototype.execute=function(a){var b;if(!this.applicationState.getSeeking()){switch(this.applicationState.getPlayState()){case P.ENDED:b=d.REPLAY;break;case P.PAUSED:case P.READY:b=d.PLAY;break;case P.PLAYING:b=d.PAUSE}this.applicationState.getWaiting()&&!0===this.facade.getMediaElement().paused&&(b=
d.PLAY);this.sendNotification(b,!0)}};var Lf=function(){Lf.__super__.constructor.call(this)};f(Lf,K);Lf.prototype.execute=function(a){a=this.applicationState.getDisplayState()===ia.FULL_SCREEN?ia.NORMAL:ia.FULL_SCREEN;this.sendNotification(d.CHANGE_DISPLAY_STATE,a)};var E=function(){E.__super__.constructor.call(this)};f(E,K);E.prototype.dispatchEvent=function(a,b){var c;"string"!==typeof a&&(b=null!=a.getBody()?a.getBody():{},a=a.getName());c=new V(a,b);this.sendNotification(d.DISPATCH_EVENT,c)};
E.prototype.dispatchEventAfterCommand=function(a,b){setTimeout(this.dispatchEvent.bind(this,a,b),0)};E.prototype.execute=function(a){this.dispatchEvent(a)};var Ae=function(){Ae.__super__.constructor.call(this)};f(Ae,E);Ae.prototype.execute=function(a){!0!==this.applicationState.getIsUserActive()&&(0===this.facade.getMediaElement().currentTime&&!1===this.media.started&&!1===this.applicationState.getSeeking()&&(this.media.started=!0,this.sendNotification(d.MEDIA_SEQUENCE_STARTED)),this.applicationState.getPlayState()===
P.PLAYING?Ae.__super__.execute.call(this,a):this.sendNotification(d.CHANGE_PLAY_STATE,P.PLAYING))};var yd=function(){yd.__super__.constructor.call(this)};f(yd,E);yd.prototype.execute=function(a){this.playback.pause();this.sendNotification(d.CHANGE_ACTIVE_STATE,ib.ACTIVE);yd.__super__.execute.call(this,a)};var Mf=function(){Mf.__super__.constructor.call(this)};f(Mf,K);Mf.prototype.execute=function(a){this.config.setAutoplay(a.getBody())};var Nf=function(){Nf.__super__.constructor.call(this)};f(Nf,
K);Nf.prototype.execute=function(a){this.config.setLoop(a.getBody())};var Of=function(){Of.__super__.constructor.call(this)};f(Of,K);Of.prototype.execute=function(a){this.playback.setVolume(a.getBody())};var Be=function(){Be.__super__.constructor.call(this)};f(Be,K);Be.prototype.execute=function(a){a=a.getBody();this.sendNotification(d.MEDIA_CHANGE,a);!1===this.applicationState.getLocked()&&!0===this.facade.getAutoplay()&&setTimeout(this.sendNotification.bind(this,d.PLAY),0)};var Ce=function(){Ce.__super__.constructor.call(this)};
f(Ce,K);Ce.prototype.execute=function(a){var b,c=this;b=a.getBody();0===b&&this.media.getType()===g.mimeTypes.m3u8&&(b=0.25);if(b!==this.playback.getCurrentTime())if(this.sendNotification(d.WAITING),this.sendNotification(d.DISPLAY_TIME,{currentTime:b,duration:this.playback.getDuration()}),this.sendNotification(d.CHANGE_ACTIVE_STATE,ib.ACTIVE),a=this.facade.getMediaElement(),this.applicationState.pausedBeforeSeek=a.paused,0===a.readyState)a.once("loadedmetadata",function(a){c.playback.setCurrentTime(b)});
else this.playback.setCurrentTime(b)};var De=function(){De.__super__.constructor.call(this)};f(De,E);De.prototype.execute=function(a){!0!==this.applicationState.getSeeking()&&(this.applicationState.getEnded()&&this.applicationState.setEnded(!1),0===this.facade.getMediaElement().currentTime&&(this.media.started=!1),this.applicationState.setSeeking(!0),De.__super__.execute.call(this,a))};var Pf=function(){Pf.__super__.constructor.call(this)};f(Pf,E);Pf.prototype.execute=function(a){var b=this;!0===
this.applicationState.getIsUserActive()?setTimeout(this.sendNotification.bind(this,a.getName(),a.getBody()),100):setTimeout(function(){var c;b.applicationState.setSeeking(!1);b.dispatchEvent(a);c=!0===b.applicationState.pausedBeforeSeek||!0===b.facade.retrieveProxy(r.NAME).getPaused()?P.PAUSED:P.PLAYING;"full-screen"===b.applicationState.displayState&&"ipad"===b.applicationState.device&&b.facade.retrieveProxy(r.NAME).getPaused()!==b.facade.getMediaElement().paused&&(c=!0===b.facade.getMediaElement().paused?
P.PAUSED:P.PLAYING);b.sendNotification(d.CHANGE_PLAY_STATE,c)},1)};var Qf=function(){Qf.__super__.constructor.call(this)};f(Qf,K);Qf.prototype.execute=function(a){"function"===typeof this.playback.replay?this.playback.replay():this.sendNotification(d.SET_MEDIA,this.media.getData())};var Rf=function(){Rf.__super__.constructor.call(this)};f(Rf,K);Rf.prototype.execute=function(a){this.applicationState.getEnded()||(this.playback.setEnabled(!1),this.playback.pause(),this.playback.seek(this.playback.getDuration()).then(this.sendNotification.bind(this,
d.ENDED)))};var Td=function(){Td.__super__.constructor.call(this)};f(Td,E);Td.prototype.execute=function(a){this.applicationState.getEnded()||(this.applicationState.setEnded(!0),Td.__super__.execute.call(this,a),!0===this.config.getLoop()?this.sendNotification(d.REPLAY):!1===this.applicationState.getHasPostContent()&&this.sendNotification(d.MEDIA_SEQUENCE_ENDED))};var Ee=function(){Ee.__super__.constructor.call(this)};f(Ee,K);Ee.prototype.execute=function(a){this.sendNotification(d.PLAY_REQUEST);
this.sendNotification(d.DISPLAY_TIME,{currentTime:0,duration:this.media.getDuration()});this.sendNotification(d.STARTED,a.getBody())};var Sf=function(){Sf.__super__.constructor.call(this)};f(Sf,K);Sf.prototype.execute=function(a){this.applicationState.setIsUserActive(a.getBody())};var Fe=function(){Fe.__super__.constructor.call(this)};f(Fe,E);Fe.prototype.execute=function(a){this.applicationState.setWaiting(!0);Fe.__super__.execute.call(this,a)};var Tf=function(){Tf.__super__.constructor.call(this)};
f(Tf,K);Tf.prototype.execute=function(a){this.playback.setMuted(a.getBody())};var Ge=function(){Ge.__super__.constructor.call(this)};f(Ge,E);Ge.prototype.execute=function(a){null==this.security.getSession()&&(this.security.setSession(Ya.createUID()),this.sendNotification(d.MEDIA_VALIDATED,this.media.getData()),Ge.__super__.execute.call(this,a))};var Uf=function(){Uf.__super__.constructor.call(this)};f(Uf,K);Uf.prototype.execute=function(a){this.playback.initialized=!0};var Vf=function(){Vf.__super__.constructor.call(this)};
f(Vf,K);Vf.prototype.execute=function(a){this.playerCore.registerPlaybackCore(a.getBody())};var Wf=function(){Wf.__super__.constructor.call(this)};f(Wf,K);Wf.prototype.execute=function(a){a=a.getBody();this.sendNotification(d.CHANGE_CONTENT,{from:this.media.getData(),to:a});this.media.updateData(a);this.sendNotification(d.UPDATE_DATA_BINDINGS);this.sendNotification(d.CHANGE_CONTENT,this.media.getData())};var He=function(){He.__super__.constructor.call(this)};f(He,E);He.prototype.execute=function(a){this.sendNotification(d.DISPLAY_TIME,
{currentTime:this.playback.getCurrentTime(),duration:this.playback.getDuration()});He.__super__.execute.call(this,a)};var Xf=function(){Xf.__super__.constructor.call(this)};f(Xf,K);Xf.prototype.execute=function(a){this.playback.setMuted(!this.playback.getMuted())};var Ie=function(){Ie.__super__.constructor.call(this)};f(Ie,E);Ie.prototype.execute=function(a){!0!==this.media.started&&(this.media.started=!0,Ie.__super__.execute.call(this,a),this.sendNotification(d.WAITING),this.sendNotification(d.MEDIA_SEQUENCE_STARTED))};
var Yf=function(){Yf.__super__.constructor.call(this)};f(Yf,K);Yf.prototype.execute=function(a){var b,c,e,m;c=this.player.getMediaElement();b=a.getBody();e=0;for(m=b.length;e<m;e++)a=b[e],c.addEventListener(a,this.playback.handlers[a])};var Zf=function(){Zf.__super__.constructor.call(this)};f(Zf,K);Zf.prototype.execute=function(a){var b,c,e,m;c=this.player.getMediaElement();b=a.getBody();e=0;for(m=b.length;e<m;e++)a=b[e],c.removeEventListener(a,this.playback.handlers[a])};var Je=function(){Je.__super__.constructor.call(this)};
f(Je,E);Je.prototype.execute=function(a){this.applicationState.setVolume(a.getBody());Je.__super__.execute.call(this,a)};var $f=function(){$f.__super__.constructor.call(this)};f($f,K);$f.prototype.execute=function(a){this.applicationState.setHasPostContent(a.getBody())};var Ud=function(){Ud.__super__.constructor.call(this)};f(Ud,E);Ud.prototype.execute=function(a){!0===this.config.getLoop()?(Ud.__super__.execute.call(this,a),this.sendNotification(d.REPLAY)):(this.sendNotification(d.CHANGE_PLAY_STATE,
P.ENDED),this.sendNotification(d.CHANGE_ACTIVE_STATE,ib.ACTIVE),Ud.__super__.execute.call(this,a))};var ag=function(){ag.__super__.constructor.call(this)};f(ag,K);ag.prototype.execute=function(a){a=a.getBody();this.sendNotification(a?d.ADD_APPLICATION_STATE:d.REMOVE_APPLICATION_STATE,"locked");this.applicationState.setLocked(a)};var bg=function(){bg.__super__.constructor.call(this)};f(bg,K);bg.prototype.execute=function(a){a="persistent"!==this.config.getControls().mode?a.getBody():ib.ACTIVE;this.applicationState.setActiveState(a)};
var Rb=function(){Rb.__super__.constructor.call(this);this.keyHandler=this.keypress.bind(this)};f(Rb,E);Rb.interval=null;Rb.keyHandler=null;Rb.prototype.keypress=function(a){switch(a.keyCode||a.which||a.charCode){case 32:this.facade.getEnded()||(this.facade.getPaused()?this.facade.play():this.facade.pause())}};Rb.prototype.execute=function(a){var b,c,e,m=this;a=a.getBody();this.applicationState.setDisplayState(a);"external"!==this.config.getFullscreen().mode&&(b=this.facade.getMediaElement(),e=this.facade.getViewComponent(),
c={},null!=e.webkitRequestFullScreen?(c.enter=e.webkitRequestFullScreen.bind(e),c.exit=null!=document.webkitExitFullscreen?document.webkitExitFullscreen.bind(document):document.webkitCancelFullScreen.bind(document),c.event="onwebkitfullscreenchange",c.element="webkitFullscreenElement",c.error="webkitfullscreenerror"):null!=e.requestFullscreen?(c.enter=e.requestFullscreen.bind(e),c.exit=null!=document.exitFullscreen?document.exitFullscreen.bind(document):document.cancelFullscreen.bind(document),c.event=
"onfullscreenchange",c.element="fullscreenElement",c.error="fullscreenerror"):null!=e.mozRequestFullScreen?(c.enter=e.mozRequestFullScreen.bind(e),c.exit=document.mozCancelFullScreen.bind(document),c.event="onmozfullscreenchange",c.element="mozFullscreenElement",c.error="mozfullscreenerror"):null!=e.msRequestFullscreen?(c.enter=e.msRequestFullscreen.bind(e),c.exit=document.msExitFullscreen.bind(document),c.event="MSFullscreenChange",c.element="msFullscreenElement",c.error="MSFullscreenError"):null!=
b.webkitEnterFullscreen&&(c.enter=b.webkitEnterFullscreen.bind(b),c.exit=b.webkitExitFullscreen.bind(b),c.event=null,c.error=null),a===ia.FULL_SCREEN?(null!=c.event?null!=e.mozRequestFullScreen?document[c.event]=function(a){if(!document.mozFullScreen)return m.sendNotification(d.CHANGE_DISPLAY_STATE,ia.NORMAL)}:e[c.event]=function(a){if(null==document[c.element])return m.sendNotification(d.CHANGE_DISPLAY_STATE,ia.NORMAL)}:(clearInterval(Rb.interval),Rb.interval=setInterval(function(){!0!==b.webkitDisplayingFullscreen&&
(m.sendNotification(d.CHANGE_DISPLAY_STATE,ia.NORMAL),clearInterval(Rb.interval))},100)),null!=c.error&&document.addEventListener(c.error,this.facade.logger.error.bind(this.facade.logger)),c.enter(),this.playback.keyHandler=this.keypress.bind(this),window.addEventListener("keypress",this.playback.keyHandler)):a===ia.NORMAL&&(window.removeEventListener("keypress",this.playback.keyHandler),this.playback.keyHandler=null,null!=c&&"function"===typeof c.exit&&c.exit(),b[c.event]=null,clearInterval(Rb.interval)));
this.sendNotifications(a)};Rb.prototype.sendNotifications=function(a){setTimeout(this.sendNotification.bind(this,d.FULL_SCREEN_CHANGE,a),100);this.dispatchEvent("fullscreenchange",a===ia.FULL_SCREEN)};var zd=function(){zd.__super__.constructor.call(this)};f(zd,E);zd.prototype.execute=function(a){var b;!0!==this.applicationState.getLocked()&&((b=a.getBody())&&!0!==this.playback.initialized&&this.sendNotification(d.INITIALIZED),!0===this.playback.initialized&&(this.media.getSrc()||this.media.getSource())&&
(this.playback.getStarted()||this.sendNotification(d.START),this.playback.play(),zd.__super__.execute.call(this,a)))};var cg=function(){cg.__super__.constructor.call(this)};f(cg,K);cg.prototype.execute=function(a){a=this.applicationState.getActiveState()===ib.ACTIVE?ib.INACTIVE:ib.ACTIVE;this.sendNotification(d.CHANGE_ACTIVE_STATE,a)};var cc=function(a){this.data=null!=a?a:{};cc.__super__.constructor.call(this)};f(cc,gb);cc.prototype.getKind=function(){return this.data.kind};cc.prototype.getLabel=
function(){return this.data.label};cc.prototype.getLanguage=function(){return this.data.language};cc.prototype.getId=function(){return this.data.id};cc.prototype.setEnabled=function(a){a!==this.data.enabled&&(this.data.enabled=a,this.changeEnabled(a),this.dispatchEvent("change"))};cc.prototype.changeEnabled=function(a){};cc.prototype.getEnabled=function(){return this.data.enabled};var ea=function(){};ea.createTextContent=function(a,b){return/[\&<>]/.test(b)?a.createCDATASection(b):a.createTextNode(b)};
ea.updateTextContent=function(a,b){var c;c=ea.createTextContent(a.ownerDocument,b);a.removeChild(a.childNodes[0]);a.appendChild(c);return a};ea.serialize=function(a){var b;if(null!=a){if("string"===typeof a)return a;try{return b=new XMLSerializer,b.serializeToString(a)}catch(c){try{return document.implementation.createLSSerializer(),xmlSerializer.writeToString(a)}catch(e){try{return a.xml}catch(m){}}}}};ea.parse=function(a){var b;window.DOMParser?(b=new DOMParser,b=b.parseFromString(a,"text/xml")):
(b=new ActiveXObject("Microsoft.XMLDOM"),b.async=!1,b.loadXML(a));return b};var wc=function(){wc.__super__.constructor.call(this,null,{});this.data.audioTracks=new hb;this.data.videoTracks=new hb;this.data.textTracks=new hb};f(wc,puremvc.Proxy);wc.NAME="TracksProxy";wc.prototype.clear=function(){this.data.audioTracks.clear();this.data.videoTracks.clear();this.data.textTracks.clear()};wc.prototype.getAudioTracks=function(){return this.data.audioTracks};wc.prototype.getVideoTracks=function(){return this.data.videoTracks};
wc.prototype.getTextTracks=function(){return this.data.textTracks};var t=function(a){t.__super__.constructor.call(this,a);this.initTime=Date.now()};f(t,M);t.prototype.moduleName="amp";t.prototype.playerType=null;t.prototype.hidden=!1;t.prototype.l10n=null;t.prototype.appState=null;t.prototype.mediaProxy=null;t.prototype.bindings=null;t.prototype.configuration=null;t.prototype.params=null;t.prototype.security=null;t.prototype.createModel=function(){this.appState=new C;this.registerProxy(this.appState);
this.bindings=new Ha;this.registerProxy(this.bindings);this.security=new ua;this.registerProxy(this.security);this.mediaProxy=new s;this.registerProxy(this.mediaProxy);this.params=new Qc(this.config.params);this.registerProxy(this.params);this.configuration=new ca(this.config);this.registerProxy(this.configuration)};t.prototype.setViewComponent=function(a){a.amp=this;return t.__super__.setViewComponent.call(this,a)};t.prototype.getPlayerType=function(){return this.playerType};t.prototype.getVersion=
function(){return n.getVersion()};t.prototype.createPlugins=function(){this.sendNotification(xb.REGISTER_PLUGINS,this.config)};t.prototype.createMediaElement=function(){return null};t.prototype.createFramework=function(){t.__super__.createFramework.call(this);this.setMediaElement(this.createMediaElement());this.createPlugins()};t.prototype.getLanguage=function(){return this.retrieveProxy(qa.NAME).getLanguage()};t.prototype.setLanguage=function(a){this.retrieveProxy(qa.NAME).setLanguage(a);return a};
t.prototype.getMediaElement=function(){return this.appState.getMediaElement()};t.prototype.setMediaElement=function(a){this.appState.setMediaElement(a);null==a.once&&(a.once=function(a,c){var e;e=g.createUID();this[e]=function(a,b,c,e){this.removeEventListener(b,this[a]);delete this[a];c(e)}.bind(this,e,a,c);this.addEventListener(a,this[e])},a.once=a.once.bind(a));return a};t.prototype.getContainer=function(){return this.getViewComponent()};t.prototype.getAudioTracks=function(){};t.prototype.evaluateBinding=
function(a){};t.prototype.canPlayType=function(a){};t.prototype.load=function(){};t.prototype.play=function(){};t.prototype.replay=function(){};t.prototype.pause=function(){};t.prototype.end=function(){};t.prototype.setParams=function(a){};t.prototype.getParams=function(){};t.prototype.setAutoplay=function(a){};t.prototype.getAutoplay=function(){};t.prototype.setLoop=function(a){};t.prototype.getLoop=function(){};t.prototype.setMuted=function(a){};t.prototype.getMuted=function(){};t.prototype.mute=
function(){return this.setMuted(!0)};t.prototype.unmute=function(){return this.setMuted(!1)};t.prototype.setMedia=function(a){var b,c,e;b=a.src;a=null!=(c=a.source)?null!=(e=c[0])?e.src:void 0:void 0;if(!(null!=b&&""!==b||null!=a&&""!==a))throw Error("[AMP ERROR] Invalid Media");};t.prototype.getMedia=function(){};t.prototype.setCurrentTime=function(a){};t.prototype.getCurrentTime=function(){};t.prototype.getCurrentTimeUTC=function(){};t.prototype.getDuration=function(){};t.prototype.setSrc=function(a){};
t.prototype.getSrc=function(){};t.prototype.setSource=function(a){};t.prototype.getSource=function(){};t.prototype.setVolume=function(a){};t.prototype.getVolume=function(){};t.prototype.getSeeking=function(){};t.prototype.getPaused=function(){};t.prototype.getEnded=function(){};t.prototype.setDisplayState=function(a){};t.prototype.getDisplayState=function(){};t.prototype.getError=function(){};t.prototype.enterFullScreen=function(){};t.prototype.exitFullScreen=function(){};t.prototype.setHidden=function(a){var b;
a!==this.appState.getHidden()&&(this.appState.setHidden(a),b=this.viewComponent.style,!0===a?(this.hiddenData={width:b.width,height:b.height,paused:this.getPaused()},b.width=b.height="0px",!1===this.hiddenData.paused&&this.pause()):(b.width=this.hiddenData.width,b.height=this.hiddenData.height,!1===this.hiddenData.paused&&this.play(),this.hiddenData=null))};t.prototype.getHidden=function(){return this.appState.getHidden()};t.prototype.recordContentChange=function(a){};t.prototype.setPlaybackRate=
function(){};t.prototype.getPlaybackRate=function(){};t.prototype.getPlaystate=function(){};t.prototype.authorize=function(a){return this.security.authorize(a)};var A=function(a){A.__super__.constructor.call(this,a)};f(A,t);A.prototype.playerType="html";A.prototype.playerCore=null;A.prototype.tracks=null;A.prototype.mediator=null;A.prototype.createMediaElement=function(){var a;this.mediator=new dc("html5","video");this.sendNotification(d.PLAYBACK_CORE_CHANGE,this.mediator);a=this.mediator.getViewComponent();
null==a.dataset&&(a.dataset={});return a};A.prototype.createModel=function(){var a;A.__super__.createModel.call(this);this.registerProxy(new qa(this.config));a=new xa;this.registerProxy(a);this.playerCore=new ba(a,this.config.getPlaybackOrder);this.registerProxy(this.playerCore);this.tracks=new wc;this.registerProxy(this.tracks);this.appState.setRenderMode(qi.HTML);this.bindings.initialize()};A.prototype.createView=function(){this.registerMediator(new Va("html5",this.getViewComponent()));this.registerMediator(new nb);
this.registerMediator(new Rc);this.registerMediator(new ec)};A.prototype.createController=function(){A.__super__.createController.call(this);this.registerCommand(xb.PLUGINS_INITIALIZED,ye);this.registerCommand(d.PLAY,zd);this.registerCommand(d.PLAYING,Ae);this.registerCommand(d.PAUSE,yd);this.registerCommand(d.CHANGE_PLAY_STATE,Vd);this.registerCommand(d.TOGGLE_FULL_SCREEN,Lf);this.registerCommand(d.CHANGE_DISPLAY_STATE,Rb);this.registerCommand(d.TOGGLE_ACTIVE,cg);this.registerCommand(d.CHANGE_ACTIVE_STATE,
bg);this.registerCommand(d.SET_MEDIA,Ke);this.registerCommand(d.CHANGE_MEDIA,Le);this.registerCommand(d.MEDIA_VALIDATED,Be);this.registerCommand(d.MEDIA_CHANGE,Wd);this.registerCommand(d.UPDATE_DATA_BINDINGS,Xd);this.registerCommand(d.START,Ee);this.registerCommand(d.SEEK,Ce);this.registerCommand(d.SEEKING,De);this.registerCommand(d.SEEKED,Pf);this.registerCommand(d.CHANGE_VOLUME,Of);this.registerCommand(d.CHANGE_MUTED,Tf);this.registerCommand(d.CHANGE_AUTOPLAY,Mf);this.registerCommand(d.CHANGE_LOOP,
Nf);this.registerCommand(d.END,Rf);this.registerCommand(d.ENDED,Td);this.registerCommand(d.REPLAY,Qf);this.registerCommand(d.ERROR,Yd);this.registerCommand(d.READY,Me);this.registerCommand(d.WAITING,Fe);this.registerCommand(d.CHANGE_DURATION,Ne);this.registerCommand(d.CHANGE_PARAMS,Oe);this.registerCommand(d.IS_USER_ACTIVE,Sf);this.registerCommand(wa.AUTHORIZED,Ge);this.registerCommand(d.INITIALIZED,Uf);this.registerCommand(d.REGISTER_PLAYBACK_CORE,Vf);this.registerCommand(X.TOGGLE_PLAY_PAUSE,ze);
this.registerCommand(X.SEEK,Ce);this.registerCommand(d.CHANGE_PLAYBACK_TARGET,Pe);this.registerCommand(d.PLAYBACK_TARGET_CHANGE,Zd);this.registerCommand(d.RECORD_CONTENT_CHANGE,Wf);this.registerCommand(d.TIME_UPDATE,He);this.registerCommand(d.TOGGLE_MUTED,Xf);this.registerCommand(d.VOLUME_CHANGE,Je);this.registerCommand(d.PLAY_REQUEST,Ie);this.registerCommand(d.HAS_POST_CONTENT,$f);this.registerCommand(d.LOCK,ag);this.registerCommand(d.PLAY_STATE_CHANGE,E);this.registerCommand(d.PROGRESS,E);this.registerCommand(d.CAN_PLAY,
E);this.registerCommand(d.CAN_PLAY_THROUGH,E);this.registerCommand(d.LOAD_START,E);this.registerCommand(d.STARTED,E);this.registerCommand(d.LOADED_METADATA,E);this.registerCommand(d.DURATION_CHANGE,E);this.registerCommand(d.MEDIUM_CHANGE,E);this.registerCommand(d.TEMPORAL_TYPE_CHANGE,E);this.registerCommand(d.LANGUAGE_CHANGE,E);this.registerCommand(d.PLAYBACK_TARGET_AVAILABLE,E);this.registerCommand(wa.AUTHORIZE,E);this.registerCommand(wa.AUTHORIZATION_FAILED,E);this.registerCommand(d.FAIL_OVER_ATTEMPT,
E);this.registerCommand(d.IS_LIVE,E);this.registerCommand(d.TIMED_METADATA,E);this.registerCommand(d.PAUSED,E);this.registerCommand(d.STALLED,E);this.registerCommand(d.BITRATE_CHANGE,E);this.registerCommand(d.BITRATE_CHANGING,E);this.registerCommand(d.BITRATE_LEVELS_LOADED,E);this.registerCommand(d.MUTED,E);this.registerCommand(d.RESUME,E);this.registerCommand(d.MEDIA_SEQUENCE_STARTED,E);this.registerCommand(d.MEDIA_SEQUENCE_ENDED,Ud);this.registerCommand(d.ENABLE_VIDEO_EVENTS,Yf);this.registerCommand(d.DISABLE_VIDEO_EVENTS,
Zf)};A.prototype.setMediaElement=function(a){var b;b=this.getMediaElement();null!=b&&b.removeEventListener("webkitpresentationmodechanged",this.presentationModeChanged);A.__super__.setMediaElement.call(this,a);a.playsInline=this.configuration.getPlaysInLine();a.addEventListener("webkitpresentationmodechanged",this.presentationModeChanged);return a};A.prototype.presentationModeChanged=function(a){"inline"===a.target.webkitPresentationMode&&(a.target.controls=!1)};A.prototype.evaluateBinding=function(a){return this.bindings.evaluateBinding(a)};
A.prototype.recordContentChange=function(a){this.sendNotification(d.RECORD_CONTENT_CHANGE,a)};A.prototype.canPlayType=function(a){return this.retrieveProxy(r.NAME).canPlayType(a)};A.prototype.getAudioTracks=function(){return this.retrieveProxy(wc.NAME).getAudioTracks()};A.prototype.load=function(){this.sendNotification(d.LOAD)};A.prototype.play=function(){this.sendNotification(d.PLAY,!0)};A.prototype.replay=function(){this.sendNotification(d.REPLAY)};A.prototype.pause=function(){this.sendNotification(d.PAUSE)};
A.prototype.end=function(){this.sendNotification(d.END)};A.prototype.setParams=function(a){this.sendNotification(d.CHANGE_PARAMS,a);return a};A.prototype.getParams=function(){return this.params.getData()};A.prototype.setAutoplay=function(a){this.sendNotification(d.CHANGE_AUTOPLAY,a);return a};A.prototype.getAutoplay=function(){var a;return this.retrieveProxy(r.NAME).initialized&&(this.configuration.getAutoplay()||!0===(null!=(a=this.getMedia())?a.autoplay:void 0))};A.prototype.setLoop=function(a){this.sendNotification(d.CHANGE_LOOP,
a);return a};A.prototype.getLoop=function(){return this.configuration.getLoop()};A.prototype.setMuted=function(a){this.sendNotification(d.CHANGE_MUTED,a);return a};A.prototype.getMuted=function(){return this.retrieveProxy(r.NAME).getMuted()};A.prototype.setMedia=function(a){A.__super__.setMedia.call(this,a);this.sendNotification(d.SET_MEDIA,a);return a};A.prototype.getMedia=function(){return this.mediaProxy.getData()};A.prototype.setCurrentTime=function(a){this.sendNotification(d.SEEK,a);return a};
A.prototype.getCurrentTime=function(){return this.retrieveProxy(r.NAME).getCurrentTime()};A.prototype.getDuration=function(){return this.mediaProxy.getDuration()};A.prototype.setSrc=function(a){this.sendNotification(d.SET_MEDIA,{src:a});return a};A.prototype.getSrc=function(){return this.mediaProxy.getSrc()};A.prototype.setSource=function(a){this.sendNotification(d.SET_MEDIA,{source:a});return a};A.prototype.getSource=function(){return this.mediaProxy.getSource()};A.prototype.setVolume=function(a){this.sendNotification(d.CHANGE_VOLUME,
a);return a};A.prototype.getVolume=function(){return this.retrieveProxy(r.NAME).getVolume()};A.prototype.getSeeking=function(){return this.retrieveProxy(r.NAME).getSeeking()};A.prototype.getPaused=function(){return this.retrieveProxy(r.NAME).getPaused()};A.prototype.getEnded=function(){return this.appState.getEnded()};A.prototype.getError=function(){return this.getMediaElement().error};A.prototype.setDisplayState=function(a){this.sendNotification(d.CHANGE_DISPLAY_STATE,a)};A.prototype.getDisplayState=
function(a){return this.appState.getDisplayState()};A.prototype.enterFullScreen=function(){this.sendNotification(d.CHANGE_DISPLAY_STATE,ia.FULL_SCREEN)};A.prototype.exitFullScreen=function(){this.sendNotification(d.CHANGE_DISPLAY_STATE,ia.NORMAL)};A.prototype.setPlaybackRate=function(a){this.getMediaElement().playbackRate=a};A.prototype.getPlaybackRate=function(){return this.getMediaElement().playbackRate};A.prototype.getQualityLevels=function(){return this.retrieveProxy(r.NAME).getQualityLevels()};
A.prototype.setQuality=function(a){return this.retrieveProxy(r.NAME).setQuality(a)};A.prototype.getQuality=function(){return this.retrieveProxy(r.NAME).getQuality()};A.prototype.getPlayState=function(){return this.appState.getPlayState()};A.prototype.destroy=function(){var a,b;null!=(a=this.retrieveProxy(ba.NAME))&&null!=(b=a.activePlaybackCore)&&"function"===typeof b.destroy&&b.destroy();A.__super__.destroy.call(this)};var q={READY:"jsApiReady",RESET:"mediaPlayerReset",LOADING:"mediaPlayerLoading",
PLAYER_ERROR:"mediaPlayerError",MEDIA_ERROR:"mediaError",ERROR_STREAM_NOT_FOUND:"mediaPlayerErrorStreamNotFound",CAPABILITY_CHANGE:"mediaPlayerCapabilityChange",PLAYBACK_OPEN:"mediaPlayerPlaybackOpen",PLAYBACK_CLOSE:"mediaPlayerPlaybackClose",PLAYING:"mediaPlayerPlaying",ENDED:"mediaPlayerPlaybackClose",MEDIA_SEQUENCE_ENDED:"mediaPlayerPlaybackSequenceComplete",PAUSED:"mediaPlayerPaused",BUFFERING:"mediaPlayerBuffering",DURATION_CHANGE:"mediaPlayerDurationChange",TIME_UPDATE:"mediaPlayerPlayheadUpdate",
SEEKING_CHANGE:"mediaPlayerSeekingChange",ERROR:"error",VOLUME_CHANGE:"mediaPlayerVolumeChanged",PLAY_STATE_CHANGE:"mediaPlayerPlayStateChange",STATE_CHANGE:"mediaPlayerStateChange",CAPTION_DATA_CHANGE:"mediaPlayerCaptiondataChange",FAIL_OVER_ATTEMPT:"mediaPlayerFailoverAttempt",ELEMENT_EVENT:"mediaPlayerElementEvent",PLAY:"mediaPlayerResumeOrPausePlayback",APPLICATION_STATE_CHANGE:"mediaPlayerApplicationStateChange",INITIALIZED:"mediaPlayerInitialized",FULLSCREEN_CHANGE:"mediaPlayerFullscreenChange",
AUTHORIZE:"mediaPlayerAuthenticate",CAPTIONING_REQUEST:"mediaPlayerCaptioningRequest",CAPTION_LANG_CHANGE:"mediaPlayerCaptionLangChange",RECOMMENDATIONS_LOADED:"mediaPlayerRecommendationsLoaded",RECOMMENDATION_SELECTED:"mediaPlayerRecommendationSelected",SHARE:"mediaPlayerShare",SHARE_REQUEST:"mediaPlayerShareRequest",AUTO_ADVANCE:"mediaPlayerAutoAdvance",CREATE_FLASH_VARS:"createFlashVars",CREATE_XML:"createXML",FLASH_CREATED:"flashCreated",PLAY_REQUEST:"mediaPlayerPlaybackSequenceInitiated",LOAD_FEED:"mediaPlayerDataFeedRequested",
FEED_UPDATED:"mediaPlayerDataFeedUpdated",FEED_LOADED:"mediaPlayerFeedLoaded",TIMED_METADATA:"mediaPlayerSendCuePoint",MEDIA_PLAYER_ID3_UPDATED:"mediaPlayerID3Updated"},r=function(){r.__super__.constructor.call(this,r.NAME);this.data={core:null,muted:!1,started:!1,volume:1,currentTime:0,duration:0,src:null,ended:!1,paused:!1,seeking:!1,loading:!1,waiting:!1};"desktop"===g.getDevice()&&(this.initialized=!0);this.handlers={timeupdate:this.ontimeupdate.bind(this),durationchange:this.ondurationchange.bind(this),
play:this.onplay.bind(this),playing:this.onplaying.bind(this),pause:this.onpause.bind(this),loadeddata:this.onloadeddata.bind(this),waiting:this.onwaiting.bind(this),seeking:this.onseeking.bind(this),seeked:this.onseeked.bind(this),ended:this.onended.bind(this),progress:this.onprogress.bind(this),error:this.onerror.bind(this),loadstart:this.onloadstart.bind(this),canplay:this.oncanplay.bind(this),canplaythrough:this.oncanplaythrough.bind(this),loadedmetadata:this.onloadedmetadata.bind(this),stalled:this.onstalled.bind(this)};
this.resume={event:-1===g.getIEVersion()?"loadedmetadata":"canplaythrough",listener:this.resumestart.bind(this)};this.textTrackHandlers={addtrack:this.onaddtrack.bind(this)}};f(r,puremvc.Proxy);r.NAME="PlaybackProxy";r.prototype.data=null;r.prototype.initialized=!1;r.prototype.enabled=null;r.prototype.handlers=null;r.prototype.resume=null;r.prototype.playWhenLoaded=!1;r.prototype.metadataloaded=!1;r.prototype.activeCuesIndex=0;r.prototype.id3CueType=null;r.prototype.getEnabled=function(){return this.enabled};
r.prototype.setEnabled=function(a){if(a!==this.enabled)return this.enabled=a,!0===this.enabled?this.load():this.applyHandlers(!1),a};r.prototype.applyHandlers=function(a){var b,c,e,m;null==a&&(a=!0);e=this.getMediaElement();a=a?"addEventListener":"removeEventListener";m=this.handlers;for(c in m)b=m[c],e[a](c,b)};r.prototype.resumestart=function(a){var b=this;this.getMediaElement();this.handlers.durationchange(a);0<this.data.currentTime?setTimeout(function(){b.seek(b.data.currentTime).then(b.resumecomplete.bind(b))},
50):this.resumecomplete()};r.prototype.resumecomplete=function(){this.data.loading=!1;this.applyHandlers(!0);!0===this.playWhenLoaded&&setTimeout(this.play.bind(this),1)};r.prototype.onaddtrack=function(a){var b=this;a=a.track;"metadata"===a.kind&&(a.mode="hidden",this.id3CueType=window.VTTCue?"VTTCue":"textTrackCue",a.addEventListener("cuechange",function(a){var e,m,gd,h,f,z;if(null!=(e=a.target)&&null!=(h=e.activeCues)&&h.length)e=a.target.activeCues[b.activeCuesIndex++],b.activeCuesIndex===a.target.activeCues.length&&
(b.activeCuesIndex=0),null==e.value&&null!=e.text&&(e.value=JSON.parse(e.text)),m={startTime:e.startTime,endTime:e.endTime,key:null!=(gd=e.value)?gd.key:void 0,info:null!=(f=e.value)?f.info:void 0,data:e.value};else if("hls"===b.playbackCoreName&&"VTTCue"===b.id3CueType)for(f=a.target.cues,a=0,gd=f.length;a<gd&&!(e=f[a],Math.round(e.startTime)<=(z=Math.round(b.getMediaElement().currentTime))&&z<=Math.ceil(e.endTime)&&(m=JSON.parse(e.text)));a++);if(null!=m)return b.sendNotification(d.TIMED_METADATA,
m)}))};r.prototype.ontimeupdate=function(a){var b;if(!0!==(null!=(b=this.facade.ads)?b.getInProgress():void 0)&&(this.data.currentTime=a.target.currentTime,this.sendNotification(d.TIME_UPDATE,this.data.currentTime),!0===this.getMediaElement().ended&&!1===this.facade.appState.getEnded()))this.onended()};r.prototype.ondurationchange=function(a){a=a.target.duration;a===this.data.duration||0===a||isNaN(a)||(this.data.duration=a,/Android [4-7]/.test(navigator.userAgent)&&-1!==this.getMediaElement().src.indexOf(".m3u8")&&
Infinity===a||this.sendNotification(d.CHANGE_DURATION,a))};r.prototype.onplay=function(a){this.data.paused=!1};r.prototype.onplaying=function(a){this.data.paused=!1;this.data.seeking=!1;this.data.waiting=!1;this.sendNotification(d.PLAYING)};r.prototype.onpause=function(a){!0===this.getMediaElement().ended||!0===this.data.waiting&&"hls"===this.playbackCoreName||(this.data.paused=!0,0<a.target.readyState&&(this.sendNotification(d.PAUSED),this.sendNotification(d.CHANGE_PLAY_STATE,P.PAUSED)))};r.prototype.onloadeddata=
function(a){this.sendNotification(d.LOADED_DATA)};r.prototype.onwaiting=function(a){this.data.waiting=!0;this.sendNotification(d.WAITING)};r.prototype.onstalled=function(a){this.sendNotification(d.STALLED)};r.prototype.onseeking=function(a){this.getMediaElement().removeEventListener("timeupdate",this.handlers.timeupdate);this.data.seeking=!0;this.sendNotification(d.SEEKING)};r.prototype.onseeked=function(a){this.data.seeking=!1;this.sendNotification(d.SEEKED);this.getMediaElement().addEventListener("timeupdate",
this.handlers.timeupdate)};r.prototype.onended=function(a){this.data.ended=!0;this.sendNotification(d.ENDED)};r.prototype.onprogress=function(a){var b,c;try{c=this.getMediaElement(),b=c.buffered,this.sendNotification(d.PROGRESS,b.end(b.length-1)/c.duration)}catch(e){}};r.prototype.onerror=function(a){this.sendNotification(d.ERROR,this.getMediaElement().error)};r.prototype.onloadstart=function(a){this.sendNotification(d.LOAD_START)};r.prototype.oncanplay=function(a){this.sendNotification(d.CAN_PLAY)};
r.prototype.oncanplaythrough=function(a){this.sendNotification(d.CAN_PLAY_THROUGH);this.sendNotification(d.PROGRESS,this.getDuration())};r.prototype.onloadedmetadata=function(a){this.metadataloaded=!0;this.createTracks();this.sendNotification(d.ENABLE_FULL_SCREEN);this.sendNotification(d.LOADED_METADATA);this.applyTextTrackHandlers(!0)};r.prototype.applyTextTrackHandlers=function(a){var b;a=!0===a?"addEventListener":"removeEventListener";if(null!=(b=this.getMediaElement().textTracks))b[a]("addtrack",
this.textTrackHandlers.addtrack)};r.prototype.createTracks=function(){var a,b,c,e,m,d,h;a=this.getMediaElement().audioTracks;m=this.facade.retrieveProxy(wc.NAME).getAudioTracks();if(null!=a)for(b=a.length||0,c=d=0,h=a.length;d<h;c=++d)e=a[c],m.add(new cc(e),c+1===b)};r.prototype.reset=function(){this.data.currentTime=0;this.data.duration=0;this.data.src=null;this.data.ended=!1;this.data.paused=!1;this.data.seeking=!1;this.data.started=!1;this.data.loading=!1;this.applyTextTrackHandlers(!1)};r.prototype.getStarted=
function(){return this.data.started};r.prototype.getMediaElement=function(){return this.facade.getMediaElement()};r.prototype.canPlayTemporalType=function(a){return"dvr"!==a};r.prototype.canPlayType=function(a){var b;b=document.createElement("video").canPlayType(a)||"";(/Android (4\.[1-9]|[5-6])/.test(navigator.userAgent)||/Silk\/3/.test(navigator.userAgent))&&a===g.mimeTypes.m3u8&&(b="maybe");"probably"===b&&/video\/f4m|x-flv/.test(a)&&/UCBrowser/.test(navigator.userAgent)&&(b="");return b};r.prototype.getPaused=
function(){return this.data.paused};r.prototype.getSeeking=function(){return this.data.seeking};r.prototype.getCurrentTime=function(){return this.data.currentTime};r.prototype.setCurrentTime=function(a){if(a!==this.data.currentTime)return this.data.currentTime=a,this.getStarted()&&this.seek(a),a};r.prototype.seek=function(a){var b=this;null==a&&(a=this.data.currentTime);return new Promise(function(c,e){var m,d,h;try{h=b.getMediaElement(),h.once("seeked",function(){setTimeout(c,10)}),h.currentTime=
a,d=navigator.userAgent,/Android.*Chrome/.test(d)&&(m=setInterval(function(){Math.round(h.currentTime)===Math.round(a)&&(clearInterval(m),h.dispatchEvent(new CustomEvent("seeked")))},10))}catch(f){e(f)}})};r.prototype.getVolume=function(){return this.getMediaElement().volume};r.prototype.setVolume=function(a){this.getMuted()&&0<a?this.setMuted(!1):this.getMuted()||0!==a||this.setMuted(!0);0<=a&&1>=a&&a!==this.getMediaElement().volume&&this.sendNotification(d.VOLUME_CHANGE,this.getMediaElement().volume=
a);return a};r.prototype.getMuted=function(){return this.data.muted};r.prototype.setMuted=function(a){var b;if(this.data.muted!==a)return this.data.muted=a,this.getMediaElement().muted=a,!0===this.data.muted?(this.data.volume=this.getVolume(),b=0):b=this.data.volume,this.sendNotification(d.CHANGE_VOLUME,b),this.sendNotification(d.MUTED,this.data.muted),a};r.prototype.getDuration=function(){return this.data.duration};r.prototype.play=function(){if(!0!==this.data.started){if(this.data.started=!0,this.setEnabled(!0),
this.playWhenLoaded=!0,!1===this.metadataloaded)return}else if(!0===this.data.loading){this.playWhenLoaded=!0;return}this.getPaused()&&this.sendNotification(d.RESUME);this.getMediaElement().play()};r.prototype.pause=function(){this.data.paused=!0;this.getMediaElement().pause()};r.prototype.getSrc=function(){return this.facade.mediaProxy.getSrc()};r.prototype.load=function(){var a;this.sendNotification(d.WAITING);this.data.loading=!0;this.metadataloaded=this.playWhenLoaded=!1;a=this.getMediaElement();
a.once(this.resume.event,this.resume.listener);a.addEventListener("loadedmetadata",this.handlers.loadedmetadata);a.addEventListener("durationchange",this.handlers.durationchange);a.addEventListener("canplaythrough",this.handlers.canplaythrough);a.addEventListener("error",this.handlers.error);this.applySrc()};r.prototype.applySrc=function(){var a,b,c;b=this.getSrc();null!=b&&""!==b||this.sendNotification(d.ERROR,"The value of src is not supported: "+value);a=this.getMediaElement();a.src=b;g.isIPad()&&
8>(null!=(c=g.getIOSversion())?c[0]:void 0)?setTimeout(a.load.bind(a),100):a.load()};r.prototype.setQuality=function(a){};r.prototype.getQuality=function(){};r.prototype.getQualityLevels=function(){return[]};r.prototype.destroy=function(){var a,b,c,e;a=this.getMediaElement();e=this.handlers;for(b in e)c=e[b],a.removeEventListener(b,c);a.removeEventListener(this.resume.event,this.resume.listener)};var dg=function(){dg.__super__.constructor.call(this)};f(dg,K);dg.prototype.execute=function(a){this.player.started=
!0;this.sendNotification(d.STARTED,a.getBody());this.sendNotification(d.PLAY,a.getBody())};var Pe=function(){Pe.__super__.constructor.call(this)};f(Pe,K);Pe.prototype.execute=function(a){a=a.getBody();this.applicationState.setPlaybackTarget(a);"amp"!==a?this.applicationState.getPlayState()!==P.PAUSED&&this.facade.pause():this.applicationState.getPlayState()===P.PLAYING&&this.facade.play()};var fc=function(a,b){this.player=a;this.config=b;fc.__super__.constructor.call(this,this.constructor.NAME);this.proxy=
new qa(this.config);this.player.registerProxy(this.proxy)};f(fc,puremvc.Mediator);fc.prototype.player=null;fc.prototype.config=null;fc.prototype.proxy=null;fc.NAME="LocalizationWrapper";fc.prototype.getString=function(a){return this.proxy.getString(a)};fc.prototype.listNotificationInterests=function(){return[q.CREATE_FLASH_VARS,q.CREATE_XML]};fc.prototype.handleNotification=function(a){var b,c,e,m,d,h,f,z;fc.__super__.handleNotification.call(this,a);d=a.getName();a=a.getBody();switch(d){case q.CREATE_FLASH_VARS:c=
a.flashvars;c.locale_setting=this.proxy.getLocaleId();break;case q.CREATE_XML:for(e in a=a.xml,b=a.firstChild,d=a.getElementsByTagName("locales")[0],null==d&&(d=a.createElement("locales"),b.appendChild(d)),z=this.proxy.getLocales(),z)for(c in m=z[e],b=a.createElement("locale"),b.setAttribute("id",e),d.appendChild(b),m)f=m[c],h=a.createElement("property"),h.setAttribute("key",c),f=ea.createTextContent(a,f),h.appendChild(f),b.appendChild(h)}};var hd=function(a){null==this.cssPrefix&&(this.cssPrefix=
bc.PREFIX);hd.__super__.constructor.call(this,this.mediatorName,a)};f(hd,puremvc.Mediator);hd.prototype.config=null;hd.prototype.cssPrefix=null;hd.prototype.classList=null;hd.prototype.initializeNotifier=function(a){hd.__super__.initializeNotifier.call(this,a);this.config=(this.facade.player||this.facade).retrieveProxy(v.NAME);this.classList=this.classList=new ya(this.viewComponent)};var Ad=function(a){Ad.__super__.constructor.call(this,a)};f(Ad,hd);Ad.prototype.localizationManager=null;Ad.prototype.initializeNotifier=
function(a){Ad.__super__.initializeNotifier.call(this,a);this.localizationManager=(this.facade.player||this.facade).retrieveProxy(qa.NAME)};var $=function(a,b,c,e){this.componentName=null!=a?a:this.componentName;this.componentType=null!=b?b:this.componentType;this.parent=c;this.element=e;null==this.mediatorName&&(this.mediatorName=this.createMediatorName());$.__super__.constructor.call(this,this.viewComponent)};f($,Ad);$.prototype.componentName=null;$.prototype.componentType=null;$.prototype.parent=
null;$.prototype.element=null;$.prototype.classList=null;$.prototype.state=null;$.prototype.disabled=!1;$.prototype.onRegister=function(){this.viewComponent=this.createViewComponent(this.parent,this.element);this.classList=this.viewComponent._classList;Ya.bindEvents(this.viewComponent,this)};$.prototype.createViewComponent=function(a,b){var c;c=this.getTypeList();return Ya.create(c,a,b)};$.prototype.createMediatorName=function(){var a;a=this.getTypeList();a.push("mediator");a.push(Ya.createUID());
return a.join("-")};$.prototype.getTypeList=function(){var a;a=[];null!=this.componentName&&a.push(this.componentName);null!=this.componentType&&(a=a.concat(this.componentType));return a};$.prototype.create=function(a,b,c,e){null==b&&(b=this);!1===b&&(b=null);return Ya.create(a,b,c,e)};$.prototype.createText=function(a,b,c,e){null==c&&(c=this);return Ya.create(a,c,e,b)};$.prototype.setState=function(a){if(a!==this.state)return null!=this.state&&this.classList.remove(this.state),this.state=a,null!=
this.state&&this.classList.add(this.state),a};$.prototype.getState=function(){return this.state};$.prototype.setDisabled=function(a){if(a!==this.disabled)return(this.disabled=a)?this.classList.add("disabled"):this.classList.remove("disabled"),a};$.prototype.getDisabled=function(){return this.disabled};var dc=function(a,b){this.mediatorName=""+this.componentType+"-mediator";dc.__super__.constructor.call(this,a,null,null,b)};f(dc,$);dc.prototype.componentType="media-element";dc.prototype.created=!1;
dc.prototype.onRegister=function(){!0!==this.created&&(this.created=!0,dc.__super__.onRegister.call(this))};var Gb=function(){Gb.__super__.constructor.call(this)};f(Gb,$);Gb.prototype.componentType="layer";Gb.prototype.onRegister=function(){Gb.__super__.onRegister.call(this);this.registerLayer()};Gb.prototype.onRemove=function(){Gb.__super__.onRemove.call(this);this.removeLayer()};Gb.prototype.registerLayer=function(){this.sendNotification(d.ADD_LAYER,this.viewComponent)};Gb.prototype.removeLayer=
function(){this.sendNotification(d.REMOVE_LAYER,this.viewComponent)};var Rc=function(){Rc.__super__.constructor.call(this)};f(Rc,Gb);Rc.prototype.componentName="video";Rc.prototype.listNotificationInterests=function(){return[d.PLAYBACK_CORE_CHANGE]};Rc.prototype.mediator=null;Rc.prototype.mediaElement=null;Rc.prototype.handleNotification=function(a){var b;b=a.getName();a=a.getBody();switch(b){case d.PLAYBACK_CORE_CHANGE:null!=this.mediaElement&&this.viewComponent.removeChild(this.mediaElement),null!=
this.mediator&&this.facade.removeMediator(this.mediator.getMediatorName()),(b=null!=(null!=a?a.getViewComponent:void 0))?(this.facade.registerMediator(a),this.mediator=a,this.mediaElement=this.mediator.getViewComponent()):(this.mediator=null,this.mediaElement=a),this.facade.setMediaElement(this.mediaElement),null!=this.mediaElement&&this.viewComponent.appendChild(this.mediaElement)}};var Va=function(a,b){this.componentName=a;this.layers=[];Va.__super__.constructor.call(this,null,null,null,b)};f(Va,
$);Va.prototype.componentType="player";Va.prototype.core=null;Va.prototype.medium=null;Va.prototype.layers=null;Va.prototype.ready=!1;Va.prototype.onRegister=function(){var a;Va.__super__.onRegister.call(this);a=g.getDevice();null!=a&&this.classList.add(a);g.isTouchDevice()&&this.classList.add("touch")};Va.prototype.listNotificationInterests=function(){return[d.DISPLAY_STATE_CHANGE,d.ACTIVE_STATE_CHANGE,d.PLAY_STATE_CHANGE,d.ADD_APPLICATION_STATE,d.REMOVE_APPLICATION_STATE,d.MEDIUM_CHANGE,d.DURATION_CHANGE,
d.TEMPORAL_TYPE_CHANGE,d.IS_LIVE,d.ADD_LAYER,d.REMOVE_LAYER,d.READY]};Va.prototype.handleNotification=function(a){var b;b=a.getName();a=a.getBody();switch(b){case d.ACTIVE_STATE_CHANGE:case d.PLAY_STATE_CHANGE:case d.DISPLAY_STATE_CHANGE:case d.MEDIUM_CHANGE:b=a.value;a=a.previous;null!=a&&this.classList.contains(a)&&this.classList.remove(a);null!=b&&this.classList.add(b);break;case d.ADD_APPLICATION_STATE:this.classList.add(a);break;case d.REMOVE_APPLICATION_STATE:this.classList.remove(a);break;
case d.TEMPORAL_TYPE_CHANGE:a.previous&&this.sendNotification(d.REMOVE_APPLICATION_STATE,a.previous);a.value&&this.sendNotification(d.ADD_APPLICATION_STATE,a.value);break;case d.IS_LIVE:!0===a?this.sendNotification(d.ADD_APPLICATION_STATE,"is-live"):this.sendNotification(d.REMOVE_APPLICATION_STATE,"is-live");break;case d.DURATION_CHANGE:3600<a?this.sendNotification(d.ADD_APPLICATION_STATE,"long-form"):this.sendNotification(d.REMOVE_APPLICATION_STATE,"long-form");break;case d.ADD_LAYER:this.addLayer(a);
break;case d.REMOVE_LAYER:this.removeLayer(a);break;case d.READY:this.initialize(),this.viewCreated()}};Va.prototype.initialize=function(){var a,b,c,e;this.ready=!0;e=this.layers;b=0;for(c=e.length;b<c;b++)a=e[b],this.viewComponent.contains(a)||this.viewComponent.appendChild(a)};Va.prototype.viewCreated=function(){this.sendNotification(d.VIEW_CREATED)};Va.prototype.addLayer=function(a){this.layers.push(a);this.ready&&this.viewComponent.appendChild(a)};Va.prototype.removeLayer=function(a){this.viewComponent.contains(a)&&
this.viewComponent.removeChild(a);a=this.layers.indexOf(a);0<=a&&this.layers.splice(a,1)};var Sc=function(a){Sc.__super__.constructor.call(this,this.type,a)};f(Sc,Va);Sc.NAME="FlashPlayerMediator";Sc.prototype.type="flash";Sc.prototype.listNotificationInterests=function(){return Sc.__super__.listNotificationInterests.call(this).concat([xb.PLUGINS_INITIALIZED])};Sc.prototype.handleNotification=function(a){var b;b=a.getName();a.getBody();switch(b){case d.READY:this.viewCreated();return;case xb.PLUGINS_INITIALIZED:this.initialize();
return}Sc.__super__.handleNotification.call(this,a)};var Zd=function(){Zd.__super__.constructor.call(this)};f(Zd,E);Zd.prototype.execute=function(a){var b;b="amp"===a.getBody().value?d.REMOVE_APPLICATION_STATE:d.ADD_APPLICATION_STATE;this.sendNotification(b,"remote-playback");Zd.__super__.execute.call(this,a)};var Qe=function(){Qe.__super__.constructor.call(this)};f(Qe,E);Qe.prototype.execute=function(a){Qe.__super__.execute.call(this,a);-1===(this.media.getData().src||"").indexOf(".smil")?this.facade.loadAuthorized():
this.facade.getMediaElement().authenticationComplete({media:this.media.getData()})};var xa=function(a,b){this.supportedTypes=null!=a?a:this.supportedTypes;this.config=b;xa.__super__.constructor.call(this);this.temporalTypes=["vod","live","ondemand"]};f(xa,r);xa.prototype.temporalTypes=null;xa.prototype.supportedTypes=null;xa.prototype.playbackCoreName="default";xa.prototype.config=null;xa.prototype.onRegister=function(){this.mediaProxy=this.facade.retrieveProxy(s.NAME)};xa.prototype.getPlaybackCoreName=
function(){return this.playbackCoreName};xa.prototype.getSupportedTypes=function(){return this.supportedTypes||[]};xa.prototype.setSupportedTypes=function(a){return this.supportedTypes=a};xa.prototype.getTemporalTypes=function(){return this.temporalTypes||[]};xa.prototype.setTemporalTypes=function(a){return this.temporalTypes=a};xa.prototype.canPlayTemporalType=function(a){return-1!==this.getTemporalTypes().indexOf(a)};xa.prototype.canPlayType=function(a){return null!=this.supportedTypes?-1!==this.getSupportedTypes().indexOf(a)?
"maybe":"":xa.__super__.canPlayType.call(this,a)};var za=function(a){this.player=a;za.__super__.constructor.call(this)};f(za,xa);za.NAME=r.NAME;za.prototype.player=null;za.prototype.initialized=!0;za.prototype.playbackCoreName="flash";za.prototype.supportedTypes=["video/mp4","video/x-flv","video/f4m","application/smil","application/smil+xml"];za.prototype.getPaused=function(){return this.player.getPaused()};za.prototype.getEnded=function(){return this.player.getEnded()};za.prototype.getSeeking=function(){return this.player.getSeeking()};
za.prototype.getCurrentTime=function(){return this.player.getCurrentTime()};za.prototype.setCurrentTime=function(a){this.player.setCurrentTime(a);return a};za.prototype.getSrc=function(){return this.player.getSrc()};za.prototype.setSrc=function(a){this.player.setSrc(a);return a};za.prototype.getVolume=function(){return this.player.getVolume()};za.prototype.setVolume=function(a){this.player.setVolume(a);return a};za.prototype.getMuted=function(){return this.player.getMuted()};za.prototype.setMuted=
function(a){this.player.setMuted(a);return a};za.prototype.getDuration=function(a){return this.player.getDuration()};za.prototype.play=function(){this.player.play()};za.prototype.pause=function(){this.player.pause()};za.prototype.load=function(){this.player.load()};var p=function(a){var b=this;this.flashObjectID+=Date.now();this.plugins={};this._displayState=ia.NORMAL;this.debug=/debug\=true/.test(location.search);p.__super__.constructor.call(this,a);this.addEventListener("mediachange",function(a){var e,
m,d,h,f;d=a.detail.track;m=b.getMediaElement();a=m.textTracks=[];if(null!=d)for(h=0,f=d.length;h<f;h++)e=d[h],e={kind:e.kind,label:e.label,language:e.srclang,_mode:e.mode},Object.defineProperty(e,"mode",{get:function(){return this._mode},set:function(a){this._mode=a;(a="showing"===a)&&m.setTrackByLanguage(this.language);m.setPlayerProperty("captionDisplay",{visible:a})},enumerable:!0,configurable:!1}),a.push(e)})};f(p,t);p.prototype.initialize=function(a,b){var c,e;this.config=a;this.parentModule=
b;this.createDefaults();this.logEvents=!0===(null!=(c=this.config.flash)?c.logEvents:void 0)||"true"===(null!=(e=vc["amp-flash-log"])?e.toLowerCase():void 0);p.__super__.initialize.call(this,this.config,this.parentModule)};p.prototype.createFramework=function(){var a,b,c,e;p.__super__.createFramework.call(this);b=this.config.flash||{};a=!0===(null!=(c=b["static"])?c.enabled:void 0)?b["static"]:b;e=this.debug&&null!=a.debug?a.debug:a.swf||"amp.swf";this.evaluatePaths(b.expressInstallSWF);c=this.createParams(b);
a=this.createAttributes(b);this.flashvars=this.createFlashVars(b);null==this.flashvars.settings_url&&(b=this.createXML(this.config),null!=b&&(this.flashvars.settings_xml=b));a.data=this.evaluatePaths(e);this.createdHandler(g.createFlashObject({params:c,attributes:a,vars:this.flashvars},this.getMediaElement().parentNode))};p.prototype.playerType="flash";p.prototype.flashObjectID="flashObject";p.prototype.loaded=!1;p.prototype.flashvars=null;p.prototype._paused=!1;p.prototype._ended=!1;p.prototype._muted=
!1;p.prototype.plugins=null;p.prototype.debug=!1;p.prototype.started=!1;p.prototype._displayState=null;p.prototype.logEvents=!1;p.prototype._loop=!1;p.prototype.playback=null;p.prototype.flashPlugins=[{id:"AkamaiAdvancedStreamingPlugin",src:"http://players.edgesuite.net/flash/plugins/osmf/advanced-streaming-plugin/v3.10/osmf2.0/AkamaiAdvancedStreamingPlugin.swf",absolute:!0,host:"osmf",main:"com.akamai.osmf.AkamaiAdvancedStreamingPluginInfo",type:"application/x-shockwave-flash"},{id:"ErrorMessagingPlugin",
src:"#{paths.resources}plugins/ErrorMessagingPlugin.swf",blocking:!1,host:"akamai",main:"ErrorMessagingPlugin",type:"application/x-shockwave-flash"},{id:"VideoMetricsViewPlugin",src:"#{paths.resources}plugins/VideoMetricsViewPlugin.swf",blocking:!1,host:"akamai",main:"VideoMetricsViewPlugin",type:"application/x-shockwave-flash"},{id:"VideoStatsInfoOverlayPlugin",src:"#{paths.resources}plugins/VideoStatsInfoOverlayPlugin.swf",blocking:!1,host:"akamai",main:"VideoStatsInfoOverlayPlugin",type:"application/x-shockwave-flash"}];
p.prototype.flashView=null;p.prototype.createModel=function(){p.__super__.createModel.call(this);this.playback=new za(this);this.registerProxy(this.playback);this.appState.setRenderMode(qi.FLASH);this.bindings.initialize()};p.prototype.createView=function(){this.registerMediator(new Sc(this.getViewComponent()));this.registerMediator(new Rc);this.registerMediator(new ec);this.registerMediator(new fc(this,this.config))};p.prototype.createController=function(){p.__super__.createController.call(this);
this.registerCommand(wa.AUTHORIZE,E);this.registerCommand(wa.AUTHORIZED,Qe);this.registerCommand(d.CHANGE_PLAY_STATE,Vd);this.registerCommand(d.PLAY_STATE_CHANGE,E);this.registerCommand(d.START,dg);this.registerCommand(d.STARTED,E);this.registerCommand(d.PLAY,E);this.registerCommand(d.PLAY_REQUEST,E);this.registerCommand(q.FLASH_CREATED,E);this.registerCommand(d.CHANGE_PLAYBACK_TARGET,Pe);this.registerCommand(d.PLAYBACK_TARGET_CHANGE,Zd);this.registerCommand(d.UPDATE_DATA_BINDINGS,Xd)};p.prototype.createMediaElement=
function(){var a;a=new dc("flash","div");this.sendNotification(d.PLAYBACK_CORE_CHANGE,a);a=a.getViewComponent();a.id=a.name=this.flashObjectID;return a};p.prototype.createDefaults=function(){var a,b,c,e,m,d;if(!(0<!(null!=(b=this.flashPlugins)&&b.length))){b=this.config.resources||[];null!=(null!=(c=this.config.flash)?c.resources:void 0)&&(b=b.concat(this.config.flash.resources));c=g.mimeTypes.swf;d=this.flashPlugins;e=0;for(m=d.length;e<m;e++)a=d[e],null!=a&&0===b.filter(function(b){return b.id===
a.id}).length&&(null==a.type&&(a.type=c),b.push(a));this.config.resources=b}};p.prototype.createParams=function(a){var b;b={allowFullScreen:!0,allowScriptAccess:"always",wmode:"direct",bgColor:"#000000"};null!=a.params&&(null!=a.params.allowFullScreen&&(b.allowFullScreen=a.params.allowFullScreen),null!=a.params.allowScriptAccess&&(b.allowScriptAccess=a.params.allowScriptAccess),null!=a.params.wmode&&(b.wmode=a.params.wmode),null!=a.params.bgColor&&(b.bgColor=a.params.bgColor));"direct"===b.wmode&&
/MSIE/.test(navigator.userAgent)&&(b.wmode="transparent");return b};p.prototype.getModules=function(){return this.plugins};p.prototype.createPlugins=function(){var a,b,c,e,m;m=n.plugins;for(c in m)if(a=m[c],c in this.config&&null!=this.config[c]&&!1!==this.config[c].enabled)if(a=a[this.getPlayerType()],null==a)this.logger.debug("[AMP] Plugin could not be found: "+c);else try{e=this[c]=this.plugins[c]=new a(this,this.config[c]),this.registerMediator(this.plugins[c]),b="function"===typeof e.getFeatureName?
e.getFeatureName():void 0,null!=b&&(this[b]=e),null!=e.flashView&&(this.flashView=g.override(this.flashView,e.flashView)),this.logger.debug("[AMP] Plugin registered: "+c)}catch(d){this.logger.error("[AMP] Plugin could not be created: "+c+". "+d)}null!=this.config.flash.view&&(this.flashView=g.override(this.flashView,this.config.flash.view));this.sendNotification(xb.PLUGINS_INITIALIZED,this.plugins)};p.prototype.createAttributes=function(a){var b;b={id:this.flashObjectID,name:this.flashObjectID};null!=
a.attributes&&(null!=a.attributes.id&&(b.id=a.attributes.id),null!=a.attributes.name&&(b.name=a.attributes.name));return b};p.prototype.createFlashJSON=function(a,b){var c,e;null==a&&(a=this.config);a=JSON.stringify(a);a=this.evaluatePaths(a);a=JSON.parse(a);e=function(a,b,e){switch(typeof e){case "string":a[b]=escape(e);break;case "object":c(e)}};c=function(a){var b,c,d,f;if(a instanceof Array)for(b=d=0,f=a.length;d<f;b=++d)c=a[b],e(a,b,c);else if("object"===typeof a)for(b in a)c=a[b],e(a,b,c)};
c(a);return encodeURIComponent(JSON.stringify(a,null,b))};p.prototype.createFlashVars=function(a){var b,c,e,m,d,h,f,z,k,l;b={};c=JSON.parse(JSON.stringify(this.config));c.flash=null;delete c.flash;c.locales=null;delete c.locales;c.params=null;delete c.params;c.rules=null;delete c.rules;b.settings_json=this.createFlashJSON(c);null!=this.config.autoplay&&(b.auto_play=this.config.autoplay);null!=this.config.rules&&g.mergeRules(this.config.rules);b.hinting_rules=escape(JSON.stringify(g.rules));null!=
this.config.volume&&(b.volume=g.clamp(this.config.volume,0,1));null!=this.config.target&&(b.external_target=this.config.target);null!=this.config.name&&(b.core_player_name=this.config.name);null!=this.config.domain&&(b.embed_domain=b.domain=this.config.domain);this._loop=b.auto_replay=!0===this.config.loop;null!=this.config.fullscreen&&(b.fullscreen_enabled=!1!==this.config.fullscreen.enabled&&"external"!==this.config.fullscreen.mode);null!=this.config.titlebar&&(b.titlebar_enabled=!1!==this.config.titlebar.enabled);
null!=this.config.params&&(b.params=escape(JSON.stringify(this.config.params)));null!=this.config.version&&(b.context_menu_label=this.config.version);null!=(null!=(m=this.config.controls)?m.displaySceneMarkers:void 0)&&(b.displaySceneMarkers=this.config.controls.displaySceneMarkers);null!=this.config.media&&(this.mediaProxy.setData(this.config.media),null!=this.config.media.src&&(this.setSrc(this.config.media.src),b.video_url=escape(this.config.media.src)),null!=this.config.media.source&&0<this.config.media.source.length&&
(this.setSource(this.config.media.source),b.video_url=escape(this.mediaProxy.getSrc())),null!=this.config.media.medium&&(this.setMedium(this.config.media.medium),b.medium=this.config.media.medium),null!=this.config.media.title&&(b.title=encodeURIComponent(this.config.media.title)),null!=this.config.media.poster&&(b.poster=escape(this.config.media.poster)),null!=this.config.media.temporalType&&(b.temporalType=this.config.media.temporalType));"audio"===this.getMedium()&&(b.controls=!0,b.auto_hide=-1);
null!=(null!=(d=this.config.ima)?null!=(h=d.overlay)?h.delay:void 0:void 0)&&(b.overlay_ad_delay=this.config.ima.overlay.delay);null!=this.config.ticker&&!1!==this.config.ticker.enabled&&(null!=this.config.ticker.url&&(b.ticker_text_url=this.config.ticker.url),null!=this.config.ticker.interval&&(b.ticker_polling_interval=this.config.ticker.interval),null!=this.config.ticker.speed&&(b.ticker_speed=this.config.ticker.speed));b.show_play_button_overlay=!1;b.auto_play_list=!1;b.next_video_timer=0;null==
b.context_menu_mode&&(b.context_menu_mode=!0===this.debug?"long":"short");if(null!=(null!=(f=this.config.flash)?null!=(z=f.view)?null!=(k=z.elements)?null!=(l=k.loadingView)?l.attributes:void 0:void 0:void 0:void 0)){c="";for(e in this.config.flash.view.elements.loadingView.attributes)c+=e+":"+this.config.flash.view.elements.loadingView.attributes[e]+" ";b.loadingView=c}this.sendNotification(q.CREATE_FLASH_VARS,{flashvars:b,config:this.config});return b=g.override(b,a.vars)};p.prototype.createXML=
function(a){var b,c,e,m,d,h,f,z,k,l,n,p,r;null==(null!=a?null!=(z=a.flash)?z.xml:void 0:void 0)&&(null==a.flash&&(a.flash={}),a.flash.xml="\x3capplication\x3e\x3c/application\x3e");n=ea.parse(a.flash.xml);1<n.childNodes.length&&n.removeChild(n.firstChild);this.sendNotification(q.CREATE_XML,{config:a,xml:n});d=function(a){var b,c,m,h,f,J;h=a.resources;c=[];if(h instanceof Array&&0<(null!=h?h.length:void 0))for(f=0,J=h.length;f<J;f++)m=h[f],m.type===k&&(m=g.clone(m),!0===e?null!=m.main&&""!==m.main?
(m.src=m.main,m.type="static"):m.type="dynamic":null!=m.src&&""!==m.src?m.type="dynamic":(m.src=m.main,m.type="static"),delete m.main,c.push(m));for(b in a)m=a[b],"flash"!==b&&null!=(h=null!=m?m.resources:void 0)&&h instanceof Array&&0<h.length&&(c=c.concat(d(m)));return c};k=g.mimeTypes.swf;z=d(this.config);e=!0===(null!=(m=a.flash["static"])?m.enabled:void 0);if(0<(null!=z?z.length:void 0))for(m=n.getElementsByTagName("plugins"),1>m.length?(m=n.createElement("plugins"),n.firstChild.appendChild(m)):
m=m[0],p=0,r=z.length;p<r;p++)if(f=z[p],!1!==f.enabled){a=n.createElement("plugin");for(c in f)l=f[c],"loaded"!==c&&("src"!==c?a.setAttribute(c,""+l):("id"===c&&"AkamaiAdvancedStreamingPlugin"===l&&!0===this.debug&&(l=l.replace("AkamaiAdvancedStreamingPlugin.swf","AkamaiAdvancedStreamingPlugin-logging.swf")),a.appendChild(ea.createTextContent(n,l))));m.appendChild(a)}h=function(a,b){var c,e,m,d;if(null!=a.attributes)for(e in c=a.attributes,c)m=c[e],b.setAttribute(e,""+m);if(null!=a.elements)for(e in d=
a.elements,d)m=d[e],null!=m&&(c=n.createElement("element"),c.setAttribute("id",e),"state"!==c.id&&(h(m,c),b.appendChild(c)));if(null!=a.state){c=n.createElement("state");if(a.state.attributes)for(e in d=a.state.attributes,d)m=d[e],null!=m&&c.setAttribute(e,""+m);b.appendChild(c)}return b};c=n.getElementsByTagName("view")[0];null==c&&(c=n.createElement("view"),n.firstChild.appendChild(c));h(this.flashView,c);if(null!=(null!=(b=this.config.fullscreen)?b.mode:void 0))for(c=n.getElementsByTagName("element"),
z=0,a=c.length;z<a;z++)b=c[z],"fullscreenBtn"===b.getAttribute("id")&&b.setAttribute("action","external");b=ea.serialize(n);b=b.match(/<application>[\w\W\s\S\d\D]*<\/application>/)[0]||b;b=b.replace(/[\n\r\t]/g,"");b=this.evaluatePaths(b);return encodeURIComponent(b)};p.prototype.createdHandler=function(a){var b=this;a=this.getMediaElement().id;a=document.getElementById(a);this.setMediaElement(a);a.className=bc.PREFIX+dc.prototype.componentType;a.eventHandler=function(a,e){return b.eventHandler(a,
e)};this.sendNotification(q.FLASH_CREATED);null!=this.getMedium()&&this.setMedium(this.getMedium())};p.prototype.eventHandler=function(a,b){var c,e,m,gd,h,f,z,g,k,l,n;this.logEvents&&!this.excludedFlashEvents.test(a)&&this.logger.log("[AMP FLASH EVENT] "+a,b);try{switch(a){case q.INITIALIZED:f=h="ready";break;case q.RESET:null==b&&(h="ready");this.started=!1;break;case q.LOADING:f="loadstart";break;case q.PLAYER_ERROR:f=h="error";break;case q.MEDIA_ERROR:f=h="error";break;case q.FEED_LOADED:b=JSON.parse(b);
m=new Tc;gd=null!=(g=m.createFeed(b))?null!=(k=g.item)?k[0]:void 0:void 0;null!=gd&&this.mediaProxy.setData(gd);break;case q.FEED_UPDATED:f="mediachange";b=this.getMedia();z=!0;break;case q.ERROR_STREAM_NOT_FOUND:f=h="error";break;case q.CAPABILITY_CHANGE:e=b.type;"canPlayChange"===e&&!0===b.enabled?(f="canplay",this.loaded=!0):"canSeekChange"===e&&!0===b.enabled?f="canplaythrough":"temporalChange"===e&&!0===b.enabled&&(f="loadedmetadata",this.started||this.sendNotification(d.START,b));break;case q.PLAYING:this.started||
this.sendNotification(d.START,b);f=h="playing";this._paused=this._ended=!1;!0===this.appState.getSeeking()&&(this.appState.setSeeking(!1),this.sendNotification(d.SEEKED),this.sendNotification(d.DISPATCH_EVENT,new V("seeked")));break;case q.ELEMENT_EVENT:"fullscreenBtn"===b.element&&"click"===b.type&&"external"===(null!=(l=this.config)?null!=(n=l.fullscreen)?n.mode:void 0:void 0)&&(h=this.getDisplayState()===ia.FULL_SCREEN?ia.NORMAL:ia.FULL_SCREEN,this.setDisplayState(h));break;case q.PLAY_REQUEST:this.sendNotification(d.PLAY_REQUEST);
f=d.MEDIA_SEQUENCE_STARTED;this.loaded=!0;this._ended=!1;break;case q.PLAY:"paused"!==this.getPlayState()&&this.started&&this.sendNotification(d.PLAY,b);break;case q.ENDED:f=h=d.ENDED;this._ended=!0;break;case q.MEDIA_SEQUENCE_ENDED:f=d.MEDIA_SEQUENCE_ENDED;break;case q.PAUSED:f="pause";h="paused";this._paused=!0;break;case q.BUFFERING:"ended"!==this.className&&(f=h="waiting");break;case q.DURATION_CHANGE:isNaN(b.time)||(0===b.time&&this.sendNotification(d.MEDIA_SEQUENCE_ABORTED),f="durationchange",
b=b.time);break;case q.VOLUME_CHANGE:f="volumechange";break;case q.TIME_UPDATE:f="timeupdate";break;case q.SEEKING_CHANGE:if(!1===this.appState.getSeeking()&&!1===b.seeking)return;f=b.seeking?"seeking":"seeked";this.appState.setSeeking(b.seeking);b.seeking&&(h="seeking");break;case q.FULLSCREEN_CHANGE:f="fullscreenchange";b="fullScreen"===b.displayState;this.applyDisplayState(b?ia.FULL_SCREEN:ia.NORMAL);break;case q.FAIL_OVER_ATTEMPT:f="failoverattempt";break;case q.ERROR:a=null;break;case q.AUTHORIZE:f=
wa.AUTHORIZE;break;case q.TIMED_METADATA:f=d.TIMED_METADATA;b={startTime:b.time,endTime:b.time,data:b};break;case q.MEDIA_PLAYER_ID3_UPDATED:f=d.TIMED_METADATA,b={startTime:b.time,endTime:b.time,data:window.atob(b)}}null!=a&&a!==f&&(e=new V(a,b),e.dispatcher="FLASH",this.sendNotification(d.DISPATCH_EVENT,e),this.sendNotification(a,b));null!=f&&("error"===f&&(c=b.error||b,this.error("Flash Error",c)),this.sendNotification(f,b),this.sendNotification(d.DISPATCH_EVENT,new V(f,b)));null!=z&&this.sendNotification(d.UPDATE_DATA_BINDINGS);
null!=h&&this.setPlayState(h)}catch(p){this.error("Event Error: "+a,p)}};p.prototype.error=function(a,b){this.logger.error("[AMP FLASH ERROR]",a,b)};p.prototype.excludedFlashEvents=/(mediaPlayerPlayheadUpdate|mediaPlayerElementEvent|adComponentPlaybackProgress)/;p.prototype.logFlashEvents=!1;p.prototype.logEvent=function(a){"FLASH"===a.dispatcher&&!1===this.logFlashEvents||!0===this.excludedFlashEvents.test(a.type)||p.__super__.logEvent.call(this,a)};p.prototype.setPlayState=function(a){this.sendNotification(d.CHANGE_PLAY_STATE,
a);return a};p.prototype.getPlayState=function(){return this.appState.getPlayState()};p.prototype.setMedia=function(a){p.__super__.setMedia.call(this,a);null!=this.getPlayState()&&this.setPlayState("ready");this.mediaProxy.setData(a);null!=a.src&&this.setSrc(a.src);null!=a.source&&0<a.source.length&&this.setSource(a.source);this.sendNotification(d.MEDIA_CHANGE,a);this.load(this.mediaProxy.getData());return a};p.prototype.getMedia=function(){return this.mediaProxy.getData()};p.prototype.load=function(a){var b;
null==a&&(a={});b=this.mediaProxy.getData();null==a.autoplay&&(a.autoplay=this.config.autoplay);this.loadAuthorized=this._loadAuthorized.bind(this,b,a);this.security.setMedia(b);this.security.getAuthorized()?this.loadAuthorized(a):this.sendNotification(wa.AUTHORIZE,{media:b,data:a})};p.prototype._loadAuthorized=function(a,b){this.loaded=!0;this.getMediaElement().loadURL(this.mediaProxy.getSrc(),b)};p.prototype.play=function(){this.loaded||this.load();this.getMediaElement().unpause()};p.prototype.setMuted=
function(a){this._muted=a;try{!0===a?this.getMediaElement().mute():this.getMediaElement().unmute()}catch(b){this.error("Flash muted error",b)}return a};p.prototype.getMuted=function(){return this._muted};p.prototype.getLoop=function(){return this._loop};p.prototype.getSrc=function(a){return this.getMediaElement().getURL()};p.prototype.setSrc=function(a){this.mediaProxy.setSrc(a);this.loaded=!1;this.setMedium(g.getMimeType(a));return a};p.prototype.setAutoplay=function(a){this.getMediaElement().setPlayerProperty("autoplay",
a);return a};p.prototype.getAutoplay=function(){return this.getMediaElement().getPlayerProperty("autoplay")};p.prototype.getMedium=function(){return this.mediaProxy.getData().medium};p.prototype.setMedium=function(a){var b,c;b=this.mediaProxy.getData();if(a!==b.medium)return null!=b.medium&&(c="medium-"+b.medium),b.medium=/audio/.test(a)?"audio":"video",this.sendNotification(d.MEDIUM_CHANGE,{value:"medium-"+b.medium,previous:c}),a};p.prototype.setSource=function(a){var b,c=this;if(!(null==a||1>a.length)){b=
this.mediaProxy.getData();b.source=a;this.loaded=!1;b=g.selectSource(a,function(a){return c.canPlayType(a)});if(null!=(null!=b?b.src:void 0)&&""!==b.src)this.setSrc(b.src),"undefined"!==typeof type&&null!==type&&this.setMedium(type);else throw Error("No valid source could be found");return a}};p.prototype.getSource=function(){return this.mediaProxy.getData().source};p.prototype.getSeeking=function(){return this.appState.getSeeking()};p.prototype.getPaused=function(){return this._paused};p.prototype.getEnded=
function(){return this._ended};p.prototype.getFlashXML=function(){var a,b;b=decodeURIComponent(this.flashvars.settings_xml);a=ea.parse(b);try{a.toString=function(){return b}}catch(c){}return a};p.prototype.getFlashVars=function(){return this.flashvars};p.prototype.getFlashJSON=function(){return JSON.parse(decodeURIComponent(this.flashvars.settings_json))};p.prototype.evaluateBinding=function(a){a=this.getMediaElement().evaluateBinding(a);if(null!=a)try{a=JSON.parse(a)}catch(b){}return a};p.prototype.canPlayType=
function(a){return 0<=ve.call(g.flashTypes,a)?"maybe":""};p.prototype.replay=function(){this.getMediaElement().replay()};p.prototype.pause=function(){this.getMediaElement().pause()};p.prototype.end=function(){this.getMediaElement().stopPlayer()};p.prototype.getCurrentTime=function(){var a;return"function"===typeof(a=this.getMediaElement()).getCurrentTime?a.getCurrentTime():void 0};p.prototype.setCurrentTime=function(a){this.getMediaElement().jumpToTime(a);return a};p.prototype.getParams=function(){return this.getMediaElement().getParams()};
p.prototype.setParams=function(a){this.getMediaElement().setParams(a);return a};p.prototype.getVolume=function(){return this.getMediaElement().getVolume()};p.prototype.setVolume=function(a,b){this.getMediaElement().setVolume(a,b||"");return a};p.prototype.getDuration=function(){var a;return"function"===typeof(a=this.getMediaElement()).getDuration?a.getDuration():void 0};p.prototype.getDisplayState=function(){return this._displayState};p.prototype.setDisplayState=function(a){var b;if(a!==this._displayState&&
(this.applyDisplayState(a),"external"!==(null!=(b=this.config.fullscreen)?b.mode:void 0)))return this._displayState===ia.FULL_SCREEN?this.getMediaElement().enterFullScreen():this.getMediaElement().exitFullScreen(),a};p.prototype.applyDisplayState=function(a){var b;a!==this._displayState&&(b={value:a,previous:this._displayState},this._displayState=a,this.sendNotification(d.DISPLAY_STATE_CHANGE,b),this.sendNotification(d.DISPATCH_EVENT,new V("fullscreenchange",this._displayState===ia.FULL_SCREEN)))};
p.prototype.enterFullScreen=function(){this.setDisplayState(ia.FULL_SCREEN)};p.prototype.exitFullScreen=function(){this.setDisplayState(ia.NORMAL)};p.prototype.recordContentChange=function(a){this.getMediaElement().recordContentChange(a)};p.prototype.setQuality=function(a){return this.getMediaElement().setQuality(a)};p.prototype.getQuality=function(){return this.getMediaElement().getQuality()};p.prototype.getQualityLevels=function(){return this.getMediaElement().getQualityLevels()};Events={LOADED_METADATA:"loadedmetadata",
READY:"ready",ERROR:"error",ENDED:"ended",STARTED:"started",DURATION_CHANGE:"durationchange",SEEKING:"seeking",SEEKED:"seeked",TIME_UPDATE:"timeupdate",LOAD_START:"loadstart",LOADED_DATA:"loadeddata",CAN_PLAY:"canplay",CAN_PLAY_THROUGH:"canplaythrough",PROGRESS:"progress",MEDIA_CHANGE:"mediachange",WAITING:"waiting",STALLED:"stalled",PLAY:"play",PLAYING:"playing",PAUSE:"pause",PAUSED:"paused",PLAY_REQUEST:"playrequest",MEDIUM_CHANGE:"mediumchange",TEMPORAL_TYPE_CHANGE:"temporaltypechange",VOLUME_CHANGE:"volumechange",
FAIL_OVER_ATTEMPT:"failoverattempt",PLAYBACK_TARGET_CHANGE:"playbacktargetchange",PLAYBACK_TARGET_AVAILABLE:"playbacktargetavailable",RECORD_CONTENT_CHANGE:"recordcontentchange",IS_LIVE:"islive",CONTENT_CHANGED:"contentchanged",BITRATE_CHANGE:"bitratechange",BITRATE_CHANGING:"bitratechanging",BITRATE_LEVELS_LOADED:"bitratelevelsloaded",MEDIA_SEQUENCE_STARTED:"mediasequencestarted",MEDIA_SEQUENCE_ENDED:"mediasequenceended",MEDIA_SEQUENCE_ABORTED:"mediasequenceaborted",LANGUAGE_CHANGE:"languagechange",
TIMED_METADATA:"timedmetadata",VIEW_CREATED:"viewcreated",MUTED:"muted",RESUME:"resume",PLAY_STATE_CHANGE:"playstatechange",FULL_SCREEN_CHANGE:"fullscreenchange",init:function(){var a,b;this.values=[];for(a in this)b=this[a],"values"!==a&&"init"!==a&&this.values.push(b)}};Events.init();var ac=function(a){this.module=a;ac.__super__.constructor.call(this,a.getModuleName(),this)};f(ac,puremvc.Mediator);ac.prototype.module=null;ac.prototype.mediator=null;ac.prototype.initializeNotifier=function(a){var b,
c=this;ac.__super__.initializeNotifier.call(this,a);b=this.module.listNotificationPublications();null!=b&&(this.mediator=new puremvc.Mediator(this.facade.getModuleName()),this.mediator.listNotificationInterests=function(){return b},this.mediator.handleNotification=function(a){c.facade.sendNotification(a.getName(),a.getBody(),a.getType())})};ac.prototype.onRegister=function(){null!=this.mediator&&this.module.registerMediator(this.mediator)};ac.prototype.onRemove=function(){null!=this.mediator&&this.module.removeMediator(this.mediator)};
ac.prototype.listNotificationInterests=function(){return this.module.listNotificationInterests()};ac.prototype.handleNotification=function(a){this.module.sendNotification(a.getName(),a.getBody(),a.getType())};var Qb=function(){};Qb.SINGLE=/^\s*#{([^#{}]+)}\s*$/;Qb.TOKEN=/#{([^#}]*)}/g;Qb.RETURN="return ";Qb.EVENT="event";Qb.ELEMENT="element";Qb.PATHS="paths";Qb.eval=function(a,b,c,e,m){var d,h;if(null==a)return a;d=null!=(h=this.SINGLE.exec(a))?h[1]:null;return null!=d?this.evalBinding(d,b,c,e,m):
this.evalString(a,b,c,e,m)};Qb.evalString=function(a,b,c,e,m){return a.replace(this.TOKEN,this.replaceBinding.bind(this,b,c,e,m))};Qb.replaceBinding=function(a,b,c,e,m,d,h,f){return this.evalBinding(d,a,b,c,e)};Qb.evalBinding=function(a,b,c,e,m){var d;try{d=this.exec(a,b,c,e,m)}catch(h){d="#{"+a+"}"}return d};Qb.exec=function(a,b,c,e,m){return(new Function(this.EVENT,this.ELEMENT,this.PATHS,this.RETURN+a)).bind(b)(c,e,m)};var we=function(){we.__super__.constructor.call(this)};f(we,puremvc.SimpleCommand);
we.prototype.execute=function(a){a=a.getBody();a.player=this.facade.player||this.facade;this.facade.dispatchEvent(a)};var d={STARTUP:"startup",LOAD:"load",PAUSE_REQUEST:"pauserequest",TOGGLE_PLAY_PAUSE:"togglePlayPause",CHANGE_PLAY_STATE:"chageplaystate",MEDIA_ELEMENT_CHANGE:"mediaelementchange",HIDDEN_CHANGE:"hiddenchange",TOGGLE_FULL_SCREEN:"toggleFullScreen",CHANGE_DISPLAY_STATE:"chageDisplayState",DISPLAY_STATE_CHANGE:"displayStateChange",DISABLE_FULL_SCREEN:"disableFullScreen",ENABLE_FULL_SCREEN:"enableFullScreen",
TOGGLE_ACTIVE:"toggleActive",CHANGE_ACTIVE_STATE:"changeactivestate",ACTIVE_STATE_CHANGE:"activestatechange",CHANGE_MEDIA:"changeMedia",SET_MEDIA:"setmedia",MEDIA_VALIDATED:"mediavalidated",UPDATE_DATA_BINDINGS:"updatedatabindings",CHANGE_VOLUME:"changevolume",CHANGE_MUTED:"changemuted",TOGGLE_MUTED:"togglemuted",SEEK:"seek",CHANGE_DURATION:"changeduration",CHANGE_AUTOPLAY:"changeAutoplay",CHANGE_LOOP:"changeLoop",PLAYBACK_CORE_CHANGE:"playbackCoreChange",START:"start",END:"end",REPLAY:"replay",REGISTER_PLUGIN:"registerPlugin",
REGISTER_PLUGINS:"registerPlugins",PLUGIN_REGISTERED:"pluginRegistered",ADD_LAYER:"addLayer",REMOVE_LAYER:"removeLayer",ADD_OVERLAY:"addOverlay",REMOVE_OVERLAY:"removeOverlay",ADD_CONTROL:"addControl",REMOVE_CONTROL:"removeControl",ADD_CONTROL_STATE:"addControlState",REMOVE_CONTROL_STATE:"removeControlState",ADD_APPLICATION_STATE:"addApplicationState",REMOVE_APPLICATION_STATE:"removeApplicationState",DISPATCH_EVENT:"dispatchEvent",CHANGE_PARAMS:"changeParams",ADD_CUE_POINTS:"addCuePoints",REMOVE_CUE_POINTS:"removeCuePoints",
INITIALIZED:"initialized",REGISTER_PLAYBACK_CORE:"registerPlaybackCore",REMOVE_PLAYBACK_CORE:"removePlaybackCore",DISPLAY_TIME:"displaytime",IS_USER_ACTIVE:"isUserActive",CHANGE_PLAYBACK_TARGET:"changeplaybacktarget",LOCK:"lock",FRAGMENT_LOAD_START:"fragmentloadstart",FRAGMENT_LOADED:"fragmentloaded",CHANGE_CONTENT:"changecontent",ENABLE_VIDEO_EVENTS:"enablevideoevents",DISABLE_VIDEO_EVENTS:"disablevideoevents",HAS_POST_CONTENT:"haspostcontent",init:function(){var a,b;for(a in Events)b=Events[a],
"values"!==a&&"init"!==a&&(this[a]=b)}};d.init();var xc=function(a){var b,c;null==a&&(a={});a=g.override(xc.defaults,a);!0===/amp\-debug\=true/.test(location.search.toLowerCase())&&(a.debug=!0);a.mode=g.getPlaybackMode(a.mode);a.version=n.getVersion();for(b in a)c=a[b],this[b]=c};xc.create=function(a){return new xc(a)};xc.defaults={paths:{player:"../amp.premier/",resources:"../resources/"},resources:[{src:"#{paths.player}amp.premier.css",type:"text/css"}],rules:{android_4_gets_m3u8:{regexp:"Android 4"}},
autoplay:!0,playsinline:!1,loop:!1,target:"_blank",domain:"akamai.com",fullscreen:{},controls:{},contextmenu:{},volumepanel:{direction:"vertical"},captioning:{},playoverlay:{},hls:{resources:[{type:"text/javascript",src:"#{paths.resources}js/hls.min.js",debug:"#{paths.resources}js/hls.js"}],quality:{startLevel:-1},data:{enableWorker:!0,enableSoftwareAES:!0}},dash:{resources:[{type:"text/javascript",src:"//cdn.dashjs.org/v2.1.1/dash.all.min.js",debug:"//cdn.dashjs.org/v2.1.1/dash.all.debug.js"}],buffer:1},
flash:{swf:"#{paths.player}AkamaiPremierPlayer.swf",debug:"#{paths.player}AkamaiPremierPlayer-debug.swf",expressInstallSWF:"#{paths.player}playerProductInstall.swf","static":{enabled:!1,swf:"#{paths.player}AkamaiPremierPlayer-static.swf",debug:"#{paths.player}AkamaiPremierPlayer-static-debug.swf"},vars:{core_player_name:"amp.premier",mbr_starting_index:2,use_last_known_bitrate:!1,use_netsession_client:!1,netsession_install_prompt_frequency_secs:-1,
ad_server_timeout:20,ad_control_enabled:!0,dvr_enabled:1,branding_preload:"none",hds_live_low_latency:!0,fullscreen_enabled:!0,show_feature_bar:!1,suppress_events:"mediaPlayerViewInitialized",hds_fragment_retry_data_gap_threshold:20},view:{attributes:{skin:"#{paths.player}premier.assets.swf"},elements:{infoOverlay:{attributes:{style:"top: 0px;"}},adOptions:{attributes:{style:"backgroundColor: 'rgba(0, 0, 0, 1)'"},elements:{adChoices:{attributes:{target:"http://www.akamai.com/"}},adCountdown:{},
adCount:{}}},endSlate:{attributes:{enabled:"true",hideElements:"brandingLogo|viewAll"}},replayView:{},bufferingView:{}}}},locales:{en:{MSG_TIME_SEPARATOR:" / ",MSG_EMAIL_TO:"To",MSG_EMAIL_FROM:"From",MSG_EMAIL_VIDEO:"Email this video",MSG_EMAIL_MESSAGE_DEFAULT:"Check out this video from xxx",MSG_EMAIL_MESSAGE:"Message",MSG_EMAIL_ADDRESS_INVALID:"Invalid Email Address",MSG_EMAIL_MESSAGE_INVALID:"Please limit your message to 500 characters or less.",MSG_EMAIL_CHARACTERS_REMAINING_TEXT:" characters left",
MSG_EMAIL_SEND_FAILURE:"Message could not be sent.",MSG_EMAIL_SEND_SUCCESS_MESSAGE:"Your email has been sent!",MSG_SHARE_VIDEO_TEXT:"Share this video...",MSG_POST_TEXT:"Post",MSG_EMBED_TEXT:"Embed",MSG_LINK_TEXT:"Link",MSG_SHARE_CONNECT_FAILURE:"Unable to connect. Please try again.",MSG_SHARE_CONTENT_DISABLED:"Share and embed are disabled.",MSG_VERSION_TEXT:"Version",MSG_BUFFERING_TEXT:"buffering",MSG_CUSTOMIZE_CLIP_POINTS:"Customize the start and end point of the video.",MSG_PAUSE:"Pause",MSG_PLAY:"Play",
MSG_REWIND:"Rewind",MSG_PLAYBACK_RATE:"Playback Rate",MSG_FULLSCREEN:"Fullscreen",MSG_ENTER_FULLSCREEN:"Enter Fullscreen",MSG_EXIT_FULLSCREEN:"Exit Fullscreen",MSG_MUTE:"Mute",MSG_VOLUME:"Volume",MSG_REPLAY:"Replay",MSG_SETTINGS:"Settings",MSG_SHARE:"Share",MSG_PREVIEW:"Preview",MSG_CURRENT:"Current",MSG_SEEK_TO:"Seek to",MSG_LIVE:"LIVE",MSG_DEFAULT_ERROR_MESSAGE:"Sorry, we were unable to play the media you selected. Please try again, or select alternate media.",MSG_ERROR_PREFIX:"Error encountered:",
MSG_STREAM_NOT_FOUND:"Stream not found",MSG_CURRENT_WORKING_BANDWIDTH:"Current working bandwidth",MSG_CURRENT_BITRATE_PLAYING:"Current bitrate playing",MSG_MAX_BITRATE_AVAILABLE:"Max bitrate available",MSG_NOT_AVAILABLE:"Not Available",MSG_GO_LIVE:"GO LIVE",MSG_NEXT_VIDEO:"Video starts in: ",MSG_RECOMMENDED:"Recommended",MSG_VIEW_ALL:"View all ",MSG_VIDEO:" videos",MSG_CC:"CC",MSG_CC_TITLE:"Caption",MSG_CC_LANGUAGE:"Track :",MSG_CC_PRESETS:"Presets :",MSG_CC_FONT:"Font :",MSG_CC_EDGE:"Edge :",MSG_CC_SIZE:"Size :",
MSG_CC_SCROLL:"Scroll :",MSG_CC_COLOR:"Color :",MSG_CC_BACKGROUND:"Background :",MSG_CC_WINDOW:"Window :",MSG_CC_OPACITY:"Opacity :",MSG_CC_SHOW_ADVANCED:"Show Advanced Settings",MSG_CC_HIDE_ADVANCED:"Hide Advanced Settings",MSG_NEXT_AD:"Next ad starts in: ",MSG_CC_RESET:"Default",MSG_CC_CANCEL:"Cancel",MSG_CC_APPLY:"Apply",MSG_CC_PREVIEW_TEXT:"Lorem ipsum dolor sit amet..",MSG_EN:"English",MSG_ES:"Spanish",MSG_DE:"German",MSG_FR:"French",MSG_IT:"Italian",MSG_RU:"Russian",MSG_ZH:"Chinese",MSG_CHROMECAST_MESSAGE:"Video playing on another screen",
MSG_RETRY_MESSAGE:"Content not yet available, retrying in",MSG_SECONDS:"seconds",MSG_RETRY_FAILED:"Retry failed",MSG_RECOMMENDATIONS_TITLE:"Recommended",MSG_VIEWER_ID:"Viewer ID: "},es:{MSG_TIME_SEPARATOR:" / ",MSG_EMAIL_TO:"a",MSG_EMAIL_FROM:"de",MSG_EMAIL_VIDEO:"Enviar este v\u00eddeo",MSG_EMAIL_MESSAGE_DEFAULT:"Echa un vistazo a este video de xxx",MSG_EMAIL_MESSAGE:"mensaje",MSG_EMAIL_ADDRESS_INVALID:"Direcci\u00f3n de correo electr\u00f3nico no v\u00e1lida",MSG_EMAIL_MESSAGE_INVALID:"Por favor limite su mensaje a 500 caracteres o menos.",
MSG_EMAIL_CHARACTERS_REMAINING_TEXT:"personajes de la izquierda",MSG_EMAIL_SEND_FAILURE:"El mensaje no pudo ser enviado.",MSG_EMAIL_SEND_SUCCESS_MESSAGE:"Tu email ha sido enviado!",MSG_SHARE_VIDEO_TEXT:"Comparte este v\u00eddeo...",MSG_POST_TEXT:"enviar",MSG_EMBED_TEXT:"incrustar",MSG_LINK_TEXT:"enlace",MSG_SHARE_CONNECT_FAILURE:"No se puede conectar. Por favor, int\u00e9ntelo de nuevo.",MSG_SHARE_CONTENT_DISABLED:"Compartir e incrustar est\u00e1n desactivados.",MSG_VERSION_TEXT:"versi\u00f3n",MSG_BUFFERING_TEXT:"el almacenamiento en b\u00fafer",
MSG_CUSTOMIZE_CLIP_POINTS:"Personalizar el inicio y el punto final del video.",MSG_PAUSE:"Pausa",MSG_PLAY:"Reproducir",MSG_REWIND:"Retroceder",MSG_PLAYBACK_RATE:"Playback Rate",MSG_FULLSCREEN:"Pantalla completa",MSG_ENTER_FULLSCREEN:"Ir a pantalla completa",MSG_EXIT_FULLSCREEN:"Exit Fullscreen",MSG_MUTE:"Silencio",MSG_VOLUME:"Volumen",MSG_REPLAY:"Reproducir de nuevo",MSG_SETTINGS:"Configuraciones",MSG_SHARE:"Compartir",MSG_PREVIEW:"vista previa",MSG_CURRENT:"corriente",MSG_SEEK_TO:"Tratar de",MSG_LIVE:"EN VIVO",
MSG_DEFAULT_ERROR_MESSAGE:"Lo sentimos, no hemos podido jugar los medios de comunicaci\u00f3n seleccionados. Por favor, int\u00e9ntelo de nuevo, o seleccionar los medios de comunicaci\u00f3n alternativos.",MSG_ERROR_PREFIX:"Se produjo un error:",MSG_STREAM_NOT_FOUND:"Stream que no se encuentra",MSG_CURRENT_WORKING_BANDWIDTH:"Ancho de banda actual de trabajo",MSG_CURRENT_BITRATE_PLAYING:"Tasa de bits de reproducci\u00f3n actual",MSG_MAX_BITRATE_AVAILABLE:"Tasa de bits m\u00e1xima disponible",MSG_NOT_AVAILABLE:"No est\u00e1 disponible",
MSG_GO_LIVE:"IR A VIVIR",MSG_NEXT_VIDEO:"El pr\u00f3ximo video comienza en: ",MSG_RECOMMENDED:"Recomendado",MSG_CC:"CC",MSG_VIEW_ALL:"ver todo ",MSG_VIDEO:" v\u00eddeos.",MSG_EN:"Ingl\u00e9s",MSG_ES:"Espa\u00f1ol",MSG_DE:"Alem\u00e1n",MSG_FR:"Franc\u00e9s",MSG_IT:"Italiano",MSG_RU:"Ruso",MSG_ZH:"Chino",MSG_RETRY_MESSAGE:"Content not yet available, retrying in",MSG_SECONDS:"seconds",MSG_RETRY_FAILED:"Retry failed",MSG_RECOMMENDATIONS_TITLE:"Recomendado",MSG_VIEWER_ID:"Viewer ID: "}}};var Bd=function(){};
Bd.prototype.data=null;Bd.prototype.value=null;Bd.prototype.source=null;Bd.prototype.parse=function(a){};Bd.prototype.compile=function(a,b){};var yc=function(a){null!=a&&this.parse(a)};f(yc,Bd);yc.prototype.data=null;yc.prototype.value=null;yc.prototype.source=null;yc.prototype.parse=function(a){return a instanceof Array?new $d(a):a instanceof Object?new id(a):new zc(a)};var wa={AUTHORIZATION_FAILED:"authorizationfailed",AUTHORIZE:"authorize",AUTHORIZED:"authorized"},l=function(a,b,c){var e;this.target=
a;this.type=b;this.handler=c;this.trigger=vi(this.trigger,this);l.instances.push(this);this.types=[];(e=this.type,0<=ve.call(l.EVENTS,e))?g.isTouchDevice()?(this.types.push(l.TOUCH_EVENTS[this.type]),this.type===l.TOUCH_EVENTS[1]&&this.types.push(l.TOUCH_EVENTS[4])):this.types.push(l.MOUSE_EVENTS[this.type]):this.type instanceof Array?this.types=this.type:this.types.push(this.type);this.bind()};l.PRESS=0;l.RELEASE=1;l.MOVE=2;l.CLICK=3;l.CONTEXTMENU=4;l.HOVER=5;l.HOVEROUT=6;l.EVENTS=[l.PRESS,l.RELEASE,
l.MOVE,l.CLICK,l.CONTEXTMENU,l.HOVER,l.HOVEROUT];l.MOUSE_EVENTS="mousedown mouseup mousemove click contextmenu mouseover mouseout".split(" ");l.TOUCH_EVENTS=["touchstart","touchend","touchmove","click","touchcancel"];l.instances=[];l.create=function(a,b,c){return new l(a,b,c)};l.bind=function(a,b){var c,e,m,d;d=l.instances;c=e=0;for(m=d.length;e<m;c=++e)c=d[c],c.target===a&&(null!=b&&c.type!==b||c.bind())};l.unbind=function(a,b){var c,e,m,d;d=l.instances;c=e=0;for(m=d.length;e<m;c=++e)c=d[c],c.target===
a&&(null!=b&&c.type!==b||c.unbind())};l.clear=function(a,b){var c,e,m,d,h;h=l.instances;c=m=0;for(d=h.length;m<d;c=++m)e=h[c],(null!=e?e.target:void 0)!==a||null!=b&&e.type!==b||(e.clear(),l.instances.splice(c,1))};l.prototype.types=null;l.prototype.bind=function(){var a,b,c,e;e=this.types;b=0;for(c=e.length;b<c;b++)a=e[b],null!=this.target.addEventListener?this.target.addEventListener(a,this.trigger,!1):null!=this.target.attachEvent&&this.target.attachEvent("on"+a,this.trigger)};l.prototype.unbind=
function(){var a,b,c,e;e=this.types;b=0;for(c=e.length;b<c;b++)a=e[b],null!=this.target.removeEventListener?this.target.removeEventListener(a,this.trigger):null!=this.target.attachEvent&&this.target.removeEvent("on"+a,this.trigger)};l.prototype.clear=function(){this.unbind();this.types=this.type=this.handler=this.target=null};l.prototype.trigger=function(a){this.handler(a)};var ca=function(a){this.defaults=xc.defaults;ca.__super__.constructor.call(this,a)};f(ca,v);ca.NAME=v.NAME;ca.prototype.getContextName=
function(){return"paths"};ca.prototype.getContextData=function(){return this.getPaths()};ca.prototype.onRegister=function(){this.facade.retrieveProxy(Ha.NAME).registerContext(this)};ca.prototype.setData=function(a){null!=a.rules&&g.mergeRules(a.rules);ca.__super__.setData.call(this,a);return a};ca.prototype.getPlaysInLine=function(){return this.data.playsinline};ca.prototype.getAutoplay=function(){return this.data.autoplay};ca.prototype.setAutoplay=function(a){return this.data.autoplay=a};ca.prototype.getLoop=
function(){return this.data.loop};ca.prototype.setLoop=function(a){return this.data.loop=a};ca.prototype.getEndSlate=function(){return this.data.endslate};ca.prototype.setEndSlate=function(a){return this.data.endslate=a};ca.prototype.getDomain=function(){return this.data.domain};ca.prototype.setDomain=function(a){return this.data.domain=a};ca.prototype.getTarget=function(){return this.data.target};ca.prototype.setTarget=function(a){return this.data.target=a};ca.prototype.getName=function(){return this.data.name};
ca.prototype.setName=function(a){return this.data.name=a};ca.prototype.getPaths=function(){return this.data.paths};ca.prototype.setPaths=function(a){return this.data.paths=a};ca.prototype.getVersion=function(){return this.data.version};ca.prototype.getControls=function(){return this.data.controls};ca.prototype.setControls=function(a){return this.data.controls=a};ca.prototype.getFullscreen=function(){return this.data.fullscreen||{}};ca.prototype.setFullscreen=function(a){return this.data.fullscreen=
a};var Cd=function(){Cd.__super__.constructor.call(this)};f(Cd,xa);Cd.prototype.playbackCoreName="audio";Cd.prototype.onRegister=function(){var a;a=new dc("html5","audio");this.sendNotification(d.PLAYBACK_CORE_CHANGE,a)};Cd.prototype.onRemove=function(){this.facade.createMediaElement()};Cd.prototype.canPlayType=function(a){return/audio/.test(a)?"maybe":""};var $d=function(a){$d.__super__.constructor.call(this,a)};f($d,yc);$d.prototype.parse=function(a){var b,c,e,m;this.data=[];b=e=0;for(m=a.length;e<
m;b=++e)c=a[b],this.data[b]=$d.__super__.parse.call(this,c);return this.data};$d.prototype.compile=function(a,b){var c,e,m,d,h;null==a&&(a={});null==b&&(b=!1);this.value=[];h=this.data;c=m=0;for(d=h.length;m<d;c=++m){e=h[c];try{this.value[c]=e.compile(a,b)}catch(f){this.value[c]=null,b||ha.error(f)}}return this.value};var Qa=function(){Qa.__super__.constructor.call(this)};f(Qa,xa);Qa.prototype.playbackCoreName="dvr";Qa.prototype.interval=null;Qa.prototype.ondurationchange=function(a){this.updateDuration()};
Qa.prototype.ontimeupdate=function(a){this.updateCurrentTime()};Qa.prototype.onplay=function(a){this.stopTimer();Qa.__super__.onplay.call(this,a)};Qa.prototype.onplaying=function(a){this.stopTimer();Qa.__super__.onplaying.call(this,a)};Qa.prototype.onpause=function(a){this.startTimer();Qa.__super__.onpause.call(this,a)};Qa.prototype.canPlayTemporalType=function(a){return"dvr"===a};Qa.prototype.seek=function(a){null==a&&(a=this.data.currentTime);this.getMediaElement().currentTime=a+this.getMediaElement().seekable.start(0)};
Qa.prototype.updateCurrentTime=function(){var a,b;b=this.getMediaElement().seekable;0!==b.length&&(a=this.getMediaElement().currentTime,this.data.currentTime=a-b.start(0),this.sendNotification(d.TIME_UPDATE,this.data.currentTime),this.mediaProxy.setIsLive(a>=b.end(0)))};Qa.prototype.updateDuration=function(){var a;a=this.getMediaElement().seekable;0!==a.length&&(this.data.duration=a.end(0)-a.start(0),this.sendNotification(d.CHANGE_DURATION,this.data.duration))};Qa.prototype.startTimer=function(){this.interval=
setInterval(this.updateCurrentTime.bind(this),1E3)};Qa.prototype.stopTimer=function(){null!=this.interval&&(clearInterval(this.interval),this.interval=null,this.updateCurrentTime())};var Ac=function(){Ac.__super__.constructor.call(this);null==this.contextName&&(this.contextName=this.constructor.NAME)};f(Ac,puremvc.Proxy);Ac.prototype.contextName=null;Ac.prototype.contextData=null;Ac.prototype.onRegister=function(){var a;null!=this.getContextName()&&(a=this.facade.player||this.facade,a=a.retrieveProxy(Ha.NAME),
a.registerContext(this))};Ac.prototype.getContextName=function(){return this.contextName};Ac.prototype.getContextData=function(){return this.contextData};var ba=function(a,b){this.defaultPlaybackCore=a;this.getPlaybackOrder=b;ba.__super__.constructor.call(this);this.playbackCoreMap=[]};f(ba,Ac);ba.NAME="PlayerProxy";ba.prototype.contextName="player";ba.prototype.getPlaybackOrder=null;ba.prototype.playbackCoreMap=null;ba.prototype.defaultPlaybackCore=null;ba.prototype.activePlaybackCore=null;ba.prototype.onRegister=
function(){ba.__super__.onRegister.call(this);this.registerPlaybackCore(new Qa);this.registerPlaybackCore(this.defaultPlaybackCore);this.registerPlaybackCore(new Cd);this.activePlaybackCore=this.defaultPlaybackCore};ba.prototype.ready=function(){var a;a="function"===typeof this.getPlaybackOrder?this.getPlaybackOrder(this.playbackCoreMap.map(function(a){return a.getPlaybackCoreName()})):void 0;null!=a&&(this.playbackCoreMap=this.playbackCoreMap.sort(function(b,c){b=a.indexOf(b.getPlaybackCoreName());
c=a.indexOf(c.getPlaybackCoreName());return b===c?0:-1===b&&-1!==c?1:-1!==b&&-1===c?-1:b-c}))};ba.prototype.getActivePlaybackCore=function(){return this.activePlaybackCore};ba.prototype.registerPlaybackCore=function(a){var b;b=a.getPlaybackCoreName();null==a||this.playbackCoreMap.some(function(a){return a.getPlaybackCoreName()===b})||this.playbackCoreMap.push(a)};ba.prototype.retrievePlaybackCore=function(a){var b,c,e,m;m=this.playbackCoreMap;c=0;for(e=m.length;c<e;c++)if(b=m[c],b.getPlaybackCoreName()===
a)return b};ba.prototype.removePlaybackCore=function(a){var b;a=this.retrievePlaybackCore(a);if(null==a)return null;b=this.playbackCoreMap.indexOf(a);this.playbackCoreMap.splice(b,1);return a};ba.prototype.setPlaybackCore=function(a){var b,c,e,m,d;d=this.playbackCoreMap;e=0;for(m=d.length;e<m;e++)if(b=d[e],!0===b.canPlayTemporalType(a.temporalType)&&""!==b.canPlayType(a.type)){c=b;break}b=this.facade.retrieveProxy(r.NAME);b!==c&&("function"===typeof b.destroy&&b.destroy(),this.facade.removeProxy(r.NAME),
this.facade.registerProxy(c),c.setData(b.getData()));this.activePlaybackCore=c;return a};ba.prototype.canPlayType=function(a){var b,c,e,m;m=this.playbackCoreMap;c=0;for(e=m.length;c<e;c++)if(b=m[c],b=b.canPlayType(a),""!==b)return b;return""};ba.prototype.getContextData=function(){var a,b,c,e;a=this.facade.retrieveProxy(ca.NAME);e=this.facade.retrieveProxy(r.NAME);c=this.facade.retrieveProxy(s.NAME);b=this.facade.getViewComponent();return{width:b.offsetWidth,height:b.offsetHeight,mode:"html5",autoplay:a.getAutoplay(),
domain:a.getDomain(),name:a.getName(),currentTime:e.getCurrentTime(),duration:e.getDuration(),version:a.getVersion(),timecode:{duration:g.formatTimecode(c.getDuration()),currentTime:g.formatTimecode(e.getCurrentTime())}}};var s=function(){this.data={metadata:{}};s.__super__.constructor.call(this)};f(s,Ac);s.NAME="MediaProxy";s.prototype.contextName="media";s.prototype.data=null;s.prototype.value=null;s.prototype.started=!1;s.prototype.authorized=!0;s.prototype.getContextData=function(){return{width:this.getWidth(),
height:this.getHeight(),title:this.getTitle(),description:this.getDescription(),src:this.getSrc(),duration:this.getDuration(),guid:this.getGUID(),isLive:this.getIsLive(),metadata:this.getMetadata(),temporalType:this.getTemporalType(),poster:this.getPoster(),category:this.getCategory(),scenes:this.getScenes()}};s.prototype.setData=function(a){this.data&&this.facade.getCurrentTime()<this.facade.getDuration()&&this.sendNotification(d.MEDIA_SEQUENCE_ABORTED);this.value=a;this.started=!1;this.data.autoplay=
a.autoplay;this.data.type=a.type;this.setIsLive(a.isLive);this.setTemporalType(a.temporalType||"vod");null!=a.source&&this.setSource(a.source);null!=a.src&&this.setSrc(a.src);this.data.title=a.title;null!=a.duration&&this.setDuration(a.duration);this.data.poster=a.poster;this.data.guid=a.guid;this.data.link=a.link;this.data.embed=a.embed;this.data.width=a.width;this.data.height=a.height;this.data.category=a.category;this.data.startTime=a.startTime;this.data.description=a.description;this.data.status=
a.status||{};this.data.category=a.category;this.data.metadata=a.metadata||{};this.data.authorization=a.authorization;null!=a.medium&&this.setMedium(a.medium);this.setPubDate(a.pubDate);this.setTrack(a.track);this.setScenes(a.scenes);this.setKeys(a.keys);return a};s.prototype.updateData=function(a){var b,c;for(b in a)c=a[b],b in this.data&&(this.data[b]=c)};s.prototype.getGUID=function(){return this.data.guid};s.prototype.setGUID=function(a){return this.data.guid=a};s.prototype.getLink=function(){return this.data.link};
s.prototype.setLint=function(a){return this.data.link=a};s.prototype.getStartTime=function(){return this.data.startTime||0};s.prototype.getEmbed=function(){return this.data.embed};s.prototype.setEmbed=function(a){return this.data.embed=a};s.prototype.getAutoplay=function(){return this.data.autoplay};s.prototype.setAutoplay=function(a){return this.data.autoplay=a};s.prototype.getPubDate=function(){return this.data.pubDate};s.prototype.setPubDate=function(a){return this.data.pubDate=a};s.prototype.getCategory=
function(){return this.data.category};s.prototype.setCategory=function(a){return this.data.category=a};s.prototype.getStatus=function(){return this.data.status};s.prototype.setStatus=function(a){return this.data.status=a};s.prototype.getSrc=function(){return this.facade.security.createURL(this.data.src)};s.prototype.setSrc=function(a){this.data.src=a;if(null!=this.data.src&&null==this.data.type)return this.setType(g.getMimeType(this.data.src))};s.prototype.getType=function(){return this.data.type};
s.prototype.setType=function(a){this.data.type=a;a=/audio/.test(this.data.type)?"audio":"video";return this.setMedium(a)};s.prototype.getMedium=function(){return this.data.medium};s.prototype.setMedium=function(a){if(a!==this.data.medium)return this.data.medium=a,this.facade.retrieveProxy(C.NAME).setMedium(a)};s.prototype.getMetadata=function(){return this.data.metadata};s.prototype.setMetadata=function(a){return this.data.metadata=a};s.prototype.getSource=function(){return this.data.source};s.prototype.setSource=
function(a){var b,c;if(!(null==a||1>a.length)){this.data.source=a;c=this.facade.retrieveProxy(ba.NAME)||this.facade;null!=c&&(b=g.selectSource(a,function(a){return c.canPlayType(a)}));if(null!=(null!=b?b.src:void 0)&&""!==b.src)return this.setSrc(b.src),this.setType(b.type);throw Error("No valid source could be found");}};s.prototype.getTrack=function(){return this.data.track};s.prototype.setTrack=function(a){return this.data.track=a};s.prototype.getTitle=function(){return this.data.title};s.prototype.setTitle=
function(a){return this.data.title=a};s.prototype.getWidth=function(){return this.data.width};s.prototype.setWidth=function(a){return this.data.width=a};s.prototype.getHeight=function(){return this.data.height};s.prototype.setHeight=function(a){return this.data.height=a};s.prototype.getDescription=function(){return this.data.description};s.prototype.setDescription=function(a){return this.data.description=a};s.prototype.getCategory=function(){return this.data.category};s.prototype.setCategory=function(a){return this.data.category=
a};s.prototype.getDuration=function(a){return this.data.duration};s.prototype.setDuration=function(a){var b;if(0!==a&&"live"!==this.value.temporalType&&(b=navigator.userAgent,1!==a||!/Android/.test(b)||/Android.*Chrome/.test(b)))return a!==this.data.duration&&(this.data.duration=a,this.sendNotification(d.DURATION_CHANGE,a)),Infinity===a&&this.setTemporalType("live"),a};s.prototype.getPoster=function(a){return this.data.poster};s.prototype.setPoster=function(a){return this.data.poster=a};s.prototype.getIsLive=
function(){return this.data.isLive};s.prototype.setIsLive=function(a){if(a!==this.data.isLive)return this.data.isLive=a,this.sendNotification(d.IS_LIVE,a),a};s.prototype.getTemporalType=function(){return this.data.temporalType||"vod"};s.prototype.setTemporalType=function(a){var b;a!==this.data.temporalType&&(b=this.data.temporalType,this.data.temporalType=a,this.sendNotification(d.TEMPORAL_TYPE_CHANGE,{previous:b,value:a}),this.setIsLive("live"===this.data.temporalType||"dvr"===this.data.temporalType))};
s.prototype.getScenes=function(){return this.data.scenes};s.prototype.setScenes=function(a){var b,c,e,m,d;if(null!=a){b=m=0;for(d=a.length;m<d;b=++m)c=a[b],c.start=isNaN(e=g.flattenTimecode(c.sceneStartTime))?0:e,c.end=isNaN(e=g.flattenTimecode(c.sceneEndTime))?0:e,c.title=c.sceneTitle||"",c.description=c.sceneDescription||"",c.position=b+1;this.data.scenes=a}};s.prototype.getScene=function(a){var b,c,e,m;if(null!=this.data.scenes)for(m=this.data.scenes,b=c=0,e=m.length;c<e;b=++c)if(b=m[b],b.start<=
a&&a<b.end)return b};s.prototype.setKeys=function(a){this.data.keys=a};s.prototype.getKeys=function(){return this.data.keys};var ua=function(){ua.__super__.constructor.call(this,this.constructor.NAME,{});this.setupHDN1()};f(ua,puremvc.Proxy);ua.NAME="SecurityProxy";ua.prototype.authorized=!0;ua.prototype.timeout=null;ua.prototype.setupHDN1=function(){var a=this;return window.retrieveToken=function(b,c){var e;try{a.facade.logger.debug("[AMP AUTH] HDN1: Token Requested",b,c),e=a.getToken(),null!=e?
a.facade.getMediaElement().tokenRetrievalSuccess("\x26primaryToken\x3d"+e):a.sendNotification(wa.AUTHORIZE)}catch(m){a.facade.logger.error("[AMP AUTH ERROR]: Token Retrival Error",m)}return!0}};ua.prototype.setMedia=function(a){this.setSession(null);this.setAuthorized("blocked"!==a.status.state);this.setAuthorization(a.authorization)};ua.prototype.authorize=function(a){this.setAuthorization(a);this.sendNotification(wa.AUTHORIZED,a)};ua.prototype.getAuthorization=function(){return this.data};ua.prototype.setAuthorization=
function(a){this.data=a||{};null!=this.data.expiration&&this.setExpiration(this.data.expiration);return a};ua.prototype.getKey=function(){return this.data.key};ua.prototype.setKey=function(a){return this.data.key=a};ua.prototype.getToken=function(){return this.data.token};ua.prototype.setToken=function(a){return this.data.token=a};ua.prototype.getExpiration=function(){return this.data.expiration};ua.prototype.setExpiration=function(a){this.data.expiration=a;this.data.expiration>Date.now()&&this.startTimeout();
return a};ua.prototype.startTimeout=function(){var a=this;this.timeout=setTimeout(function(){a.sendNotification(wa.AUTHORIZE,{media:a.facade.getMedia()})},this.getExpiration()-Date.now())};ua.prototype.stopTimeout=function(){clearTimeout(this.timeout)};ua.prototype.getSecret=function(){var a;if(null==this.data.token)return null;a="";null!=this.data.token&&(a=""+this.data.token);null!=this.data.key&&(a=""+this.data.key+"\x3d"+a);return a};ua.prototype.createURL=function(a){var b;b=this.getSecret();
null!=b&&(a+=/\?/.test(a)?"\x26":"?",a+=b);return a};ua.prototype.getAuthorized=function(){return this.authorized};ua.prototype.setAuthorized=function(a){this.stopTimeout();return this.authorized=a};ua.prototype.getSession=function(){return this.session};ua.prototype.setSession=function(a){return this.session=a};var Re=function(a){this.message=Re.MESSAGE+a};f(Re,Error);Re.MESSAGE="Tokenization Error: Could not find token value for: ";var ae=function(a){ae.__super__.constructor.call(this,a)};f(ae,
yc);ae.prototype.parse=function(a){return this.source=this.data=this.value=a};ae.prototype.compile=function(a,b){return this.value};var be=function(a){be.__super__.constructor.call(this,a)};f(be,yc);be.prototype.exec=null;be.prototype.parse=function(a){this.source=this.data=a;this.exec=new Function("context","var value; with(context){value \x3d "+this.data+";}return value;");return this.data};be.prototype.compile=function(a,b){null==a&&(a={});null==b&&(b=!1);if(null==this.exec)return this.value;try{this.value=
this.exec(a)}catch(c){if(this.value=null,!b)throw new Re(this.data);}return this.value};var zc=function(a){this.token=RegExp(this.tokenStart.source+"([^#]*)"+this.tokenEnd.source,"g");zc.__super__.constructor.call(this,a)};f(zc,yc);zc.prototype.exec=null;zc.prototype.tokenStart=/#{/;zc.prototype.tokenEnd=/}/;zc.prototype.token=null;zc.prototype.parse=function(a){var b,c,e,m,d,h;this.source=a;this.data=[];if(this.token.test(this.source)){m=[];c=null;a=this.source.replace(this.token,function(a,b,e,
d){m.push(b);c="\x3c\x3c\x3e\x3e";0<e&&e<d.length-a.length&&(c+="\x3c\x3c\x3e\x3e");return c});b=a.split("\x3c\x3c\x3e\x3e");d=e=0;for(h=b.length;d<h;d++)a=b[d],""===a&&m[e]?(this.data.push(new be(m[e])),e++):""!==a&&this.data.push(new ae(a));1===this.data.length&&(this.data=this.data[0])}else this.data=new ae(a);return this.data};zc.prototype.compile=function(a,b){var c,e,m,d;null==a&&(a={});null==b&&(b=!1);if(null==this.data)return this.value;try{if(this.data instanceof Bd)this.value=this.data.compile(a,
b);else for(this.value="",d=this.data,e=0,m=d.length;e<m;e++)c=d[e],this.value+=c.compile(a,b)}catch(h){if(this.value=null,!b)throw new Re(this.source);}return this.value};var id=function(a){id.__super__.constructor.call(this,a)};f(id,yc);id.prototype.parse=function(a){var b,c;this.source=a;this.data={};for(b in a)c=a[b],this.data[b]=id.__super__.parse.call(this,c);return this.data};id.prototype.compile=function(a,b){var c,e,m;null==a&&(a={});null==b&&(b=!1);this.value={};m=this.data;for(c in m){e=
m[c];try{this.value[c]=e.compile(a,b)}catch(d){this.value[c]=null,ha.error(d)}}return this.value};var ia={NORMAL:"normal",FULL_SCREEN:"full-screen"},Aa=function(a){Aa.__super__.constructor.call(this,a)};f(Aa,v);Aa.NAME=v.NAME;Aa.prototype.bindings=null;Aa.prototype.configurationName=null;Aa.prototype.configurationData=null;Aa.prototype.contextName=null;Aa.prototype.contextData=null;Aa.prototype.value=null;Aa.prototype.getConfigurationName=function(){return this.configurationName};Aa.prototype.getConfigurationData=
function(){return this.configurationData.value||{}};Aa.prototype.getContextName=function(){return this.contextName};Aa.prototype.getContextData=function(){return this.contextData};Aa.prototype.onRegister=function(){var a;a=this.facade.player||this.facade;null==this.getConfigurationName()&&(this.configurationName=this.facade.moduleName);this.bindings=a.retrieveProxy(Ha.NAME);this.bindings.registerConfiguration(this);null!=this.getContextName()&&this.bindings.registerContext(this)};Aa.prototype.setData=
function(a){var b,c,e;null==a&&(a={});this.data={};e=this.getDefaults();for(b in e)c=e[b],this.data[b]=b in a?a[b]:c;this.configurationData=new id(this.data);return this.data};Aa.prototype.getValue=function(a){var b;this.bindings.update();this.value[a]=null!=(b=this.configurationData.data[a])?b.compile(this.bindings.getData()):void 0;return this.value[a]};Aa.prototype.compile=function(a,b){null==b&&(b=!1);if(null==this.configurationData)return null;null==a&&(a=this.bindings.getData());null!=this.contextName&&
null!=this.contextData&&(a=g.clone(a),a[this.contextName]=this.contextData);this.configurationData.compile(a,b);return this.value=this.configurationData.value};var Qc=function(a){Qc.__super__.constructor.call(this,a)};f(Qc,Aa);Qc.NAME="ParamsProxy";Qc.prototype.defaults={};Qc.prototype.configurationName="params";Qc.prototype.setData=function(a){var b,c;this.data=(null!=(c=this.configurationData)?c.source:void 0)||{};for(b in a)this.data[b]=a[b];this.configurationData=new id(this.data);return this.data};
var P={READY:"ready",PLAYING:"playing",PAUSED:"paused",ENDED:"ended",LOADING:"loading",WAITING:"waiting",ERROR:"error"},Ha=function(){Ha.__super__.constructor.call(this,this.constructor.NAME,{});this.data={};this.contextMap={};this.configurationMap={}};f(Ha,puremvc.Proxy);Ha.NAME="DataBindingProxy";Ha.prototype.contextMap=null;Ha.prototype.configurationMap=null;Ha.prototype.paramsProxy=null;Ha.prototype.initialize=function(){this.paramsProxy=this.facade.retrieveProxy(Qc.NAME);this.update()};Ha.prototype.registerContext=
function(a){null!=a&&(this.contextMap[a.getContextName()]=a)};Ha.prototype.retrieveContext=function(a){return this.contextMap[a]};Ha.prototype.removeContext=function(a){var b;b=this.contextMap[a];delete this.contextMap[a];return b};Ha.prototype.registerConfiguration=function(a){null!=a&&(this.configurationMap[a.getConfigurationName()]=a,a.compile(this.context,!0))};Ha.prototype.retrieveConfiguration=function(a){return this.configurationMap[a]};Ha.prototype.removeConfiguration=function(a){var b;b=
this.configurationMap[a];delete this.configurationMap[a];return b};Ha.prototype.evaluateBinding=function(a){this.update();a=new zc(a);a.compile(this.data);return a.value};Ha.prototype.update=function(a){var b,c,e,m;this.data.now=Date.now();m=this.contextMap;for(e in m)b=m[e],-1!==(null!=a?"function"===typeof a.indexOf?a.indexOf(e):void 0:void 0)&&(this.data[e]=b.getContextData());this.paramsProxy.compile(this.data);b=this.paramsProxy.value;for(c in b)a=b[c],this.data[c]=a;return this.data};Ha.prototype.compile=
function(a,b){var c,e,m,d,h;null==b&&(b=!1);this.update(a);e=g.clone(this.data);d=this.paramsProxy.getConfigurationName();h=this.configurationMap;for(m in h)c=h[m],m!==d&&c.compile(e,b)};var qi={FLASH:"flash",HTML:"html"},ib={ACTIVE:"active",INACTIVE:"inactive"},xb={REGISTER_PLUGINS:"registerPlugins",PLUGIN_REGISTERED:"pluginRegistered",PLUGINS_INITIALIZED:"pluginsinitialized"},C=function(){C.__super__.constructor.call(this);this.device=g.getDevice()};f(C,puremvc.Proxy);C.NAME="ApplicationStateProxy";
C.prototype.displayState=null;C.prototype.playState=null;C.prototype.renderMode=null;C.prototype.activeState=null;C.prototype.seeking=!1;C.prototype.waiting=!1;C.prototype.isUserActive=!1;C.prototype.device=null;C.prototype.volume=1;C.prototype.playbackTarget="amp";C.prototype.hasPostContent=!1;C.prototype.locked=!1;C.prototype.mediaElement=null;C.prototype.hidden=!1;C.prototype.pausedBeforeSeek=!1;C.prototype.ended=!1;C.prototype.getHasPostContent=function(){return this.hasPostContent};C.prototype.setHasPostContent=
function(a){this.hasPostContent=a};C.prototype.getEnded=function(){return this.ended};C.prototype.setEnded=function(a){this.ended=a;!0===this.ended&&!0===this.seeking&&(this.seeking=!1)};C.prototype.getDisplayState=function(){return this.displayState};C.prototype.setDisplayState=function(a){var b;a!==this.displayState&&(b=this.displayState,this.displayState=a,this.sendNotification(d.DISPLAY_STATE_CHANGE,{previous:b,value:this.displayState}))};C.prototype.getPlayState=function(){return this.playState};
C.prototype.setPlayState=function(a){var b;if(a!==this.playState)switch(b=this.playState,this.playState=a,this.sendNotification(d.PLAY_STATE_CHANGE,{previous:b,value:this.playState}),a){case P.PLAYING:this.sendNotification(d.DISPATCH_EVENT,new V("playing"));break;case P.ENDED:this.pausedBeforeSeek=!1}};C.prototype.getDevice=function(){return this.device};C.prototype.getSeeking=function(){return this.seeking};C.prototype.setSeeking=function(a){a!==this.seeking&&(this.seeking=a,!1===this.seeking&&this.playState===
P.PAUSED&&!0===this.getWaiting()&&this.setWaiting(!1))};C.prototype.getWaiting=function(){return this.waiting};C.prototype.setWaiting=function(a){var b,c,e=this;a!==this.waiting&&(this.waiting=a,a=!0===this.waiting?d.ADD_APPLICATION_STATE:d.REMOVE_APPLICATION_STATE,this.sendNotification(a,P.WAITING),!0===this.waiting&&(c=this.facade.getMediaElement(),b=function(){c.removeEventListener("timeupdate",b);c.removeEventListener("playing",b);c.removeEventListener("ended",b);e.setWaiting(!1)},c.addEventListener("timeupdate",
b),c.addEventListener("playing",b),c.addEventListener("ended",b)))};C.prototype.getLocked=function(){return this.locked};C.prototype.setLocked=function(a){this.locked=a};C.prototype.getIsUserActive=function(){return this.isUserActive};C.prototype.setIsUserActive=function(a){a!==this.isUserActive&&(this.isUserActive=a)};C.prototype.getRenderMode=function(){return this.renderMode};C.prototype.setRenderMode=function(a){a!==this.renderMode&&(this.renderMode=a)};C.prototype.getMedium=function(){return this.medium};
C.prototype.setMedium=function(a){var b;a!==this.medium&&(b=null!=this.medium?"medium-"+this.medium:this.medium,this.medium=a,this.sendNotification(d.MEDIUM_CHANGE,{previous:b,value:"medium-"+this.medium}))};C.prototype.getVolume=function(){return this.volume};C.prototype.setVolume=function(a){if(a!==this.volume)return this.volume=a};C.prototype.getPlaybackTarget=function(){return this.playbackTarget};C.prototype.setPlaybackTarget=function(a){var b;a!==this.playbackTarget&&(b=this.playbackTarget,
this.playbackTarget=a,this.sendNotification(d.PLAYBACK_TARGET_CHANGE,{previous:b,value:this.playbackTarget}))};C.prototype.getActiveState=function(){return this.activeState};C.prototype.setActiveState=function(a){var b;a!==this.activeState&&(b=this.activeState,this.activeState=a,this.sendNotification(d.ACTIVE_STATE_CHANGE,{previous:b,value:this.activeState}))};C.prototype.getMediaElement=function(){return this.mediaElement};C.prototype.setMediaElement=function(a){var b;a!==this.mediaElement&&(b=this.mediaElement,
this.mediaElement=a,this.sendNotification(d.MEDIA_ELEMENT_CHANGE,{previous:b,value:this.mediaElement}))};C.prototype.getHidden=function(){return this.hidden};C.prototype.setHidden=function(a){var b;a!==this.hidden&&(b=this.hidden,this.hidden=a,this.sendNotification(d.HIDDEN_CHANGE,{previous:b,value:this.hidden}))};var Se=function(){Se.__super__.constructor.call(this)};f(Se,s);Se.NAME="MediaProxy";Se.prototype.setSource=function(a){if(!(null==a||1>a.length))return a=a.filter(function(a){return"external"===
a.type}),Se.__super__.setSource.call(this,a)};var Za=function(){Za.__super__.constructor.call(this)};f(Za,puremvc.Proxy);Za.NAME="PlaybackProxy";Za.prototype.src=null;Za.prototype.getPlaybackCoreName=function(){return"external"};Za.prototype.canPlayType=function(a){return"external"===a};Za.prototype.canPlayTemporalType=function(a){return!0};Za.prototype.getSrc=function(){return this.facade.mediaProxy.getSrc()};Za.prototype.play=function(){window.open(this.getSrc(),"_blank")};Za.prototype.load=function(){};
Za.prototype.setVolume=function(){};Za.prototype.pause=function(){};Za.prototype.setEnabled=function(){};Za.prototype.getCurrentTime=function(){return 0};Za.prototype.setCurrentTime=function(a){};Za.prototype.getDuration=function(){return 0};var X={TOGGLE_PLAY_PAUSE:"usertogglePlayPause",PLAY:"userplay",PAUSE:"userpause",SEEK:"userseek"},Q=function(a){Q.__super__.constructor.call(this,a)};f(Q,Aa);Q.NAME=v.NAME;Q.prototype.enabled=!0;Q.prototype.plugin=null;Q.prototype.appState=null;Q.prototype.getDefaults=
function(){var a;a=Q.__super__.getDefaults.call(this);null==a.debug&&(a.debug=null);return a};Q.prototype.initializeNotifier=function(a){Q.__super__.initializeNotifier.call(this,a);this.appState=this.facade.player.appState};Q.prototype.getMediaElement=function(){return this.facade.player.getMediaElement()};Q.prototype.setEnabled=function(a){return this.enabled=a};Q.prototype.getEnabled=function(){return this.enabled};Q.prototype.getDebug=function(){return null!=this.value.debug?this.value.debug:!0===
this.facade.player.getConfig().debug};Q.prototype.createPlugin=function(){};Q.prototype.initialize=function(){this.plugin=this.createPlugin()};Q.prototype.error=function(a){this.facade.logger.error("[AMP "+this.facade.getModuleName().toUpperCase()+" Error]",a)};var bc={PREFIX:"akamai-"},L=function(){L.__super__.constructor.call(this)};f(L,M);L.prototype.player=null;L.prototype.proxy=null;L.prototype.initialize=function(a,b){this.player=b;this.logger=this.player.logger;L.__super__.initialize.call(this,
a,b)};L.prototype.isAvailable=function(){return!0};L.prototype.loadModuleResources=function(){this.isAvailable()?L.__super__.loadModuleResources.call(this):this.resourcesLoaded()};L.prototype.resourcesLoaded=function(){if("function"===typeof this.oninitialized)this.oninitialized(this)};L.prototype.onRegister=function(){var a;this.isAvailable()&&(this.createFramework(),null!=(a=this.retrieveProxy(Q.NAME))&&"function"===typeof a.initialize&&a.initialize());this.sendNotification(xb.PLUGIN_REGISTERED,
this)};L.prototype.logEvent=function(a){var b;!0!==/(timeupdate|timeremaining)/.test(a.type)&&(b=this.player.getModuleName().toUpperCase()+" "+this.getModuleName().toUpperCase(),null!=a.dispatcher&&(b+=" "+a.dispatcher),this.logger.log("["+b+" EVENT] "+a.type,a))};L.prototype.listNotificationPublications=function(){var a,b;return[d.ADD_LAYER,d.REMOVE_LAYER,d.ADD_OVERLAY,d.REMOVE_OVERLAY,d.ADD_APPLICATION_STATE,d.REMOVE_APPLICATION_STATE,d.IS_USER_ACTIVE,d.PLAYBACK_CORE_CHANGE].concat(function(){var c;
c=[];for(a in xb)b=xb[a],c.push(b);return c}())};var Vd=function(){Vd.__super__.constructor.call(this)};f(Vd,K);Vd.prototype.execute=function(a){this.applicationState.setPlayState(a.getBody())};var Le=function(){Le.__super__.constructor.call(this)};f(Le,K);Le.prototype.execute=function(a){a=a.getBody();this.playback.setEnabled(!1);this.playback.pause();this.sendNotification(d.HAS_POST_CONTENT,!1);this.sendNotification(d.CHANGE_PLAY_STATE,P.READY);this.sendNotification(d.CHANGE_ACTIVE_STATE,ib.ACTIVE);
try{this.media.setData(a)}catch(b){this.sendNotification(d.ERROR,b.message)}this.sendNotification(d.UPDATE_DATA_BINDINGS)};var Ke=function(){Ke.__super__.constructor.call(this)};f(Ke,K);Ke.prototype.execute=function(a){a=a.getBody();this.applicationState.setEnded(!1);this.sendNotification(d.CHANGE_PLAY_STATE,P.READY);this.sendNotification(d.CHANGE_MEDIA,a);a=this.media.getData();this.security.setMedia(a);this.security.getAuthorized()?this.sendNotification(wa.AUTHORIZED,this.security.getAuthorization()):
this.sendNotification(wa.AUTHORIZE,{media:a})};var Ne=function(){Ne.__super__.constructor.call(this)};f(Ne,K);Ne.prototype.execute=function(a){a=a.getBody();this.media.getDuration()!==a&&this.media.setDuration(a)};var Yd=function(){Yd.__super__.constructor.call(this)};f(Yd,E);Yd.prototype.execute=function(a){var b;this.playback.destroy();b=this.playback.getMediaElement();l.clear(b);this.logger.error("[AMP ERROR]",a.getBody());this.sendNotification(d.CHANGE_PLAY_STATE,P.ERROR);Yd.__super__.execute.call(this,
a)};var Me=function(){Me.__super__.constructor.call(this)};f(Me,E);Me.prototype.execute=function(a){var b,c;b=null!=(c=this.facade.config)?c.volume:void 0;null!=b&&this.sendNotification(d.CHANGE_VOLUME,b);this.playerCore.ready();!0===this.facade.config.autoplay&&this.sendNotification(d.ADD_APPLICATION_STATE,"autoplay");this.sendNotification(d.CHANGE_DISPLAY_STATE,ia.NORMAL);this.sendNotification(d.CHANGE_PLAY_STATE,P.READY);this.sendNotification(d.CHANGE_ACTIVE_STATE,ib.ACTIVE);this.dispatchEventAfterCommand(a)};
var Xd=function(){Xd.__super__.constructor.call(this)};f(Xd,K);Xd.prototype.execute=function(a){a=a.getBody()||{};this.bindings.compile(a.contexts,a.suppressErrors)};var Oe=function(){Oe.__super__.constructor.call(this)};f(Oe,K);Oe.prototype.execute=function(a){this.params.setData(a.getBody());this.sendNotification(d.UPDATE_DATA_BINDINGS,{suppressErrors:!0})};var Wd=function(){Wd.__super__.constructor.call(this)};f(Wd,E);Wd.prototype.execute=function(a){var b;b=a.getBody();this.playerCore.setPlaybackCore(b);
this.playback.reset();this.playback.setCurrentTime(b.startTime||0);Wd.__super__.execute.call(this,a)};var ec=function(){ec.__super__.constructor.call(this)};f(ec,Gb);ec.prototype.componentName="overlays";ec.NAME="OverlayLayerMediator";ec.prototype.createMediatorName=function(){return ec.NAME};ec.prototype.listNotificationInterests=function(){return[d.ADD_OVERLAY,d.REMOVE_OVERLAY]};ec.prototype.handleNotification=function(a){var b;b=a.getName();a=a.getBody();switch(b){case d.ADD_OVERLAY:this.viewComponent.appendChild(a);
break;case d.REMOVE_OVERLAY:this.viewComponent.removeChild(a)}};var nb=function(){this.plugins=[];this.registered=0;nb.__super__.constructor.call(this,this.constructor.NAME,{})};f(nb,puremvc.Mediator);nb.NAME="PluginAdapter";nb.prototype.plugins=null;nb.prototype.registered=null;nb.prototype.onRegister=function(){return nb.__super__.onRegister.call(this)};nb.prototype.listNotificationInterests=function(){return[xb.REGISTER_PLUGINS,xb.PLUGIN_REGISTERED]};nb.prototype.handleNotification=function(a){var b,
c,e,m,d,h,f,z;d=a.getName();a=a.getBody();switch(d){case xb.REGISTER_PLUGINS:f=this.facade.getPlayerType();z=n.plugins;for(m in z)if(d=z[m],m in a&&(e=a[m],null!=e&&!1!==e.enabled))if(b=d[f],null==b)this.facade.logger.debug("[AMP] Plugin could not be found: "+m);else try{h=new b,h.oninitialized=this.onplugininitialized.bind(this,m),h.onerror=this.onpluginerror.bind(this,m),c=h.initialize.bind(h,e,this.facade),this.plugins.push(c)}catch(g){this.logger.error("[AMP] Plugin could not be created: "+m+
". "+g)}a=a.plugins||{};for(m in a)e=a[m],null!=e&&!1!==e.enabled&&(c=function(a,c,m,d,h){return n.loadResources(e.resources).then(function(){b=n.plugins[m][f];null==b&&h("[AMP] Plugin could not be found: "+m);return b(a,c,m)}).then(d)["catch"](h)},this.plugins.push(c.bind(null,this.facade,e,m,this.onpluginregistered.bind(this,m),this.onpluginerror.bind(this,m))));this.plugins.forEach(function(a){return a()});break;case xb.PLUGIN_REGISTERED:c="function"===typeof a.getFeatureName?a.getFeatureName():
void 0,null!=c&&(this.facade[c]=a),this.onpluginregistered(a.getModuleName(),a)}};nb.prototype.initializedCheck=function(){this.registered===this.plugins.length&&this.sendNotification(xb.PLUGINS_INITIALIZED,this.plugins)};nb.prototype.onplugininitialized=function(a,b){b.oninitialized=null;b.onerror=null;this.facade.registerModule(b)};nb.prototype.onpluginerror=function(a,b){this.registered++;this.facade.logger.error("[AMP] Plugin could not be registered: "+a);this.facade.logger.error(b);this.initializedCheck()};
nb.prototype.onpluginregistered=function(a,b){this.registered++;this.facade.logger.debug("[AMP] Plugin registered: "+a);this.facade[a]=b;this.initializedCheck()};var ya=function(a){this.element=a};ya.prototype.element=null;ya.prototype.prefix=bc.PREFIX;ya.prototype.contains=function(a){return this.constructor.contains(a,this.element,this.prefix)};ya.prototype.add=function(a){this.constructor.add(a,this.element,this.prefix)};ya.prototype.remove=function(a){this.constructor.remove(a,this.element,this.prefix)};
ya.prototype.toggle=function(a){return this.constructor.contains(a,this.element,this.prefix)};ya.contains=function(a,b,c){var e;null==c&&(c="");a=c+a;return null!=(null!=(e=b.classList)?e.contains:void 0)?b.classList.contains(a):-1!==b.className.indexOf(a)};ya.add=function(a,b,c){var e;null==c&&(c="");c+=a;null!=(null!=(e=b.classList)?e.add:void 0)?b.classList.add(c):this.contains(a,b)||(b.className=""!==b.className?b.className+(" "+c):c)};ya.remove=function(a,b,c){var e;null==c&&(c="");c+=a;null!=
(null!=(e=b.classList)?e.remove:void 0)?b.classList.remove(c):this.contains(a,b)&&(a=RegExp(" ?"+c),b.className=b.className.replace(a,""))};ya.toggle=function(a,b,c){var e;null!=(null!=(e=b.classList)?e.toggle:void 0)?b.classList.toggle(this.prefix+a):this.contains(a,b)?this.remome(a,b):this.add(a,b)};var qa=function(a){var b,c;qa.__super__.constructor.call(this);this.data={language:navigator.language||navigator.browserLanguage,locales:xc.defaults.locales};if(null!=a&&(null!=a.language&&(this.data.language=
a.language),null!=a.locales))for(c in a.locales)if(null!=this.data.locales[c])for(b in a.locales[c])this.data.locales[c][b]=a.locales[c][b];else this.data.locales[c]=a.locales[c]};f(qa,Ac);qa.NAME="LocalizationProxy";qa.prototype.contextName="l10n";qa.prototype.locale=null;qa.prototype.localeId=null;qa.prototype.onRegister=function(){qa.__super__.onRegister.call(this);this.setLocale(this.data.language)};qa.prototype.getContextData=function(){return this.locale};qa.prototype.getLanguage=function(){return this.data.language};
qa.prototype.setLanguage=function(a){this.data.language=a;this.setLocale(a);this.sendNotification(d.LANGUAGE_CHANGE,a);return a};qa.prototype.setLocale=function(a){this.localeId=a;this.locale=this.data.locales[this.localeId];null==this.locale&&(this.localeId=a.substring(0,2),this.locale=this.data.locales[this.localeId]);this.facade.l10n=this.locale;return a};qa.prototype.getLocaleId=function(){return this.localeId};qa.prototype.getLocales=function(){return this.data.locales};qa.prototype.setLocales=
function(a){return this.data.locales=a};qa.prototype.getString=function(a){return(this.locale||this.data.locales.en)[a]||""};qa.prototype.getLanguageString=function(a){var b;if("string"!==typeof a||null==a||""===a)return"";b="MSG_"+a.toUpperCase();b=this.getString(b);""===b&&(a=a.split("-").shift(),b="MSG_"+a.toUpperCase(),b=this.getString(b));return b};var Ya=function(){};Ya.create=function(a,b,c,e){var m,d,h,f,z;null==c&&(c="div");"string"===typeof c&&(c=document.createElement(c));m=new ya(c);if(null!=
a)for("string"===typeof a&&(a=[a]),f=0,z=a.length;f<z;f++)d=a[f],m.add(d);c._classList=m;null!=e&&(null!=c.innerText?c.innerText=e:c.textContent=e);null!=b&&(null!=b.getViewComponent&&(h=b.getViewComponent()),null!=h&&(b=h),b.appendChild(c));return c};Ya.bindEvents=function(a,b,c){var e,m;null==c&&(c=["onRemove","onRegister"]);for(e in b)m=b[e],0<=ve.call(c,e)||!/^on/.test(e)||null==(null!=m?m.bind:void 0)||(a[e]=m.bind(b))};Ya.createUID=function(a){var b,c;null==a&&(a=16);b=Date.now();c=2*a-1;return(Math.round(Math.random()*
c+a).toString(16)+b.toString(16)).toUpperCase()};var ce=function(){ce.__super__.constructor.call(this)};f(ce,E);ce.prototype.execute=function(a){this.sendNotification(d.PLAY_REQUEST);this.playback.play();ce.__super__.execute.call(this,a)};var Y=function(a,b,c){Y.__super__.constructor.call(this,a,b,c)};f(Y,t);Y.prototype.playerType="external";Y.prototype.createModel=function(){var a;Y.__super__.createModel.call(this);this.registerProxy(new qa(this.config));a=new Za;this.registerProxy(a);this.playerCore=
new ba(a);this.registerProxy(this.playerCore);this.bindings.initialize()};Y.prototype.createView=function(){var a,b=this;this.registerMediator(new Va("external",this.getViewComponent()));this.registerMediator(new nb);a=new ec;this.registerMediator(a);l.create(a.viewComponent,l.CLICK,function(){return b.sendNotification(d.TOGGLE_ACTIVE)})};Y.prototype.createController=function(){Y.__super__.createController.call(this);this.registerCommand(d.UPDATE_DATA_BINDINGS,Xd);this.registerCommand(X.TOGGLE_PLAY_PAUSE,
ce);this.registerCommand(d.PLAY,ce);this.registerCommand(d.CHANGE_PLAY_STATE,Vd);this.registerCommand(d.SET_MEDIA,Ke);this.registerCommand(d.CHANGE_MEDIA,Le);this.registerCommand(d.MEDIA_CHANGE,Wd);this.registerCommand(d.MEDIA_VALIDATED,Be);this.registerCommand(d.ERROR,Yd);this.registerCommand(xb.PLUGINS_INITIALIZED,ye);this.registerCommand(d.READY,Me);this.registerCommand(d.CHANGE_PARAMS,Oe)};Y.prototype.createMediaElement=function(){return document.createElement("div")};Y.prototype.evaluateBinding=
function(a){var b;return null!=(b=this.retrieveProxy(Ha.NAME))?b.evaluateBinding(a):void 0};Y.prototype.canPlayType=function(a){return"maybe"};Y.prototype.play=function(){this.sendNotification(d.PLAY)};Y.prototype.setParams=function(a){this.sendNotification(d.CHANGE_PARAMS,a);return a};Y.prototype.getParams=function(){return this.retrieveProxy(Qc.NAME).getData()};Y.prototype.setAutoplay=function(a){return!1};Y.prototype.getAutoplay=function(){return!1};Y.prototype.setLoop=function(a){return!1};Y.prototype.getLoop=
function(){return!1};Y.prototype.setMuted=function(a){return!1};Y.prototype.getMuted=function(){return!1};Y.prototype.setMedia=function(a){this.sendNotification(d.SET_MEDIA,a);return a};Y.prototype.getMedia=function(a){var b;return null!=(b=this.retrieveProxy(s.NAME))?b.getData():void 0};Y.prototype.setCurrentTime=function(a){return 0};Y.prototype.getCurrentTime=function(a){return 0};Y.prototype.getDuration=function(a){return this.retrieveProxy(s.NAME).getDuration()};Y.prototype.setSrc=function(a){this.sendNotification(d.SET_MEDIA,
{src:a});return a};Y.prototype.getSrc=function(a){return this.retrieveProxy(s.NAME).getSrc()};Y.prototype.setSource=function(a){this.sendNotification(d.SET_MEDIA,{source:a});return a};Y.prototype.getSource=function(){return this.retrieveProxy(s.NAME).getSource()};Y.prototype.setVolume=function(a){return a};Y.prototype.getVolume=function(a){return 1};Y.prototype.getSeeking=function(){return!1};Y.prototype.getPaused=function(){return!1};Y.prototype.getEnded=function(){return!1};var Bc=function(){this.item=
[];this.metadata={}};Bc.prototype.title=null;Bc.prototype.link=null;Bc.prototype.description=null;Bc.prototype.category=null;Bc.prototype.pubDate=null;Bc.prototype.language=null;Bc.prototype.ttl=null;Bc.prototype.item=null;Bc.prototype.metadata=null;var de=function(){this.metadata={}};de.prototype.src=null;de.prototype.debug=null;de.prototype.type=null;de.prototype.metadata=null;var ob={AUTO:"auto",HTML:"html",FLASH:"flash",EXTERNAL:"external",NONE:"none",HTML_AUTO:"html-auto"},Ia=function(){return Ia.__super__.constructor.apply(this,
arguments)};f(Ia,de);Ia.prototype.source=null;Ia.prototype.title=null;Ia.prototype.description=null;Ia.prototype.link=null;Ia.prototype.guid=null;Ia.prototype.pubDate=null;Ia.prototype.poster=null;Ia.prototype.thumbnail=null;Ia.prototype.embed=null;Ia.prototype.category=null;Ia.prototype.type=null;Ia.prototype.medium=null;Ia.prototype.duration=null;Ia.prototype.track=null;Ia.prototype.metadata=null;Ia.prototype.scenes=null;Ia.prototype.startTime=null;var V=function(a,b){this.type=a;null!=b&&(this.detail=
this.data=b)};V.prototype.type=null;V.prototype.target=null;V.prototype.detail=null;var Tc=function(){};Tc.prototype.getFeed=function(a,b,c){return g.getJson(a,b,c)};Tc.prototype.getMediaNode=function(a,b,c){var e,m,d,f;null==c&&(c=!0);d="media-"+b;e=a["media-group"]||a;m=e["media-content"];null!=m&&null!=m[d]?f=m[d]:null!=e[d]?f=e[d]:null!=a[d]?f=a[d]:null!=a[b]&&c&&(f=a[b]);return f};Tc.prototype.createEmbed=function(a){var b,c,e,d,f,h;try{b=this.getMediaNode(a,"embed");if(null==b)return c;c={};
c.url=b["@attributes"].url;c.width=b["@attributes"].width;c.height=b["@attributes"].height;c.params={};b["media-param"]instanceof Array||(b["media-param"]=[b["media-param"]]);h=b["media-param"];d=0;for(f=h.length;d<f;d++)e=h[d],c.params[e["@attributes"].name]=e["#text"]}catch(J){ha.error("[AMP Feed Parse Error] embed parse error: "+J.message,J)}return c};Tc.prototype.createFeed=function(a){var b,c,e,d,f,h,J,z,g;try{if(b=a.channel,c=new Bc,null!=b){c.title=b.title;c.description=b.description;c.language=
b.language;c.category=b.category;c.pubDate=new Date(Date.parse(b.pubDate));c.ttl=b.ttl;d=b.item instanceof Array?b.item:[b.item];z=0;for(g=d.length;z<g;z++)e=d[z],h=this.createMedia(e),c.item.push(h);for(f in b)J=b[f],f in c||(c.metadata[f]=J)}}catch(k){ha.error("[AMP Feed Parse Error] feed parse error: "+k.message,k)}return c};Tc.prototype.createMedia=function(a){var b,c,e,d,f,h,J,g,k,l,n,p,q,r,s,t,u,v,w,x;try{J=new Ia;h=this.getMediaNode(a,"content");if(h instanceof Array)for(J.source=[],p=0,s=
h.length;p<s;p++)e=h[p],k={src:e["@attributes"].url,type:e["@attributes"].type},c=e["media-category"],null!=c&&(b=c["@attributes"],"http://mrss.akamai.com/user_agent_hint"===b.schema&&(f=b.label||c["#text"],null!=f&&""!==f&&(null==k.rules&&(k.rules=[]),k.rules.push(f)))),J.source.push(k),J.medium=e["@attributes"].medium,J.duration=parseFloat(e["@attributes"].duration);else J.type=h["@attributes"].type,J.src=h["@attributes"].url,J.medium=h["@attributes"].medium,J.duration=parseFloat(h["@attributes"].duration);
J.guid=a.guid;J.title=this.getMediaNode(a,"title");J.link=a.link;J.description=this.getMediaNode(a,"description");J.pubDate=new Date(Date.parse(a.pubDate));J.thumbnail=J.poster=null!=(v=this.getMediaNode(a,"thumbnail"))?null!=(w=v["@attributes"])?w.url:void 0:void 0;J.embed=this.createEmbed(a);J.scenes=null!=(x=this.getMediaNode(a,"scenes"))?x["media-scene"]:void 0;g=this.getMediaNode(a,"status",!1);null!=g&&(J.status={state:g["@attributes"].state,reason:g["@attributes"].reason});J.category=a.category;
J.category instanceof Array||(J.category=[J.category]);g=this.getMediaNode(a,"category",!1);if(null!=g)for(q=0,t=g.length;q<t;q++)c=g[q],null!=c["#text"]&&""!==c["#text"]&&J.category.push(c["#text"]);null!=J.category&&J.category.sort(function(a,b){a=a.toLowerCase();b=b.toLowerCase();return a>b?1:a<b?-1:0});g=this.getMediaNode(a,"subTitle");if(null!=g)for(null==J.track&&(J.track=[]),g instanceof Array||(g=[g]),r=0,u=g.length;r<u;r++)l=g[r],null!=l["@attributes"]&&J.track.push({src:l["@attributes"].href,
type:l["@attributes"].type,kind:"captions",srclang:l["@attributes"].lang||"en"});c=a.category;c instanceof Array||(c=[c]);J.isLive="live"===a.temporalType||null!=c&&-1!==c.join(",").indexOf("live_stream");J.temporalType=J.isLive?"live":"vod";for(d in a)n=a[d],d in J||(J.metadata[d]=n)}catch(y){ha.error("[AMP Feed Parse Error] media parse error: "+y.message,y)}return J};var ha=function(){};ha.enabled=!1;ha.enable=function(a){null==a&&(a=/debug\=true/.test(location.search.toLowerCase()));this.enabled=
a;this.enabled||(this.log=this.trace=this.debug=this.info=this.warn=this.error=this.fatal=function(){});return a};ha.log=function(){try{1<arguments.length&&null!=arguments[1]?console.log.apply(console,arguments):console.log(arguments[0])}catch(a){}};ha.trace=function(){try{console.trace.apply(console,arguments)}catch(a){}};ha.debug=function(){try{console.log.apply(console,arguments)}catch(a){this.log.apply(this,arguments)}};ha.info=function(){try{console.info.apply(console,arguments)}catch(a){}};
ha.warn=function(){try{console.warn.apply(console,arguments)}catch(a){}};ha.error=function(){try{console.error.apply(console,arguments)}catch(a){this.log.apply(this,arguments)}};ha.fatal=function(){try{console.fatal.apply(console,arguments)}catch(a){}};var Ja=function(){Ja.__super__.constructor.call(this)};f(Ja,gb);Ja.prototype.xhr=null;Ja.prototype.headers=null;Ja.prototype.response=null;Ja.prototype.responseXML=null;Ja.prototype.responseText=null;Ja.prototype.responseType=null;Ja.prototype.withCredentials=
!1;Ja.prototype.readyState=0;Ja.prototype.status=null;Ja.prototype.open=function(a,b){var c,e,d=this;try{e=new XMLHttpRequest}catch(f){e=new window.ActiveXObject("Microsoft.XMLHTTP")}if(Ja.isCORS(b))if(Object.prototype.hasOwnProperty.call(e,"withCredentials"))try{e.withCredentials=this.withCredentials}catch(h){ha.warn("[AMP XHR WARNING]","withCredentials not properly supported in this browser.",h)}else"undefined"!==typeof XDomainRequest&&(c=!0,e=new XDomainRequest);if(null!=e){c&&(e.onprogress=function(){},
e.ontimeout=function(){},e.onerror=function(){},e.onload=function(a){"function"===typeof e.onreadystatechange&&(e.readyState=4,e.status=200,e.contentType.match(/\/xml/)&&(e.responseXML=new ActiveXObject("Microsoft.XMLDOM"),e.responseXML.async=!1,e.responseXML.loadXML(e.responseText)),e.onreadystatechange.call(e,a,!1))});e.onreadystatechange=function(a){var b,c;d.readyState=e.readyState;d.dispatchEvent(new V("readystatechange",e));if(4===e.readyState)if(d.status=e.status,199<(b=d.status)&&400>b||0===
d.status){null==e.responseText&&(e.responseText=e.text);d.responseText=e.responseText;if(null!=e.responseXML&&0<(null!=(c=e.responseXML.childNodes)?c.length:void 0))d.response=d.responseXML=e.responseXML,d.responseType="document";else try{d.response=JSON.parse(e.responseText),d.responseType="json"}catch(f){d.response=e.responseText,d.responseType="text"}d.dispatchEvent(new V("load",d))}else 0!==d.status&&d.dispatchEvent(new V("error",d))};try{"undefined"!==typeof e.onerror&&(e.onerror=function(a){d.dispatchEvent(new V("error",
d))})}catch(g){}e.open(a,b)}this.xhr=e};Ja.prototype.send=function(a){var b,c,e,d=this;if(null!=this.headers)for(b in e=this.headers,e)c=e[b],null!=b&&null!=c&&this.xhr.setRequestHeader(b,c);setTimeout(function(){d.xhr.send(a)},0)};Ja.prototype.setRequestHeader=function(a,b){null!=a&&null!=b&&(null==this.headers&&(this.headers={}),this.headers[a]=b)};Ja.prototype.setRequestHeaders=function(a){return this.headers=a};Ja.prototype.getResponseHeader=function(a){var b;return null!=(b=this.xhr)?"function"===
typeof b.getResponseHeader?b.getResponseHeader(a):void 0:void 0};Ja.prototype.getAllResponseHeaders=function(){var a;return null!=(a=this.xhr)?"function"===typeof a.getAllResponseHeaders?a.getAllResponseHeaders():void 0:void 0};Ja.isCORS=function(a){var b,c;b=document.createElement("a");b.href=a;a=""!==b.hostname?b.hostname:location.hostname;c="0"!==b.port?b.port:location.port;return location.protocol!==(":"!==b.protocol?b.protocol:location.protocol)||location.hostname!==a||location.port!==c&&!(""===
location.port&&"80"===c)};var g=function(){};g.blankImage="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAMAAAAoyzS7AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNSBNYWNpbnRvc2giIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6NjI2QkJDQTBCMzQ4MTFFMUFERDJBRkRGQUQwNTcxRTIiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6NjI2QkJDQTFCMzQ4MTFFMUFERDJBRkRGQUQwNTcxRTIiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDowODg4NjdFQkIzNDgxMUUxQUREMkFGREZBRDA1NzFFMiIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDowODg4NjdFQ0IzNDgxMUUxQUREMkFGREZBRDA1NzFFMiIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/Pu0++ecAAAAGUExURf///wAAAFXC034AAAABdFJOUwBA5thmAAAADElEQVR42mJgAAgwAAACAAFPbVnhAAAAAElFTkSuQmCC";
g.mimeTypes={mp4:"video/mp4",flv:"video/x-flv",f4m:"video/f4m",smil:"application/smil",smilxml:"application/smil+xml",m3u8:"application/x-mpegURL",mp3:"audio/mpeg",json:"application/json",txt:"text/plain",xml:"application/xml",ogv:"video/ogg",webm:"video/webm",mpd:"application/dash+xml",ism:"application/vnd.ms-sstr+xml",js:"text/javascript",css:"text/css",swf:"application/x-shockwave-flash",vtt:"text/vtt",ttml:"application/ttml+xml",srt:"application/x-subrip",cea608:"text/cea-608",cea708:"text/cea-708"};
g.flashTypes=[g.mimeTypes.mp4,g.mimeTypes.flv,g.mimeTypes.f4m,g.mimeTypes.smil,g.mimeTypes.smilxml];g.rules={flashTablets:{label:"Android 2 \x26 3 or Kindle Fire 1",regexp:"Android [23]|Silk/1"},html5Phones:{label:"iPhone",regexp:"iPhone"},html5Tablets:{label:"HTML5 Tablets",regexp:"iPad|Android [4-9]|Silk/2"},desktop:{label:"Desktop",regexp:"^((?!iPad|iPhone|Android|BlackBerry|PlayBook|Silk).)*$"}};g.getPlaybackMode=function(a){var b,c,e;null==a&&(a=(null!=(c=vc["amp-mode"])?c.toLowerCase():void 0)||
ob.HTML_AUTO);c=!1;for(b in ob)if(e=ob[b],e===a){c=!0;break}c||(a=ob.AUTO);a===ob.HTML_AUTO&&(a=this.isHTMLFirst()?ob.HTML:ob.AUTO);if(a!==ob.AUTO)return a!==ob.FLASH||this.hasFlash()||(a=ob.NONE),a;this.hasFlash()||(a=this.supportsHTML5Video()?ob.HTML:ob.NONE);a===ob.AUTO&&(a=this.isHTML5()?ob.HTML:ob.FLASH);return a};g.getIEVersion=function(){var a,b,c;b=-1;c=navigator.userAgent;"Microsoft Internet Explorer"===navigator.appName?a=/MSIE ([0-9]{1,}[.0-9]{0,})/:"Netscape"===navigator.appName?a=/Trident\/.*rv:([0-9]{1,}[.0-9]{0,})/:
/Edge\/[0-9\.]+$/.test(c)&&(a=/Edge\/([0-9\.]+)/);null!=(null!=a?a.exec(c):void 0)&&(b=parseFloat(RegExp.$1));return b};g.getFFVersion=function(){var a;a=-1;/Firefox\/([0-9\.]+)$/.exec(navigator.userAgent)&&(a=parseFloat(RegExp.$1));return a};g.getSafariVersion=function(){var a,b;a=-1;b=navigator.userAgent;/Safari\/[0-9\.]+$/.test(b)&&null!=/Version\/([0-9])/.exec(b)&&(a=parseFloat(RegExp.$1));return a};g.isChrome=function(){return/Chrom(e|ium)/.test(navigator.userAgent)};g.isHTMLFirst=function(){return null!=
window.MediaSource};g.mergeRules=function(a){var b,c,e;e=[];for(b in a)c=a[b],e.push(g.rules[b]=c);return e};g.checkRules=function(a){var b,c,e;if(null!=a&&0<a.length)for(c=0,e=a.length;c<e;c++)if(b=a[c],b=g.rules[b])if(b=RegExp(b.regexp),b.test(navigator.userAgent))return!0;return!1};g.selectSource=function(a,b){var c,e,d;e=0;for(d=a.length;e<d;e++)if(c=a[e],g.checkRules(c.rules))return c;e=0;for(d=a.length;e<d;e++)if(c=a[e],""!==b(c.type||g.getMimeType(c.src)))return c;return null};g.getMimeType=
function(a){return this.mimeTypes[g.getFileExtension(a)]};g.selectTrack=function(a,b){var c,e,d,f;d=0;for(f=a.length;d<f;d++)if(c=a[d],c.kind===b){e=c;break}return e};g.isIPhone=function(){return/iPhone/.test(navigator.platform)||/iPhone/.test(navigator.userAgent)};g.isIPad=function(){return/iPad/.test(navigator.platform)||/iPad/.test(navigator.userAgent)};g.isAndroid=function(){return/Android [4-9]/.test(navigator.userAgent)};g.isKindleFireHD=function(){return/Silk\/2/.test(navigator.userAgent)};
g.isKindleFire=function(){return/Silk\/1/.test(navigator.userAgent)};g.isBlackBerry=function(){return/BlackBerry;|PlayBook|BB10/.test(navigator.userAgent)};g.isFirefoxOS=function(){return/\(Mobile;.*Firefox\//.test(navigator.userAgent)};g.supportsHTML5Video=function(){return null!=document.createElement("video").canPlayType};g.isHTML5=function(){return this.isIOS()||this.isAndroid()||this.isKindleFireHD()||this.isBlackBerry()||this.isFirefoxOS()};g.isIOS=function(){var a;a=/iPad|iPhone|iPod/i;return a.test(navigator.platform)||
a.test(navigator.userAgent)};g.getIOSversion=function(){var a;if(/iP(hone|od|ad)/.test(navigator.platform))return a=navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/),[parseInt(a[1],10),parseInt(a[2],10),parseInt(a[3]||0,10)]};g.hasFlash=function(){var a;try{a=Boolean(new ActiveXObject("ShockwaveFlash.ShockwaveFlash"))}catch(b){a="undefined"!==typeof navigator.mimeTypes["application/x-shockwave-flash"]}return a};g.isFullscreenDevice=function(){return this.isKindleFireHD()||this.isIPhone()};g.getDevice=
function(){var a;a="desktop";this.isIPhone()?a="iphone":this.isIPad()?a="ipad":/Android/.test(navigator.userAgent)?a="android":this.isKindleFireHD()?a="kindlefirehd":this.isKindleFire()&&(a="kindlefire");return a};g.xmlToJson=function(a){var b,c,e,d,f;e={};9===a.nodeType&&(a=a.firstChild);if(1===a.nodeType){if(0<a.attributes.length)for(e["@attributes"]={},c=a.attributes,b=d=0,f=c.length;d<f;b=++d)b=c[b],e["@attributes"][b.nodeName]=b.nodeValue}else if(3===a.nodeType||4===a.nodeType)e=a.nodeValue;
if(a.hasChildNodes())for(f=a.childNodes,b=a=0,d=f.length;a<d;b=++a)if(c=f[b],3!==c.nodeType||/\S/.test(c.nodeValue))b=c.nodeName.replace(/:/,"-"),c=this.xmlToJson(c),null==c["@attributes"]&&null!=c["#text"]&&(c=c["#text"]),null==e[b]?e[b]=c:(e[b]instanceof Array||(e[b]=[e[b]]),e[b].push(c));return e};g.getXHR=function(){return new Ja};g.get=function(a,b,c){var e;null==b&&(b={});null==c&&(c=null);e=g.getXHR();null!=b&&(null!=b.withCredentials&&(e.withCredentials=b.withCredentials),null!=b.onload&&
(e.onload=b.onload),null!=b.onerror&&(e.onerror=b.onerror));e.open("GET",a);null!=c&&e.setRequestHeaders(c);e.send();return e};g.getUTC=function(a,b){var c;if("function"===typeof a)try{c={onload:function(b){a(1E3*parseInt(b.target.responseText))},onerror:b},this.get("//time.akamai.com",c)}catch(e){b(e)}};g.send=function(a,b,c,e){var d;null==c&&(c={});null==e&&(e={"Content-Type":"String"});d=g.getXHR();null!=c.onload&&(d.onload=c.onload);null!=c.onerror&&(d.onerror=c.onerror);d.open("POST",a);null!=
e&&d.setRequestHeaders(e);d.send(b);return d};g.request=function(a){null==a&&(a={});return new Promise(function(b,c){var e;"string"===typeof a&&(a={url:a});null==a.method&&(a.method="GET");e=g.getXHR();e.withCredentials=a.withCredentials;e.onload=function(){return b(e)};e.onerror=c;e.open(a.method,a.url);null!=a.headers&&e.setRequestHeaders(a.headers);return e.send(a.data)})};g.loadScript=function(a,b,c,e){var d;c=c||document.getElementsByTagName("head")[0];d=document.createElement("script");d.type=
"text/javascript";null!=b&&(d.addEventListener?(d.onload=b,null!=e&&(d.onerror=e)):d.readyState&&(d.onreadystatechange=function(a){if("loaded"===this.readyState||"complete"===this.readyState)this.onreadystatechange=null,b()}));d.src=a;c.appendChild(d);return d};g.loadStyleSheet=function(a){var b,c;b=document.getElementsByTagName("head")[0];c=document.createElement("link");c.rel="stylesheet";c.type="text/css";c.href=a;return b.appendChild(c)};g.read=function(a,b,c,e){var d,f;null==b&&(b={});null==
c&&(c="");null==e&&(e=[]);try{return f=this.get(a,b,e),d=f.responseText||f.text,c===g.mimeTypes.json?JSON.parse(d):c===g.mimeTypes.xml&&null!=f.responseXML?f.responseXML:d}catch(h){return"undefined"!==typeof console&&null!==console&&"function"===typeof console.error&&console.error("Read Error: ",h),null}};g.getFileExtension=function(a){return a.replace(/\?.*/,"").split(".").pop()};g.getResponseHeader=function(a,b,c){var e;null==c&&(c={});e=g.getXHR();null!=c.onerror&&(e.onerror=c.onerror);e.open("HEAD",
a,!1);e.send();return e.getResponseHeader(b)};g.getResponseHeaders=function(a,b,c){var e,d,f;null==c&&(c={});e=g.getXHR();null!=c.onerror&&(e.onerror=c.onerror);e.open("HEAD",a,!1);e.send();c={};if(null==b)return e.getAllResponseHeaders();d=0;for(f=b.length;d<f;d++)a=b[d],c[a]=e.getResponseHeader(a);return c};g.isTouch=null;g.isTouchDevice=function(){if(null==this.isTouch)try{document.createEvent("TouchEvent"),this.isTouch=!0}catch(a){this.isTouch=!1}return this.isTouch};g.clamp=function(a,b,c){a<
b&&(a=b);a>c&&(a=c);return a};g.beacon=function(a,b){var c;null==b&&(b="beaconId");c=document.getElementById(b);null==c&&(c=document.createElement("img"),c.setAttribute("id",b),c.setAttribute("height",0),c.setAttribute("width",0),document.body.appendChild(c),c.style.display="none");c.setAttribute("src",a);return c};g.getElementOffset=function(a,b){var c,e,d,f,h,g;null==b&&(b=document.fullscreenElement||document.webkitFullscreenElement||document.mozFullscreenElement);h=e=0;g=a.offsetWidth;for(c=a.offsetHeight;a&&
a!==b;)"BODY"===a.tagName?(d=a.scrollLeft||document.documentElement.scrollLeft,f=a.scrollTop||document.documentElement.scrollTop,e+=a.offsetLeft-d+a.clientLeft,h+=a.offsetTop-f+a.clientTop):(e+=a.offsetLeft-a.scrollLeft+a.clientLeft,h+=a.offsetTop-a.scrollTop+a.clientTop),a=a.offsetParent;return{left:e,top:h,width:g,height:c}};g.override=function(a,b,c){var e;null==c&&(c=!0);if(null==a)return b;if(null==b)return a;!0===c&&(a=g.clone(a),b=g.clone(b));for(e in b)c=b[e],"object"===typeof c&&null!==c?
(null==a[e]&&(a[e]=c instanceof Array?[]:{}),a[e]=g.override(a[e],c,!1)):a[e]=c;return a};g.clone=function(a,b){var c,e,d,f,h,g,z;null==b&&(b=!0);if(null==a)return a;if("object"!==typeof a)c=a;else for(f in c=a instanceof Array?[]:{},a)if(h=a[f],"object"===typeof h&&null!==h&&!0===b)if(h instanceof Array)for(c[f]=[],g=0,z=h.length;g<z;g++)e=h[g],c[f].push(this.clone(e));else for(d in c[f]={},h)e=h[d],c[f][d]=this.clone(e);else c[f]=h;return c};g.formatTimecode=function(a,b){var c;a=parseInt(a);if(isNaN(a))return"00:00";
c=g.formatZeroFill(a%60);a=parseInt(a/60);c=g.formatZeroFill(a%60)+":"+c;a=parseInt(a/60);0<a&&(c=g.formatZeroFill(a)+":"+c);3600<=b&&5===c.length&&(c="00:"+c);return c};g.formatZeroFill=function(a){var b;b=a.toString();10>a&&(b="0"+b);return b};g.flattenTimecode=function(a,b){var c,e,d;null==b&&(b=30);if(null==a||""===a)return NaN;d=a.split(":");c=0;4===d.length?c=parseInt(d.pop())/b:3===d.length&&(d[2]=d[2].replace(",","."),-1!==d[2].indexOf(".")&&(e=d[2].split(".")),1<(null!=e?e.length:void 0)&&
(d[2]=e[0],c=parseInt(e[1])/1E3));for(e=parseInt(d.pop());0<d.length;)e+=Math.pow(60,d.length)*parseInt(d.shift());return e+c};g.cacheBust=function(a,b,c){var e;null==b&&(b="cacheBust");null==c&&(c=Date.now());e=-1===a.indexOf("?")?"?":"\x26";return a+e+b+"\x3d"+c};g.formatStyleName=function(a){return a.replace(/([A-Z])/,"-$1").toLowerCase()};g.trim=function(a){return a.replace(/^\s*(.*)/,"$1").replace(/(.*)\s*$/,"$1")};g.getJson=function(a,b,c){var e;e=g.getXHR();e.open("GET",a);e.onload=function(a){a=
"document"===e.responseType?g.xmlToJson(e.responseXML):e.response;"function"===typeof b&&b(a)};e.onerror=function(a){"function"===typeof c&&c(a)};e.send();return e};g.getSource=function(a,b,c){var e;e=g.getPlaybackMode();g.getJson(a,function(a){var c,d;a=(new Tc).createFeed(a);0<(null!=a?null!=(d=a.item)?d.length:void 0:void 0)&&(c=function(a){return"flash"===e&&-1!==g.flashTypes.indexOf(a)||"html"===e&&-1===g.flashTypes.indexOf(a)?"maybe":""},c=g.selectSource(a.item[0].source,c));"function"===typeof b&&
b(c)},c)};g.trackMouse=function(){try{null!=document.addEventListener?document.addEventListener("mousemove",this.mouseTracker):null!=document.attachEvent&&document.attachEvent("mousemove",this.mouseTracker)}catch(a){}};g.clientX=0;g.clientY=0;g.pageX=0;g.pageY=0;g.mouseTracker=function(a){g.clientX=a.clientX;g.clientY=a.clientY;g.pageX=a.pageX;g.pageY=a.pageY};g.isMouseOverElement=function(a){var b;b=!1;if(null==a)return b;try{b=a.contains(document.elementFromPoint(g.clientX,g.clientY))}catch(c){b=
!1}return b};g.trackMouse();g.getActualSize=function(a,b){var c,e,d;null==b&&(b=!0);d=a.offsetWidth;c=a.offsetHeight;!0===b&&(e=getComputedStyle(a),d+=parseInt(e.marginLeft)+parseInt(e.marginRight),c+=parseInt(e.marginTop)+parseInt(e.marginBottom));return{width:d,height:c}};g.isVolumeSettable=function(){var a,b;b=navigator.userAgent.toLowerCase();a=/ipad|iphone|ipod|android|blackberry|windows ce|windows phone|webos|playbook/.exec(b);return null==a||"android"===a[0]&&/Firefox/.test(b)?!0:!1};g.createFlashObject=
function(a,b){var c,e,d,f,h,J;if(null!=a){h={allowFullScreen:!0,allowScriptAccess:"always",wmode:"direct",bgColor:"#000000"};g.override(h,a.params,!1);if(null!=a.vars){d=[];J=a.vars;for(f in J)e=J[f],d.push(""+f+"\x3d"+e);h.flashvars=d.join("\x26")}e=(null!=(c=a.attributes)?c.id:void 0)||this.createUID();c={id:e,name:e,width:"100%",height:"100%",type:"application/x-shockwave-flash"};g.override(c,a.attributes,!1);-1!==this.getIEVersion()&&"direct"===h.wmode&&(h.wmode="transparent");d="\x3cobject ";
for(f in c)e=c[f],d+=""+f+'\x3d"'+e+'" ';d+="\x3e\n";for(f in h)e=h[f],d+='\x3cparam name\x3d"'+f+'" value\x3d"'+e+'" /\x3e\n';b.innerHTML=d+"\x3c/object\x3e"}};g.createUID=function(a){var b,c;null==a&&(a=16);b=Date.now();c=2*a-1;return(Math.round(Math.random()*c+a).toString(16)+b.toString(16)).toUpperCase()};var Ba=function(){Ba.__super__.constructor.call(this,this,!1)};f(Ba,gb);Ba.UNINITIALIZED=0;Ba.LOADING=1;Ba.LOADED=2;Ba.parseModule=function(a){var b,c,e,d;c={};a=a.childNodes;e=0;for(d=a.length;e<
d;e++)b=a[e],1===(null!=b?b.nodeType:void 0)&&(c[b.nodeName]=this.parseItem(b));return c};Ba.parseItem=function(a){var b,c,e,d;b=(""+a.getAttribute("type")).toLowerCase();c=a.textContent||a.text||a.innerText;if("object"!==b&&"array"!==b&&/#\{.*\}/.test(c))return c;switch(b){case "object":c=this.parseModule(a);break;case "array":c=[];b=a.childNodes;e=0;for(d=b.length;e<d;e++)a=b[e],1===a.nodeType&&c.push(this.parseItem(a));break;case "boolean":c="true"===c.toLowerCase();break;case "number":c=parseFloat(c)}return c};
Ba.prototype.url=null;Ba.prototype.data=null;Ba.prototype.xml=null;Ba.prototype.readyState=Ba.UNINITIALIZED;Ba.prototype.loaded=!1;Ba.prototype.flash={PlaybackMetricsPlugin:{src:"#{paths.resources}plugins/PlaybackMetricsPlugin.swf",blocking:!1,host:"akamai",main:"PlaybackMetricsPlugin"},SubclipMonitorPlugin:{src:"#{paths.resources}plugins/SubclipMonitorPlugin.swf",blocking:!1,host:"akamai",main:"SubclipMonitorPlugin"},NetSessionClientPlugin:{src:"#{paths.resources}plugins/NetSessionClientPlugin.swf",
blocking:!1,host:"akamai",main:"NetSessionClientPlugin"}};Ba.prototype.loadURL=function(a,b){var c=this;null==b&&(b=!1);this.url=a;this.setReadyState(Ba.LOADING);g.get(a,{withCredentials:b,onload:function(a){a=a.detail;"document"===a.responseType?(c.xml=a.responseXML,a=7!==c.xml.firstChild.nodeType?c.xml.firstChild:c.xml.childNodes[1],a=Ba.parseModule(a)):(a=a.response,"string"===typeof a&&(a=JSON.parse(a)));c.loadData(a)},onerror:function(a){c.dispatchEvent(new V("error",a));ha.error(a)}})};Ba.prototype.loadData=
function(a){xc.defaults=a;this.setReadyState(Ba.LOADED)};Ba.prototype.load=function(a,b){null==b&&(b=!1);switch(typeof a){case "object":this.loadData(a);break;case "string":this.loadURL(a,b);break;default:throw Error("[AMP ERROR] Invalid default configuration resource");}};Ba.prototype.setReadyState=function(a){this.readyState=a;this.dispatchEvent(new V("readystatechange",a));a!==Ba.LOADED||this.loaded||(this.loaded=!0,this.dispatchEvent(new V("load",this.data)))};var ma=function(){ma.__super__.constructor.call(this,
null,null,null,null)};f(ma,$);ma.prototype.componentType="overlay";ma.prototype.onRegister=function(){ma.__super__.onRegister.call(this);this.registerOverlay()};ma.prototype.onRemove=function(){ma.__super__.onRemove.call(this);this.removeOverlay()};ma.prototype.registerOverlay=function(){this.sendNotification(d.ADD_OVERLAY,this.viewComponent)};ma.prototype.removeOverlay=function(){this.sendNotification(d.REMOVE_OVERLAY,this.viewComponent)};var pb=function(a,b){this.element=a;this.timeout=b;pb.__super__.constructor.call(this);
this.resetHandler=this.reset.bind(this)};f(pb,gb);pb.prototype.events="mousemove mousedown keypress DOMMouseScroll mousewheel touchmove MSPointerMove".split(" ");pb.prototype.resetHandler=null;pb.prototype.element=null;pb.prototype.timeout=null;pb.prototype.active=!0;pb.prototype.timeoutId=null;pb.prototype.applyListeners=function(a){var b,c,e,d;null==a&&(a="add");d=this.events;c=0;for(e=d.length;c<e;c++)b=d[c],this.element[""+a+"EventListener"](b,this.resetHandler)};pb.prototype.start=function(a){null!=
a&&(this.timeout=a);this.stop();this.applyListeners("add");this.timeoutId=setTimeout(this.setActive.bind(this,!1),this.timeout)};pb.prototype.stop=function(){this.applyListeners("remove");clearTimeout(this.timeoutId)};pb.prototype.reset=function(){this.setActive(!0);this.start()};pb.prototype.setActive=function(a){if(a!==this.active)return this.active=a,this.dispatchEvent(new V("activechange",{active:this.active})),a};pb.prototype.getActive=function(){return this.active};var B=function(){};B.MSG_LIVE=
"MSG_LIVE";B.MSG_REPLAY="MSG_REPLAY";B.MSG_BUFFERING="MSG_BUFFERING_TEXT";B.MSG_CC="MSG_CC";B.MSG_CC_TITLE="MSG_CC_TITLE";B.MSG_CC_LANGUAGE="MSG_CC_LANGUAGE";B.MSG_CC_PRESETS="MSG_CC_PRESETS";B.MSG_CC_FONT="MSG_CC_FONT";B.MSG_CC_EDGE="MSG_CC_EDGE";B.MSG_CC_SIZE="MSG_CC_SIZE";B.MSG_CC_SCROLL="MSG_CC_SCROLL";B.MSG_CC_COLOR="MSG_CC_COLOR";B.MSG_CC_BACKGROUND="MSG_CC_BACKGROUND";B.MSG_CC_EDGE="MSG_CC_EDGE";B.MSG_CC_WINDOW="MSG_CC_WINDOW";B.MSG_CC_OPACITY="MSG_CC_OPACITY";B.MSG_CC_SHOW_ADVANCED="MSG_CC_SHOW_ADVANCED";
B.MSG_CC_HIDE_ADVANCED="MSG_CC_HIDE_ADVANCED";B.MSG_CC_RESET="MSG_CC_RESET";B.MSG_CC_CANCEL="MSG_CC_CANCEL";B.MSG_CC_APPLY="MSG_CC_APPLY";B.MSG_CC_PREVIEW_TEXT="MSG_CC_PREVIEW_TEXT";B.MSG_SECONDS="MSG_SECONDS";B.MSG_RECOMMENDATIONS_TITLE="MSG_RECOMMENDATIONS_TITLE";B.MSG_NEXT_VIDEO="MSG_NEXT_VIDEO";B.MSG_NEXT_AD="MSG_NEXT_AD";B.MSG_TIME_SEPARATOR="MSG_TIME_SEPARATOR";B.MSG_VIEW_ALL="MSG_VIEW_ALL";B.MSG_VIDEO="MSG_VIDEO";var H=function(a,b){this.player=a;this.config=b;H.__super__.constructor.call(this);
this.dispatcher=new gb(this);this.createDefaults()};f(H,puremvc.Mediator);H.NAME="PluginWrapper";H.prototype.player=null;H.prototype.config=null;H.prototype.dispatcher=null;H.prototype.flashPlugins=null;H.prototype.createFlashVars=null;H.prototype.createXML=null;H.prototype.createDefaults=function(){this.player.createDefaults.call(this)};H.prototype.addEventListener=function(a,b){this.dispatcher.addEventListener(a,b)};H.prototype.logEvent=function(a){};H.prototype.dispatchEvent=function(a){"timeupdate"!==
a.type&&"timeremaining"!==a.type&&this.player.logger.log("[AMP "+this.constructor.NAME.replace("Wrapper","").toUpperCase()+" EVENT] "+a.type,a);a.player=this.player;this.dispatcher.dispatchEvent(a)};H.prototype.removeEventListener=function(a,b){this.dispatcher.removeEventListener(a,b)};H.prototype.createElement=function(a,b,c){var e;e=a.createElement("element");e.setAttribute("id",b);null==c&&(c=this.getControls(a).controls);null!=c&&c.appendChild(e);return e};H.prototype.createProperty=function(a,
b,c,e){var d;d=a.createElement("property");d.setAttribute("key",b);null!=e&&e.appendChild(d);if(null!=c)if("object"!==typeof c||c instanceof Array)a=ea.createTextContent(a,c.toString()),d.appendChild(a);else for(b in c)e=c[b],this.createProperty(a,b,e,d);return d};H.prototype.listNotificationInterests=function(){return[q.CREATE_FLASH_VARS,q.CREATE_XML]};H.prototype.handleNotification=function(a){var b;b=a.getName();a=a.getBody();switch(b){case q.CREATE_FLASH_VARS:"function"===typeof this.createFlashVars&&
this.createFlashVars(a.flashvars);break;case q.CREATE_XML:"function"===typeof this.createXML&&this.createXML(a.xml)}};H.prototype.destroy=function(){};var eg=function(){eg.__super__.constructor.call(this)};f(eg,puremvc.SimpleCommand);eg.prototype.execute=function(a){this.facade.retrieveProxy(ka.NAME).start()};var fg=function(){fg.__super__.constructor.call(this)};f(fg,puremvc.SimpleCommand);fg.prototype.execute=function(a){this.facade.retrieveProxy(ka.NAME).stop()};var gg=function(){gg.__super__.constructor.call(this)};
f(gg,puremvc.SimpleCommand);gg.prototype.execute=function(a){var b,c;c=this.facade.retrieveProxy(ka.NAME);b=this.facade.player.retrieveProxy(C.NAME);a.getBody().value===ib.ACTIVE&&b.getPlayState()!==P.READY&&"desktop"!==g.getDevice()&&c.start()};var y=function(){y.__super__.constructor.call(this)};f(y,K);y.prototype.plugin=null;y.prototype.proxy=null;y.prototype.initializeNotifier=function(a){y.__super__.initializeNotifier.call(this,a);this.proxy=this.facade.retrieveProxy(v.NAME);this.plugin=this.facade};
var Te=function(){Te.__super__.constructor.call(this)};f(Te,y);Te.prototype.execute=function(a){!0===this.plugin.config["native"]?this.player.getMediaElement().controls=!0:this.proxy.adBreakEnd()};var hg=function(){hg.__super__.constructor.call(this)};f(hg,puremvc.SimpleCommand);hg.prototype.execute=function(a){var b,c;b=a.getBody();c=b.poster;a=this.facade.player.getMediaElement();null!=c&&""!==c&&(a.poster=c);a.src=b.src;!0!==this.facade.player.getAutoplay()&&this.facade.applyClickHandler()};var ig=
function(){ig.__super__.constructor.call(this)};f(ig,puremvc.SimpleCommand);ig.prototype.execute=function(a){this.facade.applyClickHandler(!1)};var jg=function(){jg.__super__.constructor.call(this)};f(jg,puremvc.SimpleCommand);jg.prototype.execute=function(a){this.facade.retrieveProxy(ka.NAME).start()};var Ue=function(){Ue.__super__.constructor.call(this)};f(Ue,y);Ue.prototype.execute=function(a){!0===this.plugin.config["native"]?this.player.getMediaElement().controls=!1:this.proxy.adBreakStart()};
var jb=function(a,b){jb.__super__.constructor.call(this,a,b)};f(jb,H);jb.NAME="ControlsWrapper";jb.prototype.mode="auto";jb.prototype.autoHide=5;jb.prototype.flashView={elements:{controls:{attributes:{height:"28",itemMargin:"5",scrubPosition:"inline"},elements:{replayBtn:{},playPauseBtn:{},streamTimeIndicator:{attributes:{exclude:"live"},elements:{streamTime:{},streamDuration:{}}},rewindBtn:{},scrubBar:{attributes:{style:"height: 18px;"}},progressBar:{attributes:{style:"background: linear-gradient(90deg, #FF0000, #1B1B1B);"}},
loadedBar:{attributes:{style:"background: linear-gradient(90deg, #00FF00, #1B1B1B);"}},liveIndicator:{},timeLocationIndicator:{},goLiveBtn:{},statsBtn:{},volumeBar:{attributes:{color:"#CA2127"}},volumeBtn:{},fullscreenBtn:{}}}}};jb.prototype.listNotificationInterests=function(){return jb.__super__.listNotificationInterests.apply(this,arguments).concat([d.MEDIUM_CHANGE])};jb.prototype.handleNotification=function(a){var b;jb.__super__.handleNotification.call(this,a);b=a.getName();a=a.getBody();switch(b){case d.MEDIUM_CHANGE:b=
/audio/.test(a)?"persistent":this.mode,this.setMode(b)}};jb.prototype.createFlashVars=function(a){null!=this.config.mode&&(this.mode=a.controls_mode=this.config.mode);null!=this.config.admode&&this.config.admode!==this.config.mode&&(a.ads_auto_fit=!0);return a};jb.prototype.createXML=function(a){var b,c,e;b=null!=(c=this.player.flashView)?null!=(e=c.elements)?e.controls:void 0:void 0;if(null!=b)return null!=b.attributes.autoHideDelay?this.autoHide=b.attributes.autoHideDelay:null!=this.config.autoHide&&
(this.autoHide=this.config.autoHide,b.attributes.autoHideDelay=this.config.autoHide),a};jb.prototype.getMode=function(){return this.mode};jb.prototype.setMode=function(a){if(a!==this.mode){try{this.mode=a,this.player.mediaElement.setPlayerProperty("controlsMode",a)}catch(b){this.facade.logger.error("[AMP CONTROLS ERROR]",b)}return a}};jb.prototype.getAutoHide=function(){return this.autoHide};var ka=function(a){ka.__super__.constructor.call(this,a)};f(ka,v);ka.NAME=v.NAME;ka.prototype.defaults={mode:"auto",
autoHide:3,admode:null};ka.prototype.timeout=null;ka.prototype.appState=null;ka.prototype.controls=null;ka.prototype.interactiveElement=null;ka.prototype.idleUtil=null;ka.prototype.initializeNotifier=function(a){ka.__super__.initializeNotifier.call(this,a);this.appState=this.facade.player.retrieveProxy(C.NAME);this.controls=this.facade.retrieveMediator(C.NAME)};ka.prototype.onRegister=function(){var a=this;ka.__super__.onRegister.call(this);null!=this.config.mode&&this.changeMode(this.config.mode);
this.interactiveElement=this.facade.player.getContainer();"desktop"===g.getDevice()?(l.create(this.interactiveElement,"mouseenter",function(){a.stop();a.appState.activeState!==ib.ACTIVE&&a.sendNotification(d.CHANGE_ACTIVE_STATE,ib.ACTIVE)}),l.create(this.interactiveElement,"mouseleave",function(){a.start()}),this.idleUtil=new pb(this.facade.player.getViewComponent(),1E3*this.data.autoHide),this.idleUtil.addEventListener("activechange",function(b){a.sendNotification(d.CHANGE_ACTIVE_STATE,!0!==b.detail.active?
ib.INACTIVE:ib.ACTIVE)}),this.idleUtil.start(),l.create(this.facade.player.getMediaElement(),"click",function(){a.sendNotification(X.TOGGLE_PLAY_PAUSE)})):l.create(this.interactiveElement,l.CLICK,function(){a.sendNotification(d.TOGGLE_ACTIVE)})};ka.prototype.setMode=function(a){if(this.data.mode===a)return a;this.changeMode(a);return a};ka.prototype.changeMode=function(a){"auto"===this.data.mode&&this.stop();this.facade.sendNotification(d.REMOVE_APPLICATION_STATE,"controls-"+this.data.mode);this.data.mode=
a;this.facade.sendNotification(d.ADD_APPLICATION_STATE,"controls-"+this.data.mode)};ka.prototype.getMode=function(){return this.data.mode};ka.prototype.setAutoHide=function(a){return this.data.autoHide=a};ka.prototype.getAutoHide=function(){return this.data.autoHide};ka.prototype.adBreakStart=function(){null!=this.data.admode&&(this.config.mode=this.getMode(),this.setMode(this.data.admode))};ka.prototype.adBreakEnd=function(){null!=this.data.admode&&this.setMode(this.config.mode)};ka.prototype.start=
function(){this.stop();"auto"===this.data.mode&&(this.timeout=setTimeout(this.hide.bind(this),1E3*this.data.autoHide))};ka.prototype.stop=function(){clearTimeout(this.timeout);this.timeout=null};ka.prototype.hide=function(){"auto"===this.data.mode&&(!0!==this.appState.getIsUserActive()&&!g.isMouseOverElement(this.facade.viewComponent)||this.appState.getDisplayState()===ia.FULL_SCREEN?this.facade.sendNotification(d.CHANGE_ACTIVE_STATE,ib.INACTIVE):this.start())};var Cc=function(){Cc.__super__.constructor.call(this)};
f(Cc,ma);Cc.prototype.componentName="title-bar";Cc.prototype.title=null;Cc.prototype.description=null;Cc.prototype.onRegister=function(){Cc.__super__.onRegister.call(this);this.title=this.create("title-text");this.description=this.create("description-text")};Cc.prototype.listNotificationInterests=function(){return[d.CHANGE_MEDIA]};Cc.prototype.handleNotification=function(a){var b;switch(a.getName()){case d.CHANGE_MEDIA:a=a.getBody(),b=this.facade.player.evaluateBinding(a.title),null==b||""===b||"undefined"===
b?this.classList.add("hidden"):(this.title.innerHTML=b,this.description.innerHTML=a.description?a.description:"",this.classList.remove("hidden"))}};var Uc=function(){Uc.__super__.constructor.call(this)};f(Uc,Gb);Uc.prototype.message=null;Uc.prototype.componentName="error";Uc.prototype.onRegister=function(){Uc.__super__.onRegister.call(this);this.message=this.create("error-message")};Uc.prototype.listNotificationInterests=function(){return[d.ERROR]};Uc.prototype.handleNotification=function(a){var b;
switch(a.getName()){case d.ERROR:a=a.getBody();b="Error: ";switch(a.code){case MediaError.MEDIA_ERR_ABORTED:b+="Media was aborted.";break;case MediaError.MEDIA_ERR_DECODE:b+="Decode Error.";break;case MediaError.MEDIA_ERR_NETWORK:b+="Network Error.";break;case MediaError.MEDIA_ERR_SRC_NOT_SUPPORTED:b+="Source not supported.";break;default:b+=a}this.message.textContent=b}};var kg=function(){kg.__super__.constructor.call(this)};f(kg,ma);kg.prototype.componentName="loading";var jd=function(){jd.__super__.constructor.call(this)};
f(jd,ma);jd.prototype.componentName="waiting";jd.prototype.bar=null;jd.prototype.text=null;jd.prototype.onRegister=function(){jd.__super__.onRegister.call(this);this.bar=this.create("waiting-bar");this.text=this.createText("waiting-text",this.localizationManager.getString(B.MSG_BUFFERING))};var gc=function(){gc.__super__.constructor.call(this)};f(gc,ma);gc.prototype.componentName="poster";gc.prototype.poster=null;gc.prototype.clickHandler=null;gc.prototype.onRegister=function(){gc.__super__.onRegister.call(this);
this.poster=this.create("poster-content");this.poster.onclick=this.onclick.bind(this)};gc.prototype.onclick=function(a){a.stopImmediatePropagation();a.preventDefault();this.sendNotification(X.TOGGLE_PLAY_PAUSE,!0);return!1};gc.prototype.listNotificationInterests=function(){return[d.CHANGE_MEDIA]};gc.prototype.handleNotification=function(a){switch(a.getName()){case d.CHANGE_MEDIA:a=a.getBody().poster,a=null!=a&&""!==a?'\x3cimg src\x3d"'+a+'" class\x3d"'+this.cssPrefix+'poster-image" /\x3e':"",this.poster.innerHTML=
a}};var kd=function(){kd.__super__.constructor.call(this)};f(kd,ma);kd.prototype.componentName="end-slate";kd.prototype.onRegister=function(){null!=this.config.getEndSlate()&&kd.__super__.onRegister.call(this)};kd.prototype.listNotificationInterests=function(){return[d.MEDIA_CHANGE]};kd.prototype.handleNotification=function(a){var b,c,e;switch(a.getName()){case d.MEDIA_CHANGE:c=a.getBody(),b=this.config.getEndSlate(),e=this.getViewComponent(),a="",null!=b&&(b=!0===b.usePoster?c.poster:b.url,null!=
b&&""!==b&&(a='\x3cimg src\x3d"'+b+'" class\x3d"end-slate-image" /\x3e')),null!=e&&(e.innerHTML=a)}};var Ca=function(a,b,c,e,d){this.labelText=a;this.onclick=null!=d?d:this.onclick;Ca.__super__.constructor.call(this,e,null,b,c)};f(Ca,$);Ca.prototype.componentType="button";Ca.prototype.icon=null;Ca.prototype.label=null;Ca.prototype.onclick=null;Ca.prototype.labelText=null;Ca.prototype.onRegister=function(){Ca.__super__.onRegister.call(this);this.icon=this.create("icon");this.createLabel(this.labelText)};
Ca.prototype.createLabel=function(a){null!=a&&(this.label=this.createText("label",a))};Ca.prototype.setLabel=function(a){null==this.label?this.createLabel(a):this.label.textContent=a;return a};Ca.prototype.getLabel=function(){var a;return null!=(a=this.label)?a.textContent:void 0};var ld=function(a){ld.__super__.constructor.call(this,null,null,a)};f(ld,$);ld.prototype.componentName="logo";ld.prototype.url=null;ld.prototype.onRegister=function(){ld.__super__.onRegister.call(this);this.sendNotification(d.ADD_CONTROL_STATE,
this.componentName+"-enabled")};ld.prototype.onclick=function(a){a.stopImmediatePropagation();this.sendNotification(d.DISPATCH_EVENT,new V("controlsLogoClicked"));return!1};var Dc=function(a){Dc.__super__.constructor.call(this,null,a)};f(Dc,Ca);Dc.prototype.componentName="full-screen";Dc.prototype.onRegister=function(){Dc.__super__.onRegister.call(this);this.sendNotification(d.ADD_CONTROL_STATE,this.componentName+"-enabled")};Dc.prototype.onclick=function(a){a.stopImmediatePropagation();this.sendNotification(d.TOGGLE_FULL_SCREEN);
return!1};Dc.prototype.listNotificationInterests=function(){return[d.DISABLE_FULL_SCREEN,d.ENABLE_FULL_SCREEN]};Dc.prototype.handleNotification=function(a){var b;b=a.getName();a.getBody();switch(b){case d.DISABLE_FULL_SCREEN:this.setDisabled(!0);break;case d.ENABLE_FULL_SCREEN:this.setDisabled(!1)}};var R=function(a,b){this.direction=null!=b?b:this.direction;R.__super__.constructor.call(this,null,null,a)};f(R,$);R.prototype.componentType="slider";R.prototype.trackView=null;R.prototype.handleView=
null;R.prototype.valueView=null;R.prototype.startCapView=null;R.prototype.endCapView=null;R.prototype.clickView=null;R.prototype.min=0;R.prototype.max=1;R.prototype.value=0;R.prototype.draggable=!1;R.prototype.dragging=!1;R.prototype.draggingInterval=null;R.prototype.draggingDelay=250;R.prototype.direction="vertical";R.prototype.pressHandler=null;R.prototype.releaseHandler=null;R.prototype.moveHandler=null;R.prototype.clickHandler=null;R.prototype.onRegister=function(){R.__super__.onRegister.call(this);
this.startCapView=this.create("start-cap");this.endCapView=this.create("end-cap");this.trackView=this.create("track");this.valueView=this.create("value",this.trackView);this.clickView=this.create("click",this.trackView);this.handleView=this.create("handle",this.trackView);this.pressHandler=l.create(this.handleView,l.PRESS,this.handlePressHandler.bind(this));this.releaseHandler=l.create(window,l.RELEASE,this.handleReleaseHandler.bind(this));this.releaseHandler.unbind();this.moveHandler=l.create(window,
l.MOVE,this.updateHandler.bind(this,this.draggable));this.moveHandler.unbind();this.clickHandler=l.create(this.clickView,l.CLICK,this.updateHandler.bind(this,!0))};R.prototype.setDirection=function(a){return this.direction=a};R.prototype.getDirection=function(){return this.direction};R.prototype.setValue=function(a){this.updateValue(a);this.valueChanged();return a};R.prototype.getValue=function(){return this.value};R.prototype.setDragging=function(a){if(a!==this.dragging)return this.dragging=a,this.sendNotification(d.IS_USER_ACTIVE,
this.dragging),!0===this.dragging?this.draggingInterval=setInterval(this.valueChanged.bind(this),this.draggingDelay):(clearInterval(this.draggingInterval),this.valueChanged()),this.dragging};R.prototype.getDragging=function(){return this.dragging};R.prototype.setDraggable=function(a){if(a!==this.draggable)return this.draggable=a};R.prototype.getDraggable=function(){return this.draggable};R.prototype.updateValue=function(a){var b;a!==this.value&&(this.value=g.clamp(a,this.min,this.max),"vertical"===
this.direction?(a="height",b="bottom"):(a="width",b="left"),this.valueView.style[a]=this.handleView.style[b]=""+100*this.value+"%")};R.prototype.calculateValue=function(a){var b,c;b=a.clientX||a.targetTouches[0].clientX;a=a.clientY||a.targetTouches[0].clientY;c=g.getElementOffset(this.viewComponent);b="vertical"===this.getDirection()?1-(a-c.top)/c.height:(b-c.left)/c.width;return g.clamp(b,0,1)};R.prototype.handlePressHandler=function(a){this.moveHandler.bind();this.releaseHandler.bind();this.clickHandler.unbind();
this.setDragging(!0);null!=a&&a.stopImmediatePropagation();return!1};R.prototype.handleReleaseHandler=function(a){this.moveHandler.unbind();this.releaseHandler.unbind();this.clickHandler.bind();this.setDragging(!1);null!=a&&a.stopImmediatePropagation();return!1};R.prototype.updateHandler=function(a,b){var c;null!=b&&b.stopImmediatePropagation();c=this.calculateValue(b);!0===a?this.setValue(c):this.updateValue(c);return!1};R.prototype.valueChanged=function(){};var $a={ADD_PANEL:"addPanel",REMOVE_PANEL:"removePanel",
OPEN_PANEL:"openPanel",CLOSE_PANEL:"closePanel",TOGGLE_PANEL:"togglePanel",CLOSE_ALL_PANELS:"closeAllPanels"},qb=function(a){qb.__super__.constructor.call(this,null,null,a)};f(qb,$);qb.prototype.componentName="time-display";qb.prototype.duration=null;qb.prototype.currentTimeDisplay=null;qb.prototype.separatorDisplay=null;qb.prototype.durationDisplay=null;qb.prototype.liveDisplay=null;qb.prototype.onRegister=function(){qb.__super__.onRegister.call(this);this.liveDisplay=this.createText("live-display",
this.localizationManager.getString(B.MSG_LIVE));this.currentTimeDisplay=this.createText("current-time-display","00:00",this,"span");this.separatorDisplay=this.createText("separator-display",this.localizationManager.getString(B.MSG_TIME_SEPARATOR),this,"span");this.durationDisplay=this.createText("duration-display","00:00",this,"span")};qb.prototype.listNotificationInterests=function(){return[d.PLAY,d.DURATION_CHANGE,d.ENDED,d.DISPLAY_TIME]};qb.prototype.handleNotification=function(a){var b;b=a.getName();
a=a.getBody();switch(b){case d.PLAY:this.updateDuration();break;case d.DURATION_CHANGE:this.duration=a;this.updateCurrentTime();this.updateDuration();break;case d.ENDED:this.updateCurrentTime(this.duration);this.updateDuration();break;case d.DISPLAY_TIME:this.updateCurrentTime(a.currentTime,a.duration),this.updateDuration(a.duration)}};qb.prototype.updateCurrentTime=function(a,b){null==a&&(a=this.currentTime);null==b&&(b=this.duration);this.currentTimeDisplay.textContent=g.formatTimecode(a,b)};qb.prototype.updateDuration=
function(a){null==a&&(a=this.duration);this.durationDisplay.textContent=g.formatTimecode(a)};var Vc=function(a){Vc.__super__.constructor.call(this,null,a)};f(Vc,Ca);Vc.prototype.componentName="go-live";Vc.prototype.onRegister=function(){Vc.__super__.onRegister.call(this);this.createLabel(this.localizationManager.getString("MSG_LIVE"))};Vc.prototype.listNotificationInterests=function(){return[d.IS_LIVE]};Vc.prototype.handleNotification=function(a){var b;b=a.getName();a=a.getBody();switch(b){case d.IS_LIVE:this.setLabel(!0===
a?this.localizationManager.getString("MSG_LIVE"):this.localizationManager.getString("MSG_GO_LIVE"))}};Vc.prototype.onclick=function(a){a.stopImmediatePropagation();a.preventDefault();return!1};var kb=function(a){this.panels=[];this.closeHandler=this.mouseupHandler.bind(this);kb.__super__.constructor.call(this,null,null,a)};f(kb,$);kb.prototype.componentName="panels";kb.prototype.activePanel=null;kb.prototype.panels=null;kb.prototype.closeHandler=null;kb.prototype.listNotificationInterests=function(){var a,
b,c;c=[];for(a in $a)b=$a[a],c.push(b);return c.concat([])};kb.prototype.handleNotification=function(a){var b;b=a.getName();a=a.getBody();switch(b){case $a.ADD_PANEL:this.addPanel(a);break;case $a.REMOVE_PANEL:this.removePanel(a);break;case $a.OPEN_PANEL:this.openPanel(a);break;case $a.CLOSE_PANEL:this.closePanel(a);break;case $a.CLOSE_ALL_PANELS:this.closeAllPanels(a);break;case $a.TOGGLE_PANEL:this.togglePanel(a)}};kb.prototype.addPanel=function(a){this.panels.push(a);this.viewComponent.appendChild(a.getViewComponent())};
kb.prototype.removePanel=function(a){this.panels.splice(this.panels.indexOf(a),1);this.viewComponent.removeChild(a.getViewComponent())};kb.prototype.openPanel=function(a){a!==this.activePanel&&null!=a&&(this.closeAllPanels(),this.activePanel=a,this.activePanel.classList.add("active"),"desktop"!==g.getDevice()&&this.sendNotification(d.IS_USER_ACTIVE,!0),document.addEventListener("mouseup",this.closeHandler))};kb.prototype.closePanel=function(a){a.classList.remove("active");null!=this.activePanel&&
(this.activePanel=null,"desktop"!==g.getDevice()&&this.sendNotification(d.IS_USER_ACTIVE,!1),document.removeEventListener("mouseup",this.closeHandler))};kb.prototype.togglePanel=function(a){a===this.activePanel?this.closePanel(a):this.openPanel(a)};kb.prototype.closeAllPanels=function(){var a,b,c,e;e=this.panels;b=0;for(c=e.length;b<c;b++)a=e[b],this.closePanel(a)};kb.prototype.mouseupHandler=function(a){var b,c;b=document.elementFromPoint(a.clientX,a.clientY);c=this.activePanel.getViewComponent();
a=this.activePanel.control.getViewComponent();b!==c&&!1===c.contains(b)&&b!==a&&!1===a.contains(b)&&this.closeAllPanels()};var N=function(a){N.__super__.constructor.call(this,a,"horizontal")};f(N,R);N.prototype.componentName="progress";N.prototype.bufferValue=null;N.prototype.scrubTime=null;N.prototype.scrubTimeSeparator=null;N.prototype.cuePoints=null;N.prototype.cues=null;N.prototype.duration=0;N.prototype.isLive=!1;N.prototype.seeking=!1;N.prototype.previewData={src:null,previewWidth:null,previewHeight:null,
imgWidth:null,imgHeight:null,count:null};N.prototype.hoverHandler=null;N.prototype.mouseoutHandler=null;N.prototype.mouseMoveHandler=null;N.prototype.previewMoveHandler=null;N.prototype.onRegister=function(){N.__super__.onRegister.call(this);this.bufferValue=this.create("buffer-value",!1);this.trackView.insertBefore(this.bufferValue,this.trackView.lastChild);this.cuePoints=this.create("cue-points",this.trackView);this.scrubTimeSeparator=this.create("scrub-time-separator");this.scrubTime=this.create("scrub-time");
this.thumbPreview=this.create("thumb-preview",this.trackView);this.previewMoveHandler=l.create(this.clickView,l.MOVE,this.updatePreviewHandler.bind(this));this.previewMoveHandler.unbind();this.hoverHandler=l.create(this.clickView,l.HOVER,this.handlehoverHandler.bind(this));this.mouseoutHandler=l.create(this.clickView,l.HOVEROUT,this.handlemouseoutHandler.bind(this));this.mouseoutHandler.unbind();l.create(this.clickView,l.HOVER,this.mouseOverHandler.bind(this));l.create(this.clickView,l.HOVEROUT,this.mouseOutHandler.bind(this));
this.mouseMoveBinding=l.create(document,l.MOVE,this.mouseMoveHandler.bind(this));this.mouseMoveBinding.unbind()};N.prototype.listNotificationInterests=function(){return[d.ENDED,d.MEDIA_CHANGE,d.DURATION_CHANGE,d.PROGRESS,d.ADD_CUE_POINTS,d.REMOVE_CUE_POINTS,d.DISPLAY_TIME]};N.prototype.handleNotification=function(a){var b;b=a.getName();a=a.getBody();switch(b){case d.MEDIA_CHANGE:this.isLive="live"===a.temporalType;this.updateValue(0);this.bufferValue.style.width="0%";this.updatePreview(a.metadata);
break;case d.PROGRESS:b=g.clamp(100*(a/this.duration),0,100);this.bufferValue.style.width=b+"%";break;case d.DURATION_CHANGE:this.duration=a;this.updateCuePoints();break;case d.ENDED:this.updateValue(1);break;case d.ADD_CUE_POINTS:this.cues=a;this.updateCuePoints();break;case d.REMOVE_CUE_POINTS:this.removeCuePoints();break;case d.DISPLAY_TIME:!1===this.dragging&&this.updateValue(a.currentTime/a.duration,a.duration)}};N.prototype.updateCuePoints=function(){var a,b,c,e,d;if(null!=this.cues&&0!==this.cues.length&&
(null==(null!=(a=this.facade.player.config)?null!=(b=a.controls)?b.displaySceneMarkers:void 0:void 0)||!1!==this.facade.player.config.controls.displaySceneMarkers))for(this.removeCuePoints(),d=this.cues,c=0,e=d.length;c<e;c++)a=d[c],0!==a&&-1!==a&&(b=this.create("cue-point",this.cuePoints),b.style.left=100*(a/this.duration)+"%")};N.prototype.preloadPreviewImages=function(a){var b,c;for(b=1;b<a.previewThumbnailCount;)c=new Image,c.src=a.previewThumbnailSrc+"out"+b+".png",b++};N.prototype.updatePreview=
function(a){this.preloadPreviewImages(a);this.previewData.src=a.previewThumbnailSrc;this.previewData.previewHeight=a.previewThumbnailHeight;this.previewData.previewWidth=a.previewThumbnailWidth;this.previewData.count=a.previewThumbnailCount;void 0===this.previewData.src&&this.hoverHandler.unbind()};N.prototype.handlehoverHandler=function(a){this.previewMoveHandler.bind();this.mouseoutHandler.bind();this.hoverHandler.unbind();this.updatePreviewHandler(a);a.stopImmediatePropagation();return!1};N.prototype.handlemouseoutHandler=
function(a){this.previewMoveHandler.unbind();this.mouseoutHandler.unbind();this.hoverHandler.bind();a.stopImmediatePropagation();return!1};N.prototype.mouseOverHandler=function(a){this.mouseOver=!0;this.classList.add("active");this.mouseMoveBinding.bind()};N.prototype.mouseOutHandler=function(a){this.mouseOver=!1;!0!==this.getDragging()&&(this.classList.remove("active"),this.mouseMoveBinding.unbind())};N.prototype.mouseMoveHandler=function(a){a=this.calculateValue(a);this.scrubTime.textContent=g.formatTimecode(Math.round(a*
this.duration));this.scrubTime.style.left=this.scrubTimeSeparator.style.left=""+(100*a).toFixed(2)+"%"};N.prototype.updatePreviewHandler=function(a){a=this.calculateValue(a);this.previewInterval=this.duration/this.previewData.count;this.previewImgIndex=Math.floor(a*this.duration/this.previewInterval);this.previewData.src&&(this.thumbPreview.style.backgroundImage="url("+this.previewData.src+"out"+(this.previewImgIndex+1)+".png)");this.thumbPreview.style.width=this.previewData.previewWidth+"px";this.thumbPreview.style.height=
this.previewData.previewHeight+"px";a=g.clamp((100*a-10).toFixed(2),1,80);this.thumbPreview.style.left=""+a+"%"};N.prototype.removeCuePoints=function(){null!=this.cuePoints&&(this.cuePoints.innerHTML="")};N.prototype.valueChanged=function(){this.sendNotification(X.SEEK,this.value*this.facade.player.retrieveProxy(s.NAME).getDuration())};N.prototype.updateValue=function(a){a!==this.value&&(!0===this.isLive&&(a=1),!0===isNaN(a)&&(a=0),N.__super__.updateValue.call(this,a),this.getDragging()&&this.value>=
this.max&&(this.handleReleaseHandler(),this.sendNotification(d.END)))};N.prototype.updateHandler=function(a,b){N.__super__.updateHandler.call(this,a,b);this.mouseMoveHandler(b)};N.prototype.handlePressHandler=function(a){N.__super__.handlePressHandler.call(this,a);this.classList.add("scrubbing")};N.prototype.handleReleaseHandler=function(a){N.__super__.handleReleaseHandler.call(this,a);this.classList.remove("scrubbing");!1===this.mouseOver&&this.mouseOutHandler()};var Ve=function(a){Ve.__super__.constructor.call(this,
null,a)};f(Ve,Ca);Ve.prototype.componentName="play-pause";Ve.prototype.onclick=function(a){a.stopImmediatePropagation();a.preventDefault();this.sendNotification(X.TOGGLE_PLAY_PAUSE);return!1};var Ec=function(){Ec.__super__.constructor.call(this)};f(Ec,ma);Ec.prototype.componentName="replay";Ec.prototype.replay=null;Ec.prototype.icon=null;Ec.prototype.label=null;Ec.prototype.onRegister=function(){Ec.__super__.onRegister.call(this);this.replay=this.create("replay-button");this.replay.onclick=this.onclick.bind(this);
this.icon=this.create("replay-icon",this.replay);this.label=this.createText("replay-label",this.localizationManager.getString(B.MSG_REPLAY),this.replay)};Ec.prototype.onclick=function(a){a.stopImmediatePropagation();this.sendNotification(d.REPLAY);return!1};var Wc=function(){Wc.__super__.constructor.call(this)};f(Wc,ma);Wc.prototype.componentName="context-menu";Wc.prototype.contextMenu=null;Wc.prototype.onRegister=function(){var a=this;Wc.__super__.onRegister.call(this);l.create(this.facade.player.viewComponent,
l.CONTEXTMENU,function(b){b.preventDefault();a.contextMenuHandler(b);return!1})};Wc.prototype.contextMenuHandler=function(a){var b,c,e=this;this.contextMenu&&this.removeContextMenu();this.contextMenu=Ya.create("context-menu",document.body,"ul");Ya.create("context-item",this.contextMenu,"li",this.facade.player.getVersion());"undefined"!==typeof akamaiGetViewerId&&null!==akamaiGetViewerId&&(b=akamaiGetViewerId(),c=Ya.create("context-item",this.contextMenu,"li",""+(this.localizationManager.getString("MSG_VIEWER_ID")||
"Viewer ID: ")),Ya.create("selectable",c,"span",""+(null!=b?b:"N/A")));this.contextMenu.style.top=a.pageY+"px";this.contextMenu.style.left=a.pageX+"px";l.create(document.body,l.CLICK,function(a){if(/selectable/.test(a.target.className))return!1;e.removeContextMenu(a);return!1})};Wc.prototype.removeContextMenu=function(a){try{l.clear(document.body,l.CLICK),document.body.removeChild(this.contextMenu),this.contextMenu=null}catch(b){}};var k={BREAK_START:"adsbreakstart",BREAK_END:"adsbreakend",BREAK_SKIPPED:"adsbreakskipped",
AD_CONTAINER_CREATED:"adscontainercreated",AD_LOADED:"adsloaded",AD_MANAGER_LOADED:"adsmanagerloaded",AD_STARTED:"adsstarted",AD_TIME_UPDATE:"adstimeupdate",AD_TIME_REMAINING:"adstimeremaining",AD_DURATION_CHANGE:"adsdurationchange",AD_ENDED:"adsended",AD_ERROR:"adserror",AD_PLAY:"adsplay",AD_PAUSE:"adspause",AD_PAUSED:"adspaused",AD_RESUME:"adsresume",AD_CLICKED:"adclicked",AD_COMPANION:"adscompanion",FIRST_QUARTILE:"adsfirstquartile",MIDPOINT:"adsmidpoint",THIRD_QUARTILE:"adsthirdquartile",COMPLETE:"adscomplete",
LOG:"adslog",REQUEST:"adsrequest",REQUEST_COMPLETE:"adsrequestcomplete",RESPONSE:"adsresponse",SKIPPED:"adsskipped",IMPRESSION:"adsimpression"},Sb=function(){Sb.__super__.constructor.call(this)};f(Sb,Gb);Sb.prototype.componentName="controls";Sb.prototype.activeControlPanel=null;Sb.prototype.controlBar=null;Sb.prototype.panels=null;Sb.prototype.onRegister=function(){var a;this.facade.registerMediator(new Uc);!0!==this.facade.player.config.debug&&this.facade.player.config.contextmenu&&!1!==this.facade.player.config.contextmenu.enabled&&
this.facade.registerMediator(new Wc);Sb.__super__.onRegister.call(this);this.facade.viewComponent=this.viewComponent;this.facade.registerMediator(new gc);this.facade.registerMediator(new kg);this.facade.registerMediator(new jd);this.facade.registerMediator(new Ec);this.facade.registerMediator(new kd);!1!==(null!=(a=this.config.titlebar)?a.enabled:void 0)&&this.facade.registerMediator(new Cc);this.controlBar=this.create("control-bar");this.facade.registerMediator(new kb(this.viewComponent));this.facade.registerMediator(new Ve(this.controlBar));
this.facade.registerMediator(new qb(this.controlBar));this.facade.registerMediator(new N(this.controlBar));null!=this.facade.config.logo&&this.facade.registerMediator(new ld(this.controlBar));this.facade.registerMediator(new Vc(this.controlBar));this.create("separator",this.controlBar)};Sb.prototype.listNotificationInterests=function(){return[d.READY,d.ADD_CONTROL,d.REMOVE_CONTROL,d.ADD_CONTROL_STATE,d.REMOVE_CONTROL_STATE]};Sb.prototype.handleNotification=function(a){var b,c;b=a.getName();a=a.getBody();
switch(b){case d.READY:!1!==(null!=(c=a.fullscreen)?c.enabled:void 0)&&this.facade.registerMediator(new Dc(this.controlBar));break;case d.ADD_CONTROL_STATE:this.classList.add(a);break;case d.REMOVE_CONTROL_STATE:this.classList.remove(a);break;case d.ADD_CONTROL:this.controlBar.appendChild(a);break;case d.REMOVE_CONTROL:this.controlBar.contains(a)&&this.controlBar.removeChild(a)}};var n=function(){};n.create=function(a,b,c){var e,d;"string"===typeof a?(e=document.getElementById(a),null==e&&(e=document.querySelector(a))):
e=a;if(null==e)throw Error("[AMP ERROR] Invalid container. Could not find DOM element: "+a);b=b instanceof xc?b:xc.create(b);ha.enable(b.debug);a=this.getVersion();null==e.dataset&&(e.dataset={});e.dataset["amp.version"]=a;ha.log("[AMP] "+a);d=this.createPlayer(b,e);try{Object.defineProperties(d,{src:{get:d.getSrc,set:d.setSrc,enumerable:!0,configurable:!1},media:{get:d.getMedia,set:d.setMedia,enumerable:!0,configurable:!1},currentTime:{get:d.getCurrentTime,set:d.setCurrentTime,enumerable:!0,configurable:!1},
autoplay:{get:d.getAutoplay,set:d.setAutoplay,enumerable:!0,configurable:!1},duration:{get:d.getDuration,enumerable:!0,configurable:!1},playState:{get:d.getPlayState,enumerable:!0,configurable:!1},seeking:{get:d.getSeeking,enumerable:!0,configurable:!1},paused:{get:d.getPaused,enumerable:!0,configurable:!1},ended:{get:d.getEnded,enumerable:!0,configurable:!1},volume:{get:d.getVolume,set:d.setVolume,enumerable:!0,configurable:!1},muted:{get:d.getMuted,set:d.setMuted,enumerable:!0,configurable:!1},
mediaElement:{get:d.getMediaElement,enumerable:!0,configurable:!1},textTracks:{get:function(){return d.getMediaElement().textTracks},enumerable:!0,configurable:!1},container:{get:d.getContainer,enumerable:!0,configurable:!1},loop:{get:d.getLoop,set:d.setLoop,enumerable:!0,configurable:!1},displayState:{get:d.getDisplayState,set:d.setDisplayState,enumerable:!0,configurable:!1},playbackRate:{get:d.getPlaybackRate,set:d.setPlaybackRate,enumerable:!0,configurable:!1},language:{get:d.getLanguage,set:d.setLanguage,
enumerable:!0,configurable:!1},localization:{get:function(){return d.retrieveProxy(qa.NAME)},enumerable:!0,configurable:!1},version:{get:d.getVersion,enumerable:!0,configurable:!1},error:{get:d.getError,enumerable:!0,configurable:!1},hidden:{get:d.getHidden,set:d.setHidden,enumerable:!0,configurable:!1}})}catch(f){console.error(f)}e.amp=d;d.request=this.request.bind(this);d.loadResources=this.loadResources.bind(this);d.onready=c;d.initialize(b);return d};n.createPlayer=function(a,b){var c;c=this.players[a.mode];
null!=c&&(c=new c(b));return c};n.getVersion=function(){return this.VERSION};n.VERSION="AMP Premier v2.68.16";n.defaults=new Ba;n.plugins=[];n.players={};n.loadDefaults=function(a,b,c,e){null==e&&(e=!1);null!=b&&this.defaults.addEventListener("load",b);null!=c&&this.defaults.addEventListener("error",c);this.defaults.load(a,e)};n.getPlaybackMode=function(){return g.getPlaybackMode()};n.registerPlayer=function(a,b){this.players[a]=b};n.registerPlugin=function(a,b,c){var e,d,f;null==
(e=this.plugins)[a]&&(e[a]={});"function"===typeof b&&(c=[c,b],b=c[0],c=c[1]);"string"===typeof b&&(b=[b]);null==b&&(b=["html","flash"]);d=0;for(f=b.length;d<f;d++)e=b[d],this.plugins[a][e]=c};n.resourceManager=null;n.getResourceManager=function(){null==this.resourceManager&&(this.resourceManager=new xd);return this.resourceManager};n.addResource=function(a,b,c){return this.getResourceManager().add(a,b,c)};n.addResources=function(a,b,c){return this.getResourceManager().addResources(a,b,c)};n.loadResources=
function(a){var b=this;return new Promise(function(c,e){return b.addResources(a,c,e)})};n.request=function(a){return g.request(a)};n.getResource=function(a){return this.getResourceManager().item(a)};n.removeResource=function(a){return this.getResourceManager().remove(a)};n.registerPlayer("html",A);n.registerPlayer("flash",p);n.registerPlayer("none",li);n.registerPlayer("external",Y);var We=function(){return We.__super__.constructor.apply(this,arguments)};f(We,H);We.NAME="PlayOverlayWrapper";We.prototype.createFlashVars=
function(a){a.show_play_button_overlay=null!=this.config.enabled?this.config.enabled:!0;return a};n.registerPlugin("playoverlay","flash",We);var Xe=function(){Xe.__super__.constructor.call(this)};f(Xe,ma);Xe.prototype.componentName="play";Xe.prototype.onclick=function(a){a.stopImmediatePropagation();a.preventDefault();this.sendNotification(X.TOGGLE_PLAY_PAUSE);return!1};var Ka=function(){Ka.__super__.constructor.call(this)};f(Ka,L);Ka.prototype.moduleName="controls";Ka.prototype.createFramework=function(){!0===
this.config["native"]?(this.player.getMediaElement().controls=!0,this.player.sendNotification(d.ADD_APPLICATION_STATE,"controls-native"),this.registerCommand(d.MEDIA_VALIDATED,hg),this.registerCommand(k.BREAK_START,Ue),this.registerCommand(k.BREAK_END,Te),this.registerCommand(d.PLAY_REQUEST,ig),this.createView=function(){}):Ka.__super__.createFramework.call(this)};Ka.prototype.applyClickHandler=function(a){null==a&&(a=!0);this.player.getMediaElement().onclick=a?this.clickHandler.bind(this):null;this.player.getMediaElement().onplay=
a?this.clickHandler.bind(this):null};Ka.prototype.clickHandler=function(a){this.sendNotification(X.TOGGLE_PLAY_PAUSE,!0)};Ka.prototype.createController=function(){Ka.__super__.createController.call(this);this.registerCommand(d.START,jg);this.registerCommand(d.PLAY,eg);this.registerCommand(d.PAUSE,fg);this.registerCommand(d.ACTIVE_STATE_CHANGE,gg);this.registerCommand(k.BREAK_START,Ue);this.registerCommand(k.BREAK_END,Te)};Ka.prototype.createModel=function(){this.proxy=new ka(this.config);this.registerProxy(this.proxy)};
Ka.prototype.createView=function(){this.registerMediator(new Sb)};Ka.prototype.listNotificationInterests=function(){var a,b,c;c=[];for(a in $a)b=$a[a],c.push(b);return c.concat([d.MEDIA_CHANGE,d.TIME_UPDATE,d.DURATION_CHANGE,d.PROGRESS,d.ENDED,d.ADD_CUE_POINTS,d.REMOVE_CUE_POINTS,d.DISABLE_FULL_SCREEN,d.ENABLE_FULL_SCREEN,d.READY,d.ADD_CONTROL,d.REMOVE_CONTROL,d.ADD_CONTROL_STATE,d.REMOVE_CONTROL_STATE,d.ACTIVE_STATE_CHANGE,d.START,d.PLAY,d.PAUSE,d.ERROR,k.BREAK_START,k.BREAK_END,d.CHANGE_MEDIA,d.DISPLAY_TIME,
d.MEDIA_VALIDATED,d.STARTED,d.PLAY_REQUEST,d.IS_LIVE])};Ka.prototype.listNotificationPublications=function(){return Ka.__super__.listNotificationPublications.call(this).concat([d.CHANGE_ACTIVE_STATE,d.TOGGLE_FULL_SCREEN,X.SEEK,d.TOGGLE_ACTIVE,X.TOGGLE_PLAY_PAUSE,d.END,d.REPLAY])};Ka.prototype.setMode=function(a){this.proxy.setMode(a);return a};Ka.prototype.getMode=function(){return this.proxy.getMode()};Ka.prototype.setAutoHide=function(a){this.proxy.setAutoHide(a);return a};Ka.prototype.getAutoHide=
function(){return this.proxy.getAutoHide()};n.registerPlugin("controls","html",Ka);n.registerPlugin("controls","flash",jb);n.registerPlugin("controls","external",Ka);var rb=function(a){rb.__super__.constructor.call(this,a)};f(rb,Q);rb.NAME=v.NAME;rb.prototype.defaults={config:null,dimensions:null};rb.prototype.ready=function(){try{!0===this.getDebug()&&(window.AkamaiAnalytics_debug=1),window.akamaiSetVideoObject(this.facade.player.getMediaElement())}catch(a){this.facade.logger.error("[AMP MEDIA ANALYTICS ERROR]",
"Could not set video tag",a)}};rb.prototype.setDimensions=function(a){var b,c,e;b=this.configurationData.source.dimensions;for(c in a)e=a[c],null!=e&&(b[c]=e);this.configurationData.parse(this.configurationData.source);this.applyDimensions(b);return a};rb.prototype.applyDimensions=function(a){var b,c;if(null!=window.setAkamaiMediaAnalyticsData)try{for(b in a)c=a[b],setAkamaiMediaAnalyticsData(b,c)}catch(e){this.facade.logger.error("[AMP MEDIA ANALYTICS ERROR]","Could not set dimensions:",e)}};rb.prototype.setMedia=
function(a){var b,c;"function"===typeof akamaiSetStreamURL&&akamaiSetStreamURL(a.src,!1);b=this.value.viewerId||this.value.viewerID||this.value["std:viewerId"];null!=b&&akamaiSetViewerId(b);b=null!=(null!=(c=a.mediaanalytics)?c.dimensions:void 0)?g.override(this.value.dimensions,a.mediaanalytics.dimensions):this.value.dimensions;akamaiHandleStreamSwitch();this.applyDimensions(b);return a};rb.prototype.udpateMedia=function(a){"function"===typeof akamaiHandleTitleSwitch&&akamaiHandleTitleSwitch(a);
return a};rb.prototype.fragmentLoadStart=function(a){"function"===typeof fragmentDownloadStarted&&fragmentDownloadStarted(a)};rb.prototype.fragmentLoaded=function(a){"function"===typeof fragmentDownloadCompleted&&fragmentDownloadCompleted(a)};rb.prototype.bitrateSwitch=function(a){"function"===typeof akamaiHandleBitRateSwitch&&akamaiHandleBitRateSwitch(a.bitrate)};var lg=function(){lg.__super__.constructor.call(this)};f(lg,puremvc.SimpleCommand);lg.prototype.execute=function(a){this.facade.retrieveProxy(rb.NAME).ready()};
var mg=function(){mg.__super__.constructor.call(this)};f(mg,y);mg.prototype.execute=function(a){this.proxy.setMedia(a.getBody())};var ng=function(){ng.__super__.constructor.call(this)};f(ng,puremvc.SimpleCommand);ng.prototype.execute=function(a){this.facade.player.getMediaElement().dataset.isad=!0};var og=function(){og.__super__.constructor.call(this)};f(og,puremvc.SimpleCommand);og.prototype.execute=function(a){this.facade.player.getMediaElement().dataset.isad=!1};var pg=function(){pg.__super__.constructor.call(this)};
f(pg,puremvc.SimpleCommand);pg.prototype.execute=function(a){var b,c;try{c=a.getBody(),b={adDuration:c.duration,adPartnerId:c.partner,adTitle:c.title,adId:c.id},"function"===typeof akamaiHandleAdLoaded&&akamaiHandleAdLoaded(b)}catch(e){this.facade.logger.error("[AMP MEDIA ANALYTICS ERROR]",e)}};var qg=function(){qg.__super__.constructor.call(this)};f(qg,y);qg.prototype.execute=function(a){try{"function"===typeof akamaiHandleAdStarted&&akamaiHandleAdStarted()}catch(b){this.facade.logger.error("[AMP MEDIA ANALYTICS ERROR]",
b)}};var rg=function(){rg.__super__.constructor.call(this)};f(rg,y);rg.prototype.execute=function(a){a=a.getBody();a=Math.round(100*(a.currentTime/a.duration));try{25<=a&&25>this.proxy.percent?(this.facade.logger.debug("MediaAnalytics: First Quartile"),"function"===typeof akamaiHandleAdFirstQuartile&&akamaiHandleAdFirstQuartile()):50<=a&&50>this.proxy.percent?(this.facade.logger.debug("MediaAnalytics: Second Quartile"),"function"===typeof akamaiHandleAdMidpoint&&akamaiHandleAdMidpoint()):75<=a&&75>
this.proxy.percent&&(this.facade.logger.debug("MediaAnalytics: Third Quartile"),"function"===typeof akamaiHandleAdThirdQuartile&&akamaiHandleAdThirdQuartile())}catch(b){this.facade.logger.error("[AMP MEDIA ANALYTICS ERROR]",b)}this.proxy.percent=a};var sg=function(){sg.__super__.constructor.call(this)};f(sg,puremvc.SimpleCommand);sg.prototype.execute=function(a){try{"function"===typeof akamaiHandleAdCompleted&&akamaiHandleAdCompleted()}catch(b){this.facade.logger.error("[AMP MEDIA ANALYTICS ERROR]",
b)}this.facade.player.getMediaElement().dataset.isad=!0};var tg=function(){tg.__super__.constructor.call(this)};f(tg,y);tg.prototype.execute=function(a){a=a.getBody();this.proxy.setDimensions(a)};var ug=function(){ug.__super__.constructor.call(this)};f(ug,y);ug.prototype.execute=function(a){this.proxy.updatedMedia(a.getBody())};var vg=function(){vg.__super__.constructor.call(this)};f(vg,y);vg.prototype.execute=function(a){this.proxy.fragmentLoadStart(a.getBody())};var wg=function(){wg.__super__.constructor.call(this)};
f(wg,y);wg.prototype.execute=function(a){this.proxy.fragmentLoaded(a.getBody())};var xg=function(){xg.__super__.constructor.call(this)};f(xg,y);xg.prototype.execute=function(a){this.proxy.bitrateSwitch(a.getBody())};var Tb=function(a,b){Tb.__super__.constructor.call(this,a,b)};f(Tb,H);Tb.NAME="MediaAnalyticsWrapper";Tb.prototype.flashPlugins=[{id:"OSMFCSMALoader",host:"osmf",main:"com.akamai.playeranalytics.osmf.OSMFCSMALoaderInfo",type:"application/x-shockwave-flash"}];Tb.prototype.listNotificationInterests=
function(){return Tb.__super__.listNotificationInterests.call(this).concat([d.MEDIA_CHANGE,"mediaanalytics:setDimensions"])};Tb.prototype.createFlashVars=function(a){var b,c,e,d;b=null!=(e=this.player.config)?null!=(d=e.media)?d.mediaanalytics:void 0:void 0;if(null!=b)for(c in b)e=b[c],a["report_"+c]=e;return a};Tb.prototype.createXML=function(a){var b,c,e,d,f;b=a.firstChild;e=a.getElementsByTagName("metrics")[0];null==e&&(e=a.createElement("metrics"),b.appendChild(e));b=a.createElement("vendor");
b.setAttribute("id","akamai");e.appendChild(b);null!=this.config.config&&(e=a.createElement("property"),e.setAttribute("key","MEDIA_ANALYTICS_BEACON"),e.appendChild(ea.createTextContent(a,this.config.config)),b.appendChild(e),f=(null!=(c=this.config.plugin)?c.swf:void 0)||"http://79423.analytics.edgesuite.net/csma/plugin/csma.swf",e=a.createElement("property"),e.setAttribute("key","MEDIA_ANALYTICS_PLUGIN_PATH"),e.appendChild(ea.createTextContent(a,f)),b.appendChild(e));if(null!=this.config.dimensions)for(d in c=
a.createElement("property"),c.setAttribute("key","dimensions"),b.appendChild(c),f=this.config.dimensions,f)b=f[d],e=a.createElement("property"),e.setAttribute("key",d),e.appendChild(ea.createTextContent(a,b)),c.appendChild(e);return a};Tb.prototype.handleNotification=function(a){var b,c,e;Tb.__super__.handleNotification.call(this,a);c=a.getName();a=a.getBody();switch(c){case d.MEDIA_CHANGE:if(null!=(null!=(e=a.mediaanalytics)?e.dimensions:void 0))for(b in a.dimensions=[],e=a.mediaanalytics.dimensions,
e)c=e[b],a.dimensions.push({key:b,value:c});break;case "mediaanalytics:setDimensions":this.setDimensions(a)}};Tb.prototype.setDimensions=function(a){this.player.mediaElement.setPlayerProperty("maDimensions",a);return a};var Xc=function(){Xc.__super__.constructor.call(this)};f(Xc,L);Xc.prototype.moduleName="playoverlay";Xc.prototype.createModel=function(){};Xc.prototype.createView=function(){this.registerMediator(new Xe)};Xc.prototype.listNotificationPublications=function(){return Xc.__super__.listNotificationPublications.call(this).concat([X.TOGGLE_PLAY_PAUSE])};
n.registerPlugin("playoverlay","html",Xc);n.registerPlugin("playoverlay","external",Xc);var Da=function(a,b,c,e){this.url=a;this.interval=null!=b?b:1E4;this.type=null!=c?c:null;this.headers=null!=e?e:null;Da.__super__.constructor.call(this)};f(Da,gb);Da.prototype.timeout=null;Da.prototype.interval=null;Da.prototype.url=null;Da.prototype.lastModified=null;Da.prototype.contentLenght=null;Da.prototype.data=null;Da.prototype.text=null;Da.prototype.type=null;Da.prototype.headers=null;Da.prototype.useHeadRequest=
!0;Da.prototype.xhr=null;Da.prototype.start=function(){null!=this.url&&""!==this.url&&this.poll()};Da.prototype.poll=function(){var a,b=this;a=g.getXHR();this.useHeadRequest?(a.onload=function(c){var e;304===a.status?b.invoke():(e=a.getResponseHeader("Last-Modified"),c=a.getResponseHeader("Content-Length"),null==e&&null==c||null!=e&&e!==b.lastModified||null!=c&&c!==b.contentLength?(b.lastModified=e,b.contentLength=c,b.updateData()):b.invoke())},a.onerror=function(a){b.error(a)},a.open("HEAD",g.cacheBust(this.url),
!1),this.applyHeaders(),null!=this.lastModified&&a.setRequestHeader("If-Modified-Since",this.lastModified),a.send()):this.updateData()};Da.prototype.applyHeaders=function(){null!=this.headers&&this.xhr.setRequestHeaders(this.headers)};Da.prototype.updateData=function(){var a,b=this;a=g.getXHR();a.open("GET",g.cacheBust(this.url),!0);a.onload=function(c){b.setText(a.responseText);b.invoke()};a.onerror=function(a){b.error(a)};this.applyHeaders();return a.send()};Da.prototype.setText=function(a){var b;
if(a!==this.text){b=this.text=a;if(this.type===g.mimeTypes.json)try{b=this.xhr.response}catch(c){b=this.text}this.setData(b)}return a};Da.prototype.setData=function(a){a!==this.data&&(this.data=a,this.dispatchEvent(new V("datachanged",this.data)));return a};Da.prototype.error=function(a){ha.error(event);this.stop()};Da.prototype.invoke=function(){var a=this;this.stop();this.timeout=setTimeout(function(){a.poll()},this.interval)};Da.prototype.stop=function(){clearTimeout(this.timeout)};var ee=function(){return ee.__super__.constructor.apply(this,
arguments)};f(ee,H);ee.NAME="EventManagementWrapper";ee.prototype.createFlashVars=function(a){null!=this.config.enabled&&(a.eventmanagementstates_enabled=this.config.enabled);null!=this.config.url&&(a.eventmanagementstates_status_url=this.config.url);null!=this.config.interval&&(a.eventmanagementstates_status_interval=this.config.interval);return a};ee.prototype.createXML=function(a){var b,c,e,d,f,h,g;b=a.firstChild;c=a.getElementsByTagName("eventmanagementstates");null==c||0===c.length?(c=a.createElement("eventmanagementstates"),
b.appendChild(c)):c=c[0];b=a.createElement("states");c.appendChild(b);g=this.config.states;f=0;for(h=g.length;f<h;f++)d=g[f],c=a.createElement("state"),b.appendChild(c),e=a.createElement("property"),e.setAttribute("key","ID"),e.appendChild(ea.createTextContent(a,d.id)),c.appendChild(e),e=a.createElement("property"),e.setAttribute("key","POSTER_SRC"),e.appendChild(ea.createTextContent(a,d.poster)),c.appendChild(e),null!=d.url&&(e=a.createElement("property"),e.setAttribute("key","URL"),e.appendChild(ea.createTextContent(a,
d.url)),c.appendChild(e));return a};var Yc=function(){Yc.__super__.constructor.call(this)};f(Yc,ma);Yc.prototype.componentName="event-management";Yc.prototype.poster=null;Yc.prototype.onRegister=function(){Yc.__super__.onRegister.call(this);this.classList.add("hidden");this.poster=this.create("event-poster",!1,"img")};Yc.prototype.listNotificationInterests=function(){return["eventStateChanged"]};Yc.prototype.handleNotification=function(a){switch(a.getName()){case "eventStateChanged":a=a.getBody(),
"on"!==a.id?(null!=a.poster&&(this.poster.src=a.poster,this.viewComponent.appendChild(this.poster)),this.classList.remove("hidden"),this.sendNotification(d.PAUSE),this.sendNotification(d.CHANGE_DISPLAY_STATE,ia.NORMAL)):(this.viewComponent.contains(this.poster)&&this.viewComponent.removeChild(this.poster),this.classList.add("hidden"))}};var w=function(){w.__super__.constructor.call(this)};f(w,y);w.prototype.dispatchEvent=function(a,b){var c,e;"string"!==typeof a&&(b=a.getBody(),null==b&&(b={}),a=
a.getName());c="function"===typeof(e=this.plugin).getFeatureName?e.getFeatureName():void 0;null!=c&&(a=a.replace(RegExp("^("+c+")"),""));c=this.plugin.getModuleName();a=a.replace(RegExp("^("+c+")"),"");c=new V(a,b);this.sendNotification(d.DISPATCH_EVENT,c)};w.prototype.dispatchEventAfterCommand=function(a,b){setTimeout(this.dispatchEvent.bind(this,a,b),0)};w.prototype.execute=function(a){this.dispatchEvent(a)};var Ye=function(){Ye.__super__.constructor.call(this)};f(Ye,w);Ye.prototype.execute=function(a){var b;
b=a.getBody().id!==ab.ON.id;this.sendNotification(d.LOCK,b);Ye.__super__.execute.call(this,a);!1===b&&!0===this.facade.player.getAutoplay()&&this.sendNotification(d.PLAY)};var ab=function(a){var b=this;ab.__super__.constructor.call(this,a);this.poller=new Da;this.poller.ondatachanged=function(a){var e,d,f,h;a=a.detail;if("on"===a)e=ab.ON;else for(h=b.data.states,d=0,f=h.length;d<f&&(e=h[d],e.id!==a);d++);if(null!=e)return b.setState(e)}};f(ab,v);ab.NAME=v.NAME;ab.ON={id:"on"};ab.prototype.defaults=
{url:null,interval:null,states:null,enabled:!1};ab.prototype.poller=null;ab.prototype.state=null;ab.prototype.initialize=function(){!0===this.data.enabled&&(this.setURL(this.data.url),this.setInterval(this.data.interval),this.poller.start())};ab.prototype.setURL=function(a){return this.data.url=this.poller.url=a};ab.prototype.getURL=function(){return this.data.url};ab.prototype.getInterval=function(){return this.data.interval};ab.prototype.setInterval=function(a){this.data.interval=this.poller.interval=
1E3*a;return a};ab.prototype.setState=function(a){this.state=a;this.sendNotification("eventStateChanged",a);return a};ab.prototype.getState=function(){return this.state};var hc=function(){hc.__super__.constructor.call(this)};f(hc,L);hc.prototype.moduleName="mediaanalytics";hc.prototype.initialize=function(a,b){window.AKAMAI_MEDIA_ANALYTICS_CONFIG_FILE_PATH=a.config;hc.__super__.initialize.call(this,a,b)};hc.prototype.createModel=function(){this.proxy=new rb(this.config);this.registerProxy(this.proxy)};
hc.prototype.createController=function(){hc.__super__.createController.call(this);this.registerCommand(d.READY,lg);this.registerCommand(d.MEDIA_CHANGE,mg);this.registerCommand(k.BREAK_START,ng);this.registerCommand(k.BREAK_END,og);this.registerCommand(k.AD_LOADED,pg);this.registerCommand(k.AD_STARTED,qg);this.registerCommand(k.AD_TIME_UPDATE,rg);this.registerCommand(k.AD_ENDED,sg);this.registerCommand("mediaanalytics:setDimensions",tg);this.registerCommand(d.CONTENT_CHANGED,ug);this.registerCommand(d.FRAGMENT_LOAD_START,
vg);this.registerCommand(d.FRAGMENT_LOADED,wg);this.registerCommand(d.BITRATE_CHANGE,xg)};hc.prototype.listNotificationInterests=function(){return[d.READY,d.MEDIA_CHANGE,k.BREAK_START,k.BREAK_END,k.AD_LOADED,k.AD_STARTED,k.AD_TIME_UPDATE,k.AD_ENDED,"mediaanalytics:setDimensions",d.CONTENT_CHANGED,d.FRAGMENT_LOAD_START,d.FRAGMENT_LOADED,d.BITRATE_CHANGE]};hc.prototype.setDimensions=function(a){this.retrieveProxy(rb.NAME).setDimensions(a);return a};n.registerPlugin("mediaanalytics","html",hc);n.registerPlugin("mediaanalytics",
"flash",Tb);var Dd=function(){return Dd.__super__.constructor.apply(this,arguments)};f(Dd,H);Dd.NAME="BrandingWrapper";Dd.prototype.flashView={elements:{logoOverlay:{attributes:{style:"width: 150px; height: 53px; right: 15px; top: 15px; opacity: 0.5;"}}}};Dd.prototype.createFlashVars=function(a){null!=this.config.id&&(a.branding=this.config.id);return a};Dd.prototype.createXML=function(a){var b,c,e,d,f;e=this.player.flashView;null!=(null!=(b=this.config)?b.logo:void 0)&&null!=e&&(b="background-image: url('"+
this.config.logo+"');",c=(null!=(d=e.elements.logoOverlay)?null!=(f=d.attributes)?f.style:void 0:void 0)||"",c=-1!==c.indexOf("background-image:")?c.replace(/background-image: [A-Za-z0-9_\-\.\/\\;\(\)"'#{}]+/,b):b+c,e.elements.logoOverlay.attributes.style=c);return a};var ic=function(){ic.__super__.constructor.call(this)};f(ic,ma);ic.prototype.componentName="branding";ic.prototype.logo=null;ic.prototype.text=null;ic.prototype.container=null;ic.prototype.onRegister=function(){ic.__super__.onRegister.call(this);
this.container=this.create("branding-container");this.logo=this.create(["branding-image","hidden"],this.container,"img");this.text=this.create("branding-text",this.container)};ic.prototype.listNotificationInterests=function(){return[d.READY]};ic.prototype.handleNotification=function(a){switch(a.getName()){case d.READY:a=a.getBody().branding;if(null==a)break;null!=a.logo?(this.logo.src=this.facade.evaluatePaths(a.logo),ya.remove("hidden",this.logo,bc.PREFIX)):ya.add("hidden",this.logo,bc.PREFIX);a=
this.config.getDomain();null!=a&&0!==a.indexOf("http")&&(a=location.protocol+"//"+a,this.text.innerHTML="\x3cspan\x3e"+this.localizationManager.getString(B.MSG_VIEW_ALL)+'\x3ca href\x3d"'+a+'" target\x3d"'+this.config.getTarget()+'"\x3e'+this.config.getDomain()+"\x3c/a\x3e "+this.localizationManager.getString(B.MSG_VIDEO)+".")}};var sb=function(a){sb.__super__.constructor.call(this,a)};f(sb,v);sb.NAME=v.NAME;sb.prototype.defaults={id:null,title:null,link:null,logo:null,target:null};sb.prototype.getID=
function(){return this.data.id};sb.prototype.setID=function(a){return this.data.id=a};sb.prototype.getTarget=function(){return this.data.target};sb.prototype.setTarget=function(a){return this.data.target=a};sb.prototype.getTitle=function(){return this.data.title};sb.prototype.setTitle=function(a){return this.data.title=a};sb.prototype.getLink=function(){return this.data.link};sb.prototype.setLink=function(a){return this.data.link=a};sb.prototype.getLogo=function(){return this.data.logo};sb.prototype.setLogo=
function(a){return this.data.logo=a};var La={LOAD_FEED:"loadfeed",FEED_CHANGED:"feedchanged",FEED_LOADED:"feedloaded",FEED_ERROR:"feederror"},Fc=function(){Fc.__super__.constructor.call(this)};f(Fc,L);Fc.prototype.moduleName="eventmanagement";Fc.prototype.createModel=function(){this.registerProxy(new ab(this.config))};Fc.prototype.createController=function(){Fc.__super__.createController.call(this);this.registerCommand("eventStateChanged",Ye)};Fc.prototype.createView=function(){this.registerMediator(new Yc)};
Fc.prototype.listNotificationPublications=function(){return Fc.__super__.listNotificationPublications.call(this).concat([d.CHANGE_DISPLAY_STATE,d.PLAY,d.PAUSE,d.LOCK,"eventStateChanged"])};n.registerPlugin("eventmanagement","html",Fc);n.registerPlugin("eventmanagement","flash",ee);var tb=function(a){tb.__super__.constructor.call(this,a);this.helper=new Tc};f(tb,v);tb.NAME=v.NAME;tb.prototype.defaults={url:null,data:null};tb.prototype.feed=null;tb.prototype.helper=null;tb.prototype.setURL=function(a){var b=
this;this.data.url=this.facade.evaluatePaths(a);this.sendNotification(d.DISPATCH_EVENT,new V("request",this.data.url));this.helper.getFeed(this.data.url,function(a){b.sendNotification(La.FEED_LOADED,a);b.sendNotification(La.CHANGE_FEED,a)},function(c){b.sendNotification(La.FEED_ERROR,{error:c,url:a});ha.error("[AMP Feed Load Error]",b.data.url,c)});return a};tb.prototype.getURL=function(){return this.data.url};tb.prototype.setFeedData=function(a){this.data.data=a;this.feed=this.helper.createFeed(a);
this.sendNotification(La.FEED_CHANGED,this.feed);return a};tb.prototype.getFeedData=function(){return this.data.data};tb.prototype.invoke=function(){null!=this.data.url&&""!==this.data.url?this.sendNotification(La.LOAD_FEED,this.data.url):null!=this.data.data&&setTimeout(this.sendNotification.bind(this,La.CHANGE_FEED,this.data.data),1)};var yg=function(){yg.__super__.constructor.call(this)};f(yg,puremvc.SimpleCommand);yg.prototype.execute=function(a){this.facade.retrieveProxy(tb.NAME).setURL(a.getBody())};
var zg=function(){zg.__super__.constructor.call(this)};f(zg,puremvc.SimpleCommand);zg.prototype.execute=function(a){this.facade.retrieveProxy(tb.NAME).setFeedData(a.getBody())};var Ze=function(){Ze.__super__.constructor.call(this)};f(Ze,w);Ze.prototype.execute=function(a){Ze.__super__.execute.call(this,a);this.player.sendNotification(d.CHANGE_PLAY_STATE,P.READY);a=a.getBody().item[0];this.player.sendNotification(d.SET_MEDIA,a)};var Ag=function(){Ag.__super__.constructor.call(this)};f(Ag,puremvc.SimpleCommand);
Ag.prototype.execute=function(a){this.facade.retrieveProxy(tb.NAME).invoke()};var lb=function(a,b){null==b&&(b={});lb.__super__.constructor.call(this,a,b);null!=b.url&&(this.url=b.url);null!=b.data&&(this.data=b.data);this.player.load=function(){}};f(lb,H);lb.NAME="FeedWrapper";lb.prototype.url=null;lb.prototype.data=null;lb.prototype.updateData=!0;lb.prototype.createFlashVars=function(a){null!=this.url&&""!==this.url&&(a.data_feed_url=escape(this.facade.evaluatePaths(this.url)))};lb.prototype.listNotificationInterests=
function(){return lb.__super__.listNotificationInterests.apply(this,arguments).concat([q.READY,q.FEED_LOADED,q.LOAD_FEED])};lb.prototype.handleNotification=function(a){var b,c,e=this;lb.__super__.handleNotification.call(this,a);b=a.getName();a=a.getBody();switch(b){case q.FEED_LOADED:this.sendNotification(La.FEED_CHANGED,this.data);break;case q.LOAD_FEED:c="request";break;case q.READY:null!=this.data?setTimeout(function(){e.setData(e.data)},25):null!=this.url&&""!==this.url&&this.sendNotification(La.LOAD_FEED,
this.url)}null!=c&&this.dispatchEvent(new V(c,a))};lb.prototype.setURL=function(a){null!=a&&""!==a&&(this.url=a,this.player.mediaElement.playFile(this.url,this.player.getAutoplay()),this.sendNotification(La.LOAD_FEED,this.url));return a};lb.prototype.getURL=function(){return this.url};lb.prototype.setData=function(a){this.data=a;this.updateData=!1;this.player.mediaElement.playFile(this.data,this.player.getAutoplay());return a};lb.prototype.getData=function(){return this.data};var jc=function(){jc.__super__.constructor.call(this)};
f(jc,L);jc.NAME="BrandingPlugin";jc.prototype.moduleName="branding";jc.prototype.createModel=function(){this.registerProxy(new sb(this.config))};jc.prototype.createView=function(){this.registerMediator(new ic)};jc.prototype.onRegister=function(){null!=this.config.id&&this.sendNotification(d.ADD_APPLICATION_STATE,"branding-"+this.config.id);jc.__super__.onRegister.call(this)};jc.prototype.listNotificationInterests=function(){return[d.READY]};n.registerPlugin("branding","html",jc);n.registerPlugin("branding",
"flash",Dd);n.registerPlugin("branding","external",jc);var Gc={TIME_UPDATE:"autoadvancetimeupdate",START:"autoadvancestart",STOP:"autoadvancestop",ADVANCE:"autoadvanceadvance"},Ub=function(a,b){null==b&&(b={});Ub.__super__.constructor.call(this,a,b);null!=b.interval&&(this.interval=b.interval);null!=b.handler&&(this.handler=b.handler)};f(Ub,H);Ub.NAME="AutoAdvanceWrapper";Ub.prototype.interval=null;Ub.prototype.handler=null;Ub.prototype.getInterval=function(){return this.interval};Ub.prototype.setInterval=
function(a){return this.interval=a};Ub.prototype.getHandler=function(){return this.handler};Ub.prototype.setHandler=function(a){return this.handler=a};Ub.prototype.listNotificationInterests=function(){return[q.CREATE_FLASH_VARS,q.AUTO_ADVANCE]};Ub.prototype.handleNotification=function(a){var b,c,e;b=a.getName();a=a.getBody();switch(b){case q.CREATE_FLASH_VARS:b=a.flashvars;null!=this.interval&&(b.next_video_timer=this.interval,b.auto_play_list=!0);break;case q.AUTO_ADVANCE:"function"===typeof(e=this.config).handler&&
e.handler(),c="advance"}null!=c&&this.dispatchEvent(new V(c))};var Hc=function(a){Hc.__super__.constructor.call(this,a)};f(Hc,v);Hc.NAME=v.NAME;Hc.prototype.defaults={interval:15,handler:null};Hc.prototype.currentTime=0;Hc.prototype.timeout=null;Hc.prototype.start=function(){var a=this;this.currentTime=this.data.interval;this.timeout=setInterval(function(){a.updateTime()},1E3);this.sendNotification(Gc.TIME_UPDATE,this.currentTime)};Hc.prototype.stop=function(){clearInterval(this.timeout)};Hc.prototype.updateTime=
function(){this.currentTime--;this.sendNotification(Gc.TIME_UPDATE,this.currentTime);0>=this.currentTime&&(this.stop(),this.sendNotification(Gc.ADVANCE,this.data.handler))};var $e=function(){$e.__super__.constructor.call(this)};f($e,w);$e.prototype.execute=function(a){this.sendNotification(d.ADD_APPLICATION_STATE,"autoadvance-mode");this.proxy.start();$e.__super__.execute.call(this,a)};var af=function(){af.__super__.constructor.call(this)};f(af,w);af.prototype.execute=function(a){var b;b=a.getBody();
null!=b&&("string"===typeof b?eval(""+b+"()"):"function"===typeof b&&b());this.sendNotification(d.REMOVE_APPLICATION_STATE,"autoadvance-mode");af.__super__.execute.call(this,a)};var Bg=function(){Bg.__super__.constructor.call(this)};f(Bg,y);Bg.prototype.execute=function(a){null!=this.proxy.getData().interval&&this.sendNotification(Gc.START,a.getBody())};var Zc=function(){Zc.__super__.constructor.call(this)};f(Zc,y);Zc.prototype.execute=function(a){this.proxy.stop()};var $c=function(){$c.__super__.constructor.call(this)};
f($c,ma);$c.prototype.componentName="autoadvance";$c.prototype.text=null;$c.prototype.onRegister=function(){$c.__super__.onRegister.call(this);this.text=this.create("autoadvance-text")};$c.prototype.listNotificationInterests=function(){return[Gc.TIME_UPDATE]};$c.prototype.handleNotification=function(a){switch(a.getName()){case Gc.TIME_UPDATE:a=a.getBody(),this.text.textContent=""+this.localizationManager.getString("MSG_NEXT_VIDEO")+" "+a+" "+this.localizationManager.getString("MSG_SECONDS")}};var ub=
function(){ub.__super__.constructor.call(this)};f(ub,L);ub.prototype.moduleName="feed";ub.prototype.createModel=function(){this.proxy=new tb(this.config);this.registerProxy(this.proxy)};ub.prototype.createController=function(){ub.__super__.createController.call(this);this.registerCommand(d.READY,Ag);this.registerCommand(La.LOAD_FEED,yg);this.registerCommand(La.CHANGE_FEED,zg);this.registerCommand(La.FEED_CHANGED,Ze);this.registerCommand(La.FEED_LOADED,w);this.registerCommand(La.FEED_ERROR,w)};ub.prototype.listNotificationInterests=
function(){return ub.__super__.listNotificationInterests.call(this).concat([d.READY])};ub.prototype.listNotificationPublications=function(){var a,b;return ub.__super__.listNotificationPublications.call(this).concat(function(){var c;c=[];for(a in La)b=La[a],c.push(b);return c}())};ub.prototype.setURL=function(a){this.sendNotification(La.LOAD_FEED,a);return a};ub.prototype.getURL=function(){return this.proxy.getURL()};ub.prototype.setData=function(a){this.sendNotification(La.CHANGE_FEED,a);return a};
ub.prototype.getData=function(){return this.proxy.getFeedData()};n.registerPlugin("feed","html",ub);n.registerPlugin("feed","flash",lb);var Vb=function(){Vb.__super__.constructor.call(this)};f(Vb,L);Vb.NAME="AutoAdvancePlugin";Vb.prototype.moduleName="autoadvance";Vb.prototype.createController=function(){Vb.__super__.createController.call(this);this.registerCommand(Gc.START,$e);this.registerCommand(Gc.ADVANCE,af);this.registerCommand(d.MEDIA_SEQUENCE_ENDED,Bg);this.registerCommand(d.CHANGE_MEDIA,
Zc);this.registerCommand(d.PLAY,Zc);this.registerCommand(d.PLAYING,Zc);this.registerCommand(d.REPLAY,Zc);this.registerCommand(d.SEEK,Zc);this.registerCommand(X.SEEK,Zc);this.registerCommand(d.TIME_UPDATE,w);this.registerCommand(d.STOP,w)};Vb.prototype.createModel=function(){this.registerProxy(new Hc(this.config))};Vb.prototype.createView=function(){this.registerMediator(new $c)};Vb.prototype.listNotificationInterests=function(){return[d.CHANGE_MEDIA,d.PLAY,d.PLAYING,d.REPLAY,d.MEDIA_SEQUENCE_ENDED,
d.SEEK,X.SEEK]};Vb.prototype.listNotificationPublications=function(){var a,b;return Vb.__super__.listNotificationPublications.call(this).concat(function(){var c;c=[];for(a in Gc)b=Gc[a],c.push(b);return c}())};n.registerPlugin("autoadvance","html",Vb);n.registerPlugin("autoadvance","flash",Ub);var yb={RECOMMENDATIONS_LOADED:"recommendationsloaded",RECOMMENDATION_SELECTED:"recommendationsselected"},kc=function(a,b,c,e,d,f,h,g,z){this.guid=a;this.link=b;this.title=c;this.description=e;this.thumbnail=
d;this.duration=f;this.pubDate=h;this.target=g;this.metadata=null!=z?z:{}};kc.prototype.guid=null;kc.prototype.link=null;kc.prototype.title=null;kc.prototype.description=null;kc.prototype.thumbnail=null;kc.prototype.duration=null;kc.prototype.pubDate=null;kc.prototype.target=null;kc.prototype.metadata=null;var Fa=function(a,b){null==b&&(b={});Fa.__super__.constructor.call(this,a,b);null!=b.url&&(this.url=b.url);null!=b.target&&(this.target=b.target)};f(Fa,H);Fa.NAME="RecommendationsWrapper";Fa.prototype.flashPlugins=
[{id:"RecommendationsPlugin",src:"#{paths.resources}plugins/RecommendationsPlugin.swf",blocking:!1,host:"akamai",main:"RecommendationsPlugin",type:"application/x-shockwave-flash"}];Fa.prototype.flashView={elements:{recommendationSlate:{attributes:{items:"5",viewMode:"grid"}}}};Fa.prototype.url=null;Fa.prototype.target=null;Fa.prototype.recommendations=null;Fa.prototype.getFeatureName=function(){return"recommendations"};Fa.prototype.getData=function(){return this.recommendations};Fa.prototype.setData=
function(a){return this.recommendations=a};Fa.prototype.getTarget=function(){var a,b;return this.target||(null!=(a=this.player)?null!=(b=a.config)?b.target:void 0:void 0)};Fa.prototype.getURL=function(){return this.url};Fa.prototype.createFlashVars=function(a){a.recommendations_partner="mrss";null!=this.config.target&&(a.external_target=this.config.target)};Fa.prototype.createXML=function(a){var b,c;b=a.firstChild;c=a.getElementsByTagName("recommendations")[0];null==c&&(c=a.createElement("recommendations"),
b.appendChild(c));b=a.createElement("vendor");b.setAttribute("id","mrss");c.appendChild(b);this.createProperty(a,"RECOMMENDATIONS_MRSS_URL",this.url,b)};Fa.prototype.listNotificationInterests=function(){return Fa.__super__.listNotificationInterests.apply(this,arguments).concat([q.RECOMMENDATION_SELECTED,q.RECOMMENDATIONS_LOADED])};Fa.prototype.handleNotification=function(a){var b,c;Fa.__super__.handleNotification.call(this,a);b=a.getName();a=a.getBody();switch(b){case q.RECOMMENDATIONS_LOADED:c="loaded";
this.recommendations=a;break;case q.RECOMMENDATION_SELECTED:c="selected"}null!=c&&this.dispatchEvent(new V(c,a))};var bf=function(){bf.__super__.constructor.call(this)};f(bf,w);bf.prototype.execute=function(a){bf.__super__.execute.call(this,a);a=a.getBody();"none"!==a.target&&"player"!==a.target&&window.open(a.link,a.target)};var Cg=function(){Cg.__super__.constructor.call(this)};f(Cg,y);Cg.prototype.execute=function(a){this.proxy.invoke()};var Dg=function(){Dg.__super__.constructor.call(this)};f(Dg,
y);Dg.prototype.execute=function(a){var b;b=this.proxy.getRecommendations();a=a.getBody();a.value===P.ENDED?0<(null!=b?b.length:void 0)&&this.sendNotification(d.ADD_APPLICATION_STATE,"recommendations-mode"):a.previous===P.ENDED&&0<(null!=b?b.length:void 0)&&this.sendNotification(d.REMOVE_APPLICATION_STATE,"recommendations-mode")};var Ra=function(a){Ra.__super__.constructor.call(this,a);this.helper=new Tc};f(Ra,Q);Ra.NAME=v.NAME;Ra.prototype.defaults={url:null,target:"_blank"};Ra.prototype.loaded=
!0;Ra.prototype.recommendations=null;Ra.prototype.helper=null;Ra.prototype.getRecommendations=function(){return this.recommendations};Ra.prototype.setRecommendations=function(a){this.recommendations=a;this.sendNotification(yb.RECOMMENDATIONS_LOADED,this.recommendations);return a};Ra.prototype.getURL=function(){return this.getConfigurationData().url};Ra.prototype.setURL=function(a){this.data.url=a;this.invoke();return a};Ra.prototype.getTarget=function(){return this.getConfigurationData().target||
this.facade.player.retrieveProxy(ca.NAME).getTarget()};Ra.prototype.setTarget=function(a){return this.data.target=a};Ra.prototype.invoke=function(){var a;a=this.getURL();null==a||""===a?this.facade.logger.error("[AMP RECOMMENDATIONS ERROR]","Load Error: No url provided"):g.getJson(a,this.onload.bind(this),this.onerror.bind(this))};Ra.prototype.onload=function(a){a=this.createRecommendations(a);this.setRecommendations(a)};Ra.prototype.onerror=function(a){this.facade.logger.error("[AMP RECOMMENDATIONS ERROR]",
"Load Error:",a)};Ra.prototype.createRecommendations=function(a){var b,c,e,d;a=this.helper.createFeed(a);c=[];d=a.item;a=0;for(e=d.length;a<e;a++)b=d[a],b=new kc(b.guid,b.link,b.title,b.description,b.thumbnail,b.duration,b.pubDate,this.getTarget(),b),c.push(b);return c};var Ic=function(){Ic.__super__.constructor.call(this)};f(Ic,ma);Ic.prototype.componentName="recommendations";Ic.prototype.listArea=null;Ic.prototype.onRegister=function(){Ic.__super__.onRegister.call(this);this.createText("recommendations-label",
"Recommended");this.listArea=this.create("recommendations-list-area")};Ic.prototype.listNotificationInterests=function(){return[yb.RECOMMENDATIONS_LOADED]};Ic.prototype.handleNotification=function(a){var b,c,e;switch(a.getName()){case yb.RECOMMENDATIONS_LOADED:if(this.listArea.innerHTML="",b=a.getBody(),null!=b&&0<b.length)for(c=0,e=b.length;c<e;c++)a=b[c],this.addElement(a)}};Ic.prototype.addElement=function(a){var b,c=this;b=this.create("recommendation",this.listArea);null==b.dataset&&(b.dataset=
{});b.dataset.link=a.link;b.dataset.target=a.target;b.innerHTML="\x3cimg src\x3d'"+a.thumbnail+"' class\x3d'"+this.cssPrefix+"recommendation-thumbnail' /\x3e \x3cspan class\x3d'"+this.cssPrefix+"recommendation-text'\x3e"+a.description+"\x3c/span\x3e";b.onclick=function(a){a.stopImmediatePropagation();c.sendNotification(yb.RECOMMENDATION_SELECTED,a.currentTarget.dataset);return!1}};var vb=function(){vb.__super__.constructor.call(this)};f(vb,L);vb.NAME="Feature";vb.prototype.featureName=null;vb.prototype.getFeatureName=
function(){return this.featureName};vb.prototype.registerFeature=function(){null!=this.getFeatureName()&&this.player.sendNotification("registerfeature",this)};vb.prototype.onRegister=function(){this.registerFeature();vb.__super__.onRegister.call(this)};vb.prototype.listNotificationPublications=function(){return vb.__super__.listNotificationPublications.call(this).concat(["registerfeature"])};var Jc=function(){Jc.__super__.constructor.call(this)};f(Jc,ma);Jc.prototype.componentName="recommendations-grid";
Jc.prototype.grid=null;Jc.prototype.onRegister=function(){Jc.__super__.onRegister.call(this);this.createText("recommendations-grid-label",this.localizationManager.getString(B.MSG_RECOMMENDATIONS_TITLE));this.grid=this.create("recommendations-grid-table-grid",this,"table")};Jc.prototype.listNotificationInterests=function(){return[yb.RECOMMENDATIONS_LOADED]};Jc.prototype.handleNotification=function(a){var b,c,e;switch(a.getName()){case yb.RECOMMENDATIONS_LOADED:if(this.grid.innerHTML="",this.create("recommendations-grid-row",
this.grid,"tr"),this.create("recommendations-grid-row",this.grid,"tr"),b=a.getBody(),null!=b&&0<b.length)for(c=0,e=b.length;c<e;c++)a=b[c],this.addElement(a,c)}};Jc.prototype.addElement=function(a,b){var c,e=this;c=this.create("recommendations-grid-item",this.grid.childNodes[2>b%4?0:1],"td");null==c.dataset&&(c.dataset={});c.dataset.link=a.link;c.dataset.target=this.config.getTarget();c.innerHTML="\x3cimg src\x3d'"+a.thumbnail+"' class\x3d'"+this.cssPrefix+"recommendations-grid-thumbnail' /\x3e \x3cspan class\x3d'"+
this.cssPrefix+"recommendations-grid-text'\x3e"+a.description+"\x3c/span\x3e";c.onclick=function(a){a.stopImmediatePropagation();e.sendNotification(yb.RECOMMENDATION_SELECTED,a.currentTarget.dataset);return!1}};var zb=function(){zb.__super__.constructor.call(this)};f(zb,ma);zb.prototype.componentName="recommendations-fluid-grid";zb.prototype.grid=null;zb.prototype.timeout=null;zb.prototype.gridBounds={width:0,height:0};zb.prototype.onRegister=function(){zb.__super__.onRegister.call(this);this.grid=
this.viewComponent;window.addEventListener("orientationchange",this.delayedResizeGridHanlder.bind(this))};zb.prototype.listNotificationInterests=function(){return[yb.RECOMMENDATIONS_LOADED,d.ENDED,d.CHANGE_MEDIA,d.PLAY,d.PLAYING,d.REPLAY]};zb.prototype.delayedResizeGridHanlder=function(a){try{clearTimeout(this.timeout)}catch(b){}this.timeout=setTimeout(this.resizeGridHandler.bind(this,!0),100)};zb.prototype.resizeGridHandler=function(a){var b,c,e;null==a&&(a=!1);b=this.grid.getBoundingClientRect();
if(this.gridBounds.width!==b.width||this.gridBounds.height!==b.height||a){this.grid.setAttribute("style","align-content:flex-start; -webkit-align-content:flex-start; -ms-flex-align: flex-start;opacity:0;");this.gridBounds=b;e=this.grid.childNodes;b=0;for(c=e.length;b<c;b++)a=e[b],a.style.display="block";e=this.grid.childNodes;b=0;for(c=e.length;b<c;b++)a=e[b],a.getBoundingClientRect().bottom>this.gridBounds.bottom&&(a.style.display="none");this.grid.setAttribute("style","align-content:center; -webkit-align-content:center; -ms-flex-align: center;opacity:1;")}};
zb.prototype.handleNotification=function(a){var b,c,e,m=this;switch(a.getName()){case d.CHANGE_MEDIA:case d.PLAY:case d.PLAYING:case d.REPLAY:try{clearInterval(this.timeout)}catch(f){}break;case d.ENDED:this.timeout=setInterval(function(){m.resizeGridHandler()},500);break;case yb.RECOMMENDATIONS_LOADED:if(this.grid.innerHTML="",b=a.getBody(),null!=b&&0<b.length)for(c=0,e=b.length;c<e;c++)a=b[c],this.addElement(a,c)}};zb.prototype.addElement=function(a,b){var c,e,d,f=this;c=this.create("recommendations-fluid-grid-tile",
this.grid);c.style.backgroundImage="url("+a.thumbnail+")";null!=(null!=(e=this.facade.getConfig().responsive)?e.rows:void 0)&&(c.style.height="calc("+100/this.facade.getConfig().responsive.rows+"%)");null!=(null!=(d=this.facade.getConfig().responsive)?d.column:void 0)&&(c.style.width="calc("+100/this.facade.getConfig().responsive.columns+"%)");c.dataset.link=a.link;c.dataset.target=this.facade.getConfig().target;l.create(c,l.CLICK,function(a){a.stopImmediatePropagation();f.sendNotification(yb.RECOMMENDATION_SELECTED,
a.currentTarget.dataset);return!1});this.create("recommendations-fluid-grid-tile-caption",c,"span",a.description)};var Sa=function(){Sa.__super__.constructor.call(this)};f(Sa,vb);Sa.prototype.featureName="recommendations";Sa.prototype.moduleName="recommendations";Sa.prototype.createController=function(){this.registerCommand(yb.RECOMMENDATION_SELECTED,bf);this.registerCommand(d.START,Cg);this.registerCommand(d.PLAY_STATE_CHANGE,Dg);this.registerCommand(yb.RECOMMENDATIONS_LOADED,w)};Sa.prototype.createModel=
function(){this.proxy=new Ra(this.config);this.registerProxy(this.proxy)};Sa.prototype.createView=function(){this.registerMediator(new Ic)};Sa.prototype.listNotificationInterests=function(){return[d.START,d.PLAY_STATE_CHANGE]};Sa.prototype.listNotificationPublications=function(){var a,b;return Sa.__super__.listNotificationPublications.call(this).concat(function(){var c;c=[];for(a in yb)b=yb[a],c.push(b);return c}())};Sa.prototype.setURL=function(a){this.proxy.set(a)};Sa.prototype.getURL=function(){return this.proxy.getURL()};
Sa.prototype.getData=function(){return this.proxy.getData()};Sa.prototype.setData=function(a){this.proxy.setData(a)};Sa.prototype.getTarget=function(){return this.proxy.getTarget()};Sa.prototype.setTarget=function(a){this.proxy.setTarget(a)};n.registerPlugin("recommendations","html",Sa);n.registerPlugin("recommendations","flash",Fa);var bb=function(a){bb.__super__.constructor.call(this,a)};f(bb,Aa);bb.prototype.configurationName="nielsen";bb.NAME=v.NAME;bb.cg="OnDemand";bb.url="http://secure-us.imrworldwide.com/cgi-bin/m";
bb.prototype.defaults={url:null,data:{ci:null,c6:null,cg:null,tl:null},events:null};bb.prototype.getTitle=function(){return this.title};bb.prototype.setTitle=function(a){return this.title=a};bb.prototype.start=function(){var a;a=this.constructURL("video","started");g.beacon(a,"nielsenBeacon")};bb.prototype.end=function(){var a;a=this.constructURL("video","ended");g.beacon(a,"nielsenBeacon")};bb.prototype.constructURL=function(a,b){var c,e,d,f,h,g,z,k,l,n;g=this.url||bb.url;d=null!=(h=this.value.events)?
h[a]:void 0;if(null!=d)for(z=0,k=d.length;z<k;z++)h=d[z],h.type===b&&(f=h);d=(null!=f?null!=(c=f.data)?c.ci:void 0:void 0)||this.value.data.ci;c=(null!=f?null!=(e=f.data)?e.c6:void 0:void 0)||this.value.data.c6;e=(null!=f?null!=(l=f.data)?l.cg:void 0:void 0)||this.value.data.cg||bb.cg;f=(null!=f?null!=(n=f.data)?n.tl:void 0:void 0)||this.value.data.tl;return""+g+"?ci\x3d"+d+"\x26c6\x3d"+c+"\x26cc\x3d1\x26tl\x3d"+f+"\x26cg\x3d"+e+"\x26rnd\x3d"+Date.now()};var fe=function(){return fe.__super__.constructor.apply(this,
arguments)};f(fe,H);fe.NAME="NielsenWrapper";fe.prototype.flashPlugins=[{id:"NielsenPlugin",src:"#{paths.resources}plugins/NielsenPlugin.swf",blocking:!1,host:"akamai",main:"NielsenPlugin",type:"application/x-shockwave-flash"}];fe.prototype.createXML=function(a){var b,c,e,d,f,h,g,z,k,l,n,p,q,r,s,t,u;if(null!=(null!=(b=this.config)?b.events:void 0)){b=a.firstChild;f=a.getElementsByTagName("metrics")[0];null==f&&(f=a.createElement("metrics"),b.appendChild(f));b=a.createElement("vendor");b.setAttribute("id",
"nielsen");f.appendChild(b);f={ads:{started:"adStart",ended:"adComplete"},video:{started:"videoStart",ended:"videoComplete"}};z=[{value:"ci",key:"NIELSEN_CI"},{value:"cg",key:"NIELSEN_CG"},{value:"tl",key:"NIELSEN_TL"},{value:"c6",key:"NIELSEN_C6"}];null!=this.config.url&&(e=a.createElement("property"),e.setAttribute("key","serviceURL"),c=ea.createTextContent(a,this.config.url.toString()),e.appendChild(c),b.appendChild(e));s=this.config.events;for(l in s)if(d=s[l],null!=d&&0<d.length)for(n=0,q=d.length;n<
q;n++)for(e=d[n],h=a.createElement("property"),h.setAttribute("key",f[l][e.type]),b.appendChild(h),p=0,r=z.length;p<r;p++)g=z[p],k=(null!=(t=e.data)?t[g.value]:void 0)||(null!=(u=this.config.data)?u[g.value]:void 0),null!=k&&""!==k&&(c=a.createElement("property"),c.setAttribute("key",g.key),k=ea.createTextContent(a,k),c.appendChild(k),h.appendChild(c));return a}};var cf=function(){cf.__super__.constructor.call(this)};f(cf,puremvc.SimpleCommand);cf.prototype.execute=function(a){this.facade.retrieveProxy(bb.NAME).end()};
var df=function(){df.__super__.constructor.call(this)};f(df,puremvc.SimpleCommand);df.prototype.execute=function(a){this.facade.retrieveProxy(bb.NAME).start()};var Ed=function(){Ed.__super__.constructor.call(this)};f(Ed,Sa);Ed.prototype.moduleName="recommendationsgrid";Ed.prototype.createView=function(){"tile"===this.config.view?this.registerMediator(new zb):this.registerMediator(new Jc)};Ed.prototype.listNotificationInterests=function(){return Ed.__super__.listNotificationInterests.call(this).concat([d.ENDED,
d.CHANGE_MEDIA,d.PLAY,d.PLAYING,d.REPLAY])};n.registerPlugin("recommendationsgrid","html",Ed);n.registerPlugin("recommendationsgrid","flash",Fa);var ge=function(){return ge.__super__.constructor.apply(this,arguments)};f(ge,H);ge.NAME="NielsensdkWrapper";ge.prototype.flashPlugins=[{id:"NielsenSDKPlugin",src:"#{paths.resources}plugins/NielsenSDKPlugin.swf",blocking:!1,host:"akamai",main:"NielsenSDKPlugin"}];ge.prototype.createXML=function(a){var b,c,e,d,f,h,g,z,k,l,n,p,q,r,s,t,u;if(null!=(null!=(b=
this.config)?b.events:void 0)){b=a.firstChild;f=a.getElementsByTagName("metrics")[0];null==f&&(f=a.createElement("metrics"),b.appendChild(f));b=a.createElement("vendor");b.setAttribute("id","nielsenSDK");f.appendChild(b);f={ads:{started:"adStart",ended:"adComplete"},video:{started:"videoStart",resume:"videoResume",ended:"videoComplete"}};z=[{value:"censusCategory",key:"NIELSEN_CENSUS_CATEGORY"},{value:"category",key:"NIELSEN_CATEGORY"},{value:"episodeTitle",key:"NIELSEN_EPISODE_TITLE"},{value:"videoType",
key:"NIELSEN_VIDEO_TYPE"},{value:"length",key:"NIELSEN_LENGTH"},{value:"assetId",key:"NIELSEN_ASSET_ID"},{value:"dprFlag",key:"NIELSEN_DPR_FLAG"}];e=[{value:"apid",key:"NIELSEN_APID"},{value:"sfcode",key:"NIELSEN_SF_CODE"},{value:"apn",key:"NIELSEN_APN"},{value:"fbTag",key:"NIELSEN_FBTAG"}];d=0;for(h=e.length;d<h;d++)c=e[d],null!=this.config.data[c.value]&&this.createProperty(a,c.key,this.config.data[c.value],b);s=this.config.events;for(l in s)if(d=s[l],null!=d&&0<d.length)for(n=0,q=d.length;n<q;n++)for(e=
d[n],h=a.createElement("property"),h.setAttribute("key",f[l][e.type]),b.appendChild(h),p=0,r=z.length;p<r;p++)g=z[p],k=(null!=(t=e.data)?t[g.value]:void 0)||(null!=(u=this.config.data)?u[g.value]:void 0),null!=k&&""!==k&&(c=a.createElement("property"),c.setAttribute("key",g.key),k=ea.createTextContent(a,k),c.appendChild(k),h.appendChild(c));return a}};var va=function(a){va.__super__.constructor.call(this,a)};f(va,Q);va.NAME=v.NAME;va.prototype.defaults={data:null,events:null,plugin:{js:"http://secure-us.imrworldwide.com/novms/js/2/ggcmb400.js"}};
va.prototype.nielsensdkSDK=null;va.prototype.cur_position=0;va.prototype.timer=null;va.prototype.queryInterval=2;va.prototype.isLive=null;va.prototype.initialize=function(){va.__super__.initialize.call(this);this.nielsensdkSDK=new NOLCMB.ggInitialize(this.value.data)};va.prototype.generateNielsenVO=function(a,b){var c,e,d,f,h,g,k,l;null==a&&(a=null);null==b&&(b=null);h={};c=this.facade.player.getMedia();this.isLive=c.isLive;h.assetid=c.guid;h.category=c.category;h.censuscategory=c.category;h.dprflag=
"true";h.episodetitle=c.title?c.title:episode_url;h.length=null!=a?a.duration:"NaN"===String(c.duration.toFixed(1))?86400:String(c.duration.toFixed(1));h.videotype=null!=a?a.type:"content";l=this.value.events;for(f in l)if(e=l[f],null!=b&&null!=e&&0<e.length)for(g=0,k=e.length;g<k;g++)if(c=e[g],(null!=c?c.type:void 0)===b)for(d in c.data)h[d.toLowerCase()]=c.data[d];return h};va.prototype.metaLoad=function(){this.nielsensdkSDK.ggPM("15",this.generateNielsenVO());this.facade.logger.log("[AMP Nielsensdk Event] : loadMetadata")};
va.prototype.adStart=function(a){"midroll"===(null!=a?a.type:void 0)&&(this.nielsensdkSDK.ggPM("7",this.generateNielsenVO()),this.facade.logger.log("[AMP Nielsensdk Event] : stop"));this.nielsensdkSDK.ggPM("15",this.generateNielsenVO(a));this.facade.logger.log("[AMP Nielsensdk Event] : Ad Start")};va.prototype.adEnd=function(a){this.nielsensdkSDK.ggPM("7",this.generateNielsenVO(a));this.facade.logger.log("[AMP Nielsensdk Event] : Ad End");"midroll"===(null!=a?a.type:void 0)&&(this.nielsensdkSDK.ggPM("15",
this.generateNielsenVO()),this.facade.logger.log("[AMP Nielsensdk Event] : Video Resume"))};va.prototype.start=function(a){null==a&&(a=null);"midroll"===(null!=a?a.type:void 0)?(this.nielsensdkSDK.ggPM("15",this.generateNielsenVO(a,"resume")),this.facade.logger.log("[AMP Nielsensdk Event] : Content Resume")):(this.nielsensdkSDK.ggPM("15",this.generateNielsenVO(null,"started")),this.facade.logger.log("[AMP Nielsensdk Event] : Content Play"))};va.prototype.end=function(){var a;a=this.facade.player.getCurrentTime().toFixed(1);
this.nielsensdkSDK.ggPM("57",a);this.facade.logger.log("[AMP Nielsensdk Event] : Video Ended");this.cur_position=0};va.prototype.timeupdate=function(){this.isLive?(this.nielsensdkSDK.ggPM("49",Math.floor(Date.now()/1E3)),this.facade.logger.log("[AMP nielsensdk Event] : timeupdate Live")):(this.cur_position=this.facade.player.getCurrentTime().toFixed(1),Math.abs(this.timer-this.cur_position)>this.queryInterval&&(this.timer=this.cur_position,this.nielsensdkSDK.ggPM("49",this.cur_position),this.facade.logger.log("[AMP Nielsensdk Event] : timeupdate",
this.cur_position)))};var Eg=function(){Eg.__super__.constructor.call(this)};f(Eg,puremvc.SimpleCommand);Eg.prototype.execute=function(a){this.facade.retrieveProxy(va.NAME).start()};var Fg=function(){Fg.__super__.constructor.call(this)};f(Fg,puremvc.SimpleCommand);Fg.prototype.execute=function(a){this.facade.retrieveProxy(va.NAME).adStart(a.body)};var Gg=function(){Gg.__super__.constructor.call(this)};f(Gg,puremvc.SimpleCommand);Gg.prototype.execute=function(a){this.facade.retrieveProxy(va.NAME).adEnd(a.body)};
var Hg=function(){Hg.__super__.constructor.call(this)};f(Hg,puremvc.SimpleCommand);Hg.prototype.execute=function(a){this.facade.retrieveProxy(va.NAME).end()};var mi=function(){mi.__super__.constructor.call(this)};f(mi,puremvc.SimpleCommand);mi.prototype.execute=function(a){this.facade.retrieveProxy(va.NAME).metaLoad()};var ef=function(){ef.__super__.constructor.call(this)};f(ef,puremvc.SimpleCommand);ef.prototype.execute=function(a){this.facade.retrieveProxy(va.NAME).timeupdate()};var md=function(){md.__super__.constructor.call(this)};
f(md,L);md.prototype.moduleName="nielsen";md.prototype.createController=function(){var a,b,c,e;md.__super__.createController.call(this);b=null!=(a=this.config)?null!=(c=a.events)?c.video:void 0:void 0;if(null!=b)for(c=0,e=b.length;c<e;c++)a=b[c],"started"===a.type&&(this.registerCommand(d.STARTED,df),this.registerCommand(d.CONTENT_CHANGED,df)),"ended"===a.type&&(this.registerCommand(d.ENDED,cf),this.registerCommand(d.CHANGE_CONTENT,cf))};md.prototype.createModel=function(){this.registerProxy(new bb(this.config))};
md.prototype.listNotificationInterests=function(){return[d.STARTED,d.ENDED,d.CONTENT_CHANGED,d.CHANGE_CONTENT]};n.registerPlugin("nielsen","html",md);n.registerPlugin("nielsen","flash",fe);var he=function(){return he.__super__.constructor.apply(this,arguments)};f(he,H);he.NAME="ComscoreStreamsenseWrapper";he.prototype.flashPlugins=[{id:"ComscoreStreamSensePlugin",src:"#{paths.resources}plugins/ComscoreStreamSensePlugin.swf",blocking:!1,host:"akamai",main:"ComscoreStreamSensePlugin"}];he.prototype.createXML=
function(a){var b,c,e,d,f;b=a.firstChild;c=a.getElementsByTagName("metrics")[0];null==c&&(c=a.createElement("metrics"),b.appendChild(c));b=a.createElement("vendor");b.setAttribute("id","comscoreStreamSense");c.appendChild(b);e=[{value:this.config.data.clientId,key:"C2"},{value:this.config.data.publisherSecret,key:"PUBLISHER_SECRET"},{value:this.config.data.appVersion,key:"APP_VERSION"},{value:this.config.data.metadata,key:"metadata"}];d=0;for(f=e.length;d<f;d++)c=e[d],null!=c.value&&this.createProperty(a,
c.key,c.value,b);return a};var Ga=function(a){Ga.__super__.constructor.call(this,a)};f(Ga,Q);Ga.NAME=v.NAME;Ga.prototype.defaults={plugin:{js:null},data:{clientId:null,publisherSecret:null,appVersion:null,metadata:null}};Ga.prototype.myStreamingTag=null;Ga.prototype.sdk=null;Ga.prototype.getScript=function(){return this.config.plugin.js};Ga.prototype.initialize=function(){Ga.__super__.initialize.call(this);this.sdk=akamai.amp.ns_;null!=this.sdk&&null===this.myStreamingTag&&(this.myStreamingTag=new this.sdk.StreamingTag({customerC2:this.value.data.clientId}))};
Ga.prototype.mediaChange=function(){null!=this.myStreamingTag&&this.myStreamingTag.stop();this.myStreamingTag=null;this.myStreamingTag=new this.sdk.StreamingTag({customerC2:this.value.data.clientId});this.facade.logger.log("[AMP ComscoreStreamsense Event] : Media Change, StreamTag ReInitialize")};Ga.prototype.adStart=function(a){this.myStreamingTag.playVideoAdvertisement(this.getMetaData(!0));this.facade.logger.log("[AMP ComscoreStreamsense Event] : Ad Start")};Ga.prototype.start=function(a){var b;
null!=(b=this.facade.player.ads)&&b.getInProgress()||(this.myStreamingTag.playVideoContentPart(this.getMetaData()),this.facade.logger.log("[AMP ComscoreStreamsense Event] : Content Play"))};Ga.prototype.stop=function(){this.myStreamingTag.stop();this.facade.logger.log("[AMP ComscoreStreamsense Event] : Stop")};Ga.prototype.ended=function(){this.myStreamingTag.stop();this.facade.logger.log("[AMP ComscoreStreamsense Event] : End");this.myStreamingTag=null;this.myStreamingTag=new this.sdk.StreamingTag({customerC2:this.value.data.clientId})};
Ga.prototype.getMetaData=function(a){var b,c,e;null==a&&(a=!1);c={};a=a?this.value.data.metadata.ads:this.value.data.metadata.video;for(b in a)e=a[b],"null"!==e&&(c[b]=e);return c};var Ig=function(){Ig.__super__.constructor.call(this)};f(Ig,puremvc.SimpleCommand);Ig.prototype.execute=function(a){this.facade.retrieveProxy(Ga.NAME).start(a.body)};var Jg=function(){Jg.__super__.constructor.call(this)};f(Jg,puremvc.SimpleCommand);Jg.prototype.execute=function(a){this.facade.retrieveProxy(Ga.NAME).adStart(a.body)};
var ie=function(){ie.__super__.constructor.call(this)};f(ie,puremvc.SimpleCommand);ie.prototype.execute=function(a){this.facade.retrieveProxy(Ga.NAME).stop(a.body)};var Kg=function(){Kg.__super__.constructor.call(this)};f(Kg,puremvc.SimpleCommand);Kg.prototype.execute=function(a){var b;b=this.facade.retrieveProxy(Ga.NAME);b.adStart(a.body);b.stop(a.body)};var Lg=function(){Lg.__super__.constructor.call(this)};f(Lg,puremvc.SimpleCommand);Lg.prototype.execute=function(a){this.facade.retrieveProxy(Ga.NAME).mediaChange()};
var Mg=function(){Mg.__super__.constructor.call(this)};f(Mg,puremvc.SimpleCommand);Mg.prototype.execute=function(a){this.facade.retrieveProxy(Ga.NAME).ended()};var nd=function(){nd.__super__.constructor.call(this)};f(nd,L);nd.prototype.moduleName="nielsensdk";nd.prototype.createModel=function(){this.registerProxy(new va(this.config))};nd.prototype.createController=function(){nd.__super__.createController.call(this);this.registerCommand(k.BREAK_END,Gg);this.registerCommand(k.AD_STARTED,Fg);this.registerCommand(d.STARTED,
Eg);this.registerCommand(d.ENDED,Hg);this.registerCommand(d.TIME_UPDATE,ef);this.registerCommand(k.AD_TIME_REMAINING,ef)};nd.prototype.listNotificationInterests=function(){return[k.AD_STARTED,k.BREAK_END,d.STARTED,d.ENDED,d.LOADED_METADATA,d.TIME_UPDATE,d.CONTENT_CHANGED,d.CHANGE_CONTENT,k.AD_TIME_REMAINING]};n.registerPlugin("nielsensdk","html",nd);n.registerPlugin("nielsensdk","flash",ge);var lc=function(a){lc.__super__.constructor.call(this,a)};f(lc,Aa);lc.prototype.configurationName="comscore";
lc.NAME=v.NAME;lc.prototype.defaults={url:"http://b.scorecardresearch.com/b",events:{ads:null,video:null},data:{c1:null,c2:null,c3:null,c4:null,c5:null,c6:null,c7:null,c8:null,c9:null,c10:null,c14:null}};lc.prototype.adStart=function(){var a;a=this.constructURL("ads","started");g.beacon(a)};lc.prototype.videoStart=function(){var a;a=this.constructURL("video","started");g.beacon(a)};lc.prototype.constructURL=function(a,b){var c,e,d,f,h,g,k,l;c={};d=null!=(f=this.value.events)?f[a]:void 0;if(null!=
d)for(k=0,l=d.length;k<l;k++)f=d[k],f.type===b&&(e=f);f=this.value.data;for(h in f)d=f[h],c[h]=(null!=e?null!=(g=e.data)?g[h]:void 0:void 0)||d;null==c.c7&&(c.c7=document.location.href.substr(0,512));null==c.c8&&(c.c8=document.referrer.substr(0,512));null==c.c9&&(c.c9=document.title);null==c.cv&&(c.cv="2.0");c.rn=Date.now();g=this.value.url;e=[];for(h in c)d=c[h],null!=d&&""!==d&&e.push(h+"\x3d"+escape(d));0<e.length&&(g+="?"+e.join("\x26"));return g.substr(0,2080)};var je=function(){return je.__super__.constructor.apply(this,
arguments)};f(je,H);je.NAME="ComscoreWrapper";je.prototype.flashPlugins=[{id:"ComscorePlugin",src:"#{paths.resources}plugins/ComscorePlugin.swf",blocking:!1,host:"akamai",main:"ComscorePlugin",type:"application/x-shockwave-flash"}];je.prototype.createXML=function(a){var b,c,e,d,f,h,g,k,l,n,p,q,r,s,t,u,v;b=a.firstChild;c=a.getElementsByTagName("metrics")[0];null==c&&(c=a.createElement("metrics"),b.appendChild(c));b=a.createElement("vendor");b.setAttribute("id","comscore");c.appendChild(b);f={ads:{started:"adStart",
ended:"adComplete"},video:{started:"videoStart",ended:"videoComplete"}};k=[{value:"c1",key:"COMSCORE_CSC1"},{value:"c2",key:"COMSCORE_CSC2"},{value:"c3",key:"COMSCORE_CSC3"},{value:"c4",key:"COMSCORE_CSC4"},{value:"c5",key:"COMSCORE_CSC5"},{value:"c6",key:"COMSCORE_CSC6"},{value:"c7",key:"COMSCORE_CSC7"},{value:"c8",key:"COMSCORE_CSC8"},{value:"c9",key:"COMSCORE_CSC9"},{value:"c10",key:"COMSCORE_CSC10"},{value:"c11",key:"COMSCORE_CSC14"}];t=this.config.events;for(n in t)if(d=t[n],null!=d&&0<d.length)for(p=
0,r=d.length;p<r;p++)for(e=d[p],h=a.createElement("property"),h.setAttribute("key",f[n][e.type]),b.appendChild(h),c=a.createElement("property"),c.setAttribute("key","COMSCORE_CSURL"),l=ea.createTextContent(a,this.config.url),c.appendChild(l),h.appendChild(c),q=0,s=k.length;q<s;q++)g=k[q],l=(null!=(u=e.data)?u[g.value]:void 0)||(null!=(v=this.config.data)?v[g.value]:void 0),null!=l&&""!==l&&(c=a.createElement("property"),c.setAttribute("key",g.key),l=ea.createTextContent(a,l),c.appendChild(l),h.appendChild(c));
return a};var Ng=function(){Ng.__super__.constructor.call(this)};f(Ng,puremvc.SimpleCommand);Ng.prototype.execute=function(a){this.facade.retrieveProxy(lc.NAME).adStart()};var ff=function(){ff.__super__.constructor.call(this)};f(ff,puremvc.SimpleCommand);ff.prototype.execute=function(a){this.facade.retrieveProxy(lc.NAME).videoStart()};var od=function(){od.__super__.constructor.call(this)};f(od,L);od.prototype.moduleName="comscorestreamsense";od.prototype.createModel=function(){this.registerProxy(new Ga(this.config))};
od.prototype.createController=function(){od.__super__.createController.call(this);this.registerCommand(d.MEDIA_CHANGE,Lg);this.registerCommand(k.AD_STARTED,Jg);this.registerCommand(k.AD_ENDED,ie);this.registerCommand(k.SKIPPED,ie);this.registerCommand(k.AD_ERROR,Kg);this.registerCommand(d.PLAYING,Ig);this.registerCommand(d.PAUSED,ie);this.registerCommand(d.ENDED,Mg)};od.prototype.listNotificationInterests=function(){return[d.MEDIA_CHANGE,k.AD_STARTED,k.AD_ENDED,k.AD_ERROR,k.SKIPPED,d.ENDED,d.PAUSED,
d.PLAYING]};n.registerPlugin("comscorestreamsense","html",od);n.registerPlugin("comscorestreamsense","flash",he);var ke=function(a,b){if(!0===b.heartbeat.enabled||!0===b.useJS)this.createXML=function(){},this.flashPlugins=[],this.plugin=new pd,this.plugin.oninitialized=a.registerModule.bind(a,this.plugin),this.plugin.initialize(b,a);ke.__super__.constructor.call(this,a,b)};f(ke,H);ke.NAME="OmnitureWrapper";ke.prototype.flashPlugins=[{id:"OmniturePlugin",src:"#{paths.resources}plugins/OmniturePlugin.swf",
blocking:!1,host:"akamai",main:"OmniturePlugin"}];ke.prototype.createXML=function(a){var b,c,e,d,f,h,g,k,l,n,p,q;if(!0!==this.config.useJS){b=a.firstChild;h=a.getElementsByTagName("metrics")[0];null==h&&(h=a.createElement("metrics"),b.appendChild(h));b=a.createElement("vendor");b.setAttribute("id","omniture");h.appendChild(b);g=[{value:this.config.channel,key:"OMNITURE_CHANNEL"},{value:this.config.account,key:"OMNITURE_ACCOUNT"},{value:this.config.debugTracking,key:"OMNITURE_DEBUG_TRACKING"},{value:this.config.trackLocal,
key:"OMNITURE_TRACK_LOCAL"},{value:this.config.visitorNamespace,key:"OMNITURE_VISITOR_NAMESPACE"},{value:this.config.trackingServer,key:"OMNITURE_TRACKING_SERVER"},{value:this.config.trackingServerSecure,key:"OMNITURE_TRACKING_SERVER_SECURE"},{value:this.config.currencyCode,key:"OMNITURE_CURRENCY_CODE"},{value:this.config.trackWhilePlaying,key:"OMNITURE_TRACK_WHILE_PLAYING"},{value:this.config.trackMediaMethods,key:"OMNITURE_TRACK_MEDIA_METHODS"},{value:this.config.mediaName,key:"OMNITURE_MEDIA_NAME"},
{value:this.config.playerName,key:"OMNITURE_PLAYER_NAME"}];c=0;for(e=g.length;c<e;c++)h=g[c],null!=h.value&&this.createProperty(a,h.key,h.value,b);c=this.config.Media;if(null!=c){g=[{value:c.autoTrack,key:"OMNITURE_AUTO_TRACK"},{value:c.segmentByMilestones,key:"OMNITURE_SEGMENT_MILESTONES"},{value:c.trackVars,key:"OMNITURE_TRACKVARS"},{value:c.trackEvents,key:"OMNITURE_TRACKEVENTS"},{value:c.trackUsingContextData,key:"OMNITURE_TRACK_CONTEXT_DATA"},{value:c.trackSecondIntervals,key:"OMNITURE_TRACKSECOND_INTERVALS"}];
e=0;for(k=g.length;e<k;e++)h=g[e],null!=h.value&&this.createProperty(a,h.key,h.value,b);if(null!=c.trackMilestones)for(l=this.createProperty(a,"OMNITURE_TRACK_MILESTONES",null,b),e=c.trackMilestones,n=0,p=e.length;n<p;n++)for(f in h=e[n],k=this.createProperty(a,h.percent,null,l),h)g=h[f],"percent"!==f&&this.createProperty(a,f,g,k);e=c.contextDataMapping;if(null!=e)for(f in c=this.createProperty(a,"OMNITURE_CONTEXT_DATA",null,b),e)if(g=e[f],"string"===typeof g&&this.createProperty(a,f,g,c),g instanceof
Array)for(k=this.createProperty(a,f,null,c),l=0,n=g.length;l<n;l++)h=g[l],this.createProperty(a,h.percent,h.events,k)}e=this.config.customLinkTracking;if(null!=e)for(f in k=this.createProperty(a,"OMNITURE_CUSTOM_LINK_TRACKING",null,b),e)if("intervalReached"===f)for(g=this.createProperty(a,f,null,k),p=e[f],n=0,l=p.length;n<l;n++)for(f in c=p[n],h=this.createProperty(a,c.interval,null,g),c)"interval"!==f&&this.createProperty(a,f,c[f],h);else this.createProperty(a,f,e[f],k);f=null!=(d=this.config.events)?
d.video:void 0;if(null!=f)for(c=0,g=f.length;c<g;c++){d=f[c];switch(d.type){case "started":h="videoStart";break;case "ended":h="videoComplete";break;case "play":h="videoResume";break;case "pause":h="videoPause";break;default:h=d.type}this.createProperty(a,h,d.data,b)}f=null!=(q=this.config.events)?q.ads:void 0;if(null!=f)for(g=0,q=f.length;g<q;g++)d=f[g],h="started"===d.type?"adStart":"ended"===d.type?"adComplete":d.type,this.createProperty(a,h,d.data,b)}};var da=function(a){da.__super__.constructor.call(this,
a)};f(da,Q);da.NAME=v.NAME;da.prototype.defaults={main:"s",heartbeat:null,account:null,playerName:null,mediaName:null,trackingServer:null,visitorNamespace:null,visitor:null,visitorID:null,pageName:null};da.prototype.media=null;da.prototype.started=!1;da.prototype.ad=null;da.prototype.adCurrentTime=null;da.prototype.adStarted=!1;da.prototype.adsEnabled=!1;da.prototype.getMediaName=function(){return this.getConfigurationData().mediaName||this.media.getTitle()};da.prototype.getPlayerName=function(){var a;
return this.getConfigurationData().playerName||(null!=(a=this.facade.player.retrieveProxy(ca.NAME))?a.getName():void 0)||this.facade.player.config.name||"amp"};da.prototype.getPlaybackCore=function(){var a;return(null!=(a=this.facade.player.retrieveProxy(ba.NAME))?a.getActivePlaybackCore():void 0)||this.facade.player.playback};da.prototype.initialize=function(){var a,b;da.__super__.initialize.call(this);this.media=this.facade.player.retrieveProxy(s.NAME);this.adsEnabled=null!=(a=this.facade.player.ads)?
a.getEnabled():void 0;if(null!=this.plugin){try{null==this.plugin.Media&&this.plugin.loadModule("Media")}catch(c){this.error("initialize",c)}null==(null!=(b=this.plugin.Media)?b.openAd:void 0)&&(this.adStart=this.adEnded=this.adPlay=this.adPause=this.adCurrentTime=function(){})}};da.prototype.createPlugin=function(){return window[this.getConfigurationData().main]};da.prototype.mediaChange=function(){var a;this.started=!1;this.adsEnabled=null!=(a=this.facade.player.ads)?a.getEnabled():void 0};da.prototype.start=
function(){if(!0!==this.started){try{this.started=!0,this.plugin.Media.open(this.getMediaName(),this.media.getDuration(),this.getPlayerName())}catch(a){this.error(a)}!0!==this.adsEnabled&&this.play()}};da.prototype.play=function(){if(!0!==this.started)this.start();else if(!0!==this.adStarted)try{this.plugin.Media.play(this.getMediaName(),this.getPlaybackCore().getCurrentTime()||0)}catch(a){this.error(a)}};da.prototype.pause=function(){if(!0!==this.adStarted)try{this.plugin.Media.stop(this.getMediaName(),
this.getPlaybackCore().getCurrentTime())}catch(a){this.error(a)}};da.prototype.seeking=function(){try{this.plugin.Media.stop(this.getMediaName(),this.getPlaybackCore().getCurrentTime())}catch(a){this.error(a)}};da.prototype.seeked=function(){try{this.plugin.Media.play(this.getMediaName(),this.getPlaybackCore().getCurrentTime())}catch(a){this.error(a)}};da.prototype.ended=function(){try{this.plugin.Media.stop(this.getMediaName(),this.getPlaybackCore().getCurrentTime()),this.plugin.Media.close(this.getMediaName()),
this.started=!1}catch(a){this.error(a)}};da.prototype.getAd=function(){return this.ad};da.prototype.setAd=function(a){this.adStarted=!1;this.adCurrentTime=0;return this.ad=a};da.prototype.adStart=function(){try{this.adStarted=!0,this.plugin.Media.openAd(this.ad.title,this.ad.duration,this.getPlayerName(),this.getMediaName(),this.ad.type,this.ad.position,this.ad.cpm),this.adPlay()}catch(a){this.error("ad start",a)}};da.prototype.adPlay=function(){!0!==this.adStarted&&this.adStart();try{this.plugin.Media.play(this.ad.title,
this.adCurrentTime||0)}catch(a){this.error("ad play",a)}};da.prototype.adPause=function(){try{this.plugin.Media.stop(this.ad.title,this.adCurrentTime)}catch(a){this.error("ad pause",a)}};da.prototype.adCurrentTime=function(a){this.adCurrentTime=a};da.prototype.adEnded=function(){if(!1!==this.adStarted){try{this.adStarted=!1,this.plugin.Media.stop(this.ad.title,this.ad.duration),this.plugin.Media.close(this.ad.title)}catch(a){this.error("ad end",a)}this.play()}};var ra=function(a){ra.__super__.constructor.call(this,
a)};f(ra,da);ra.NAME=v.NAME;ra.prototype.aaPlugin=null;ra.prototype.playerPlugin=null;ra.prototype.heartbeat=null;ra.prototype.resumed=!1;ra.prototype.liveLinear=null;ra.prototype.initialize=function(){var a,b,c,e=this;ra.__super__.initialize.call(this);b=this.getConfigurationData();null!=b.heartbeat.liveLinear&&this.calculateLiveLinear();"undefined"!==typeof Visitor&&null!==Visitor&&(c=new Visitor(b.visitor.marketingCloudOrgId),c.trackingServer=b.visitor.trackingServer);a=new AppMeasurement;a.account=
b.account;a.trackingServer=b.trackingServer;a.visitor=c;a.pageName=b.pageName;a.charSet="UTF-8";a.visitorID=b.visitorID;c=this.createDelegate();this.playerPlugin=new ADB.va.plugins.videoplayer.VideoPlayerPlugin(c);c=new ADB.va.plugins.videoplayer.VideoPlayerPluginConfig;c.debugLogging=this.getDebug();this.playerPlugin.configure(c);c=new ADB.va.plugins.aa.AdobeAnalyticsPluginDelegate;c.onError=function(a){e.facade.logger.error("AdobeAnalyticsPlugin error: "+a.getMessage()+" | "+a.getDetails())};this.aaPlugin=
new ADB.va.plugins.aa.AdobeAnalyticsPlugin(a,c);c=new ADB.va.plugins.aa.AdobeAnalyticsPluginConfig;c.channel=b.heartbeat.channel;c.debugLogging=this.getDebug();this.aaPlugin.configure(c);c=new ADB.va.plugins.ah.AdobeHeartbeatPluginDelegate;c.onError=function(a){e.facade.logger.error("AdobeHeartbeatPlugin error: "+a.getMessage()+" | "+a.getDetails())};a=new ADB.va.plugins.ah.AdobeHeartbeatPlugin(c);c=new ADB.va.plugins.ah.AdobeHeartbeatPluginConfig(b.heartbeat.trackingServer,b.heartbeat.publisher);
c.ovp=b.heartbeat.ovp;c.sdk=b.heartbeat.sdk;c.ssl=!0===b.heartbeat.ssl;c.debugLogging=this.getDebug();a.configure(c);b=[this.playerPlugin,this.aaPlugin,a];c=new ADB.va.HeartbeatDelegate;c.onError=function(a){e.facade.logger.error("Heartbeat error: "+a.getMessage()+" | "+a.getDetails())};this.heartbeat=new ADB.va.Heartbeat(c,b);c=new ADB.va.HeartbeatConfig;c.debugLogging=this.getDebug();this.heartbeat.configure(c)};ra.prototype.calculateLiveLinear=function(){var a,b,c=this;null==this.liveLinear&&(this.liveLinear=
{});!0!==this.liveLinear.updating&&(this.liveLinear.updating=!0,a={updating:!1},b=Date.now(),g.getUTC(function(e){var d,f,h,g;h=Date.now();d=new Date(e);f=d.toJSON().replace(/([^T]+T).+/,"$1");g=c.getConfigurationData().heartbeat.liveLinear.timezone||"Z";a.utc=e;d=new Date(b+(h-b)/2);a.client=d.getTime();a.offset=a.client-e;d=new Date(f+"00:00:00.000"+g);a.start=d.getTime();d=new Date(f+"23:59:59.999"+g);a.end=d.getTime();a.duration=Math.round((a.end-a.start)/1E3);c.liveLinear=a}))};ra.prototype.calculateLiveLinearTime=
function(){var a;a=Date.now()-this.liveLinear.offset;a=Math.round((a-this.liveLinear.start)/1E3);a>this.liveLinear.duration&&(a-=this.liveLinear.duration,this.calculateLiveLinear());return a};ra.prototype.createDelegate=function(){var a,b=this;a=new ADB.va.plugins.videoplayer.VideoPlayerPluginDelegate;a.getVideoInfo=function(){var a,e;a=b.getPlaybackCore();e=new ADB.va.plugins.videoplayer.VideoInfo;e.id=b.media.getGUID()||b.media.getTitle();e.playerName=b.getPlayerName();e.name=b.getMediaName();e.resumed=
b.resumed;!0===b.getConfigurationData().heartbeat.liveLinear.enabled?(e.length=b.liveLinear.duration,e.streamType=ADB.va.plugins.videoplayer.AssetType.ASSET_TYPE_LIVE,e.playhead=b.calculateLiveLinearTime()):"live"===b.media.getTemporalType()?(e.length=-1,e.streamType=ADB.va.plugins.videoplayer.AssetType.ASSET_TYPE_LIVE,e.playhead=0):(e.length=b.media.getDuration(),e.streamType=ADB.va.plugins.videoplayer.AssetType.ASSET_TYPE_VOD,a=null!=a?"function"===typeof a.getCurrentTime?a.getCurrentTime():void 0:
void 0,e.playhead=null==a||isNaN(a)?0:a);return e};a.getAdInfo=function(){var a,e;a=new ADB.va.plugins.videoplayer.AdInfo;if(null==b.ad)return null;a.id=b.ad.id;e=b.ad.duration;a.length=isNaN(e)||0===e?-1:e;a.position=b.ad.position;a.name=b.ad.title;return a};a.getAdBreakInfo=function(){var a;a=new ADB.va.plugins.videoplayer.AdBreakInfo;if(null==b.ad)return null;a.name=b.ad.type;a.position=b.ad.position;a.playerName=b.getPlayerName();a.startTime=b.getPlaybackCore().getCurrentTime();return a};a.getChapterInfo=
function(){var a,e;e=b.media.getScene(b.getPlaybackCore().getCurrentTime());if(null==e)return null;a=new ADB.va.plugins.videoplayer.ChapterInfo;a.name=e.title;a.length=e.end-e.start;a.position=e.position;a.startTime=e.start;return a};a.onError=function(a){b.facade.logger.error("Heartbeat Error:",a)};a.getQoSInfo=function(){new ADB.va.plugins.videoplayer.QoSInfo;return null};return a};ra.prototype.mediaChange=function(){var a,b;ra.__super__.mediaChange.call(this);this.resumed=!1;a=null!=(b=this.getValue("heartbeat").metadata)?
b.video:void 0;null!=a&&this.aaPlugin.setVideoMetadata(a)};ra.prototype.start=function(){if(!0!==this.started){try{this.playerPlugin.trackVideoLoad(),this.started=!0}catch(a){this.error(a)}this.play()}};ra.prototype.play=function(){!0!==this.started&&this.start();try{this.playerPlugin.trackPlay()}catch(a){this.error(a)}};ra.prototype.pause=function(){try{this.playerPlugin.trackPause(),this.resumed=!0}catch(a){this.error(a)}};ra.prototype.seeking=function(){try{this.playerPlugin.trackSeekStart()}catch(a){this.error(a)}};
ra.prototype.seeked=function(){try{this.playerPlugin.trackSeekComplete()}catch(a){this.error(a)}};ra.prototype.ended=function(){try{this.playerPlugin.trackComplete(),this.playerPlugin.trackVideoUnload(),this.started=!1,this.aaPlugin.setVideoMetadata(null)}catch(a){this.error(a)}};ra.prototype.adStart=function(){var a,b;if(!0!==this.started)a=null!=(b=this.getValue("heartbeat").metadata)?b.ad:void 0,null!=a&&this.aaPlugin.setAdMetadata(a),this.start(),setTimeout(this.adStart.bind(this),0);else try{this.playerPlugin.trackAdStart()}catch(c){this.error(c)}};
ra.prototype.adEnded=function(){try{this.playerPlugin.trackAdComplete(),this.aaPlugin.setAdMetadata(null)}catch(a){this.error(a)}};ra.prototype.adPlay=function(){};ra.prototype.adPause=function(){};var Og=function(){Og.__super__.constructor.call(this)};f(Og,y);Og.prototype.execute=function(a){this.proxy.start()};var Pg=function(){Pg.__super__.constructor.call(this)};f(Pg,y);Pg.prototype.execute=function(a){this.proxy.play()};var Qg=function(){Qg.__super__.constructor.call(this)};f(Qg,y);Qg.prototype.execute=
function(a){this.proxy.pause()};var Rg=function(){Rg.__super__.constructor.call(this)};f(Rg,y);Rg.prototype.execute=function(a){this.proxy.seeking()};var Sg=function(){Sg.__super__.constructor.call(this)};f(Sg,y);Sg.prototype.execute=function(a){this.proxy.seeked()};var gf=function(){gf.__super__.constructor.call(this)};f(gf,y);gf.prototype.execute=function(a){this.proxy.ended()};var Tg=function(){Tg.__super__.constructor.call(this)};f(Tg,y);Tg.prototype.execute=function(a){this.proxy.setMedia(a.getBody());
this.proxy.start()};var Ug=function(){Ug.__super__.constructor.call(this)};f(Ug,y);Ug.prototype.execute=function(a){this.proxy.setAd(a.getBody())};var Vg=function(){Vg.__super__.constructor.call(this)};f(Vg,y);Vg.prototype.execute=function(a){this.proxy.adStart()};var Wg=function(){Wg.__super__.constructor.call(this)};f(Wg,y);Wg.prototype.execute=function(a){this.proxy.adPlay()};var Xg=function(){Xg.__super__.constructor.call(this)};f(Xg,y);Xg.prototype.execute=function(a){this.proxy.adPause()};var Yg=
function(){Yg.__super__.constructor.call(this)};f(Yg,y);Yg.prototype.execute=function(a){this.proxy.adEnded();this.proxy.setAd(null)};var Zg=function(){Zg.__super__.constructor.call(this)};f(Zg,y);Zg.prototype.execute=function(a){this.proxy.adCurrentTime(a.getBody())};var $g=function(){$g.__super__.constructor.call(this)};f($g,y);$g.prototype.execute=function(a){this.proxy.mediaChange()};var Kc=function(a,b,c){this.startTime=a;this.endTime=b;this.id=c};Kc.prototype.id=null;Kc.prototype.startTime=
null;Kc.prototype.endTime=null;Kc.prototype.text=null;Kc.prototype.html=null;Kc.prototype.align=null;var qd=function(){qd.__super__.constructor.call(this)};f(qd,L);qd.prototype.moduleName="comscore";qd.prototype.createController=function(){qd.__super__.createController.call(this);this.registerCommand(d.STARTED,ff);this.registerCommand(d.CONTENT_CHANGED,ff);this.registerCommand(k.AD_STARTED,Ng)};qd.prototype.createModel=function(){this.registerProxy(new lc(this.config))};qd.prototype.listNotificationInterests=
function(){return[d.STARTED,k.AD_STARTED,d.CONTENT_CHANGED]};n.registerPlugin("comscore","html",qd);n.registerPlugin("comscore","flash",je);var ri=function(){};ri.prototype.parse=function(a,b){var c,e,d,f,h,k,z,l,n;b=b.replace(/\r/g,"");e=b.split("\n\n");l=0;for(n=e.length;l<n;l++){c=e[l];c=c.split("\n");try{f=c[0],z=c[1].match(/([0-9:\,]+)\s*--\x3e\s*([0-9:\,]+)/).slice(1),h=g.flattenTimecode(z[0]),d=g.flattenTimecode(z[1]),k=c.slice(2)}catch(p){ha.warn("SRT Parsing Warning")}c=new Kc(h,d,"cue_"+
f);c.html="\x3cp\x3e"+k.join("\x3cbr /\x3e")+"\x3c/p\x3e";c.text=k.join("\n");a.cues.push(c)}return a};var si=function(){};si.prototype.parse=function(a,b){var c,e,d,f,h,k,z,l,n,p,q;b=b.replace(/\r/g,"");e=b.split("\n\n");h=0;/^WEBVTT/.test(e[0])&&e.shift();p=0;for(q=e.length;p<q;p++)if(c=e[p],""!==c){c=c.split("\n");try{h=/^[0-9]+$/.test(c[0])?c.shift():++h,n=c[0].match(/([0-9:\.]+)\s*--\x3e\s*([0-9:\.]+)([^\n]*)/).slice(1),k=n[2],z=g.flattenTimecode(n[0]),f=g.flattenTimecode(n[1]),l=c.slice(1)}catch(r){ha.error("WebVTT Parse Error")}d=
new Kc(z,f,"cue_"+h);d.html="\x3cp\x3e"+l.join("\x3cbr /\x3e")+"\x3c/p\x3e";d.text=l.join("\n");null!=k&&k.replace(/\s*([A-Za-z]+)\s*:\s*([\w\-\%]+)/g,function(a,b,c){d[b]=c;return""});a.cues.push(d)}return a};var ni=function(){};ni.prototype.parse=function(a,b){var c,e;"string"===typeof b&&(b=ea.parse(b));Array.prototype.slice.call(b.querySelectorAll("styling style")).forEach(function(b,c,e){var d;d="";c=b.getAttribute("id")||b.getAttribute("xml:id");Array.prototype.slice.call(b.attributes).forEach(function(a,
b,c){if("tts"===a.prefix)return d+=g.formatStyleName(a.localName)+":"+a.nodeValue+";"});a.styles[c]=d});Array.prototype.slice.call(b.querySelectorAll("body [style]")).forEach(function(b,c,e){c=b.getAttribute("style");b.setAttribute("style",a.styles[c])});e=b.querySelector("tt");e=e.getAttribute("lang")||e.getAttribute("xml:lang");if(void 0===a.language||null===a.language)a.language=e;c=Array.prototype.slice.call(b.querySelectorAll("body p[begin]"));c.forEach(function(b,e,d){var f;d=b.getAttribute("begin");
b.removeAttribute("begin");null!=b.getAttribute("end")?(f=b.getAttribute("end"),b.removeAttribute("end")):null!=c[e+1]&&(f=c[e+1].getAttribute("begin"));e=new Kc(g.flattenTimecode(d),g.flattenTimecode(f),"cue_"+e);f=b.getAttributeNS("http://www.w3.org/ns/ttml#styling","textAlign");null!=f&&(e.align="center"===f?"middle":f,b.removeAttributeNS("http://www.w3.org/ns/ttml#styling","textAlign"));b=ea.serialize(b);b=b.replace(/\s*xmlns="[^"]*"/,"");e.html=b;b=b.replace(/^<p[^>]*>/,"");b=b.replace(/<\/p>$/,
"");b=b.replace(/<br\/>/,"\n");b=b.replace(/<span style="([^"]*)"/,"\x3cc.$1");b=b.replace(/<\/span>/,"\x3c/c\x3e");e.text=b;a.cues.push(e)});return a};var cb=function(){var a,b=this;this.captions=[];this.head=document.getElementsByTagName("head")[0];a=window.com||{};a.akamai=a.akamai||{};a.akamai.amp=a.akamai.amp||{};a.akamai.amp.plugins=a.akamai.amp.plugins||{};a.akamai.amp.plugins.subply=a.akamai.amp.plugins.subply||{};a.akamai.amp.plugins.subply.response=function(a){b.parse(a);b.poll()};null==
window.com&&(window.com=a);cb.__super__.constructor.call(this,this.constructor.NAME)};f(cb,puremvc.Proxy);cb.NAME="LiveCaptionProxy";cb.prototype.data={base:"http://test.plymedia.com.s3.amazonaws.com/online/Akamai_",interval:1E3};cb.prototype.caption=null;cb.prototype.head=null;cb.prototype.script=null;cb.prototype.timeout=null;cb.prototype.getURL=function(){return this.data.url};cb.prototype.setURL=function(a){return this.data.url=a};cb.prototype.start=function(){this.send()};cb.prototype.poll=function(){var a=
this;setTimeout(function(){a.send()},this.data.interval||1E3)};cb.prototype.send=function(){null!=this.script&&this.head.removeChild(this.script);this.script=g.loadScript(this.data.base+this.data.url+".js?nocache\x3d"+Date.now())};cb.prototype.stop=function(){clearTimeout(timeout)};cb.prototype.parse=function(a){var b,c,e,d;if(a.Stream===this.data.url&&!(null!=this.caption&&this.caption.id>=a.Ticks)){this.caption=new Kc(g.flattenTimecode(a.From),g.flattenTimecode(a.To),a.Ticks);this.caption.text=
a.Text;b="";d=a.Text.split("\n");c=0;for(e=d.length;c<e;c++)a=d[c],""!==b&&(b+="\x3cbr /\x3e"),b+="\x3cspan\x3e"+a+"\x3c/span\x3e";this.caption.html="\x3cp\x3e"+b+"\x3c/p\x3e";this.sendNotification(F.CUE_CHANGE,[this.caption]);return this.caption}};var Ma=function(a,b){Ma.__super__.constructor.call(this,a,b)};f(Ma,H);Ma.NAME="CaptioningWrapper";Ma.prototype.flashPlugins=[{id:"AdobeCaptionPlugin",src:"#{paths.resources}plugins/AdobeCaptionPlugin.swf",blocking:!1,host:"akamai",main:"AdobeCaptionPlugin",
type:"application/x-shockwave-flash"},{id:"AMPCaptionPlugin",src:"#{paths.resources}plugins/AMPCaptionPlugin.swf",blocking:!1,host:"akamai",main:"AMPCaptionPlugin",type:"application/x-shockwave-flash"},{id:"CaptionSettingsPlugin",src:"#{paths.resources}plugins/CaptionSettingsPlugin.swf",blocking:!1,host:"akamai",main:"CaptionSettingsPlugin",type:"application/x-shockwave-flash"}];Ma.prototype.flashView={elements:{captionDisplay:{attributes:{defaultMessage:"Sorry! No captions available for this stream",
initState:"cookie",position:"relative",settingsEnabled:"true",style:"bottom: 0px; windowColor :0x000000; windowOpacity: 0; font: Monospaced Serif; fontColor: 0xffffff; fontOpacity: 1; fontBGColor: 0x000000; fontBGOpacity: 0; edgeType: none; edgeColor: 0x000000; edgeOpacity: 1; scroll: Pop-Out; fontSize: 12;"}},controls:{elements:{captionBtn:{}}}}};Ma.prototype.hidden=!0;Ma.prototype.createXML=function(a){var b,c,e,d;e=null!=(d=this.config.flash)?d.subply:void 0;if(null!=e)try{null!=e.timeMethod&&
(c=a.getElementsByTagName("player")[0],c.setAttribute("subply_time_method",e.timeMethod)),null!=e.plugin&&(b=a.firstChild,e=a.getElementsByTagName("subply")[0],null==e&&(e=a.createElement("subply"),b.appendChild(e)),this.createProperty(a,"SUBPLY_URL",this.config.flash.subply.plugin,e))}catch(f){this.facade.logger.error("[AMP CAPTIONING ERROR]",f)}};Ma.prototype.createFlashVars=function(a){var b,c,e,d,f,h;e=this.player.config;if(null!=(null!=(b=e.media)?b.track:void 0)){d=g.selectTrack(e.media.track,
"captions");null!=d.src&&""!==d.src&&(a.caption_url=d.src);if(0<e.media.track.length){c=[];b=[];h=e.media.track;e=0;for(f=h.length;e<f;e++)d=h[e],c.push(d.src),b.push(d.srclang);a.caption_url=c.join(",");a.caption_language=b.join(",")}a.caption_type=null!=d.type?encodeURIComponent(d.type):"application/ttml+xml"}null==a.caption_language&&(a.caption_language="en-us")};Ma.prototype.listNotificationInterests=function(){return Ma.__super__.listNotificationInterests.apply(this,arguments).concat([d.MEDIA_CHANGE,
q.CAPTIONING_REQUEST,q.CAPTION_LANG_CHANGE,q.INITIALIZED])};Ma.prototype.handleNotification=function(a){var b,c,e;Ma.__super__.handleNotification.call(this,a);b=a.getName();a=a.getBody();switch(b){case q.CAPTION_LANG_CHANGE:e="";break;case q.CAPTIONING_REQUEST:e="visibilitychange";a=a.enabled;this.hidden=!a;break;case d.MEDIA_CHANGE:b=a;if(null!=b.track){c=g.selectTrack(b.track,"captions");if(null==c)return;null!=c.src&&""!==c.src&&(b.captioningUrl=c.src);null!=c.type&&(b.captioningType=c.type||"application/ttml+xml")}break;
case q.INITIALIZED:this.hidden=!this.player.getMediaElement().getPlayerProperty("isCaptionVisible")}null!=e&&""!==e&&this.dispatchEvent(new V(e,a))};Ma.prototype.getHidden=function(){return this.hidden};Ma.prototype.setHidden=function(a){this.hidden=a;this.facade.getMediaElement().setPlayerProperty("captionDisplay",{visible:!a});return a};Ma.prototype.selectTrackByIndex=function(a){};Ma.prototype.selectTrackByLanguage=function(a){this.facade.getMediaElement().setTrackByLanguage(a)};Ma.prototype.changeSettings=
function(a){if(null!=(null!=a?a.fontFamily:void 0)&&"object"===typeof a.fontFamily)return this.facade.getMediaElement().setPlayerProperty("captionSettingsUI",a);this.hidden=!a.visible;this.facade.getMediaElement().setPlayerProperty("captionDisplay",{visible:a.visible,style:this.parseObject(a)})};Ma.prototype.parseObject=function(a){var b,c,e,d;b={};try{for(e in a)switch(e){case "fontFamily":b.font=a[e];break;case "fontColor":case "backgroundColor":case "edgeColor":case "windowColor":c="fontColor"===
e?"font":"backgroundColor"===e?"fontBG":"edgeColor"===e?"edge":"window";-1!==(null!=(d=a[e])?d.indexOf("rgba"):void 0)&&(b[c+"Color"]=this.parseRGBA(a[e]),b[c+"Opacity"]=a[e].replace(/^.*,(.+)\)/,"$1"));break;default:b[e]=a[e]}delete b.visible}catch(f){this.facade.logger.error("Captioning Settings Parse Error",f)}return b};Ma.prototype.parseRGBA=function(a){return(a=a.match(/^rgba?[\s+]?\([\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?/i))&&4===a.length?"0x"+("0"+parseInt(a[1],10).toString(16)).slice(-2)+
("0"+parseInt(a[2],10).toString(16)).slice(-2)+("0"+parseInt(a[3],10).toString(16)).slice(-2):""};n.registerPlugin("captioning","flash",Ma);var ah=function(){ah.__super__.constructor.call(this)};f(ah,y);ah.prototype.execute=function(a){var b,c,e,d,f,h;d=a.getBody();b=this.proxy.getTrack();if(null!=b){a=b.activeCues;e=b.cues;b=!1;f=0;for(h=e.length;f<h;f++)c=e[f],d>=c.startTime&&d<c.endTime?0<=ve.call(a,c)||(a.push(c),b=!0):(c=a.indexOf(c),-1!==c&&(a.splice(c,1),b=!0));!0===b&&this.sendNotification(F.CUE_CHANGE,
a)}};var bh=function(){bh.__super__.constructor.call(this)};f(bh,y);bh.prototype.execute=function(a){var b;b=a.getBody();a=a.getBody().track;this.proxy.setTracks(a);null==a?this.sendNotification(F.ENABLED,!1):(this.proxy.selectRenderer(b),this.sendNotification(F.ENABLED,!0))};var hf=function(){hf.__super__.constructor.call(this)};f(hf,w);hf.prototype.execute=function(a){this.proxy.setHidden(!a.getBody());hf.__super__.execute.call(this,a)};var ch=function(){ch.__super__.constructor.call(this)};f(ch,
puremvc.SimpleCommand);ch.prototype.execute=function(a){var b,c;a=this.facade.retrieveProxy(T.NAME);b=a.getTrack();null==b&&0<(null!=(c=a.getTracks())?c.length:void 0)&&(b=a.autoSelectTrack());!0===(null!=b?b.isLive:void 0)&&(this.facade.removeCommand(d.TIME_UPDATE),a=this.facade.retrieveProxy(cb.NAME),null==a&&(a=new cb,this.facade.registerProxy(a)),a.setURL(b.src),a.start())};CaptionParsers={"application/ttml+xml":new ni,"application/x-subrip":new ri,"text/vtt":new si,undefined:new ni};var F={VISIBILITY_CHANGE:"captioningvisibilitychange",
ENABLED:"captioningenabled",TRACKS_LOADED:"captioningtracksloaded",TRACK_SELECTED:"captioningtrackselected",CUE_CHANGE:"captioningcuechange",SETTINGS_VISIBILITY_CHANGE:"captioningsettingsvisibility",TOGGLE_SETTINGS_VISIBILITY:"togglesettingsvisibility",SETTINGS_CHANGE:"captioningsettingschange"},Lc=function(a,b){var c,e=this;this.kind=a.kind;this.type=a.type;this.src=a.src;this.language=a.srclang;this.label=a.label||this.srclang||this.kind;this.cues=a.cues||[];this.styles=a.styles||{};this.activeCues=
[];this.isLive=/live-subply/.test(this.type);null==this.src||""===this.src||this.isLive?setTimeout(b,1):c=g.get(this.src,{onload:function(){try{CaptionParsers[e.type].parse(e,c.response)}catch(a){ha.error("Could not parse caption track: "+e.src);return}"function"===typeof b&&b()},onerror:function(){ha.error("Could not load caption track: "+e.src)}})};Lc.prototype.kind=null;Lc.prototype.src=null;Lc.prototype.language=null;Lc.prototype.cues=null;Lc.prototype.label=null;Lc.prototype.activeCues=null;
Lc.prototype.type=null;Lc.prototype.styles=null;Lc.prototype.isLive=!1;var le=function(a,b,c,e){le.__super__.constructor.call(this,a,b,c,e)};f(le,$);le.prototype.initializeNotifier=function(a){le.__super__.initializeNotifier.call(this,a);this.plugin=this.facade.retrieveProxy(v.NAME);this.media=this.facade.player.retrieveProxy(s.NAME)};var T=function(a){this.activeCaptions=[];this.providers={};this.tracks=[];this.rendererMap=[];this.settings={};T.__super__.constructor.call(this,a)};f(T,Q);T.NAME=v.NAME;
T.TEXT_TRACK_RENDERER="caption-text";T.prototype.defaults={useNative:!1,crossorigin:null};T.prototype.hidden=!0;T.prototype.tracks=null;T.prototype.track=null;T.prototype.activeCaptions=null;T.prototype.captions=null;T.prototype.loaded=!0;T.prototype.rendererMap=null;T.prototype.settings=null;T.prototype.getSettings=function(){return this.settings};T.prototype.setSettings=function(a){this.settings=a};T.prototype.getUseNative=function(){return this.getValue("useNative")};T.prototype.getCrossOrigin=
function(){return this.getValue("crossorigin")};T.prototype.getTracks=function(){return this.tracks};T.prototype.setTracks=function(a){var b,c,e,d,f,h,g=this;this.tracks=[];this.track=null;if(null!=a){b=a.length;e=0;d=function(){e++;e===b&&(g.sendNotification(F.TRACKS_LOADED,g.tracks),g.autoSelectTrack())};f=0;for(h=a.length;f<h;f++)c=a[f],c=new Lc(c,d),this.tracks.push(c);return a}};T.prototype.registerRenderer=function(a){null!=a&&(a.proxy=this,this.rendererMap.push(a))};T.prototype.retrieveRenderer=
function(a){var b,c,e,d;d=this.rendererMap;c=0;for(e=d.length;c<e;c++)if(b=d[c],b.getRendererName()===a)return b};T.prototype.removeRenderer=function(a){var b;b=this.retrieveRenderer(a);b.proxy=null;if(null==b)return null;a=this.rendererMap.indexOf(b);this.rendererMap.splice(a,1);return b};T.prototype.getRenderer=function(){return this.renderer};T.prototype.setRenderer=function(a){if(a===this.renderer)return a;null!=this.renderer&&this.facade.removeMediator(T.TEXT_TRACK_RENDERER);this.renderer=a;
null!=this.renderer&&this.facade.registerMediator(this.renderer);return a};T.prototype.selectRenderer=function(a){var b,c,e,d,f,h,g,k;b=null;e=a.track;if(null!=e){d=0;for(h=e.length;d<h;d++){c=e[d];k=this.rendererMap;f=0;for(g=k.length;f<g;f++)if(a=k[f],!0===a.canUseResource(c)){b=a;break}if(null!=b)break}this.setRenderer(b);return b}};T.prototype.getTrack=function(){return this.track};T.prototype.setTrack=function(a){this.track=a;this.captions=this.track.cues;this.activeCaptions=[];this.sendNotification(F.TRACK_SELECTED,
this.track);return a};T.prototype.selectTrackByIndex=function(a){var b;0<=a&&a<this.tracks.length&&(b=this.tracks[a],this.setTrack(b));return b};T.prototype.selectTrackByLanguage=function(a){var b,c,e,d,f;f=this.tracks;e=0;for(d=f.length;e<d;e++)if(b=f[e],b.language===a){c=b;break}null!=c&&this.setTrack(c);return c};T.prototype.getHidden=function(){return this.hidden};T.prototype.setHidden=function(a){this.hidden=a;try{localStorage.setItem(bc.PREFIX+"caption-enabled",!this.hidden)}catch(b){this.facade.logger.error("LocalStorage Not Supported on this Browser",
b)}return a};T.prototype.autoSelectTrack=function(){var a,b,c;a=null!=(c=this.facade.player.retrieveProxy(qa.NAME))?c.getLanguage():void 0;null!=a&&(a=a.split("-").shift(),b=this.selectTrackByLanguage(a));null==b&&(b=this.tracks[0],this.setTrack(b));return b};var mc=function(a){mc.__super__.constructor.call(this,null,null,a,null)};f(mc,le);mc.prototype.componentName=T.TEXT_TRACK_RENDERER;mc.prototype.captionText=null;mc.prototype.getRendererName=function(){return"html"};mc.prototype.canUseResource=
function(a){return null==a?!1:-1!==[g.mimeTypes.srt,g.mimeTypes.ttml,g.mimeTypes.vtt].indexOf(a.type)};mc.prototype.getCaptionDisplayHeight=function(){var a,b,c;a=0;for(b=c=this.viewComponent.childNodes.length;b;){--b;if(3===c&&0===b)break;a+=g.getActualSize(this.viewComponent.childNodes[b]).height}return a+"px"};mc.prototype.scrollCaptions=function(a,b,c){var e,d,f=this;null==a&&(a=this.viewComponent.scrollHeight);null==b&&(b=this.viewComponent.scrollTop);null==c&&(c=20);d=(a-b)/c;e=function(){var c;
if(b<a)return f.viewComponent.scrollTop=b+=d,setTimeout(e,20);for(c=[];2<f.viewComponent.childNodes.length;)c.push(f.viewComponent.removeChild(f.viewComponent.firstChild));return c};e()};mc.prototype.listNotificationInterests=function(){return[F.CUE_CHANGE,d.CHANGE_MEDIA]};mc.prototype.handleNotification=function(a){var b,c,e,f;b=a.getName();a=a.getBody();switch(b){case d.CHANGE_MEDIA:this.viewComponent.innerHTML="";break;case F.CUE_CHANGE:b="";c=0;for(f=a.length;c<f;c++)e=a[c],b+=e.html;switch(this.plugin.getSettings().scroll){case "popout":this.viewComponent.innerHTML=
b;break;case "rollon":case "painton":a=document.createElement("div");a.innerHTML=b;e=a.childNodes;c=a=0;for(b=e.length;a<b;c=++a)c=e[c],this.viewComponent.appendChild(c);this.viewComponent.style.maxHeight=this.getCaptionDisplayHeight();this.scrollCaptions()}}};var Hb=function(a){Hb.__super__.constructor.call(this,a)};f(Hb,Ad);Hb.prototype.video=null;Hb.prototype.index=-1;Hb.prototype.plugin=null;Hb.NAME=T.TEXT_TRACK_RENDERER;Hb.prototype.getRendererName=function(){return"native"};Hb.prototype.canUseResource=
function(a){var b,c;if(null==a||null==document.createElement("video").textTracks)return!1;c=[g.mimeTypes.vtt,g.mimeTypes.cea608,g.mimeTypes.cea708];b=a.type;return b===c[1]||b===c[2]?!0:/iphone|ipad/.test(g.getDevice())||this.proxy.getUseNative()?-1!==c.indexOf(a.type):!1};Hb.prototype.onRegister=function(){this.plugin=this.facade.retrieveProxy(T.NAME);this.facade.player.getMediaElement().textTracks.addEventListener("addtrack",this.updateTrack.bind(this))};Hb.prototype.listNotificationInterests=function(){return[F.VISIBILITY_CHANGE,
F.TRACK_SELECTED,F.TRACKS_LOADED,d.LOADED_METADATA,d.CAN_PLAY_THROUGH]};Hb.prototype.handleNotification=function(a){var b,c,e,f,k;b=a.getBody();switch(a.getName()){case F.TRACKS_LOADED:this.tracks=b;break;case F.TRACK_SELECTED:this.facade.player.getMediaElement().textTracks.length&&(c=this.facade.player.getMediaElement().textTracks[this.index]);null!=c&&(c.mode="hidden");this.index=this.plugin.getTracks().indexOf(b);this.lang=b.language;this.updateTrack();break;case F.VISIBILITY_CHANGE:case d.CAN_PLAY_THROUGH:this.updateTrack();
break;case d.LOADED_METADATA:if(null==this.tracks)break;a=this.facade.player.getMediaElement();c=this.plugin.getCrossOrigin();null!=c&&a.setAttribute("crossorigin",c);k=this.tracks;e=0;for(f=k.length;e<f;e++)c=k[e],c.type===g.mimeTypes.vtt&&(b=document.createElement("track"),b.src=c.src,null!=c.kind&&(b.kind=c.kind),null!=c.language&&(b.srclang=c.language),null!=c.label&&(b.label=c.label),b["default"]="default"in c,a.appendChild(b));this.tracks=null}};Hb.prototype.updateTrack=function(){var a,b,c,
e,d;d=this.facade.player.getMediaElement().textTracks;a=c=0;for(e=d.length;c<e;a=++c)if(b=d[a],/subtitles|captions/.test(b.kind)&&(b.language===this.lang||!b.language.length)){if(null==b)break;this.index=a;b.mode=this.plugin.getHidden()?"hidden":"showing"}};var Ea=function(a){this.list={font:null,language:null,edge:null,size:null,scroll:null};this.picker={color:null,background:null,edge:null,window:null};this.toggle={ON:null,OFF:null,disabled:!1};this.captioningObject={"default":{fontFamily:"'Courier New', Courier, 'Nimbus Mono L', 'Cutive Mono', monospace",
size:"small",scroll:"popout",fontColor:"rgba(255,255,255,1)",edgeType:"text-shadow: 0px 0px 0px",edgeColor:"rgba(0, 0, 0, 0)",backgroundColor:"rgba(0,0,0,0)",windowColor:"rgba(0,0,0,0.5)"},appliedStyleText:"",selected:{fontFamily:null,size:null,fontColor:null,edgeType:null,edgeColor:null,backgroundColor:null,windowColor:null},preset1:{fontFamily:"'Courier New', Courier, 'Nimbus Mono L', 'Cutive Mono', monospace",size:"medium",fontColor:"rgba(255,255,255,1)",edgeType:"text-shadow: 0px 0px 0px",edgeColor:"rgba(0, 0, 0, 0)",
backgroundColor:"rgba(0,0,0,0)",windowColor:"rgba(0,0,0,0)"},preset2:{fontFamily:"'Courier New', Courier, 'Nimbus Mono L', 'Cutive Mono', monospace",size:"medium",fontColor:"rgba(255,255,0,1)",edgeType:"text-shadow: 0px 0px 0px",edgeColor:"rgba(0, 0, 0, 0)",backgroundColor:"rgba(0,0,0,0)",windowColor:"rgba(0,0,0,0)"},preset3:{fontFamily:"'Courier New', Courier, 'Nimbus Mono L', 'Cutive Mono', monospace",size:"medium",fontColor:"rgba(255,255,255,1)",edgeType:"text-shadow: 0px 0px 0px",edgeColor:"rgba(0, 0, 0, 0)",
backgroundColor:"rgba(0,0,0,1)",windowColor:"rgba(0,0,0,0)"},preset4:{fontFamily:"'Courier New', Courier, 'Nimbus Mono L', 'Cutive Mono', monospace",size:"medium",fontColor:"rgba(255,255,0,1)",edgeType:"text-shadow: 0px 0px 0px",edgeColor:"rgba(0, 0, 0, 1)",backgroundColor:"rgba(0,0,0,0)",windowColor:"rgba(0,0,0,0.5)"},instance:null};Ea.__super__.constructor.call(this,null,null,a,null)};f(Ea,le);Ea.prototype.componentName="captioning-settings";Ea.prototype.settingsUiVisible=!1;Ea.prototype.captionningStyle=
null;Ea.prototype.swatchColorCurr=null;Ea.prototype.swatchOpacityCurr=null;Ea.prototype.colorPicker=null;Ea.prototype.colorPickerOpacity=null;Ea.prototype.advancedSettingContainer=null;Ea.prototype.scroll={type:"popout",typeSpeed:5,lines:2,scrollTimer:[],speed:10,popout:null,rollup:null,painton:null};Ea.prototype.onRegister=function(){var a,b,c,e,d,f,h=this;Ea.__super__.onRegister.call(this);c=this.create("captioning-titlebar");this.create("captioning-title",c,"span",this.localizationManager.getString(B.MSG_CC_TITLE));
this.toggle.OFF=this.create("captioning-toggle-btn",c,"div","OFF");this.toggle.ON=this.create("captioning-toggle-btn",c,"div","ON");l.create(this.toggle.ON,l.CLICK,function(a){a.stopImmediatePropagation();h.toggle.disabled||h.toggleButtonHandler(!0);return!1});this.toggle.disabled||ya.add("captioning-floater-btnselected",this.toggle.OFF,this.classList.prefix);l.create(this.toggle.OFF,l.CLICK,function(a){a.stopImmediatePropagation();h.toggle.disabled||h.toggleButtonHandler(!1);return!1});c=this.create("captioning-row");
this.create("captioning-label",c,"span",this.localizationManager.getString(B.MSG_CC_LANGUAGE));this.list.language=this.create("captioning-dropdown",c,"select");this.languageListPopulate();l.create(this.list.language,"change",function(a){var b;a.stopImmediatePropagation();b="None"!==a.target.selectedValue;h.sendNotification(F.VISIBILITY_CHANGE,b);b&&h.facade.setTrack(h.facade.selectTrackByIndex(a.target.selectedIndex));return!1});this.create("captioning-label",c,"span",this.localizationManager.getString(B.MSG_CC_PRESETS));
a=this.create(["captioning-preset","captioning-preset1"],c,null,"Aa");b=this.create(["captioning-preset","captioning-preset2"],c,null,"Aa");f=this.create(["captioning-preset","captioning-preset3"],c,null,"Aa");c=this.create(["captioning-preset","captioning-preset4"],c,null,"Aa");l.create(a,l.CLICK,function(a){a.stopImmediatePropagation();h.captioningObject.selected=h.cloneObject(h.captioningObject.preset1);h.applyCaptioningStyle();return!1});l.create(b,l.CLICK,function(a){a.stopImmediatePropagation();
h.captioningObject.selected=h.cloneObject(h.captioningObject.preset2);h.applyCaptioningStyle();return!1});l.create(f,l.CLICK,function(a){a.stopImmediatePropagation();h.captioningObject.selected=h.cloneObject(h.captioningObject.preset3);h.applyCaptioningStyle();return!1});l.create(c,l.CLICK,function(a){a.stopImmediatePropagation();h.captioningObject.selected=h.cloneObject(h.captioningObject.preset4);h.applyCaptioningStyle();return!1});this.advancedSettingContainer=this.create("captioning-advanced-container");
c=this.create("captioning-row",this.advancedSettingContainer);this.create("captioning-label",c,"span",this.localizationManager.getString(B.MSG_CC_FONT));this.list.font=this.create("captioning-dropdown",c,"select");this.create(null,this.list.font,"option","Monospaced Serif").value="'Courier New', Courier, 'Nimbus Mono L', 'Cutive Mono', monospace";this.create(null,this.list.font,"option","Proportional Serif").value="'Times New Roman', Times, Georgia, Cambria, 'PT Serif Caption', serif";this.create(null,
this.list.font,"option","Monospaced Sans-Serif").value="'Deja Vu Sans Mono', 'Lucida Console', Monaco, Consolas, 'PT Mono', monospace";this.create(null,this.list.font,"option","Proportional Sans-Serif").value="Roboto, 'Arial Unicode Ms', Arial, Helvetica, Verdana, 'PT Sans Caption', sans-serif";this.create(null,this.list.font,"option","Casual").value="'Comic Sans MS', Impact, Handlee, fantasy";this.create(null,this.list.font,"option","Cursive").value="'Monotype Corsiva', 'URW Chancery L', 'Apple Chancery', 'Dancing Script', cursive";
this.create(null,this.list.font,"option","Small Capitals").value="'Arial Unicode Ms', Arial, Helvetica, Verdana, 'Marcellus SC', sans-serif; font-variant: small-caps";l.create(this.list.font,"change",function(a){a.stopImmediatePropagation();h.captioningObject.selected.fontFamily=a.target.value;h.applyCaptioningStyle(!1);return!1});c.appendChild(this.list.font);this.create("captioning-label",c,"span",this.localizationManager.getString(B.MSG_CC_EDGE));this.list.edge=this.create("captioning-dropdown",
c,"select");this.create(null,this.list.edge,"option","None").value="text-shadow: 0px 0px 0px";this.create(null,this.list.edge,"option","Depressed").value="text-shadow: 0px 1px 0px";this.create(null,this.list.edge,"option","Left Drop Shadow").value="text-shadow: -3px 3px 2px";this.create(null,this.list.edge,"option","Raised").value="text-shadow: 0px 1px 1px";this.create(null,this.list.edge,"option","Right Drop Shadow").value="text-shadow: 3px 3px 2px";this.create(null,this.list.edge,"option","Uniform").value=
"text-shadow: 0px 0px 4px";l.create(this.list.edge,"change",function(a){a.stopImmediatePropagation();h.captioningObject.selected.edgeType=a.target.value;h.applyCaptioningStyle(!1);return!1});c=this.create("captioning-row",this.advancedSettingContainer);this.create("captioning-label",c,"span",this.localizationManager.getString(B.MSG_CC_SIZE));this.list.size=this.create("captioning-dropdown",c,"select");this.create(null,this.list.size,"option","Small").value="small";this.create(null,this.list.size,
"option","Medium").value="medium";this.create(null,this.list.size,"option","Large").value="large";this.create(null,this.list.size,"option","Extra Large").value="x-large";this.list.size.selectedIndex=1;l.create(this.list.size,"change",function(a){a.stopImmediatePropagation();h.captioningObject.selected.size=a.target.value;h.applyCaptioningStyle(!1);return!1});this.create("captioning-label",c,"span",this.localizationManager.getString(B.MSG_CC_SCROLL));this.list.scroll=this.create("captioning-dropdown",
c,"select");this.create(null,this.list.scroll,"option","Pop-Out").value="popout";this.create(null,this.list.scroll,"option","Roll-On").value="rollon";this.create(null,this.list.scroll,"option","Paint-On").value="painton";l.create(this.list.scroll,"change",function(a){a.stopImmediatePropagation();h.onScrollListChange(a.target.value);return!1});c=this.create("captioning-row",this.advancedSettingContainer);this.create("captioning-label-small",c,"span",this.localizationManager.getString(B.MSG_CC_COLOR));
this.picker.color=this.create("captioning-color-picker",c);this.picker.color.style.backgroundColor=this.captioningObject["default"].fontColor;l.create(this.picker.color,l.CLICK,function(a){var b;a.stopImmediatePropagation();h.colorPickerHandler();h.colorPicker.style.display="block"===h.colorPicker.style.display?"none":"block";"block"===h.colorPicker.style.display&&(null!=(a=h.swatchColorCurr)&&(a.style.borderColor="rgba(0,0,0,0.3)"),h.colorPicker.style.left="152px",h.colorPicker.name="fontColor",
h.captioningObject.instance=h.picker.color,-1!==h.picker.color.style.backgroundColor.indexOf("rgba")&&(b=h.picker.color.style.backgroundColor.replace(/^rgba?\(|\s+|\)$/g,"").split(",")[3]),h.colorPickerOpacity.value=null!=b?b:1);return!1});this.create("captioning-label-small",c,"span",this.localizationManager.getString(B.MSG_CC_BACKGROUND));this.picker.background=this.create("captioning-color-picker",c);this.picker.background.style.backgroundColor=this.captioningObject["default"].backgroundColor;
l.create(this.picker.background,l.CLICK,function(a){var b;a.stopImmediatePropagation();h.colorPickerHandler();h.colorPicker.style.display="block"===h.colorPicker.style.display?"none":"block";"block"===h.colorPicker.style.display&&(null!=(a=h.swatchColorCurr)&&(a.style.borderColor="rgba(0,0,0,0.3)"),h.colorPicker.style.left="264px",h.colorPicker.name="backgroundColor",h.captioningObject.instance=h.picker.background,-1!==h.picker.background.style.backgroundColor.indexOf("rgba")&&(b=h.picker.background.style.backgroundColor.replace(/^rgba?\(|\s+|\)$/g,
"").split(",")[3]),h.colorPickerOpacity.value=null!=b?b:1);return!1});this.create("captioning-label-small",c,"span",this.localizationManager.getString(B.MSG_CC_EDGE));this.picker.edge=this.create("captioning-color-picker",c);this.picker.edge.style.backgroundColor=this.captioningObject["default"].edgeColor;l.create(this.picker.edge,l.CLICK,function(a){var b;a.stopImmediatePropagation();h.colorPickerHandler();h.colorPicker.style.display="block"===h.colorPicker.style.display?"none":"block";"block"===
h.colorPicker.style.display&&(null!=(a=h.swatchColorCurr)&&(a.style.borderColor="rgba(0,0,0,0.3)"),h.colorPicker.style.left="212px",h.colorPicker.name="edgeColor",h.captioningObject.instance=h.picker.edge,-1!==h.picker.edge.style.backgroundColor.indexOf("rgba")&&(b=h.picker.edge.style.backgroundColor.replace(/^rgba?\(|\s+|\)$/g,"").split(",")[3]),h.colorPickerOpacity.value=null!=b?b:1);return!1});this.create("captioning-label-small",c,"span",this.localizationManager.getString(B.MSG_CC_WINDOW));this.picker.window=
this.create("captioning-color-picker",c);this.picker.window.style.backgroundColor=this.captioningObject["default"].windowColor;l.create(this.picker.window,l.CLICK,function(a){var b;a.stopImmediatePropagation();h.colorPickerHandler();h.colorPicker.style.display="block"===h.colorPicker.style.display?"none":"block";"block"===h.colorPicker.style.display&&(null!=(a=h.swatchColorCurr)&&(a.style.borderColor="rgba(0,0,0,0.3)"),h.colorPicker.style.left="300px",h.colorPicker.name="windowColor",h.captioningObject.instance=
h.picker.window,-1!==h.picker.window.style.backgroundColor.indexOf("rgba")&&(b=h.picker.window.style.backgroundColor.replace(/^rgba?\(|\s+|\)$/g,"").split(",")[3]),h.colorPickerOpacity.value=null!=b?b:1);return!1});c=this.create(["caption-text","caption-text-preview"]);this.create(null,c,"p",this.localizationManager.getString(B.MSG_CC_PREVIEW_TEXT));c=this.create("captioning-footer-container");a=this.create("captioning-footer-button",c,"div",this.localizationManager.getString(B.MSG_CC_APPLY));b=this.create("captioning-footer-button",
c,"div",this.localizationManager.getString(B.MSG_CC_CANCEL));f=this.create("captioning-footer-button",c,"div",this.localizationManager.getString(B.MSG_CC_RESET));0<=this.facade.getViewComponent().clientWidth&&(c=this.create("captioning-advanced-button",c,"div",this.localizationManager.getString(B.MSG_CC_SHOW_ADVANCED)),l.create(c,l.CLICK,function(a){a.stopImmediatePropagation();"block"===h.advancedSettingContainer.style.display?(a.target.innerHTML=h.localizationManager.getString(B.MSG_CC_SHOW_ADVANCED),
h.advancedSettingContainer.style.display="none",h.colorPicker.style.display="none"):(a.target.innerHTML=h.localizationManager.getString(B.MSG_CC_HIDE_ADVANCED),h.advancedSettingContainer.style.display="block");return!1}));l.create(a,l.CLICK,function(a){a.stopImmediatePropagation();h.sendNotification(F.SETTINGS_VISIBILITY_CHANGE,h.settingsUiVisible);h.applyCaptioningStyle(!1,!0);h.sendNotification(F.SETTINGS_CHANGE,h.captioningObject.selected);return!1});l.create(b,l.CLICK,function(a){a.stopImmediatePropagation();
h.sendNotification(F.SETTINGS_VISIBILITY_CHANGE,h.settingsUiVisible);return!1});l.create(f,l.CLICK,function(a){a.stopImmediatePropagation();h.colorPicker.style.display="none";h.applyCaptioningStyle(!0);return!1});this.captionningStyle=this.create(null,document.getElementsByTagName("head")[0],"style");this.captionningStyle.type="text/css";c="#000000 #660000 #990000 #ff0000 #000066 #660066 #990066 #ff0066 #006600 #666600 #996600 #ff6600 #006666 #666666 #996666 #ff6666 #009900 #669966 #999900 #ff9900 #009966 #669966 #999966 #ff9966 #00ff00 #66ff00 #99ff00 #ffff00 #00ff66 #66ff66 #99ff66 #ffff66 #000099 #660099 #990099 #ff0099 #0000ff #6600ff #9900ff #ff00ff #006699 #666699 #996699 #ff6699 #0066ff #6666ff #9966ff #ff66ff #009999 #669999 #999999 #ff9999 #0099ff #6699ff #9999ff #ff99ff #0099ff #66ff99 #99ff99 #ffff99 #00ffff #66ffff #99ffff #ffffff".split(" ");
this.colorPicker=this.create("colorpicker-palette",this.viewComponent.parentElement);a=this.create("colorpicker-swatch",!1,null,"\x26nbsp;");b=0;for(f=c.length;b<f;b++)e=c[b],a.style.backgroundColor=e,e=a.cloneNode(),l.create(e,l.CLICK,function(a){a.stopImmediatePropagation();null!==h.swatchColorCurr&&(h.swatchColorCurr.style.borderColor="rgba(0,0,0,0.3)");h.swatchColorCurr=a.target;h.swatchColorCurr.style.borderColor="rgba(255, 50, 50, 1)";h.captioningObject.instance.style.backgroundColor=h.captioningObject.selected[h.colorPicker.name]=
h.toRGBA(a.target.style.backgroundColor);h.applyCaptioningStyle(!1);return!1}),this.colorPicker.appendChild(e);this.create("opacity-label",this.colorPicker,"span",this.localizationManager.getString(B.MSG_CC_OPACITY));this.colorPickerOpacity=this.create("colorpicker-slider",this.colorPicker,"input");this.colorPickerOpacity.type="range";this.colorPickerOpacity.min=0;this.colorPickerOpacity.max=1;this.colorPickerOpacity.step=0.1;this.colorPickerOpacity.value=1;l.create(this.colorPickerOpacity,"change",
function(a){a.stopImmediatePropagation();h.captioningObject.instance.style.backgroundColor=h.captioningObject.selected[h.colorPicker.name]=h.toRGBA(h.captioningObject.instance.style.backgroundColor);h.applyCaptioningStyle(!1);return!1});this.swatchOpacityCurr=this.colorPickerOpacity;try{null!=localStorage.getItem(bc.PREFIX+"captioningDefault")?(this.captioningObject.selected=JSON.parse(localStorage.getItem(bc.PREFIX+"captioningDefault")),this.applyCaptioningStyle(!1,!this.facade.getHidden())):(d=
!(null!=this.facade.config.style||"undefined"!==this.facade.config.style),d||(this.captioningObject.selected=this.cloneObject(this.facade.config.style)),this.applyCaptioningStyle(d))}catch(g){}this.plugin.setSettings(0<Object.keys(this.captioningObject.selected).length?this.captioningObject.selected:this.captioningObject["default"]);this.toggleButtonHandler(!this.facade.getHidden(),!1)};Ea.prototype.toRGBA=function(a){a=a.replace(/^rgba?\(|\s+|\)$/g,"").split(",");return"rgba("+a[0]+","+a[1]+","+
a[2]+","+this.swatchOpacityCurr.value+")"};Ea.prototype.onScrollListChange=function(a){this.captioningObject.selected.scroll=this.scroll.type=a;this.plugin.setSettings({scroll:this.scroll.type});try{"painton"===a?ya.add("akamai-captioning-typed",this.facade.proxy.renderer.viewComponent):ya.remove("akamai-captioning-typed",this.facade.proxy.renderer.viewComponent)}catch(b){this.facade.logger.error("AMP Captioning Error",b)}};Ea.prototype.languageListPopulate=function(){var a,b,c,e,d,f;c=this.facade.getTracks();
if(null!=c){this.list.language.innerHTML="";e=0;for(d=c.length;e<d;e++)b=c[e],a=b.language,a=this.facade.player.retrieveProxy(qa.NAME).getLanguageString(a),null!=a&&""!==a&&(this.create(null,this.list.language,"option",a).value=b.language);this.toggle.disabled=0===this.list.language.childElementCount;this.toggle.disabled&&this.create(null,this.list.language,"option","None");this.list.language.value=null!=(f=this.facade.getTrack())?f.language:void 0}};Ea.prototype.colorPickerHandler=function(a){var b=
this;null==a&&(a=!1);if(a)return l.unbind(document,l.CLICK);l.create(document,l.CLICK,function(a){a.stopImmediatePropagation();b.colorPickerHandler(!0);"akamai-colorpicker-palette"!==a.target.className&&"akamai-opacity-label"!==a.target.className&&"akamai-colorpicker-slider"!==a.target.className&&"none"!==b.colorPicker.style.display&&(b.colorPicker.style.display="none");return!1})};Ea.prototype.cloneObject=function(a){var b,c;b={};for(c in a)b[c]=a[c];return b};Ea.prototype.applyCaptioningStyle=function(a,
b,c){var e,d,f,h,g,k,l,n;null==a&&(a=!1);null==b&&(b=!1);null==c&&(c=!1);a?(this.captioningObject.selected=this.cloneObject(this.captioningObject["default"]),this.list.font.value=this.captioningObject["default"].fontFamily,this.list.edge.value=null!=this.captioningObject["default"].edgeType?this.captioningObject["default"].edgeType:"text-shadow: 0px 0px 0px",this.list.size.value=this.captioningObject["default"].size,this.list.scroll.value=this.captioningObject["default"].scroll,this.picker.color.style.backgroundColor=
this.captioningObject["default"].fontColor,this.picker.background.style.backgroundColor=this.captioningObject["default"].backgroundColor,this.picker.edge.style.backgroundColor=this.captioningObject["default"].edgeColor,this.picker.window.style.backgroundColor=this.captioningObject["default"].windowColor):(null==this.captioningObject.selected.fontFamily||c||(this.list.font.value=this.captioningObject.selected.fontFamily),this.list.edge.value=null!=this.captioningObject.selected.edgeType?this.captioningObject.selected.edgeType:
"text-shadow: 0px 0px 0px",null!=this.captioningObject.selected.size&&(this.list.size.value=this.captioningObject.selected.size),null!=this.captioningObject.selected.scroll?this.list.scroll.value=this.captioningObject.selected.scroll:this.captioningObject.selected.scroll=this.list.scroll.value,this.picker.color.style.backgroundColor=this.captioningObject.selected.fontColor,null!=this.captioningObject.selected.backgroundColor&&(this.picker.background.style.backgroundColor=this.captioningObject.selected.backgroundColor),
null!=this.captioningObject.selected.edgeColor&&(this.picker.edge.style.backgroundColor=this.captioningObject.selected.edgeColor),null!=this.captioningObject.selected.windowColor&&(this.picker.window.style.backgroundColor=this.captioningObject.selected.windowColor));g="font-family: "+(a?this.captioningObject["default"].fontFamily:c?this.captioningObject.selected.fontFamily:this.list.font.value)+" !important;";h=(a?this.captioningObject["default"].edgeType+this.captioningObject["default"].edgeColor:
this.list.edge.value+" "+this.picker.edge.style.backgroundColor)+" !important;";k="font-size: "+(a?this.captioningObject["default"].size:this.list.size.value)+" !important;";d="color: "+(a?this.captioningObject["default"].fontColor:this.picker.color.style.backgroundColor)+" !important;";e="background-color: "+(a?this.captioningObject["default"].backgroundColor:this.picker.background.style.backgroundColor)+" !important;";l="background-color: "+(a?this.captioningObject["default"].windowColor:this.picker.window.style.backgroundColor)+
" !important;";f="line-height:1.7em;";n=l.match(/rgba\([^)]+\)/g);null!=n&&n instanceof Array&&0<n.length&&(f=0===Number(n[0].replace(/^.*, (.+)\)/,"$1"))?"":f);if(b){this.captionningStyle.innerHTML=this.captioningObject.appliedStyleText="#"+this.facade.player.viewComponent.id+" .akamai-caption-text { "+g+k+h+l+" } #"+this.facade.player.viewComponent.id+" .akamai-caption-text p { "+d+e+" } video::-webkit-media-text-track-display { "+l+" } video::-webkit-media-text-track-display span { "+g+k+h+e+" } video::-webkit-media-text-track-display { "+
l+" } video::cue { "+d+g+k+h+e+" } video::-webkit-media-text-track-container {"+f+"}";try{!1!==a||c||localStorage.setItem(bc.PREFIX+"captioningDefault",JSON.stringify(this.captioningObject.selected))}catch(p){this.facade.logger.error("LocalStorage Not Supported on this Browser",p)}}else this.captionningStyle.innerHTML=this.captioningObject.appliedStyleText+".akamai-caption-text-preview { "+g+k+h+l+" }.akamai-caption-text-preview p { "+d+e+" }"};Ea.prototype.toggleButtonHandler=function(a,b){null==
a&&(a=!1);null==b&&(b=!0);a?(ya.add("captioning-floater-btnselected",this.toggle.ON,this.classList.prefix),ya.remove("captioning-floater-btnselected",this.toggle.OFF,this.classList.prefix)):(ya.add("captioning-floater-btnselected",this.toggle.OFF,this.classList.prefix),ya.remove("captioning-floater-btnselected",this.toggle.ON,this.classList.prefix));b&&this.sendNotification(F.VISIBILITY_CHANGE,a);this.sendNotification("updatesettings",{captioning:{hidden:!a}})};Ea.prototype.listNotificationInterests=
function(){return[F.SETTINGS_VISIBILITY_CHANGE,F.TOGGLE_SETTINGS_VISIBILITY,F.SETTINGS_CHANGE,F.TRACK_SELECTED,F.VISIBILITY_CHANGE]};Ea.prototype.handleNotification=function(a){var b,c,e,f,g,h,k,l,n,p;g=a.getName();b=a.getBody();switch(g){case F.SETTINGS_VISIBILITY_CHANGE:case F.TOGGLE_SETTINGS_VISIBILITY:this.settingsUiVisible&&(this.colorPicker.style.display="none");(this.settingsUiVisible=!this.settingsUiVisible)&&1===this.list.language.length&&this.languageListPopulate();b=this.settingsUiVisible?
d.ADD_APPLICATION_STATE:d.REMOVE_APPLICATION_STATE;this.sendNotification(b,"cc-setting-active");break;case F.SETTINGS_CHANGE:a=!1;for(f in b)switch(k=b[f],f){case "fontFamily":case "fontSize":case "scroll":case "edgeType":g="fontFamily"===f?"font":"fontSize"===f?"size":"edgeType"===f?"edge":"scroll";p=this.list[g].options;e=l=0;for(n=p.length;l<n;e=++l)if(h=p[e],"fontFamily"===f&&"object"===typeof k)for(c in k)e=k[c],"default"===c&&(this.captioningObject.selected.fontFamily=e,a=!0),RegExp(c,"i").test(h.label)&&
(RegExp("^"+e).test(h.value)||(h.value=e+","+h.value),h.selected&&(this.captioningObject.selected.fontFamily=h.value));else if(RegExp("^"+k+"$","i").test(h.label)&&(this.list[g].selectedIndex=e,"fontSize"===f&&(f="size"),this.captioningObject.selected[f]=h.value,"scroll"===f)){this.scroll.type=this.captioningObject.selected.scroll=h.value;this.plugin.setSettings({scroll:this.scroll.type});try{"painton"===h.value?ya.add("akamai-captioning-typed",this.facade.proxy.renderer.viewComponent):ya.remove("akamai-captioning-typed",
this.facade.proxy.renderer.viewComponent)}catch(q){this.facade.logger.error("AMP Captioning Error",q)}}break;case "backgroundColor":case "edgeColor":case "fontColor":case "windowColor":this.captioningObject.selected[f]=k}this.applyCaptioningStyle(!1,!0,a);null!=b.visible&&b.visible!==!this.facade.getHidden()&&this.facade.setHidden(!b.visible);break;case F.TRACK_SELECTED:this.list.language.value=a.body.language;this.onScrollListChange(this.captioningObject.selected.scroll);break;case F.VISIBILITY_CHANGE:this.toggleButtonHandler(b,
!1)}};var wb=function(){wb.__super__.constructor.call(this)};f(wb,ma);wb.prototype.initializeNotifier=function(a){wb.__super__.initializeNotifier.call(this,a);this.plugin=this.facade.retrieveProxy(v.NAME);this.media=this.facade.player.retrieveProxy(s.NAME)};wb.prototype.onRegister=function(){wb.__super__.onRegister.call(this);this.facade.viewComponent=this.viewComponent};var Mc=function(a){Mc.__super__.constructor.call(this,a)};f(Mc,wb);Mc.prototype.componentName="captioning";Mc.prototype.captionButton=
null;Mc.prototype.onRegister=function(){var a;a=new Ca(this.localizationManager.getString(B.MSG_CC),this.viewComponent,null,"caption",this.onclick.bind(this));this.facade.registerMediator(a);this.captionButton=a.getViewComponent();this.sendNotification(d.ADD_CONTROL,this.captionButton);Mc.__super__.onRegister.call(this);try{"true"===("undefined"!==typeof localStorage&&null!==localStorage?localStorage.getItem(bc.PREFIX+"caption-enabled"):void 0)&&this.facade.setHidden(!1)}catch(b){}};Mc.prototype.onclick=
function(a){var b;a.stopImmediatePropagation();"embedded"===(null!=(b=this.plugin.getTrack())?b.type:void 0)?this.sendNotification(F.VISIBILITY_CHANGE,this.plugin.getHidden()):a.currentTarget===this.captionButton&&this.sendNotification(F.SETTINGS_VISIBILITY_CHANGE,this.plugin.getHidden());return!1};Mc.prototype.listNotificationInterests=function(){return[F.VISIBILITY_CHANGE,F.ENABLED,F.TRACK_SELECTED]};Mc.prototype.handleNotification=function(a){var b,c,e;c=(b=a.getBody())?d.ADD_APPLICATION_STATE:
d.REMOVE_APPLICATION_STATE;switch(a.getName()){case F.TRACK_SELECTED:e="cc-embedded";c="embedded"===b.type?d.ADD_APPLICATION_STATE:d.REMOVE_APPLICATION_STATE;break;case F.VISIBILITY_CHANGE:e="cc-active";break;case F.ENABLED:c=b?d.ADD_CONTROL_STATE:d.REMOVE_CONTROL_STATE,e="cc-enabled",b||this.sendNotification(d.REMOVE_APPLICATION_STATE,"cc-active")}this.sendNotification(c,e)};var pd=function(){pd.__super__.constructor.call(this)};f(pd,L);pd.prototype.moduleName="omniture";pd.prototype.createController=
function(){this.registerCommand(d.MEDIA_CHANGE,$g);this.registerCommand(d.ENDED,gf);this.registerCommand(d.STARTED,Og);this.registerCommand(d.PLAY,Pg);this.registerCommand(d.PAUSE,Qg);this.registerCommand(d.SEEKING,Rg);this.registerCommand(d.SEEKED,Sg);this.registerCommand(d.CHANGE_CONTENT,gf);this.registerCommand(d.CONTENT_CHANGED,Tg);this.registerCommand(k.AD_LOADED,Ug);this.registerCommand(k.AD_STARTED,Vg);this.registerCommand(k.AD_PLAY,Wg);this.registerCommand(k.AD_PAUSE,Xg);this.registerCommand(k.AD_TIME_UPDATE,
Zg);this.registerCommand(k.BREAK_END,Yg)};pd.prototype.createModel=function(){var a;!0===(null!=(a=this.config.heartbeat)?a.enabled:void 0)?this.registerProxy(new ra(this.config)):this.registerProxy(new da(this.config))};pd.prototype.listNotificationInterests=function(){return[d.CHANGE_MEDIA,d.MEDIA_CHANGE,d.CHANGE_CONTENT,d.CONTENT_CHANGED,d.TIME_UPDATE,d.ENDED,d.STARTED,d.PLAY,d.PAUSE,d.SEEKING,d.SEEKED,k.AD_LOADED,k.AD_STARTED,k.AD_PLAY,k.AD_PAUSE,k.AD_TIME_REMAINING,k.BREAK_START,k.BREAK_END]};
n.registerPlugin("omniture","html",pd);n.registerPlugin("omniture","flash",ke);var me=function(a,b){null==b&&(b={});me.__super__.constructor.call(this,a,b)};f(me,H);me.NAME="InfoWrapper";me.prototype.listNotificationInterests=function(){return[q.CREATE_FLASH_VARS,q.CREATE_XML,q.SHARE,q.SHARE_REQUEST]};me.prototype.handleNotification=function(a){var b,c,e,d,f,h,g,k;d=a.getName();a=a.getBody();switch(d){case q.CREATE_XML:d=a.xml;f=d.getElementsByTagName("view")[0];c=d.getElementsByTagName("element");
g=0;for(k=c.length;g<k;g++)if(b=c[g],"infoOverlayAdvanced"===b.getAttribute("id")){e=b;break}if(null==f)return;null==e&&(e=d.createElement("element"),e.setAttribute("id","infoOverlayAdvanced"),e.setAttribute("displayStates","preplay,paused,ns,fs,mouseover"),f.insertBefore(e,f.childNodes[0]));b=d.createElement("data");e.appendChild(b);null!=this.config.title&&(e=d.createElement("property"),e.setAttribute("key","title"),f=ea.createTextContent(d,this.config.title),e.appendChild(f),b.appendChild(e));
null!=this.config.description&&(e=d.createElement("property"),e.setAttribute("key","description"),f=ea.createTextContent(d,this.config.description),e.appendChild(f),b.appendChild(e));null!=this.config.more&&(e=d.createElement("property"),e.setAttribute("key","more"),f=ea.createTextContent(d,this.config.more),e.appendChild(f),b.appendChild(e));null!=this.config.less&&(e=d.createElement("property"),e.setAttribute("key","less"),f=ea.createTextContent(d,this.config.less),e.appendChild(f),b.appendChild(e));
null!=this.config.provider&&(c=d.createElement("property"),c.setAttribute("key","provider"),b.appendChild(c),null!=this.config.provider.name&&(e=d.createElement("property"),e.setAttribute("key","name"),f=ea.createTextContent(d,this.config.provider.name),e.appendChild(f),c.appendChild(e)),null!=this.config.provider.image&&(e=d.createElement("property"),e.setAttribute("key","image"),f=ea.createTextContent(d,this.config.provider.image),e.appendChild(f),c.appendChild(e)));break;case q.SHARE:case q.SHARE_REQUEST:h=
"share"}if(null!=h)return this.dispatchEvent(new V(h,a))};n.registerPlugin("info","flash",me);var mb=function(){mb.__super__.constructor.call(this)};f(mb,wb);mb.prototype.componentName="info";mb.prototype.title=null;mb.prototype.shortDescription=null;mb.prototype.icon=null;mb.prototype.provider=null;mb.prototype.onRegister=function(){mb.__super__.onRegister.call(this);this.title=this.create("info-title");this.provider=this.create("info-provider");this.shortDescription=this.create("info-short-description");
this.icon=this.create("info-icon",this,"img");this.dataChangedHandler()};mb.prototype.listNotificationInterests=function(){return[d.MEDIA_CHANGE]};mb.prototype.handleNotification=function(a){var b;b=a.getName();a.getBody();switch(b){case d.MEDIA_CHANGE:this.dataChangedHandler()}};mb.prototype.moreClicked=function(a){return this.classList.add("open")};mb.prototype.closeClicked=function(a){return this.classList.remove("open")};mb.prototype.dataChangedHandler=function(){var a;null!=this.plugin.value.title&&
(this.title.textContent=this.plugin.value.title);null!=(null!=(a=this.plugin.value.provider)?a.image:void 0)&&(this.icon.src=this.plugin.value.provider.image);a=getComputedStyle(this.title);this.title.clientHeight>parseInt(a.lineHeight)?(this.classList.add("info-small"),this.shortDescription.innerHTML=this.provider.innerHTML=""):(this.classList.remove("info-small"),this.truncateDescription(this.plugin.value.description,this.plugin.value.more),this.provider.textContent=null!=this.plugin.value.provider.name?
""+this.plugin.value.provider.name:"")};mb.prototype.truncateDescription=function(a){var b,c,d,f,g;c="";d=this.shortDescription;d.textContent="";if(null!=a)for(b=f=0,g=a.length;f<g;b=++f)if(b=a[b],d.textContent=c+b+"...",d.scrollHeight>d.clientHeight){d.textContent=c+"...";break}else c+=b};var ne=function(a){ne.__super__.constructor.call(this,a)};f(ne,Aa);ne.prototype.configurationName="info";ne.NAME=v.NAME;ne.prototype.defaults={title:"#{media.title}",description:"#{media.description}",provider:{},
more:"read more",less:"less"};var Na=function(){Na.__super__.constructor.call(this)};f(Na,vb);Na.prototype.featureName="captioning";Na.prototype.moduleName="captioning";Na.prototype.createController=function(){Na.__super__.createController.call(this);this.registerCommand(d.CHANGE_MEDIA,bh);this.registerCommand(d.STARTED,ch);this.registerCommand(d.TIME_UPDATE,ah);this.registerCommand(F.VISIBILITY_CHANGE,hf);this.registerCommand(F.ENABLED,w);this.registerCommand(F.TRACK_SELECTED,w);this.registerCommand(F.TRACKS_LOADED,
w);this.registerCommand(F.CUE_CHANGE,w)};Na.prototype.createModel=function(){this.proxy=new T(this.config);this.registerProxy(this.proxy)};Na.prototype.createView=function(){var a;a=new Mc;this.registerMediator(a);a=a.viewComponent;this.registerMediator(new Ea(a));this.proxy.registerRenderer(new Hb(a));this.proxy.registerRenderer(new mc(a))};Na.prototype.listNotificationInterests=function(){return[d.LOADED_METADATA,d.CAN_PLAY_THROUGH,d.CHANGE_MEDIA,d.STARTED,d.TIME_UPDATE,F.TOGGLE_SETTINGS_VISIBILITY]};
Na.prototype.listNotificationPublications=function(){var a,b;return Na.__super__.listNotificationPublications.call(this).concat(function(){var c;c=[];for(a in F)b=F[a],b!==F.TOGGLE_SETTINGS_VISIBILITY&&c.push(b);return c}()).concat([d.ADD_CONTROL,d.REMOVE_CONTROL,"updatesettings",d.ADD_CONTROL_STATE,d.REMOVE_CONTROL_STATE])};Na.prototype.getHidden=function(){return this.proxy.getHidden()};Na.prototype.setHidden=function(a){this.sendNotification(F.VISIBILITY_CHANGE,!a);return a};Na.prototype.getTracks=
function(){return this.proxy.getTracks()};Na.prototype.getTrack=function(){return this.proxy.getTrack()};Na.prototype.setTrack=function(a){this.proxy.setTrack(a);return a};Na.prototype.selectTrackByIndex=function(a){return this.proxy.selectTrackByIndex(a)};Na.prototype.selectTrackByLanguage=function(a){return this.proxy.selectTrackByLanguage(a)};Na.prototype.changeSettings=function(a){this.sendNotification(F.SETTINGS_CHANGE,a);return a};n.registerPlugin("captioning","html",Na);var dh=function(){dh.__super__.constructor.call(this)};
f(dh,y);dh.prototype.execute=function(a){this.proxy.contentStarted()};var eh=function(){eh.__super__.constructor.call(this)};f(eh,y);eh.prototype.execute=function(a){this.proxy.contentEnded()};var fh=function(){fh.__super__.constructor.call(this)};f(fh,y);fh.prototype.execute=function(a){!1!==this.proxy.getEnabled()&&this.proxy.engage(a.getBody())};var jf=function(){jf.__super__.constructor.call(this)};f(jf,w);jf.prototype.execute=function(a){this.sendNotification(d.UPDATE_DATA_BINDINGS,{contexts:[this.proxy.getContextName()]});
jf.__super__.execute.call(this,a)};var kf=function(){kf.__super__.constructor.call(this)};f(kf,w);kf.prototype.execute=function(a){this.player.sendNotification(d.ADD_APPLICATION_STATE,"ad-mode");kf.__super__.execute.call(this,a);this.proxy.breakStart()};var lf=function(){lf.__super__.constructor.call(this)};f(lf,w);lf.prototype.execute=function(a){lf.__super__.execute.call(this,a);this.proxy.breakEnd();this.player.sendNotification(d.REMOVE_APPLICATION_STATE,"ad-mode")};var mf=function(){mf.__super__.constructor.call(this)};
f(mf,y);mf.prototype.execute=function(a){this.proxy.contentSeek(a.getBody())};var nf=function(){nf.__super__.constructor.call(this)};f(nf,w);nf.prototype.execute=function(a){this.proxy.container=a.getBody();nf.__super__.execute.call(this,a)};var Ta=function(a,b,c,d,f,g,h,k,l,n,p,q){this.id=a;this.title=b;this.duration=c;this.position=d;this.type=f;this.partner=g;this.advertiser=h;this.companions=k;this.request=l;this.metadata=n;this.totalAds=p;this.time=q};Ta.prototype.id=null;Ta.prototype.title=
null;Ta.prototype.duration=NaN;Ta.prototype.position=NaN;Ta.prototype.totalAds=NaN;Ta.prototype.type=null;Ta.prototype.partner=null;Ta.prototype.advertiser=null;Ta.prototype.companions=null;Ta.prototype.metadata=null;Ta.prototype.request=null;Ta.prototype.error=null;Ta.prototype.time=null;var of=function(){of.__super__.constructor.call(this)};f(of,w);of.prototype.execute=function(a){this.sendNotification(d.PLAY_REQUEST);!1===this.playback.initialized&&this.player.sendNotification(d.INITIALIZED);this.proxy.start();
of.__super__.execute.call(this,a)};var pf=function(){pf.__super__.constructor.call(this)};f(pf,y);pf.prototype.execute=function(a){!0!==this.applicationState.getLocked()&&(this.sendNotification(d.PLAY_REQUEST),!1===this.proxy.getStarted()?this.sendNotification(d.START,!0):(this.proxy.play(),this.facade.player.sendNotification(d.CHANGE_PLAY_STATE,P.PLAYING)))};var qf=function(){qf.__super__.constructor.call(this)};f(qf,y);qf.prototype.execute=function(a){this.proxy.pause();this.player.sendNotification(d.CHANGE_PLAY_STATE,
P.PAUSED)};var gh=function(){gh.__super__.constructor.call(this)};f(gh,w);gh.prototype.execute=function(a){a=this.proxy.getPaused()||!1===this.proxy.getStarted()?d.PLAY:d.PAUSE;this.sendNotification(a,!0)};var rf=function(){rf.__super__.constructor.call(this)};f(rf,w);rf.prototype.execute=function(a){this.proxy.setVolume(a.getBody());rf.__super__.execute.call(this,a)};var hh=function(){hh.__super__.constructor.call(this)};f(hh,w);hh.prototype.execute=function(a){"playing"===a.getBody().value&&this.dispatchEvent("playing",
this.proxy.adVO)};var Wa=function(){Wa.__super__.constructor.call(this)};f(Wa,ma);Wa.prototype.duration=null;Wa.prototype.currentTime=null;Wa.prototype.container=null;Wa.prototype.banner=null;Wa.prototype.text=null;Wa.prototype.adText=null;Wa.prototype.bg=null;Wa.prototype.totalAds=null;Wa.prototype.adPosition=null;Wa.prototype.adContainerRequired=!0;Wa.prototype.componentName="ads";Wa.prototype.onRegister=function(){Wa.__super__.onRegister.call(this);this.adContainerRequired&&(this.container=this.create("ad-container"));
this.banner=this.create("ad-banner");this.bg=this.create("ad-text-bg",this.banner);this.adText=this.create("ad-text-title",this.banner);this.text=this.create("ad-text",this.banner);this.adContainerRequired&&(this.viewComponent.container=this.container);this.sendNotification(k.AD_CONTAINER_CREATED,this.viewComponent);this.facade.setViewComponent(this.viewComponent)};Wa.prototype.listNotificationInterests=function(){return[k.BREAK_START,k.BREAK_END,k.AD_TIME_REMAINING,k.AD_STARTED]};Wa.prototype.handleNotification=
function(a){var b;switch(a.getName()){case k.BREAK_END:this.text.textContent="";this.adText.textContent="";break;case k.AD_TIME_REMAINING:a=Math.round(a.getBody());b=null!=this.totalAds&&0<this.totalAds&&null!=this.adPosition&&this.adPosition!==this.totalAds?0<a?""+this.localizationManager.getString(B.MSG_NEXT_AD)+a+" "+this.localizationManager.getString(B.MSG_SECONDS):"":0<a?""+this.localizationManager.getString(B.MSG_NEXT_VIDEO)+a+" "+this.localizationManager.getString(B.MSG_SECONDS):"";this.text.textContent=
b;break;case k.AD_STARTED:a=a.getBody(),this.totalAds=a.totalAds,this.adPosition=a.position,b="Ad "+a.position+" of "+a.totalAds,null!=a.position&&null!=a.totalAds&&1<=a.totalAds&&(this.adText.textContent=b)}};var I=function(a){I.__super__.constructor.call(this,a);this.pods=[]};f(I,Q);I.NAME=Q.NAME;I.prototype.inprogress=!1;I.prototype.paused=!1;I.prototype.started=!1;I.prototype.adVO=null;I.prototype.contextName="ad";I.prototype.container=null;I.prototype.partner=null;I.prototype.pods=null;I.prototype.createDefaultAdVO=
function(){return new Ta(null,null,null,null,null,this.partner,null,null,null,null,null)};I.prototype.getContextData=function(){return this.adVO||{}};I.prototype.setCompanions=function(a){this.adVO.companions=a;this.sendNotification(k.AD_COMPANION,this.adVO);return a};I.prototype.getCompanions=function(){var a;return null!=(a=this.adVO)?a.companions:void 0};I.prototype.getInProgress=function(){return this.inprogress};I.prototype.setInProgress=function(a){return this.inprogress=a};I.prototype.getStarted=
function(){return this.started};I.prototype.setStarted=function(a){return this.started=a};I.prototype.getPaused=function(){return this.paused};I.prototype.setPaused=function(a){return this.paused=a};I.prototype.play=function(){this.setPaused(!1);this.sendNotification(k.AD_PLAY,this.adVO)};I.prototype.pause=function(){this.setPaused(!0);this.sendNotification(k.AD_PAUSE,this.adVO)};I.prototype.breakStart=function(){this.setInProgress(!0)};I.prototype.breakEnd=function(){this.setInProgress(!1);this.reset()};
I.prototype.error=function(a,b){var c;null==b&&(b=!0);c=("function"===typeof a.getMessage?a.getMessage():void 0)||a.message;this.facade.logger.error("[AMP AD ERROR]",""+c+" Skipping ad content.",a);null==this.adVO&&(this.adVO={});this.adVO.error=a;this.sendNotification(k.AD_ERROR,this.adVO);!0===b&&this.endBreak()};I.prototype.engage=function(a){!1!==this.getEnabled()&&(this.setStarted(!1),this.getInProgress()&&(this.reset(),this.facade.player.sendNotification(d.REMOVE_APPLICATION_STATE,"ad-mode")),
this.engageAds())};I.prototype.engageAds=function(){this.facade.player.removeCommand(d.START);this.facade.player.removeCommand(d.PLAY);this.facade.player.removeCommand(d.PAUSE);this.facade.player.removeCommand(d.ENDED);this.facade.player.removeCommand(X.PLAY);this.facade.player.removeCommand(X.PAUSE);this.facade.player.removeCommand(X.TOGGLE_PLAY_PAUSE);this.facade.isFullscreenDevice()&&this.facade.player.removeCommand(d.CHANGE_DURATION);this.facade.removeCommand(d.STARTED);this.facade.removeCommand(d.ENDED);
this.facade.registerCommand(d.START,of);this.facade.registerCommand(d.PLAY,pf);this.facade.registerCommand(d.PAUSE,qf);this.facade.registerCommand(X.PLAY,pf);this.facade.registerCommand(X.PAUSE,qf);this.facade.registerCommand(X.TOGGLE_PLAY_PAUSE,gh);this.facade.registerCommand(d.VOLUME_CHANGE,rf);this.facade.registerCommand(d.PLAY_STATE_CHANGE,hh)};I.prototype.reset=function(){this.facade.removeCommand(d.START);this.facade.removeCommand(d.PLAY);this.facade.removeCommand(d.PAUSE);this.facade.removeCommand(X.PLAY);
this.facade.removeCommand(X.PAUSE);this.facade.removeCommand(X.TOGGLE_PLAY_PAUSE);this.facade.removeCommand(d.VOLUME_CHANGE);this.facade.removeCommand(d.PLAY_STATE_CHANGE);this.facade.player.registerCommand(d.START,Ee);this.facade.player.registerCommand(d.PLAY,zd);this.facade.player.registerCommand(d.PAUSE,yd);this.facade.player.registerCommand(d.ENDED,Td);this.facade.player.registerCommand(X.PLAY,zd);this.facade.player.registerCommand(X.PAUSE,yd);this.facade.player.registerCommand(X.TOGGLE_PLAY_PAUSE,
ze);this.facade.isFullscreenDevice()&&this.facade.player.registerCommand(d.CHANGE_DURATION,Ne);this.facade.registerCommand(d.STARTED,dh);this.facade.registerCommand(d.ENDED,eh)};I.prototype.requestAd=function(){this.sendNotification(k.REQUEST,this.adVO)};I.prototype.getPodById=function(a){var b,c,d,f;f=this.pods;c=0;for(d=f.length;c<d;c++)if(b=f[c],b.id===a)return b};I.prototype.setPodLocks=function(a){var b,c,d,f;c=0;for(d=a.length;c<d;c++)b=a[c],null!=(f=this.getPodById(b.id))&&(f.locked=b.locked)};
I.prototype.startBreak=function(){this.setStarted(!0);this.sendNotification(k.BREAK_START,this.adVO);return!1===this.getEnabled()?(this.endBreak(),!1):!0};I.prototype.endBreak=function(){this.sendNotification(k.BREAK_END,this.adVO)};I.prototype.start=function(){this.startBreak()};I.prototype.contentPlay=function(){this.facade.player.sendNotification(d.PLAY,!0)};I.prototype.contentPause=function(){var a;a=this.facade.player.mediaElement;if(!0===a.seeking)a.once("seeked",function(){a.pause()});else a.pause()};
I.prototype.contentStarted=function(){};I.prototype.contentSeek=function(a){};I.prototype.contentEnded=function(){};I.prototype.setVolume=function(a){};I.prototype.getVolume=function(){};I.prototype.terminateAd=function(){};I.prototype.terminateAllAds=function(){};var rd=function(){rd.__super__.constructor.call(this)};f(rd,L);rd.prototype.moduleName="info";rd.prototype.createModel=function(){this.registerProxy(new ne(this.config))};rd.prototype.createView=function(){this.registerMediator(new mb)};
rd.prototype.listNotificationInterests=function(){return[d.MEDIA_CHANGE]};n.registerPlugin("info","html",rd);n.registerPlugin("info","external",rd);var la={BREAK_START:"adComponentBreakInitiated",BREAK_END:"adComponentBreakComplete",BREAK_SKIPPED:"adComponentBreakSkipped",AD_LOADED:"adComponentLoaded",AD_STARTED:"adComponentAdBegin",AD_TIME_UPDATE:"adComponentPlaybackProgress",AD_TIME_REMAINING:"adComponentTimeElapsed",AD_DURATION_CHANGE:"addurationchange",AD_ENDED:"adComponentAdComplete",AD_ERROR:"adComponentInitFailed",
AD_PLAY:"adComponentPlaybackResumed",AD_PAUSE:"adComponentPlaybackPaused",AD_LOG:"adComponentLog",AD_COMPANION:"adComponentCompanion",AD_PLAYBACK_FAILED:"adComponentPlaybackFailed",AD_PLAYBACK_TERMINATED:"adComponentPlaybackTerminated",AD_MEDIA_LOADED:"adComponentMediaLoaded",AD_CLICKED:"adComponentClicked",AD_FIRST_QUARTILE:"adComponentFirstQuartile",AD_MIDPOINT:"adComponentMidpoint",AD_THIRD_QUARTILE:"adComponentThirdQuartile",AD_REQUEST:"adComponentAdsRequest",AD_REQUEST_COMPLETE:"adComponentAdsRequestComplete",
AD_SKIPPED:"adComponentAdSkipped",AD_IMPRESSION:"adComponentImpression"},db=function(a){db.__super__.constructor.call(this,a)};f(db,Aa);db.prototype.configurationName="imaoverlay";db.NAME="IMAOveralyProxy";db.prototype.defaults={adTagUrl:null,duration:15,interval:30,delay:30};db.prototype.durationTimer=null;db.prototype.intervalTimer=null;db.prototype.delayTimer=null;db.prototype.stop=function(){clearTimeout(this.durationTimer);clearTimeout(this.delayTimer);clearTimeout(this.intervalTimer)};db.prototype.play=
function(){var a=this;this.stop();this.delayTimer=setTimeout(function(){return a.requestAd()},1E3*this.value.delay)};db.prototype.requestAd=function(){var a;a=this.getValue("adTagUrl");null!=a&&(a=a.replace("[timestamp]",(new Date).getTime()),a=a.replace("__random-number__",(new Date).getTime()));g.get(a,{withCredentials:!0,onload:this.vastLoadHandler.bind(this),onerror:this.error.bind(this)},!1)};db.prototype.vastLoadHandler=function(a){var b,c,d,f,g;a=a.target.responseXML;if(null!=a)try{b=a.querySelector("NonLinear"),
null!=b?(g=null!=a.querySelector("Impression")?a.querySelector("Impression").textContent:"",d=null!=a.querySelector("Tracking[event\x3dcreativeView]")?a.querySelector("Tracking[event\x3dcreativeView]").textContent:"",c=null!=b.querySelector("NonLinearClickThrough")?b.querySelector("NonLinearClickThrough").textContent:"",f={src:b.querySelector("StaticResource").textContent,width:b.getAttribute("width"),height:b.getAttribute("height"),tracking:[g,d],href:c},this.displayAd(f)):this.error("No overlay was returned")}catch(h){this.error(h)}};
db.prototype.error=function(a){this.facade.logger.error("[AMP IMA OVERLAY ERROR]",a);this.stop()};db.prototype.displayAd=function(a){var b=this;this.sendNotification(sd.ADD_OVERLAY,a);this.durationTimer=setTimeout(function(){b.sendNotification(sd.REMOVE_OVERLAY);return b.intervalTimer=setTimeout(function(){return b.requestAd()},1E3*b.value.interval)},1E3*this.value.duration)};var sd={INITIALIZED:"ima/initialize",ADD_OVERLAY:"ima/addOverlay",REMOVE_OVERLAY:"ima/removeOverlay"},u=function(a){u.__super__.constructor.call(this,
a);this.intervals=[];this.loadedmetadata=this.onLoadedMetadata.bind(this);this.adVO=this.createDefaultAdVO()};f(u,I);u.NAME=I.NAME;u.prototype.defaults={adTagUrl:null,overlay:null,width:null,height:null,maxBitrate:-1,ppid:null,companions:null,logEventsEnabled:!1};u.prototype.partner="ima";u.prototype.key="ima";u.prototype.intervals=null;u.prototype.adDisplayContainer=null;u.prototype.adDisplayContainerInitialized=!1;u.prototype.adsLoader=null;u.prototype.adsRenderingSettings=null;u.prototype.adsManagerLoaded=
!1;u.prototype.adsManager=null;u.prototype.cuepoints=null;u.prototype.adLoaded=!1;u.prototype.playWhenLoaded=!1;u.prototype.contentHasEnded=!1;u.prototype.adTagUrl=null;u.prototype.viewMode=null;u.prototype.playbackCore=null;u.prototype.loadedmetadata=null;u.prototype.setEnabled=function(a){var b;u.__super__.setEnabled.call(this,a);!1===a&&(null!=(b=this.adsManager)&&"function"===typeof b.destroy&&b.destroy(),this.getInProgress()&&this.contentPlay());return a};u.prototype.onLoadedMetadata=function(a){this.canPlay()&&
!0===this.playWhenLoaded&&this.startAd()};u.prototype.initialize=function(){};u.prototype.ready=function(){var a;this.viewMode=google.ima.ViewMode.NORMAL;window.addEventListener("resize",this.resize.bind(this));null!=this.config.vpaidAllowed&&google.ima.settings.setVpaidAllowed(this.config.vpaidAllowed);null!=this.config.vpaidMode&&null!=(a=google.ima.ImaSdkSettings.VpaidMode[this.config.vpaidMode.toUpperCase()])&&google.ima.settings.setVpaidMode(a);this.adDisplayContainer=this.createPlugin();this.adsLoader=
new google.ima.AdsLoader(this.adDisplayContainer);this.adsRenderingSettings=new google.ima.AdsRenderingSettings;this.adsLoader.addEventListener(google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,this.onAdsManagerLoaded.bind(this),!1);this.adsLoader.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,this.onAdError.bind(this),!1)};u.prototype.createPlugin=function(){return new google.ima.AdDisplayContainer(this.facade.getViewComponent().container)};u.prototype.engage=function(a){var b,c;!1!==
this.getEnabled()&&(u.__super__.engage.call(this),(!0===this.adsManagerLoaded&&!1===this.contentHasEnded||!0===this.contentHasEnded&&"postroll"===(null!=(b=this.adVO)?b.type:void 0))&&null!=(c=this.adsManager)&&"function"===typeof c.destroy&&c.destroy(),this.playWhenLoaded=this.adsManagerLoaded=this.contentHasEnded=this.adsManagerLoaded=!1)};u.prototype.setVolume=function(a){var b;null!=(b=this.adsManager)&&b.setVolume(a);return a};u.prototype.getVolume=function(){var a;return null!=(a=this.adsManager)?
a.getVolume():void 0};u.prototype.requestAd=function(){var a,b,c,d,f,k;u.__super__.requestAd.call(this);a=this.getDimensions();d=a.clientWidth;c=a.clientHeight;a=new google.ima.AdsRequest;this.adTagUrl=this.getValue("adTagUrl");b=this.getValue("adsResponse");null!=b&&""!==b?a.adsResponse=g.read(b,null,g.mimeTypes.txt):a.adTagUrl=this.adTagUrl;if(null==a.adsResponse&&null==a.adTagUrl)this.onAdError("No valid adTagUrl or adsResponse provided.");else a.linearAdSlotWidth=d,a.linearAdSlotHeight=c,a.nonLinearAdSlotWidth=
(null!=(f=this.value.overlay)?f.width:void 0)||d,a.nonLinearAdSlotHeight=(null!=(k=this.value.overlay)?k.height:void 0)||c,d=this.adsLoader.getSettings(),null!=this.config.ppid&&d.setPpid(this.getValue("ppid")),this.adsLoader.requestAds(a)};u.prototype.requestOverlay=function(){var a,b;b=this.value.overlay;null!=b&&(a=new google.ima.AdsRequest,a.adTagUrl=b.adTagUrl,a.nonLinearAdSlotWidth=b.width||300,a.nonLinearAdSlotHeight=b.height||50,this.adsLoader.requestAds(a))};u.prototype.start=function(a){var b;
null==a&&(a=!0);!0===a?(this.playbackCore=this.facade.player.retrieveProxy(ba.NAME).getActivePlaybackCore(),b=this.getMediaElement(),this.playbackCore.setEnabled(!1),b.src=this.playbackCore.getSrc(),b.once("loadedmetadata",this.loadedmetadata),b.load()):this.engage();if(!1===u.__super__.start.call(this))return!1;this.isLiveMidroll=!1===a&&"live"===this.facade.player.retrieveProxy(s.NAME).getTemporalType();!0!==this.adDisplayContainerInitialized&&(this.adDisplayContainer.initialize(),this.adDisplayContainerInitialized=
!0);!0===this.canPlay()&&!0===a?this.startAd():(this.playWhenLoaded=!0,this.requestAd())};u.prototype.canPlay=function(){return!0===this.adsManagerLoaded};u.prototype.startAd=function(){this.playWhenLoaded=!1;try{null==this.viewMode&&(this.viewMode=google.ima.ViewMode.NORMAL),this.adsManager.init(this.facade.player.getViewComponent().clientWidth,this.facade.player.getViewComponent().clientHeight,this.viewMode),this.adsManager.start()}catch(a){this.error(a)}};u.prototype.resize=function(a,b){var c;
null==b&&(b=this.getDimensions());if(null==this.dimensions||this.dimensions.width!==b.width||this.dimensions.height!==b.height)this.dimensions=b,null!=a&&(this.viewMode=a===ia.FULL_SCREEN?google.ima.ViewMode.FULLSCREEN:google.ima.ViewMode.NORMAL),null!=(c=this.adsManager)&&c.resize(this.dimensions.width,this.dimensions.height,this.viewMode)};u.prototype.onAdsManagerLoaded=function(a){var b;this.adsRenderingSettings.bitrate=this.getValue("maxBitrate");this.adsRenderingSettings.autoAlign=!0;this.adsRenderingSettings.useStyledNonLinearAds=
!0;null!=(b=this.adsManager)&&"function"===typeof b.destroy&&b.destroy();this.adsManager=a.getAdsManager(this.facade.player.mediaElement,this.adsRenderingSettings);this.facade.player.sendNotification(k.AD_MANAGER_LOADED,{adManager:this.adsManager,viewMode:google.ima.ViewMode.NORMAL,adContainer:this.facade.getViewComponent()});this.adsManagerLoaded=!0;this.cuePoints=this.adsManager.getCuePoints();this.sendNotification(d.ADD_CUE_POINTS,this.cuePoints);-1!==this.cuePoints.indexOf(-1)&&this.sendNotification(d.HAS_POST_CONTENT,
!0);b=this.onAdEvent.bind(this);this.adsManager.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,this.onAdError.bind(this));this.adsManager.addEventListener(google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED,this.contentPause.bind(this));this.adsManager.addEventListener(google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED,this.contentPlay.bind(this));this.adsManager.addEventListener(google.ima.AdEvent.Type.ALL_ADS_COMPLETED,b);this.adsManager.addEventListener(google.ima.AdEvent.Type.LOADED,b);this.adsManager.addEventListener(google.ima.AdEvent.Type.STARTED,
b);this.adsManager.addEventListener(google.ima.AdEvent.Type.RESUMED,this.onAdResumed.bind(this));this.adsManager.addEventListener(google.ima.AdEvent.Type.PAUSED,this.onAdPaused.bind(this));this.adsManager.addEventListener(google.ima.AdEvent.Type.COMPLETE,b);this.adsManager.addEventListener(google.ima.AdEvent.Type.CLICK,this.onAdClick.bind(this));this.adsManager.addEventListener(google.ima.AdEvent.Type.IMPRESSION,b);this.adsManager.addEventListener(google.ima.AdEvent.Type.FIRST_QUARTILE,b);this.adsManager.addEventListener(google.ima.AdEvent.Type.MIDPOINT,
b);this.adsManager.addEventListener(google.ima.AdEvent.Type.THIRD_QUARTILE,b);this.adsManager.addEventListener(google.ima.AdEvent.Type.SKIPPED,b);!0===this.getValue("logEventsEnabled")&&this.adsManager.addEventListener(google.ima.AdEvent.Type.LOG,b);this.sendNotification(k.REQUEST_COMPLETE,{pods:this.cuePoints});this.sendNotification(k.RESPONSE,{pods:this.cuePoints,response:a,adsManager:this.adsManager});this.canPlay()&&!0===this.playWhenLoaded&&this.startAd()};u.prototype.onAdClick=function(a){!1===
(null!=a?a.getAd().isLinear():void 0)?this.facade.player.sendNotification(d.PAUSE):(this.getPaused()||this.pause(),this.sendNotification(k.AD_CLICKED,this.adVO))};u.prototype.onAdPaused=function(a){this.setPaused(!0);this.facade.player.sendNotification(d.CHANGE_PLAY_STATE,P.PAUSED);this.facade.player.sendNotification(d.CHANGE_ACTIVE_STATE,ib.ACTIVE);this.facade.player.sendNotification(k.AD_PAUSED,this.adVO)};u.prototype.onAdResumed=function(a){this.setPaused(!1);this.facade.player.sendNotification(d.CHANGE_PLAY_STATE,
P.PLAYING)};u.prototype.onAdEvent=function(a){var b,c,e,f,g,h,l;b=a.getAd();null!=this.adVO&&(null!=b&&(b.wrapperAdIds="function"===typeof b.getWrapperAdIds?b.getWrapperAdIds():void 0,b.wrapperAdSystems="function"===typeof b.getWrapperAdSystems?b.getWrapperAdSystems():void 0),this.adVO.metadata=b);switch(a.type){case google.ima.AdEvent.Type.IMPRESSION:this.sendNotification(k.IMPRESSION,this.adVO);break;case google.ima.AdEvent.Type.LOADED:if(b.isLinear()){a=b.getAdPodInfo().getPodIndex();c=0===a?"preroll":
-1===a?"postroll":"midroll";this.adVO=new Ta(b.getAdId(),b.getAdId(),b.getDuration(),a,c,"ima",null,null,this.adTagUrl,b,b.getAdPodInfo().getTotalAds());if(!this.getInProgress()&&"midroll"===c||"postroll"===c)this.startBreak(),this.engageAds();this.resize();this.sendNotification(k.AD_LOADED,this.adVO);this.sendNotification(k.AD_DURATION_CHANGE,this.adVO);this.setVolume(this.facade.player.getVolume())}else this.facade.player.sendNotification(d.ADD_APPLICATION_STATE,"ad-overlaymode"),this.contentPlay();
break;case google.ima.AdEvent.Type.STARTED:b.isLinear()&&(this.adVO.position=b.getAdPodInfo().getAdPosition(),this.sendNotification(k.AD_STARTED,this.adVO),this.intervals.push(setInterval(this.onAdTimeUpdate.bind(this),67)),this.facade.player.sendNotification(d.CHANGE_PLAY_STATE,P.PLAYING),this.sendNotification(k.AD_PLAY,this.adVO));try{e=[];f=("function"===typeof this.getConfigurationData?null!=(l=this.getConfigurationData())?l.companions:void 0:void 0)||[];g=0;for(h=f.length;g<h;g++)c=f[g],e=e.concat(b.getCompanionAds(c.width,
c.height));0<(null!=e?e.length:void 0)&&this.setCompanions(e)}catch(n){this.facade.logger.error("[AMP IMA ERROR]","Could not retrieve companion ads:",n)}break;case google.ima.AdEvent.Type.COMPLETE:b.isLinear()&&this.sendNotification(k.AD_ENDED,this.adVO);break;case google.ima.AdEvent.Type.FIRST_QUARTILE:this.sendNotification(k.FIRST_QUARTILE,this.adVO);break;case google.ima.AdEvent.Type.MIDPOINT:this.sendNotification(k.MIDPOINT,this.adVO);break;case google.ima.AdEvent.Type.THIRD_QUARTILE:this.sendNotification(k.THIRD_QUARTILE,
this.adVO);break;case google.ima.AdEvent.Type.LOG:this.sendNotification(k.LOG,this.adVO);break;case google.ima.AdEvent.Type.SKIPPED:this.sendNotification(k.SKIPPED,this.adVO);break;case google.ima.AdEvent.Type.ALL_ADS_COMPLETED:!0===this.appState.getHasPostContent()&&this.sendNotification(d.MEDIA_SEQUENCE_ENDED),!0===this.getInProgress()&&this.endBreak()}};u.prototype.getDimensions=function(){var a;a=this.facade.player.getViewComponent();return{width:a.clientWidth,height:a.clientHeight}};u.prototype.onAdTimeUpdate=
function(a){this.resize();a=this.adsManager.getRemainingTime();this.sendNotification(k.AD_TIME_UPDATE,this.adVO.duration-a);this.sendNotification(k.AD_TIME_REMAINING,a)};u.prototype.onAdError=function(a){a=(null!=a?"function"===typeof a.getError?a.getError():void 0:void 0)||a;this.error(a);this.contentPlay()};u.prototype.play=function(){var a;u.__super__.play.call(this);try{null!=(a=this.adsManager)&&a.resume(),this.sendNotification(k.AD_RESUME)}catch(b){this.facade.logger.error("[AMP IMA ERROR]",
"resume",b)}};u.prototype.pause=function(){u.__super__.pause.call(this);if(null!=this.adsManager)try{this.adsManager.pause()}catch(a){this.facade.logger.error("[AMP IMA ERROR]","pause",a)}else this.playWhenLoaded=!1};u.prototype.breakEnd=function(){var a,b;b=this.intervals;a=0;for(b=b.length;a<b;a++)clearInterval(this.intervals.pop());u.__super__.breakEnd.call(this);a=this.facade.retrieveProxy(db.NAME);null!=a&&a.play()};u.prototype.setCompanions=function(a){var b,c,d,f,g;c=[];d=0;for(f=a.length;d<
f;d++)b=a[d],c.push({data:b.getContent(),type:null!=(g=b.getContentType())?g.toLowerCase():void 0,width:b.getWidth(),height:b.getHeight(),metadata:b});u.__super__.setCompanions.call(this,c);return a};u.prototype.contentPause=function(){var a,b=this;a="pause waiting playing ended durationchange error".split(" ");if(!1===this.facade.player.retrieveProxy(C.NAME).getSeeking())a.push("seeked");else this.getMediaElement().once("seeked",function(){b.sendNotification(d.DISABLE_VIDEO_EVENTS,["seeked"])});
this.sendNotification(d.DISABLE_VIDEO_EVENTS,a);!0===this.isLiveMidroll?this.getMediaElement().volume=0:u.__super__.contentPause.call(this)};u.prototype.contentPlay=function(){var a,b;!0===this.getInProgress()&&this.endBreak();this.sendNotification(d.ENABLE_VIDEO_EVENTS,"pause seeked waiting playing ended durationchange error".split(" "));if("postroll"!==(null!=(a=this.adVO)?a.type:void 0)){if(!0===this.isLiveMidroll)if(this.getMediaElement().volume=this.facade.player.retrieveProxy(C.NAME).getVolume(),
"ipad"===g.getDevice())this.getMediaElement().load();else return;u.__super__.contentPlay.call(this);"midroll"===(null!=(b=this.adVO)?b.type:void 0)&&"desktop"===g.getDevice()&&this.facade.player.setCurrentTime(Math.floor(this.facade.player.getCurrentTime()))}};u.prototype.contentEnded=function(){var a;this.contentHasEnded=!0;try{null!=(a=this.adsLoader)&&"function"===typeof a.contentComplete&&a.contentComplete()}catch(b){this.facade.logger.error("[AMP IMA ERROR]","contentComplete",b)}};u.prototype.terminateAd=
function(){var a;try{null!=(a=this.adsManager)&&a.stop()}catch(b){this.facade.logger.error("[AMP IMA ERROR]","terminateAd",b)}this.endBreak();this.contentPlay()};u.prototype.terminateAllAds=function(){var a;try{null!=(a=this.adsManager)&&a.destroy()}catch(b){this.facade.logger.error("[AMP IMA ERROR]","terminateAllAds",b)}this.endBreak();this.contentPlay()};u.prototype.destroy=function(){var a;null!=(a=this.adsManager)&&"function"===typeof a.destroy&&a.destroy()};var ih=function(){ih.__super__.constructor.call(this)};
f(ih,puremvc.SimpleCommand);ih.prototype.execute=function(a){this.facade.sendNotification(d.ADD_APPLICATION_STATE,"ad-overlay-mode")};var jh=function(){jh.__super__.constructor.call(this)};f(jh,puremvc.SimpleCommand);jh.prototype.execute=function(a){this.facade.retrieveProxy(db.NAME).stop();this.facade.player.sendNotification(d.REMOVE_APPLICATION_STATE,"ad-overlay-mode")};var Ab=function(){Ab.__super__.constructor.call(this)};f(Ab,ma);Ab.prototype.componentName="ad-overlay";Ab.prototype.anchor=null;
Ab.prototype.image=null;Ab.prototype.tracker=null;Ab.prototype.tracker2=null;Ab.prototype.closeButton=null;Ab.prototype.closeText=null;Ab.prototype.onRegister=function(){var a=this;Ab.__super__.onRegister.call(this);this.anchor=this.create("ad-overlay-anchor");this.anchor.target="_blank";this.image=this.create("ad-overlay-img",this.anchor,"img");this.tracker=this.create();this.tracker.width=0;this.tracker.height=0;this.tracker2=this.create(null,this,"img");this.tracker2.width=0;this.tracker2.height=
0;this.closeButton=this.create("ad-close-button",this.anchor);this.closeButton.onclick=function(b){b.stopImmediatePropagation();a.sendNotification(sd.REMOVE_OVERLAY);return!1};this.closeText=this.createText("ad-close-text","x",this.closeButton)};Ab.prototype.listNotificationInterests=function(){return[sd.ADD_OVERLAY,sd.REMOVE_OVERLAY]};Ab.prototype.handleNotification=function(a){switch(a.getName()){case sd.ADD_OVERLAY:a=a.getBody(),this.image.src=a.src,this.anchor.href=a.href,this.tracker.src=a.tracking[0],
this.tracker2.src=a.tracking[1]}};var kh=function(){kh.__super__.constructor.call(this)};f(kh,puremvc.SimpleCommand);kh.prototype.execute=function(a){this.facade.retrieveProxy(u.NAME).ready()};var lh=function(){lh.__super__.constructor.call(this)};f(lh,puremvc.SimpleCommand);lh.prototype.execute=function(a){this.facade.retrieveProxy(u.NAME).resize(a.getBody())};var mh=function(){mh.__super__.constructor.call(this)};f(mh,puremvc.SimpleCommand);mh.prototype.execute=function(a){this.facade.retrieveProxy(u.NAME).resize(a.getBody())};
var Wb=function(a){Wb.__super__.constructor.call(this,a)};f(Wb,u);Wb.NAME=u.NAME;Wb.prototype.createPlugin=function(){return new google.ima.AdDisplayContainer(this.facade.getViewComponent().container,this.facade.player.getMediaElement(),this.facade.getViewComponent().container)};Wb.prototype.engage=function(a){Wb.__super__.engage.call(this,a);this.sendNotification(d.DISABLE_VIDEO_EVENTS,["paused","ended","durationchange","error"])};Wb.prototype.reset=function(a){Wb.__super__.reset.call(this,a);this.sendNotification(d.ENABLE_VIDEO_EVENTS,
["paused","ended","durationchange","error"])};Wb.prototype.breakStart=function(){this.playbackCore=this.facade.player.retrieveProxy(ba.NAME).getActivePlaybackCore();this.playbackCore.setEnabled(!1);this.setInProgress(!0)};Wb.prototype.breakEnd=function(){Wb.__super__.breakEnd.call(this);this.playbackCore.setEnabled(!0)};var ja=function(a,b){ja.__super__.constructor.call(this,a,b)};f(ja,H);ja.NAME="AdWrapper";ja.prototype.enabled=!0;ja.prototype.paused=!1;ja.prototype.started=!1;ja.prototype.adVO=
null;ja.prototype.partner=null;ja.prototype.getFeatureName=function(){return"ads"};ja.prototype.getInProgress=function(){return this.player.mediaElement.getPlayerProperty("adInProgress")};ja.prototype.getStarted=function(){return this.started};ja.prototype.getPaused=function(){return this.paused};ja.prototype.getCompanions=function(){var a;return null!=(a=this.adVO)?a.companions:void 0};ja.prototype.setEnabled=function(a){this.enabled=a;this.player.mediaElement.setPlayerProperty("adsEnabled",a);return a};
ja.prototype.getEnabled=function(){return this.enabled};ja.prototype.enable=function(){this.setEnabled(!0)};ja.prototype.disable=function(){this.setEnabled(!1)};ja.prototype.createFlashVars=function(a){a.core_ads_enabled=!0;return a};ja.prototype.listNotificationInterests=function(){var a,b;return ja.__super__.listNotificationInterests.call(this).concat(function(){var c;c=[];for(a in la)b=la[a],c.push(b);return c}())};ja.prototype.handleNotification=function(a){var b,c,e,f,g,h,l;ja.__super__.handleNotification.call(this,
a);b=a.getName();a=a.getBody();this.adVO=this.createAdVO(a);f=this;switch(b){case la.BREAK_START:g=k.BREAK_START;break;case la.BREAK_END:g=k.BREAK_END;break;case la.BREAK_SKIPPED:g=k.BREAK_SKIPPED;break;case la.AD_MEDIA_LOADED:g=k.AD_LOADED;this.start=!1;break;case la.AD_STARTED:g=k.AD_STARTED;this.started=!0;this.sendNotification(d.ADD_APPLICATION_STATE,"ad-mode");break;case la.AD_TIME_UPDATE:g=k.AD_TIME_UPDATE;break;case la.AD_TIME_REMAINING:g=k.AD_TIME_REMAINING;break;case la.AD_ERROR:case la.AD_PLAYBACK_FAILED:g=
k.AD_ERROR;this.start=!1;this.sendNotification(d.REMOVE_APPLICATION_STATE,"ad-mode");break;case la.AD_ENDED:case la.AD_PLAYBACK_TERMINATED:g=k.AD_ENDED;this.sendNotification(d.REMOVE_APPLICATION_STATE,"ad-mode");break;case la.AD_CLICKED:g=k.AD_CLICKED;break;case la.AD_COMPANION:g=k.AD_COMPANION;null!=this.adVO&&null!=a&&(this.adVO.companions=a);break;case la.AD_PAUSE:g=k.AD_PAUSE;f=this.player;this.paused=!0;this.player.setPlayState("paused");break;case la.AD_PLAY:g=k.AD_PLAY;this.paused=!1;this.player.setPlayState("playing");
break;case la.AD_LOG:g=k.AD_LOG;break;case la.AD_FIRST_QUARTILE:g=k.FIRST_QUARTILE;break;case la.AD_MIDPOINT:g=k.MIDPOINT;break;case la.AD_THIRD_QUARTILE:g=k.THIRD_QUARTILE;break;case la.AD_REQUEST:g=k.REQUEST;break;case la.AD_REQUEST_COMPLETE:g=k.REQUEST_COMPLETE;c=[];b=a.cuePoints||[];h=0;for(l=b.length;h<l;h++)e=b[h],c.push(new Ta(e.sceneId,e.sceneTitle,e.sceneDuration,e.scenePodIndex,e.scenePodPosition,this.partner,null,null,null,{},e.sceneSubCount,e.sceneEndSeconds));this.adVO={pods:c};b=new V("response",
this.adVO);b.player=this.player;f.dispatchEvent(b);break;case la.AD_SKIPPED:g=k.SKIPPED;break;case la.AD_IMPRESSION:g=k.IMPRESSION}null!=g&&(this.sendNotification(g,this.adVO),b=g===k.AD_TIME_REMAINING?new V(g.replace(/^ads/,""),a.timeElapsed):new V(g.replace(/^ads/,""),this.adVO),b.player=this.player,f.dispatchEvent(b))};ja.prototype.createAdVO=function(a){return null==a?null:new Ta(a.id,a.title,a.duration,a.adIndex,a.podPosition,a.adPlatform,null,null,a.requestURL,a.metadata,a.totalAds,a.currentTime)};
ja.prototype.setPodLocks=function(a){var b,c,d,f;c=[];d=0;for(f=a.length;d<f;d++)b=a[d],c.push({sceneId:b.id,sceneLocked:b.locked,sceneTitle:b.title,sceneStartSeconds:b.time,sceneEndSeconds:b.duration+b.time,scenePodIndex:b.position,scenePodPosition:b.type});this.player.mediaElement.setAdPodLocks(c)};ja.prototype.terminateAd=function(){this.player.mediaElement.terminateAd()};ja.prototype.terminateAllAds=function(){this.player.mediaElement.terminateAllAds()};ja.prototype.requestAd=function(){this.player.mediaElement.triggerAd()};
var Fd=function(){return Fd.__super__.constructor.apply(this,arguments)};f(Fd,ja);Fd.NAME="IMAWrapper";Fd.prototype.partner="ima";Fd.prototype.flashPlugins=[{id:"GoogleIMAPlugin",src:"#{paths.resources}plugins/GoogleIMAPlugin.swf",blocking:!1,host:"akamai",main:"GoogleIMAPlugin",type:"application/x-shockwave-flash"},{id:"IMAOverlayAdPlugin",src:"#{paths.resources}plugins/IMAOverlayAdPlugin.swf",blocking:!1,host:"akamai",main:"IMAOverlayAdPlugin",type:"application/x-shockwave-flash"},{id:"AdOptionsPlugin",
src:"#{paths.resources}plugins/AdOptionsPlugin.swf",blocking:!1,host:"akamai",main:"AdOptionsPlugin",type:"application/x-shockwave-flash"}];Fd.prototype.createXML=function(a){var b,c,d,f,g,h,k,l,n;c=a.firstChild;b=a.getElementsByTagName("admedia")[0];null==b&&(b=a.createElement("admedia"),c.appendChild(b));c=a.createElement("vendor");c.setAttribute("id","dfp");b.appendChild(c);f=[{value:this.config.adTagUrl,key:"DFP_AD_TAG_URL"},{value:this.config.maxBitrate,key:"DFP_MAX_BITRATE"},{value:this.config.sceneMarkers,
key:"displaySceneMarkers"},{value:this.config.ppid,key:"DFP_PPID"}];g=0;for(k=f.length;g<k;g++)d=f[g],null!=d.value&&this.createProperty(a,d.key,d.value,c);null!=this.config.position&&c.setAttribute("position",this.config.position);null!=this.config.params&&(null!=this.config.params.adTag&&this.createProperty(a,"DFP_AD_TAG_PARAMS",this.config.params.adTag,c),null!=this.config.params.manual&&this.createProperty(a,"DFP_MANUAL_PARAMS",this.config.params.manual,c));if(null!=this.config.companions){f=
[];g=[];n=this.config.companions;k=0;for(l=n.length;k<l;k++)d=n[k],f.push(d.width+"x"+d.height),g.push(d.id);this.createProperty(a,"DFP_SIZE",f.join(","),c);this.createProperty(a,"COMPANION_ID",g.join(","),c)}null!=this.config.disableCompanionAds&&this.createProperty(a,"disableCompanionAds",this.config.disableCompanionAds,c);if(null!=this.config.overlay)for(!0===this.config.overlay.enabled&&(h=a.createElement("overlay"),b.appendChild(h)),f=[{value:"dfp",key:"OVERLAY_AD_PARTNER"},{value:this.config.overlay.adTagUrl,
key:"OVERLAY_AD_BASE_URL"},{value:this.config.overlay.delay,key:"OVERLAY_AD_DELAY"},{value:this.config.overlay.interval,key:"OVERLAY_AD_INTERVAL"},{value:this.config.overlay.duration,key:"OVERLAY_AD_DURATION"},{value:""+this.config.overlay.width+"x"+this.config.overlay.height,key:"OVERLAY_AD_SIZE"}],b=0,c=f.length;b<c;b++)d=f[b],null!=d.value&&this.createProperty(a,d.key,d.value,h);return a};var na=function(){na.__super__.constructor.call(this)};f(na,vb);na.NAME="AdPlugin";na.prototype.container=
null;na.prototype.featureName="ads";na.prototype.createModel=function(){this.proxy=this.isFullscreenDevice()?this.createFullscreenProxy():this.createProxy();this.registerProxy(this.proxy)};na.prototype.createController=function(){na.__super__.createController.call(this);this.registerCommand(d.MEDIA_CHANGE,fh);this.registerCommand(k.BREAK_START,kf);this.registerCommand(k.AD_LOADED,jf);this.registerCommand(k.BREAK_END,lf);this.registerCommand(d.SEEK,mf);this.registerCommand(X.SEEK,mf);this.registerCommand(k.AD_CONTAINER_CREATED,
nf);this.registerCommand(k.AD_STARTED,w);this.registerCommand(k.SKIPPED,w);this.registerCommand(k.AD_MANAGER_LOADED,w);this.registerCommand(k.AD_TIME_UPDATE,w);this.registerCommand(k.AD_TIME_REMAINING,w);this.registerCommand(k.AD_DURATION_CHANGE,w);this.registerCommand(k.AD_ENDED,w);this.registerCommand(k.AD_ERROR,w);this.registerCommand(k.AD_COMPANION,w);this.registerCommand(k.FIRST_QUARTILE,w);this.registerCommand(k.MIDPOINT,w);this.registerCommand(k.THIRD_QUARTILE,w);this.registerCommand(k.COMPLETE,
w);this.registerCommand(k.LOG,w);this.registerCommand(k.REQUEST,w);this.registerCommand(k.AD_RESUME,w);this.registerCommand(k.AD_PLAY,w);this.registerCommand(k.AD_PAUSE,w);this.registerCommand(k.AD_PAUSED,w);this.registerCommand(k.IMPRESSION,w);this.registerCommand(k.AD_CLICKED,w);this.registerCommand(k.REQUEST_COMPLETE,w);this.registerCommand(k.RESPONSE,w);this.registerCommand(k.BREAK_SKIPPED,w)};na.prototype.createView=function(){return this.registerMediator(new Wa)};na.prototype.isFullscreenDevice=
function(){return g.isFullscreenDevice()};na.prototype.createProxy=function(){};na.prototype.createFullscreenProxy=function(){};na.prototype.listNotificationInterests=function(){return[d.MEDIA_CHANGE,d.PLAY,d.PAUSE,d.PAUSED,d.START,d.STARTED,d.ENDED,d.READY,d.SEEK,d.VOLUME_CHANGE,d.FULL_SCREEN_CHANGE,d.CHANGE_ACTIVE_STATE,d.PLAY_STATE_CHANGE,X.PLAY,X.PAUSE,X.SEEK,X.TOGGLE_PLAY_PAUSE]};na.prototype.listNotificationPublications=function(){var a,b;return na.__super__.listNotificationPublications.call(this).concat(function(){var c;
c=[];for(a in k)b=k[a],c.push(b);return c}()).concat([d.PLAY_REQUEST,d.UPDATE_DATA_BINDINGS,d.DISPLAY_TIME,d.ADD_CUE_POINTS,d.DISABLE_FULL_SCREEN,d.ENABLE_VIDEO_EVENTS,d.DISABLE_VIDEO_EVENTS,d.HAS_POST_CONTENT,d.MEDIA_SEQUENCE_ENDED,d.CHANGE_PLAY_STATE])};na.prototype.setEnabled=function(a){this.proxy.setEnabled(a)};na.prototype.getEnabled=function(){return this.proxy.getEnabled()};na.prototype.getInProgress=function(){return this.proxy.getInProgress()};na.prototype.getStarted=function(){return this.proxy.getStarted()};
na.prototype.getPaused=function(){return this.proxy.getPaused()};na.prototype.getCompanions=function(){return this.proxy.getCompanions()};na.prototype.setPodLocks=function(a){this.proxy.setPodLocks(a)};na.prototype.terminateAd=function(){this.proxy.terminateAd()};na.prototype.terminateAllAds=function(){this.proxy.terminateAllAds()};na.prototype.requestAd=function(){this.proxy.start(!1)};var Ib=function(a,b){null==b&&(b={});Ib.__super__.constructor.call(this,a,b)};f(Ib,H);Ib.NAME="ShareWrapper";Ib.prototype.controls=
["share","facebook","twitter"];Ib.prototype.flashView={elements:{controls:{elements:{shareBtn:{}}}}};Ib.prototype.getFeatureName=function(){return"share"};Ib.prototype.createFlashVars=function(a){null==a.share_mode&&(a.share_mode=2);return a};Ib.prototype.createXML=function(a){var b,c,d,f,g;b=null!=(c=this.player.config)?null!=(d=c.flash)?null!=(f=d.view)?null!=(g=f.elements)?g.controls:void 0:void 0:void 0:void 0;if(null!=b){null==b.elements&&(b.elements={});g=this.controls;d=0;for(f=g.length;d<
f;d++)c=g[d],!0===this.config[c]&&null==b.elements[c+"Btn"]&&(b.elements[c+"Btn"]={});return a}};Ib.prototype.listNotificationInterests=function(){return Ib.__super__.listNotificationInterests.call(this).concat([q.SHARE,q.SHARE_REQUEST])};Ib.prototype.handleNotification=function(a){var b,c;Ib.__super__.handleNotification.call(this,a);b=a.getName();a=a.getBody();switch(b){case q.SHARE:case q.SHARE_REQUEST:c="share"}null!=c&&this.dispatchEvent(new V(c,a))};n.registerPlugin("share","flash",Ib);var Jb=
function(){Jb.__super__.constructor.call(this)};f(Jb,wb);Jb.prototype.componentName="share";Jb.prototype.shareControl=null;Jb.prototype.shareSeparator=null;Jb.prototype.embed=null;Jb.prototype.onRegister=function(){this.sendNotification(d.ADD_CONTROL_STATE,"share-enabled");this.shareControl=this.create(["share","control"],!1);this.shareSeparator=this.create(["share","separator"],this.shareControl);this.createButton("share");!0===this.plugin.getFacebook()&&this.createButton("facebook");!0===this.plugin.getTwitter()&&
this.createButton("twitter");this.sendNotification(d.ADD_CONTROL,this.shareControl);Jb.__super__.onRegister.call(this)};Jb.prototype.createButton=function(a){a=new Ca(null,this.shareControl,null,a,this.clickHandler.bind(this,a));this.facade.registerMediator(a)};Jb.prototype.clickHandler=function(a,b){b.stopImmediatePropagation();this.sendNotification(d.DISPATCH_EVENT,new V("share",{provider:a,link:this.plugin.getLink(),embed:this.plugin.getEmbed()}));return!1};Jb.prototype.listNotificationInterests=
function(){return[d.MEDIA_CHANGE]};Jb.prototype.handleNotification=function(a){var b;b=a.getName();a=a.getBody();switch(b){case d.MEDIA_CHANGE:null!=a.embed?this.sendNotification(d.ADD_CONTROL_STATE,"share-enabled"):this.sendNotification(d.REMOVE_CONTROL_STATE,"share-enabled")}};var eb=function(a){eb.__super__.constructor.call(this,a)};f(eb,Q);eb.NAME=v.NAME;eb.prototype.defaults={facebook:!1,twitter:!1};eb.prototype.loaded=!0;eb.prototype.link=null;eb.prototype.embed=null;eb.prototype.getEmbed=function(){return this.embed};
eb.prototype.setEmbed=function(a){return this.embed=a};eb.prototype.getLink=function(){return this.link};eb.prototype.setLink=function(a){return this.link=a};eb.prototype.getFacebook=function(){return this.getConfigurationData().facebook};eb.prototype.setFacebook=function(a){return this.data.facebook=a};eb.prototype.getTwitter=function(){return this.getConfigurationData().twitter};eb.prototype.setTwitter=function(a){return this.data.twitter=a};var nh=function(){nh.__super__.constructor.call(this)};
f(nh,puremvc.SimpleCommand);nh.prototype.execute=function(a){var b;a=a.getBody();b=this.facade.retrieveProxy(eb.NAME);b.setEmbed(a.embed);b.setLink(a.link)};var Kb=function(){Kb.__super__.constructor.call(this)};f(Kb,na);Kb.prototype.moduleName="ima";Kb.prototype.createFullscreenProxy=function(){return new Wb(this.config)};Kb.prototype.createProxy=function(){return new u(this.config)};Kb.prototype.isFullscreenDevice=function(){var a;a=navigator.userAgent;return g.isFullscreenDevice()||/Android 4\.[0-1]/.test(a)||
/CrKey/.test(a)};Kb.prototype.createModel=function(){Kb.__super__.createModel.call(this);null!=this.config.overlay&&this.registerProxy(new db(this.config.overlay))};Kb.prototype.createController=function(){Kb.__super__.createController.call(this);null!=this.config.overlay&&(this.registerCommand(sd.ADD_OVERLAY,ih),this.registerCommand(sd.REMOVE_OVERLAY,jh));this.registerCommand(d.READY,kh);this.registerCommand(d.FULL_SCREEN_CHANGE,lh);this.registerCommand(d.CHANGE_ACTIVE_STATE,mh)};Kb.prototype.createView=
function(){Kb.__super__.createView.call(this);null!=this.config.overlay&&this.registerMediator(new Ab)};n.registerPlugin("ima","html",Kb);n.registerPlugin("ima","flash",Fd);var Xb=function(a){Xb.__super__.constructor.call(this,a)};f(Xb,v);Xb.NAME=v.NAME;Xb.prototype.defaults={url:null};Xb.prototype.hidden=!0;Xb.prototype.getURL=function(){return this.data.url};Xb.prototype.setURL=function(a){return this.data.url=a};Xb.prototype.getHidden=function(){return this.hidden};Xb.prototype.setHidden=function(a){return this.hidden=
a};Xb.prototype.invoke=function(){var a,b=this;if(null!=this.data.url)return a=g.get(this.data.url,{onload:function(){null!=a.response&&b.sendNotification("bitratesUpdate",a.response)},onerror:function(a){return b.sendNotification("bitratesUpdate",null)}})};var oh=function(){oh.__super__.constructor.call(this)};f(oh,puremvc.SimpleCommand);oh.prototype.execute=function(a){var b;b=this.facade.retrieveProxy(Xb.NAME);b.setHidden(a.getBody());b.setURL(""+this.facade.player.getSrc());!1===a.getBody()&&
b.invoke()};var fb=function(){fb.__super__.constructor.call(this)};f(fb,wb);fb.prototype.componentName="stats";fb.prototype.container=null;fb.prototype.statsText=null;fb.prototype.statsButton=null;fb.prototype.bitrateText=null;fb.prototype.bitrateArr=null;fb.prototype.onRegister=function(){var a=this;fb.__super__.onRegister.call(this);this.sendNotification(d.ADD_CONTROL_STATE,"stats-enabled");this.classList.add("hidden");this.statsFormat=this.create("stats-text");this.statsQuality=this.create("stats-text");
this.statsBitRate=this.create("stats-text");this.statsPlayBack=this.create("stats-text");this.statsAnalytics=this.create("stats-text");this.statsButton=this.create("stats-button",!1);l.create(this.statsButton,l.CLICK,function(b){b.stopImmediatePropagation();a.sendNotification("statsvisibilitychange",!a.facade.getHidden());return!1});this.sendNotification(d.ADD_CONTROL,this.statsButton)};fb.prototype.listNotificationInterests=function(){return["statsvisibilitychange",d.PLAYING,d.TIME_UPDATE]};fb.prototype.handleNotification=
function(a){var b;b=a.getName();a.getBody();switch(b){case "statsvisibilitychange":this.plugin.getHidden()?this.classList.add("hidden"):(this.classList.remove("hidden"),this.statsBitRate.innerHTML="\x3cp\x3e\x3cb class\x3d'"+this.classList.prefix+"stats-header'\x3eAdaptive Bitrate Renditions\x3c/b\x3e\x3c/p\x3e\x3cp\x3eLoading...\x3c/p\x3e",this.renderStats());break;case d.TIME_UPDATE:this.renderQuality();break;case d.PLAYING:a=this.facade.player.getQualityLevels(),0<(null!=a?a.length:void 0)?this.constructBitrateText(a):
this.statsBitRate.innerHTML="\x3cp\x3e\x3cb class\x3d'"+this.classList.prefix+"stats-header'\x3eAdaptive Bitrate Renditions\x3c/b\x3e\x3c/p\x3e\x3cp\x3eNot Available\x3c/p\x3e"}};fb.prototype.renderQuality=function(){var a;a=this.facade.player.getQuality();this.quality!==a&&(this.statsQuality.innerHTML="\x3cp\x3e\x3cb class\x3d'"+this.classList.prefix+"stats-header'\x3eQuality\x3c/b\x3e\x3c/p\x3e\x3cp\x3e"+this.createBitrateText(this.facade.player.getQualityLevels()[a],a)+"\x3c/p\x3e")};fb.prototype.renderStats=
function(){var a,b,c,d,f,k,h,l;try{k=this.facade.player,c=void 0===k.getMedia()?"Not Available":k.getMedia().type,h=""===k.getSrc()||null===k.getSrc()?"Not Available":k.getSrc(),b=g.getDevice(),null==b&&(b=""),f=""!==this.facade.player.getConfig().mode&&null!==this.facade.player.getConfig().mode&&-1!==this.facade.player.getConfig().mode.indexOf("html")?this.facade.player.getVersion()+", HTML5 Video: "+b:"Not Available",d=null!=(l=this.facade.player.retrieveProxy(ba.NAME).getActivePlaybackCore())?
l.proxyName.indexOf("dash"):void 0,-1<d&&(f+=", dash.js"),a=void 0===this.facade.player.getConfig().mediaanalytics||""===this.facade.player.getConfig().mediaanalytics.config||null===this.facade.player.getConfig().mediaanalytics.config?"Not Available":this.facade.player.getConfig().mediaanalytics.config,this.statsFormat.innerHTML="\x3cp\x3e\x3cb class\x3d'"+this.classList.prefix+"stats-header'\x3eStream\x3c/b\x3e\x3c/p\x3e\x3cp\x3eFormat: "+c+"\x3c/p\x3e\x3cp\x3eURL: "+h+"\x3c/p\x3e",this.statsPlayBack.innerHTML=
"\x3cp\x3e\x3cb class\x3d'"+this.classList.prefix+"stats-header'\x3ePlayback\x3c/b\x3e\x3c/p\x3e"+f,this.statsAnalytics.innerHTML="\x3cp\x3e\x3cb class\x3d'"+this.classList.prefix+"stats-header'\x3eAnalytics\x3c/b\x3e\x3c/p\x3e"+a}catch(n){this.facade.logger.error("[AMP Stats Render Error]:",n)}};fb.prototype.constructBitrateText=function(a){var b,c,d,f;this.bitrateArr=a;this.bitrateText="";this.bitrateArr.sort(function(a,b){var c,d;c=parseInt(a.bitrate);d=parseInt(b.bitrate);return c<d?-1:c>d?1:
0});f=this.bitrateArr;a=c=0;for(d=f.length;c<d;a=++c)b=f[a],this.bitrateText+=this.createBitrateText(b,a);""===this.bitrateText&&(this.bitrateText="\x3cp\x3eNot Available\x3c/p\x3e");this.statsBitRate.innerHTML="\x3cp\x3e\x3cb class\x3d'"+this.classList.prefix+"stats-header'\x3eAdaptive Bitrate Renditions\x3c/b\x3e\x3c/p\x3e"+this.bitrateText};fb.prototype.createBitrateText=function(a,b){return"\x3cp\x3e"+(b+1)+". "+(a.bitrate/1E3).toFixed(0)+" kbps "+a.width+"x"+a.height+"\x3c/p\x3e"};var O={START_AUTHENTICATION:"aisauthenticationstarted",
AUTHENTICATED:"aisauthenticated",AUTHENTICATING:"aisauthenticating",AUTHENTICATION_COMPLETE:"aisauthenticationcomplete",CHOOSE_AUTH_PROVIDER:"aischooseprovider",CHOOSE_PLAY_OPTIONS:"aischooseplayoptions",LAUNCH_IDP_LOGIN:"aislaunchidplogin"},oe=function(){oe.__super__.constructor.call(this)};f(oe,w);oe.prototype.execute=function(a){oe.__super__.execute.call(this,a);this.proxy.launchIDPLogin(a.getBody())};var Bb=function(a){Bb.__super__.constructor.call(this,null,null,a)};f(Bb,$);Bb.prototype.componentName=
"ais-chooser";Bb.prototype.menu=null;Bb.prototype.label=null;Bb.prototype.grid=null;Bb.prototype.select=null;Bb.prototype.login=null;Bb.prototype.title=null;Bb.prototype.onRegister=function(){var a=this;Bb.__super__.onRegister.call(this);this.classList.add("hidden");this.title=this.createText("ais-chooser-title","Choose your provider");this.grid=this.create("ais-chooser-grid");this.menu=this.create("ais-chooser-menu");this.label=this.createText("ais-chooser-label","Providers: ",this.menu);this.select=
this.create("ais-chooser-select",this.menu,"select");this.login=this.create("ais-chooser-login",!1,"input");this.login.type="button";this.login.value="Login";l.create(this.login,l.CLICK,function(b){"function"===typeof b.stopImmediatePropagation&&b.stopImmediatePropagation();a.sendNotification(O.LAUNCH_IDP_LOGIN,a.select.options[a.select.selectedIndex].value);return!1});this.menu.appendChild(this.login)};Bb.prototype.listNotificationInterests=function(){return[O.CHOOSE_AUTH_PROVIDER,O.AUTHENTICATING]};
Bb.prototype.handleNotification=function(a){var b,c,d,f,g,h,k,l,n,p,q,r,s,t=this;switch(a.getName()){case O.CHOOSE_AUTH_PROVIDER:b=a.getBody();a=b.possible_idps;f=b.footprints||[];h=b.grouped_idps||[];b=this.facade.retrieveProxy(v.NAME);n=b.value.logos;b=null!=n?n.base:void 0;this.grid.innerHTML="";if(null!=h&&null!=(null!=n?n.group:void 0)){s=0;for(c=h.length;s<c;s++)if(g=h[s],g.name===n.group){d=g;break}if(null!=d)for(s=d.members,c=h=0,g=s.length;h<g;c=++h)p=s[c],d=a[p],c=this.create(["ais-chooser-grid-item",
"ais-chooser-grid-index-"+(c+1)],this.grid),null==c.dataset&&(c.dataset={}),c.dataset.key=p,c.onclick=function(a){"function"===typeof a.stopImmediatePropagation&&a.stopImmediatePropagation();t.sendNotification(O.LAUNCH_IDP_LOGIN,(null!=a.currentTarget?a.currentTarget:a.srcElement).dataset.key);return!1},null!=(null!=(q=a[p].logos)?q[n.key]:void 0)&&(k=this.create("ais-chooser-grid-cell-img",c,"img"),k.alt=d.display_name,r=d.logos[n.key],-1===r.indexOf("http")&&(r=b+r),k.src=r,null==k.dataset&&(k.dataset=
{}),k.dataset.key=p,c=this.create("ais-chooser-grid-cell-label",c,"span")),c.innerHTML=d.display_name}""!==this.grid.innerHTML&&(this.classList.add("ais-chooser-featured"),this.label.textContent="Other ");q=this.select.options;c=b=0;for(n=q.length;b<n;c=++b)this.select.options.remove(c);if(0<f.length)for(b=0,n=f.length;b<n;b++)l=f[b],q[q.length]=new Option(""+a[l].display_name,""+l);for(l in a)f=a[l],q[q.length]=new Option(""+f.display_name,""+l);this.classList.remove("hidden");break;case O.AUTHENTICATING:this.classList.add("hidden")}};
var Lb=function(a){Lb.__super__.constructor.call(this,null,null,a)};f(Lb,$);Lb.prototype.componentName="ais-play";Lb.prototype.menu=null;Lb.prototype.restart=null;Lb.prototype.resume=null;Lb.prototype.resumeTime=null;Lb.prototype.onRegister=function(){var a=this;Lb.__super__.onRegister.call(this);this.classList.add("hidden");this.menu=this.create("ais-play-menu");this.restart=this.create("ais-play-restart",this.menu);this.restart.type="button";this.restart.textContent="Restart";this.restart.onclick=
function(b){"function"===typeof b.stopImmediatePropagation&&b.stopImmediatePropagation();a.play();return!1};this.resume=this.create("ais-play-resume",this.menu);this.resume.type="button";this.resume.value="Resume";this.restart.onclick=function(b){"function"===typeof b.stopImmediatePropagation&&b.stopImmediatePropagation();a.play(a.resumeTime);return!1}};Lb.prototype.play=function(a){this.facade.retrieveProxy(U.NAME).play(a)};Lb.prototype.listNotificationInterests=function(){return[O.CHOOSE_PLAY_OPTIONS]};
Lb.prototype.handleNotification=function(a){switch(a.getName()){case O.CHOOSE_PLAY_OPTIONS:this.resumeTime=a.getBody(),this.classList.remove("hidden")}};var ph=function(){ph.__super__.constructor.call(this)};f(ph,y);ph.prototype.execute=function(a){a=this.media.getData().status.reason;"ais"!==a&&"token"!==a||this.proxy.authorize()};var Nc=function(a){Nc.__super__.constructor.call(this,null,null,a)};f(Nc,$);Nc.prototype.componentName="ais-authenticating";Nc.prototype.retry=null;Nc.prototype.onRegister=
function(){Nc.__super__.onRegister.call(this);this.classList.add("hidden");this.retry=this.create("ais-authenticating-button");this.retry.type="button";this.retry.value="Back to Providers";this.retry.onclick=this.onclick.bind(this)};Nc.prototype.onclick=function(a){"function"===typeof a.stopImmediatePropagation&&a.stopImmediatePropagation();this.classList.add("hidden");this.sendNotification(O.START_AUTHENTICATION);return!1};Nc.prototype.listNotificationInterests=function(){return[O.AUTHENTICATING]};
Nc.prototype.handleNotification=function(a){switch(a.getName()){case O.AUTHENTICATING:!0===a.getBody()?this.classList.remove("hidden"):this.classList.add("hidden")}};var pe=function(){pe.__super__.constructor.call(this)};f(pe,w);pe.prototype.execute=function(a){this.proxy.bounce();pe.__super__.execute.call(this,a)};var nc=function(){nc.__super__.constructor.call(this)};f(nc,ma);nc.prototype.componentName="ais";nc.prototype.chooser=null;nc.prototype.auth=null;nc.prototype.play=null;nc.prototype.onRegister=
function(){var a=this;nc.__super__.onRegister.call(this);this.classList.add("hidden");setTimeout(function(){a.chooser=new Bb(a);a.facade.registerMediator(a.chooser);a.auth=new Nc(a);a.facade.registerMediator(a.auth);a.play=new Lb(a);return a.facade.registerMediator(a.play)},20)};nc.prototype.listNotificationInterests=function(){return[O.START_AUTHENTICATION,O.AUTHENTICATION_COMPLETE,O.CHOOSE_PLAY_OPTIONS,d.MEDIA_CHANGE]};nc.prototype.handleNotification=function(a){switch(a.getName()){case O.CHOOSE_PLAY_OPTIONS:case O.START_AUTHENTICATION:this.classList.remove("hidden");
break;case O.AUTHENTICATION_COMPLETE:case d.MEDIA_CHANGE:this.classList.add("hidden"),this.facade.player.sendNotification(d.REMOVE_APPLICATION_STATE,"authenticating")}};var Oa=function(){Oa.__super__.constructor.call(this)};f(Oa,vb);Oa.NAME="AISPlugin";Oa.prototype.moduleName="ais";Oa.prototype.featureName="auth";Oa.prototype.idps=null;Oa.prototype.createController=function(){Oa.__super__.createController.call(this);this.registerCommand(wa.AUTHORIZE,ph);this.registerCommand(O.LAUNCH_IDP_LOGIN,oe);
this.registerCommand(O.START_AUTHENTICATION,pe);this.registerCommand(O.AUTHENTICATED,w);this.registerCommand(O.AUTHENTICATING,w);this.registerCommand(O.AUTHENTICATION_COMPLETE,w);this.registerCommand(O.CHOOSE_AUTH_PROVIDER,w);this.registerCommand(O.CHOOSE_PLAY_OPTIONS,w);this.registerCommand(wa.AUTHORIZATION_FAILED,w)};Oa.prototype.createModel=function(){this.proxy=new U(this.config);this.registerProxy(this.proxy)};Oa.prototype.createView=function(){this.registerMediator(new nc)};Oa.prototype.createNotificationEvent=
function(a,b,c){a=M.prototype.createNotificationEvent.call(this,a,b,c);if(null!=a)return a.type=a.type.replace(RegExp("^"+this.getModuleName()),""),a};Oa.prototype.listNotificationInterests=function(){return Oa.__super__.listNotificationInterests.call(this).concat([d.MEDIA_CHANGE,wa.AUTHORIZE])};Oa.prototype.listNotificationPublications=function(){return Oa.__super__.listNotificationPublications.call(this).concat([wa.AUTHORIZED,wa.AUTHORIZATION_FAILED,d.INITIALIZED,d.PLAY,d.SEEK])};Oa.prototype.authorize=
function(a){this.proxy.authorize(a);return a};Oa.prototype.logout=function(){this.proxy.logout()};Oa.prototype.getIdps=function(){return this.idps};n.registerPlugin("ais","html",Oa);var ad=function(){ad.__super__.constructor.call(this)};f(ad,Oa);ad.NAME="AISFlashPlugin";ad.prototype.proxy=null;ad.prototype.startTime=null;ad.prototype.createController=function(){this.registerCommand(d.DISPATCH_EVENT,we);this.registerCommand(O.LAUNCH_IDP_LOGIN,oe);this.registerCommand(O.START_AUTHENTICATION,pe);this.registerCommand(O.AUTHENTICATED,
w);this.registerCommand(O.AUTHENTICATING,w);this.registerCommand(O.AUTHENTICATION_COMPLETE,w);this.registerCommand(O.CHOOSE_AUTH_PROVIDER,w);this.registerCommand(O.CHOOSE_PLAY_OPTIONS,w);this.registerCommand(wa.AUTHORIZATION_FAILED,w)};ad.prototype.setData=function(a){var b;b=this.retrieveProxy(U.NAME);b.data.platformID=a.platformID;b.data.resourceID=a.resourceID;b.data.contentID=a.contentID};ad.prototype.authorize=function(a){this.retrieveProxy(U.NAME).authorize(a)};var qh=function(){qh.__super__.constructor.call(this)};
f(qh,y);qh.prototype.execute=function(a){a=Math.floor(a.getBody());0!==a&&0===a%30&&a!==this.proxy.currentTime&&this.proxy.vcsSet(a);this.proxy.currentTime=a};var Cb=function(a,b){var c,d,f;Cb.__super__.constructor.call(this,a,b);this.plugin=new ad;c=this.dispatcher.dispatchEvent.bind(this.dispatcher);for(d in O)f=O[d],this.plugin.addEventListener(f.replace(/^(ais)/,""),c);for(d in wa)f=wa[d],this.plugin.addEventListener(f.replace(/^(auth)/,""),c);this.plugin.oninitialized=this.player.registerModule.bind(this.player,
this.plugin);this.plugin.initialize(b,this.player)};f(Cb,H);Cb.NAME="AISWrapper";Cb.prototype.plugin=null;Cb.prototype.getFeatureName=function(){return"auth"};Cb.prototype.createXML=function(a){var b,c,d,f,g,h;b=a.firstChild;c=a.getElementsByTagName("authentication");null==c||0===c.length?(c=a.createElement("authentication"),b.appendChild(c)):c=c[0];b=a.createElement("vendor");b.setAttribute("id","ais");c.appendChild(b);f=[{value:this.config.platformID,key:"platformID"},{value:this.config.resourceID,
key:"resourceID"},{value:this.config.contentID,key:"contentID"}];g=0;for(h=f.length;g<h;g++)d=f[g],null!=d.value&&(c=a.createElement("property"),c.setAttribute("key",d.key),d=ea.createTextContent(a,d.value),c.appendChild(d),b.appendChild(c));return a};Cb.prototype.listNotificationInterests=function(){return Cb.__super__.listNotificationInterests.apply(this,arguments).concat([wa.AUTHORIZE,q.TIME_UPDATE,q.ENDED,q.PAUSED,q.CAPABILITY_CHANGE,q.RESET])};Cb.prototype.handleNotification=function(a){var b;
Cb.__super__.handleNotification.call(this,a);b=a.getName();a=a.getBody();switch(b){case wa.AUTHORIZE:this.plugin.startTime=null;this.plugin.setData(a);b=this.player.retrieveProxy(s.NAME);null==b.getSrc()&&b.setSrc(a.media.src);this.plugin.authorize();break;case q.TIME_UPDATE:this.plugin.sendNotification(d.TIME_UPDATE,a);break;case q.ENDED:this.plugin.sendNotification(d.ENDED,a);break;case q.PAUSED:this.plugin.sendNotification(d.PAUSE,a);break;case q.RESET:this.plugin.sendNotification(d.MEDIA_CHANGE,
a);break;case q.CAPABILITY_CHANGE:null!=this.plugin.startTime&&"canSeekChange"===a.type&&a.enabled&&this.player.setCurrentTime(this.plugin.startTime)}};Cb.prototype.authorize=function(a){this.plugin.authorize(a);return a};Cb.prototype.logout=function(){this.plugin.logout()};Cb.prototype.getIdps=function(){return this.plugin.getIdps()};n.registerPlugin("ais","flash",Cb);var rh=function(){rh.__super__.constructor.call(this)};f(rh,y);rh.prototype.execute=function(a){this.proxy.vcsSet(this.proxy.currentTime)};
var sh=function(){sh.__super__.constructor.call(this)};f(sh,y);sh.prototype.execute=function(a){this.proxy.vcsSet(0)};var th=function(){};th.setCookie=function(a,b,c,d,f){var g;b=escape(b);null!=c&&(g=new Date,g.setDate(g.getDate()+c),b+="; expires\x3d"+g.toUTCString());null!=f&&(b+="; domain\x3d"+f);null!=d&&(b+="; path\x3d"+d);return document.cookie=a+"\x3d"+b};th.getCookie=function(a){var b,c,d,f,g,h;c=document.cookie.split(";");g=0;for(h=c.length;g<h;g++)if(b=c[g],d=b.indexOf("\x3d"),f=b.substr(0,
d).replace(/^\s+|\s+$/g,""),b=unescape(b.substr(d+1)),f===a)return b};th.deleteCookie=function(a){return this.setCookie(a,"",-1)};var Mb=function(){Mb.__super__.constructor.call(this)};f(Mb,vb);Mb.prototype.moduleName="share";Mb.prototype.featureName="share";Mb.prototype.createModel=function(){this.registerProxy(new eb(this.config))};Mb.prototype.createController=function(){Mb.__super__.createController.call(this);this.registerCommand(d.MEDIA_CHANGE,nh)};Mb.prototype.createView=function(){this.registerMediator(new Jb)};
Mb.prototype.listNotificationInterests=function(){return[d.MEDIA_CHANGE]};Mb.prototype.listNotificationPublications=function(){return Mb.__super__.listNotificationPublications.apply(this,arguments).concat([d.ADD_CONTROL,d.REMOVE_CONTROL,d.ADD_CONTROL_STATE,d.REMOVE_CONTROL_STATE])};n.registerPlugin("share","html",Mb);n.registerPlugin("share","external",Mb);var uh=function(){uh.__super__.constructor.call(this)};f(uh,y);uh.prototype.execute=function(a){this.facade.retrieveProxy(I.NAME).contentPaused()};
var U=function(a){U.__super__.constructor.call(this,a)};f(U,Q);U.NAME=v.NAME;U.prototype.client=null;U.prototype.currentTime=null;U.prototype.idps=null;U.prototype.idp=null;U.prototype.token=null;U.prototype.authz=null;U.prototype.defaults={platformID:null,resourceID:null,contentID:null,responseTargets:null,query:"hdnts",vcs:!1,logos:{base:null,group:null,key:"full"}};U.prototype.getScript=function(){return this.value.plugin};U.prototype.initialize=function(){this.client=window.ais_client;this.client.setLogging(this.facade.logger.enabled);
this.client.setPlatformId(this.value.platformID);this.client.setUseCache(!/MSIE [7-8]/.test(navigator.userAgent));this.client.assignhandler("bounce",this.bounceHandler.bind(this));this.client.assignhandler("chooser",this.chooserHandler.bind(this));this.client.assignhandler("init",this.initHandler.bind(this));this.client.assignhandler("authz_query",this.authz_queryHandler.bind(this));this.client.assignhandler("identity",this.identityHandler.bind(this));this.client.assignhandler("logout_result",this.logoutHandler.bind(this));
this.client.assignhandler("vcs",this.vcsHandler.bind(this));window.onunload=function(){}};U.prototype.authorize=function(){this.token=this.authz=null;this.disengage();this.sendNotification(O.START_AUTHENTICATION)};U.prototype.authorized=function(a){null==a&&(a=this.token);this.engage();this.sendNotification(O.AUTHENTICATION_COMPLETE);this.sendNotification(wa.AUTHORIZED,a)};U.prototype.play=function(a){this.sendNotification(d.INITIALIZED);this.sendNotification(d.PLAY);if(null!=a)return this.sendNotification(d.SEEK,
a)};U.prototype.engage=function(){this.facade.registerCommand(d.TIME_UPDATE,qh);this.facade.registerCommand(d.PAUSE,rh);this.facade.registerCommand(d.ENDED,sh)};U.prototype.disengage=function(){this.facade.removeCommand(d.TIME_UPDATE);this.facade.removeCommand(d.PAUSE);this.facade.removeCommand(d.ENDED)};U.prototype.logout=function(){var a,b,c;a=(null!=(b=this.idp.window_display)?b.method:void 0)||"redirect";b=this.getTarget(a);this.setRedirect(a);switch(a){case "redirect":window.open(this.client.logoutFormat(b),
"_top");break;case "popup":c=this.idp.window_display.width||320,a=this.idp.window_display.height||240,window.open(this.client.logoutFormat(b),"ais_popup","width\x3d"+c+",height\x3d"+a)}};U.prototype.bounce=function(a){this.client.bounce()};U.prototype.init=function(a){this.client.init()};U.prototype.choose=function(){this.client.chooser()};U.prototype.resourceAccess=function(a){null==a&&(a=this.value.resourceID);this.client.resourceAccess(a)};U.prototype.vcsSet=function(a){a=g.formatTimecode(a);this.client.vcsSet(this.value.contentID,
a)};U.prototype.bounceHandler=function(a,b){var c;c="true"===b.authenticated.toString();!1===c?(this.sendNotification(d.DISPATCH_EVENT,new V("authenticationfailed")),this.choose()):!0===c&&this.init()};U.prototype.initHandler=function(a,b){var c,e,f,g;this.idp=b.idps;this.facade.idps={};f=b.idps;for(c in f){f=f[c];this.facade.idps.key=c;for(e in f)g=f[e],this.facade.idps[e]=g;break}for(c in b)f=b[c],"idps"!==c&&null!=f&&(this.facade[c]=f);null!=this.value.logos&&null!=this.facade.idps.logos&&(this.facade.idps.logo=
this.value.logos.base+this.facade.idps.logos[this.value.logos.key]);this.facade.player.sendNotification(d.REMOVE_APPLICATION_STATE,"authenticating");this.sendNotification(O.AUTHENTICATED,this.facade.idps);this.resourceAccess(this.value.resourceID)};U.prototype.chooserHandler=function(a,b){this.facade.sendNotification(d.ADD_APPLICATION_STATE,"authenticating");b.possible_idps=this.idps=this.sort(b.possible_idps,"value","display_name");this.sendNotification(O.CHOOSE_AUTH_PROVIDER,b)};U.prototype.launchIDPLogin=
function(a){var b,c,d;this.sendNotification(O.AUTHENTICATING,!0);b=this.idps[a];c=(null!=(d=b.window_display)?d.method:void 0)||"redirect";d=this.getTarget(c);this.setRedirect(c);switch(c){case "redirect":window.open(this.client.loginFormat(a,d),"_top");break;case "popup":c=b.window_display.width||320,b=b.window_display.height||240,window.open(this.client.loginFormat(a,d),"ais_popup","width\x3d"+c+",height\x3d"+b)}};U.prototype.identityHandler=function(a,b){};U.prototype.authz_queryHandler=function(a,
b){var c;c="true"===b.authorization.toString();!1===c?this.sendNotification(wa.AUTHORIZATION_FAILED,b):!0===c&&(this.authz=b,c={mvpdName:this.facade.idps.name,viewerId:this.client.aisuid,"std:viewerId":this.client.aisuid},this.facade.player.setParams({mvpdname:c.mvpdName}),this.facade.player.sendNotification("mediaanalytics:setDimensions",c),this.facade.viewerId=this.client.aisuid,c=b.resource,null!=c&&(this.facade.resource=c),c=this.facade.player.security,c.setKey(this.value.query||this.getDefaults().query),
c.setToken(b.security_token),this.token=c.getSecret(),this.sendNotification(O.AUTHENTICATING,!1),!0===this.value.vcs&&null!=this.value.contentID?this.client.vcsGet(this.value.contentID):this.authorized(this.token))};U.prototype.logoutHandler=function(a,b){top.location.href=top.location.href};U.prototype.vcsHandler=function(a,b){"get"===b.operation&&("00:00:00"===b.ph_pos||"00:00"===b.ph_pos?(this.client.vcsSet(this.value.contentID,b.ph_pos),this.authorized(this.token)):this.sendNotification(O.CHOOSE_PLAY_OPTIONS,
g.flattenTimecode(b.ph_pos)))};U.prototype.sort=function(a,b,c){var d,f,g,h,k;h={};d=[];f=0;for(g in a)k=a[g],d[f]={key:g,value:k[c]},f++;d.sort(function(a,c){var d,e,f,h,g;d="value"===b?null!=(e=a.value)?e.toLowerCase():void 0:null!=(f=a.key)?f.toLowercase():void 0;e="value"===b?null!=(h=c.value)?h.toLowerCase():void 0:null!=(g=c.key)?g.toLowercase():void 0;return d<e?-1:d>e?1:0});f=c=0;for(g=d.length;c<g;f=++c)f=d[f],h[f.key]=a[f.key];return h};U.prototype.setRedirect=function(a){var b,c,d;try{b=
/\/dev\./,d=window.top.location.href||window.top.location,c=b.test(d)?d.replace(b,"/"):null,th.setCookie(this.getTarget(a),d,1,"/",c)}catch(f){}};U.prototype.getTarget=function(a){null==a&&(a="redirect");return this.value.responseTargets[a]};var Gd=function(){return Gd.__super__.constructor.apply(this,arguments)};f(Gd,ja);Gd.NAME="FreeWheelWrapper";Gd.prototype.partner="freewheel";Gd.prototype.flashPlugins=[{id:"FreewheelPlugin",src:"#{paths.resources}plugins/FreewheelPlugin.swf",blocking:!1,host:"akamai",
main:"FreewheelPlugin"},{id:"AdOptionsPlugin",src:"#{paths.resources}plugins/AdOptionsPlugin.swf",blocking:!1,host:"akamai",main:"AdOptionsPlugin",type:"application/x-shockwave-flash"}];Gd.prototype.createXML=function(a){var b,c,d,f,g,h;c=a.firstChild;b=a.getElementsByTagName("admedia")[0];null==b&&(b=a.createElement("admedia"),c.appendChild(b));c=a.createElement("vendor");c.setAttribute("id","freewheel");b.appendChild(c);f=[{value:this.config.plugin.swf,key:"FREEWHEEL_AD_MANAGER_URL"},{value:this.config.serverUrl,
key:"FREEWHEEL_SERVER_URL"},{value:this.config.networkId,key:"FREEWHEEL_NETWORK_ID"},{value:this.config.profileId,key:"FREEWHEEL_PROFILE"},{value:this.config.siteSectionId,key:"FREEWHEEL_SITE_SECTION_ID"},{value:this.config.siteSectionFallbackId,key:"FREEWHEEL_SITE_SECTION_FALLBACK_ID"},{value:this.config.prerollSlotId,key:"FREEWHEEL_PREROLL_SLOT_ID"},{value:this.config.midrollSlotId,key:"FREEWHEEL_MIDROLL_SLOT_ID"},{value:this.config.postrollSlotId,key:"FREEWHEEL_POSTROLL_SLOT_ID"},{value:this.config.videoAssetId,
key:"FREEWHEEL_VIDEO_ASSET_ID"},{value:this.config.videoAssetFallbackId,key:"FREEWHEEL_VIDEO_ASSET_FALLBACK_ID"},{value:this.config.videoAssetVideoPlayRandom,key:"FREEWHEEL_VIDEO_ASSET_VIDEO_PLAY_RANDOM"},{value:this.config.visitorId,key:"FREEWHEEL_VISITOR_ID"},{value:this.config.keyValuesString,key:"FREEWHEEL_KEY_VALUES_STRING"},{value:this.config,key:"FREEWHEEL_SITE_SECTION_PAGE_VIEW_RANDOM"},{value:"EXACT",key:"FREEWHEEL_VIDEO_ASSET_DURATION_TYPE"},{value:this.config.visitorHeader,key:"FREEWHEEL_VISITOR_HTTP_HEADER_KEY_VALUE"},
{value:this.config.synchronizeMultipleRequests,key:"FREEWHEEL_SYNCHRONIZE_MULTIPLE_REQUESTS"},{value:this.config.subsessionToken,key:"FREEWHEEL_SUBSESSION_TOKEN"}];g=0;for(h=f.length;g<h;g++)b=f[g],null!=b.value&&this.createProperty(a,b.key,b.value,c);null!=this.config.position&&c.setAttribute("position",this.config.position);if(null!=this.config.keyValues){b=a.createElement("property");b.setAttribute("key","FREEWHEEL_KEY_VALUE");g=this.config.keyValues;for(d in g)f=g[d],null!=f&&this.createProperty(a,
d,f,b);c.appendChild(b)}};var x=function(a){this.media={};this.handlers={onRequestComplete:this.onRequestComplete.bind(this),onSlotStarted:this.onSlotStarted.bind(this),onSlotEnded:this.onSlotEnded.bind(this),onAdImpression:this.onAdImpression.bind(this),onAdImpressionEnd:this.onAdImpressionEnd.bind(this),onAdClick:this.onAdClick.bind(this),onResume:this.onResume.bind(this),adtimeupdate:this.adTimeupdate.bind(this),timeupdate:this.midrollCheck.bind(this),seekupdate:this.seekingHandler.bind(this),
onAdEvent:this.onAdEvent.bind(this)};x.__super__.constructor.call(this,a);this.adVO=this.createDefaultAdVO()};f(x,I);x.NAME=I.NAME;x.prototype.partner="freewheel";x.prototype.context=null;x.prototype.prerollSlots=null;x.prototype.midrollSlots=null;x.prototype.postrollSlots=null;x.prototype.initialized=!1;x.prototype.playWhenLoaded=!1;x.prototype.handlers=null;x.prototype.slot=null;x.prototype.playbackCore=null;x.prototype.nextMidroll=null;x.prototype.midrollEngaged=!1;x.prototype.timeout=null;x.prototype.curTime=
0;x.prototype.mediator=null;x.prototype.adPosition=1;x.prototype.currentAd=null;x.prototype.defaults={networkId:"96749",serverUrl:"http://demo.v.fwmrm.net/ad/g/1",profileId:"global-js",siteSectionId:"DemoSiteGroup.01",siteSectionFallbackId:null,siteSectionPageViewRandom:null,videoAssetId:"#{media.guid}",videoAssetFallbackId:null,videoAssetVideoPlayRandom:null,prerollSlotId:null,midrollSlotId:null,postrollSlotId:null,visitorId:null,keyValues:null,keyValuesString:null,renderers:null,synchronizeMultipleRequests:null,
subsessionToken:null,creativeParameters:null,parameters:null};x.prototype.initialize=function(){var a;a=this.getDebug();switch(!0){case !0===a:a=tv.freewheel.SDK.LOG_LEVEL_INFO;break;case "number"===typeof a:break;default:a=tv.freewheel.SDK.LOG_LEVEL_QUIET}tv.freewheel.SDK.setLogLevel(a);this.plugin=this.createPlugin();this.plugin.setNetwork(this.value.networkId);this.plugin.setServer(this.value.serverUrl)};x.prototype.createPlugin=function(){return new tv.freewheel.SDK.AdManager};x.prototype.engage=
function(a){this.media=a;x.__super__.engage.call(this,a);this.requestAd()};x.prototype.requestAd=function(){var a,b,c,e,f,k;this.terminateAllAds(!0);this.context=this.plugin.newContext();null!=this.value.synchronizeMultipleRequests&&this.context.setCapability("sync",this.value.synchronizeMultipleRequests?tv.freewheel.SDK.CAPABILITY_STATUS_ON:tv.freewheel.SDK.CAPABILITY_STATUS_OFF);this.context.registerVideoDisplayBase(this.facade.player.viewComponent.id);"video"!==this.getMediaElement().nodeName.toLowerCase()&&
(this.sendNotification(d.PLAYBACK_CORE_CHANGE,this.facade.player.mediator),this.mediator=this.facade.player.retrieveProxy(ba.NAME).getActivePlaybackCore().mediator);this.context.setContentVideoElement(this.getMediaElement());this.context.setProfile(this.value.profileId);this.context.setVideoAsset(this.value.videoAssetId,this.media.duration,this.value.networkId,null,null,this.value.videoAssetVideoPlayRandom,null,this.value.videoAssetFallbackId);this.context.setSiteSection(this.value.siteSectionId,
this.value.networkId,this.value.siteSectionPageViewRandom,null,this.value.siteSectionFallbackId);null!=this.value.subsessionToken&&this.context.startSubsession(this.value.subsessionToken);null!=this.value.visitorId&&this.context.setVisitor(this.value.visitorId);if(null!=this.value.keyValues)for(c in k=this.value.keyValues,k)f=k[c],null!=f&&this.context.addKeyValue(c,f);if(null!=this.value.keyValuesString)for(c=this.value.keyValuesString.split("\x26"),f=0,k=c.length;f<k;f++)b=c[f],""!==b&&(b=b.split("\x3d"),
this.context.addKeyValue(b[0],b[1]));this.context.addEventListener(tv.freewheel.SDK.EVENT_REQUEST_COMPLETE,this.handlers.onRequestComplete);this.context.addEventListener(tv.freewheel.SDK.EVENT_SLOT_STARTED,this.handlers.onSlotStarted);this.context.addEventListener(tv.freewheel.SDK.EVENT_SLOT_ENDED,this.handlers.onSlotEnded);this.context.addEventListener(tv.freewheel.SDK.EVENT_AD_IMPRESSION,this.handlers.onAdImpression);this.context.addEventListener(tv.freewheel.SDK.EVENT_AD_IMPRESSION_END,this.handlers.onAdImpressionEnd);
this.context.addEventListener(tv.freewheel.SDK.EVENT_AD_CLICK,this.handlers.onAdClick);this.context.addEventListener(tv.freewheel.SDK.EVENT_AD,this.handlers.onAdEvent);this.context.setParameter(tv.freewheel.SDK.PARAMETER_RENDERER_VIDEO_START_DETECT_TIMEOUT,1E4,tv.freewheel.SDK.PARAMETER_LEVEL_GLOBAL);this.context.setParameter(tv.freewheel.SDK.PARAMETER_RENDERER_VIDEO_PROGRESS_DETECT_TIMEOUT,1E4,tv.freewheel.SDK.PARAMETER_LEVEL_GLOBAL);this.context.setParameter(tv.freewheel.SDK.PARAMETER_EXTENSION_CONTENT_VIDEO_AUTO_SOURCE_RESTORE,
!1,tv.freewheel.SDK.PARAMETER_LEVEL_GLOBAL);this.context.setParameter(tv.freewheel.SDK.PARAMETER_RENDERER_VIDEO_DISPLAY_CONTROLS_WHEN_PAUSE,!1,tv.freewheel.SDK.PARAMETER_LEVEL_GLOBAL);this.context.setParameter(tv.freewheel.SDK.PARAMETER_EXTENSION_CONTENT_VIDEO_AUTO_SOURCE_RESTORE,!1,tv.freewheel.SDK.PARAMETER_LEVEL_GLOBAL);if(null!=this.value.parameters)for(b=this.value.parameters,f=0,k=b.length;f<k;f++)c=b[f],this.context.setParameter(c.key,c.value,c.level||tv.freewheel.SDK.PARAMETER_LEVEL_GLOBAL);
null!=this.value.prerollSlotId&&this.context.addTemporalSlot(this.value.prerollSlotId,tv.freewheel.SDK.ADUNIT_PREROLL,0);if(0<(null!=(a=this.media.scenes)?a.length:void 0)&&null!=this.value.midrollSlotId){a=[];k=this.media.scenes;b=c=0;for(f=k.length;c<f;b=++c)e=k[b],0<b&&(b=g.flattenTimecode(e.sceneStartTime),a.push(b),this.context.addTemporalSlot(this.value.midrollSlotId,tv.freewheel.SDK.ADUNIT_MIDROLL,b));this.facade.player.sendNotification(d.ADD_CUE_POINTS,a)}null!=this.value.postrollSlotId&&
this.context.addTemporalSlot(this.value.postrollSlotId,tv.freewheel.SDK.ADUNIT_POSTROLL,this.media.duration);c=this.value.renderers;if(0<(null!=c?c.length:void 0))for(f=0,k=c.length;f<k;f++)a=c[f],this.context.addRenderer(a.url,a.baseUnit,a.contentType,a.slotType,a.soAdUnit,a.creativeApi,a.parameters);this.initialized=!1;x.__super__.requestAd.call(this);this.context.submitRequest();this.facade.getViewComponent().container.style.pointerEvents="none"};x.prototype.reset=function(){x.__super__.reset.call(this);
null!=this.mediator&&(this.sendNotification(d.PLAYBACK_CORE_CHANGE,this.mediator),this.mediator=null);this.facade.registerCommand(d.PAUSED,uh)};x.prototype.onRequestComplete=function(a){var b,c,e,f,g,h;c=[];this.pods=[];b=function(a){return new Ta(a.getCustomId(),a.getCustomId(),a.getTotalDuration(),0,a.getTimePositionClass().toLowerCase(),"freewheel",null,null,null,a,a.getAdCount(),a.getTimePosition())};if(a.success)for(f=this.context.getTemporalSlots(),g=0,h=f.length;g<h;g++)switch(e=f[g],e.getTimePositionClass()){case tv.freewheel.SDK.TIME_POSITION_CLASS_PREROLL:null!=
this.value.prerollSlotId&&(this.pods.push(b(e)),this.prerollSlots.push(e));break;case tv.freewheel.SDK.TIME_POSITION_CLASS_MIDROLL:null!=this.value.midrollSlotId&&(this.pods.push(b(e)),c.push(e.getTimePosition()),this.midrollSlots.push(e));break;case tv.freewheel.SDK.TIME_POSITION_CLASS_POSTROLL:null!=this.value.postrollSlotId&&(this.pods.push(b(e)),this.postrollSlots.push(e))}0<c.length&&this.sendNotification(d.ADD_CUE_POINTS,c);0<this.postrollSlots.length&&this.sendNotification(d.HAS_POST_CONTENT,
!0);this.initialized=!0;this.pods.sort(function(a,b){return a.time-b.time});this.pods.forEach(function(a,b){return a.position=b});this.sendNotification(k.REQUEST_COMPLETE,{pods:this.pods});this.sendNotification(k.RESPONSE,{pods:this.pods,response:a,context:this.context});!0===this.playWhenLoaded&&this.startAd()};x.prototype.breakStart=function(){var a;x.__super__.breakStart.call(this);this.adPosition=1;this.playbackCore=this.facade.player.retrieveProxy(ba.NAME).getActivePlaybackCore();this.playbackCore.setEnabled(!1);
this.getMediaElement().removeEventListener("playing",this.handlers.onResume);a=this.getMediaElement();a.addEventListener("playing",this.playbackCore.handlers.playing);a.addEventListener("pause",this.playbackCore.handlers.pause);a.addEventListener("waiting",this.playbackCore.handlers.waiting);a.addEventListener("seeking",this.handlers.seekupdate);this.timeout=setInterval(function(){return this.curTime=a.currentTime},500);"midroll"===this.adVO.type&&this.contentPause()};x.prototype.seekingHandler=function(a){a.target.currentTime>
this.curTime&&(a.target.currentTime=this.curTime)};x.prototype.onAdImpression=function(a){var b,c,d,f,g;if((null!=(d=a.adInstance)?"function"===typeof d.getSlot?"function"===typeof(b=d.getSlot()).getTimePositionClass?b.getTimePositionClass():void 0:void 0:void 0)!==tv.freewheel.SDK.TIME_POSITION_CLASS_DISPLAY){this.currentAd=a.adInstance;this.adVO.position=this.adPosition++;this.adVO.id=this.currentAd.getAdId();this.adVO.duration=null!=(f=a.adInstance)?f.getDuration():void 0;b=this.value.creativeParameters;
if(null!=b)try{c=a.adInstance.getAdId(),this.adVO.metadata.creativeparameters[c]=this.getCreativeParameters(a.adInstance)}catch(h){}a=null!=(g=this.currentAd)?g.getActiveCreativeRendition():void 0;null!=a&&(this.adVO.metadata.adwidth=a.getWidth(),this.adVO.metadata.adheight=a.getHeight());this.sendNotification(k.IMPRESSION,this.adVO);this.sendNotification(k.AD_STARTED,this.adVO)}};x.prototype.onAdEvent=function(a){switch(a.subType){case tv.freewheel.SDK.EVENT_AD_FIRST_QUARTILE:this.sendNotification(k.FIRST_QUARTILE,
this.adVO);break;case tv.freewheel.SDK.EVENT_AD_MIDPOINT:this.sendNotification(k.MIDPOINT,this.adVO);break;case tv.freewheel.SDK.EVENT_AD_THIRD_QUARTILE:this.sendNotification(k.THIRD_QUARTILE,this.adVO);break;case tv.freewheel.SDK.EVENT_AD_COMPLETE:this.sendNotification(k.COMPLETE,this.adVO)}};x.prototype.onAdImpressionEnd=function(a){this.sendNotification(k.AD_ENDED,this.adVO)};x.prototype.onAdClick=function(a){!1===this.getMediaElement().paused&&this.pause();this.sendNotification(k.AD_CLICKED,this.adVO)};
x.prototype.onResume=function(a){this.context.setVideoState(tv.freewheel.SDK.VIDEO_STATE_PLAYING);this.getMediaElement().removeEventListener("playing",this.handlers.onResume)};x.prototype.adTimeupdate=function(a){try{null!=this.slot&&(this.currentAd=this.slot.getCurrentAdInstance(),null!=this.currentAd&&(this.adVO.duration=this.currentAd.getDuration(),this.sendNotification(k.AD_TIME_UPDATE,this.currentAd.getPlayheadTime()),this.sendNotification(k.AD_TIME_REMAINING,this.currentAd.getDuration()-this.currentAd.getPlayheadTime())))}catch(b){this.facade.logger.error("[AMP FREEWHEEL ERROR]",
b)}};x.prototype.onSlotStarted=function(a){a=a.slot;"temporal"===a.getType()&&(this.slot=a,this.getMediaElement().addEventListener("timeupdate",this.handlers.adtimeupdate))};x.prototype.onSlotEnded=function(a){var b,c;b=a.slot;a=!0===a.skipped?this.sendNotification.bind(this,k.BREAK_SKIPPED,b):this.endBreak.bind(this);if("temporal"===b.getType())switch(this.getMediaElement().removeEventListener("timeupdate",this.handlers.adtimeupdate),c=b.getTimePositionClass(),b=this.getPodById(b.getCustomId()),
b.locked=!0,this.slot=null,c){case tv.freewheel.SDK.TIME_POSITION_CLASS_PREROLL:this.prerollSlots.length&&(this.prerollSlots.shift(),this.prerollSlots.length?this.playAd(this.prerollSlots[0]):a());break;case tv.freewheel.SDK.TIME_POSITION_CLASS_MIDROLL:b=this.midrollSlots.indexOf(this.nextMidroll);-1<b&&this.midrollSlots.splice(b,1);this.nextMidroll=null;a();break;case tv.freewheel.SDK.TIME_POSITION_CLASS_POSTROLL:this.postrollSlots.length&&(this.postrollSlots.shift(),this.postrollSlots.length?this.playAd(this.postrollSlots[0]):
a())}};x.prototype.playAd=function(a){var b,c,d,f,g,h,l,n;d=this.getPodById(a.getCustomId());if(!0===(null!=d?d.locked:void 0))this.onSlotEnded({slot:d.metadata,skipped:!0});else{g={adtype:a.getType()};d=null!=a?null!=(b=a.getAdInstances())?b[0]:void 0:void 0;if(null!=d&&(c=d.getAdId(),g.adunit=d.getSoAdUnit(),b=d.getActiveCreativeRendition(),null!=b)){for(f in b)h=b[f],0===f.indexOf("get")&&"function"===typeof h&&(g[f.substring(3).toLowerCase()]=h());g.baseunit=b.getBaseUnit();f=this.value.creativeParameters;
if(null!=f)for(g.creativeparameters={},n=a.getAdInstances(),h=0,l=n.length;h<l;h++)b=n[h],f=b.getAdId(),g.creativeparameters[f]=this.getCreativeParameters(b)}null==c&&(c=a.getCustomId());this.adVO=new Ta(c,a.getCustomId(),null!=d?d.getDuration():NaN,this.adPosition,a.getTimePositionClass().toLowerCase(),"freewheel",null,null,null,g,a.getAdCount());this.sendNotification(k.AD_LOADED,this.adVO);this.context.setVideoState(tv.freewheel.SDK.VIDEO_STATE_STOPPED);a.play()}};x.prototype.start=function(){!0===
this.canPlay()?this.startAd():this.playWhenLoaded=!0;return!0};x.prototype.canPlay=function(){return!0===this.initialized};x.prototype.startAd=function(){var a,b,c,d,f,g;this.playWhenLoaded=!1;if(this.prerollSlots.length)for(a=!1,f=this.prerollSlots,c=0,d=f.length;c<d;c++)b=f[c],b=b.getCustomId(),!0===(null!=(g=this.getPodById(b))?g.locked:void 0)&&(a=!0),a?this.breakEnd():(this.startBreak(),this.playAd(this.prerollSlots[0]));else this.endBreak()};x.prototype.play=function(){x.__super__.play.call(this);
this.getMediaElement().play();!0===this.terminateAdOnPlay&&(this.terminateAdOnPlay=!1,this.terminateAd())};x.prototype.pause=function(){var a;x.__super__.pause.call(this);a=this.getMediaElement();a.pause();setTimeout(function(){return a.controls=!1},0)};x.prototype.breakEnd=function(){var a,b=this;x.__super__.breakEnd.call(this);null==this.playbackCore&&(this.playbackCore=this.facade.player.retrieveProxy(ba.NAME).getActivePlaybackCore());a=this.getMediaElement();a.removeEventListener("playing",this.playbackCore.handlers.playing);
a.removeEventListener("pause",this.playbackCore.handlers.pause);a.removeEventListener("waiting",this.playbackCore.handlers.waiting);a.removeEventListener("seeking",this.handlers.seekupdate);clearInterval(this.timeout);this.playbackCore.setEnabled(!0);this.appState.getEnded()?(this.context.setVideoState(tv.freewheel.SDK.VIDEO_STATE_COMPLETED),this.sendNotification(d.MEDIA_SEQUENCE_ENDED)):(setTimeout(function(){b.contentPlay();b.getMediaElement().addEventListener("playing",b.handlers.onResume)},1),
setTimeout(function(){b.engageMidrollCheck()},500))};x.prototype.contentStarted=function(){this.engageMidrollCheck()};x.prototype.contentSeek=function(a){this.nextMidroll=this.getPreviousMidroll(a);null==this.nextMidroll?this.nextMidroll=this.getNextMidroll(a):this.midrollEngaged||this.engageMidrollCheck()};x.prototype.contentEnded=function(){var a,b=this;this.context.setVideoState(tv.freewheel.SDK.VIDEO_STATE_STOPPED);null!=(a=this.postrollSlots)&&a.length?setTimeout(function(){b.startBreak();b.playAd(b.postrollSlots[0])},
0):this.context.setVideoState(tv.freewheel.SDK.VIDEO_STATE_COMPLETED)};x.prototype.engageMidrollCheck=function(){var a;0!==(null!=(a=this.midrollSlots)?a.length:void 0)&&!0!==this.midrollEngaged&&(this.midrollEngaged=!0,this.getMediaElement().addEventListener("timeupdate",this.handlers.timeupdate))};x.prototype.disengageMidrollCheck=function(){this.getMediaElement().removeEventListener("timeupdate",this.handlers.timeupdate)};x.prototype.midrollCheck=function(a){var b;if(!this.getMediaElement().paused&&
!0!==this.appState.getSeeking())if(null==this.nextMidroll)this.nextMidroll=this.getNextMidroll(this.playbackCore.getCurrentTime());else if(!(this.playbackCore.getCurrentTime()<this.nextMidroll.getTimePosition())&&(a="function"===typeof(b=this.nextMidroll).getAdCount?b.getAdCount():void 0,null!=a))if(0===a)this.onSlotEnded({slot:this.nextMidroll,skipped:!0});else this.disengageMidrollCheck(),this.adVO.type="midroll",this.startBreak(),this.engageAds(),this.midrollEngaged=!1,this.playAd(this.nextMidroll)};
x.prototype.getNextMidroll=function(a){var b,c,d,f;a=0<=a?a:0;f=this.midrollSlots;c=0;for(d=f.length;c<d;c++)if(b=f[c],a<b.getTimePosition())return b};x.prototype.getPreviousMidroll=function(a){var b,c,d,f,g;d=this.pods.slice().reverse();f=0;for(g=d.length;f<g;f++)if(c=d[f],"midroll"===c.type&&(b=c.metadata,a>b.getTimePosition()))return!0!==c.locked?b:null};x.prototype.terminateAd=function(){var a;!0===this.started&&!0===this.getMediaElement().paused?this.terminateAdOnPlay=!0:null!=this.slot&&"function"===
typeof(a=this.slot).stop&&a.stop()};x.prototype.terminateAllAds=function(a){!0===a&&null!=this.context&&(this.context.removeEventListener(tv.freewheel.SDK.EVENT_REQUEST_COMPLETE,this.handlers.onRequestComplete),this.context.removeEventListener(tv.freewheel.SDK.EVENT_SLOT_STARTED,this.handlers.onSlotStarted),this.context.removeEventListener(tv.freewheel.SDK.EVENT_SLOT_ENDED,this.handlers.onSlotEnded),this.context.removeEventListener(tv.freewheel.SDK.EVENT_AD_IMPRESSION,this.handlers.onAdImpression),
this.context.removeEventListener(tv.freewheel.SDK.EVENT_AD_IMPRESSION_END,this.handlers.onAdImpressionEnd));this.terminateAd();this.prerollSlots=[];this.midrollSlots=[];this.postrollSlots=[]};x.prototype.getCreativeParameters=function(a){var b,c,d,f,g,h;if(this.config.creativeParameters&&a)for(c={},h=this.config.creativeParameters,f=0,g=h.length;f<g;f++){b=h[f];d=null;try{d=a.getActiveCreativeRendition().getParameter(b)}catch(k){this.facade.logger.warn("[AMP FREEWHEEL WARNING]","Could not retrieve Freewheel creative parameter: "+
b,k)}finally{d&&(c[b]=d)}}return c};x.prototype.contentPaused=function(){this.getInProgress()||(this.context.setVideoState(tv.freewheel.SDK.VIDEO_STATE_PAUSED),this.getMediaElement().addEventListener("playing",this.handlers.onResume))};x.prototype.destroy=function(){this.terminateAllAds(!0)};var Nb=function(){Nb.__super__.constructor.call(this)};f(Nb,L);Nb.prototype.moduleName="stats";Nb.prototype.createModel=function(){this.proxy=new Xb(this.config);this.registerProxy(this.proxy)};Nb.prototype.createController=
function(){Nb.__super__.createController.call(this);this.registerCommand("statsvisibilitychange",oh)};Nb.prototype.createView=function(){this.registerMediator(new fb)};Nb.prototype.listNotificationInterests=function(){return[d.PLAYING,d.TIME_UPDATE]};Nb.prototype.listNotificationPublications=function(){return Nb.__super__.listNotificationPublications.call(this).concat([d.ADD_CONTROL,d.REMOVE_CONTROL,d.ADD_CONTROL_STATE,d.REMOVE_CONTROL_STATE,"statsvisibilitychange"])};Nb.prototype.getHidden=function(){return this.proxy.getHidden()};
Nb.prototype.setHidden=function(a){this.sendNotification("statsvisibilitychange",a);return a};n.registerPlugin("stats","html",Nb);var Hd=function(a){Hd.__super__.constructor.call(this,a)};f(Hd,Q);Hd.NAME=v.NAME;Hd.prototype.defaults={data:{partnerCode:null}};Hd.prototype.initSDK=function(a){var b,c;"undefined"!==typeof initMoatTracking&&null!==initMoatTracking&&(b=null!=(c=this.getConfigurationData())?c.data:void 0,initMoatTracking(a.adManager,{partnerCode:b.partnerCode,viewMode:a.viewMode,slicer1:b.slicer1,
slicer2:b.slicer2},a.adContainer))};var qe=function(){return qe.__super__.constructor.apply(this,arguments)};f(qe,H);qe.NAME="MOATWrapper";qe.prototype.flashPlugins=[{id:"MOATAnalyticsPlugin",src:"#{paths.resources}plugins/MOATAnalyticsPlugin.swf",blocking:!1,host:"akamai",main:"MOATAnalyticsPlugin"}];qe.prototype.createXML=function(a){var b,c,d,f,g;b=a.firstChild;c=a.getElementsByTagName("metrics")[0];null==c&&(c=a.createElement("metrics"),b.appendChild(c));b=a.createElement("vendor");b.setAttribute("id",
"moat");c.appendChild(b);d=[{value:this.config.data.partnerCode,key:"partnerCode"},{value:this.config.data.slicer1,key:"slicer1"},{value:this.config.data.slicer2,key:"slicer2"}];f=0;for(g=d.length;f<g;f++)c=d[f],null!=c.value&&this.createProperty(a,c.key,c.value,b);return a};var vh=function(){vh.__super__.constructor.call(this)};f(vh,puremvc.SimpleCommand);vh.prototype.execute=function(a){var b;b=this.facade.retrieveProxy(Hd.NAME);a.getBody()&&b.initSDK(a.getBody())};var Id=function(){Id.__super__.constructor.call(this)};
f(Id,na);Id.prototype.moduleName="freewheel";Id.prototype.featureName="ads";Id.prototype.createProxy=function(){return new x(this.config)};Id.prototype.isFullscreenDevice=function(){return!1};n.registerPlugin("freewheel","html",Id);n.registerPlugin("freewheel","flash",Gd);var sa=function(a){sa.__super__.constructor.call(this,a.types,a);this.buffer=a.buffer;this.temporalTypes=["vod","live","dvr"]};f(sa,xa);sa.prototype.playbackCoreName="dash";sa.prototype.context=null;sa.prototype.player=null;sa.prototype.buffer=
null;sa.prototype.resumecomplete=function(){var a,b,c;a=null!=(b=this.facade.getMediaElement())?null!=(c=b.textTracks)?c[0]:void 0:void 0;null!=a&&(a.mode="hidden");sa.__super__.resumecomplete.call(this)};sa.prototype.onerror=function(){};sa.prototype.createTracks=function(){var a,b,c,d,f,g,h,k;a=this.player.getTracksFor("audio");c=this.player.getCurrentTrackFor("audio");g=this.facade.tracks.getAudioTracks();b=a.length;d=h=0;for(k=a.length;h<k;d=++h)f=a[d],g.add(new cc({kind:f.roles.join(" "),label:f.id,
language:f.lang,id:f.id,enabled:f===c}),d+1===b)};sa.prototype.load=function(){null==this.player&&(this.player=dashjs.MediaPlayer().create(),this.player.enableBufferOccupancyABR(!0),this.player.on("error",this.onError.bind(this)),this.player.on("fragmentLoadingStarted",this.onFragmentLoadStart.bind(this)),this.player.on("fragmentLoadingCompleted",this.onFragmentLoaded.bind(this)),this.player.getDebug().setLogToBrowserConsole(this.facade.logger.enabled),this.player.initialize(this.getMediaElement(),
null,!1));sa.__super__.load.call(this)};sa.prototype.applySrc=function(){var a;a=this.facade.getMedia().keys;null!=a&&this.player.setProtectionData(a);this.player.attachSource(this.getSrc())};sa.prototype.seek=function(a){return Promise.resolve(this.player.seek(a))};sa.prototype.getCurrentTime=function(){var a;return(null!=(a=this.player)?a.time():void 0)||0};sa.prototype.getDuration=function(){var a;return(null!=(a=this.player)?a.duration():void 0)||0};sa.prototype.getStats=function(){return{}};
sa.prototype.onFragmentLoadStart=function(a){this.sendNotification(d.FRAGMENT_LOAD_START,a.request.mediaInfo.bitrateList[a.request.quality].bandwidth)};sa.prototype.onFragmentLoaded=function(a){this.sendNotification(d.FRAGMENT_LOADED,a.request.mediaInfo.bitrateList[a.request.quality].bandwidth)};sa.prototype.onError=function(a){this.facade.logger.error("DASH JS Playback Error:",a)};sa.prototype.setQuality=function(a){var b;return null!=(b=this.player)?b.setQualityFor("video",a):void 0};sa.prototype.getQuality=
function(){var a;return null!=(a=this.player)?a.getQualityFor("video"):void 0};sa.prototype.getQualityLevels=function(){var a;return(null!=(a=this.player)?a.getBitrateInfoListFor("video"):void 0)||sa.__super__.getQualityLevels.call(this)};sa.prototype.destroy=function(){var a;null!=(a=this.player)&&a.reset()};var wh=function(){wh.__super__.constructor.call(this)};f(wh,puremvc.SimpleCommand);wh.prototype.execute=function(a){var b,c,e,f,g=this;e=a.getBody();this.facade.retrieveProxy(r.NAME);a=this.facade.getMediaElement();
null!=a&&a.webkitSupportsFullscreen&&(c=this.facade.retrieveProxy(C.NAME),c.setDisplayState(e),b={},f=this.facade.viewComponent,null!=f.requestFullscreen?(b.enter=function(){return f.requestFullscreen()},b.exit=function(){return document.cancelFullscreen()},b.event="onfullscreenchange",b.element="fullscreenElement"):null!=f.webkitRequestFullScreen?(b.enter=function(){return f.webkitRequestFullScreen()},b.exit=function(){return document.webkitCancelFullScreen()},b.event="onwebkitfullscreenchange",
b.element="webkitFullscreenElement"):null!=f.mozRequestFullScreen?(b.enter=function(){return f.mozRequestFullscreen()},b.exit=function(){return document.mozCancelFullScreen()},b.event="onmozfullscreenchange",b.element="mozFullscreenElement"):null!=f.msRequestFullScreen&&(b.enter=function(){return f.msRequestFullscreen()},b.exit=function(){return document.msCancelFullScreen()},b.event="onmozfullscreenchange",b.element="mozFullscreenElement"),e===ia.FULL_SCREEN?(b.enter(),null!=b.event&&(a[b.event]=
function(a){if(null==document[b.element])return g.sendNotification(d.CHANGE_DISPLAY_STATE,ia.NORMAL)})):e===ia.NORMAL&&(b.exit(),a[b.event]=null),this.facade.dispatchEvent(new V("fullscreenchange",e===ia.FULL_SCREEN)))};var bd=function(a){bd.__super__.constructor.call(this,a)};f(bd,Q);bd.NAME=v.NAME;bd.prototype.playbackProxy=null;bd.prototype.createPlaybackProxy=function(){};bd.prototype.initialize=function(){var a;this.playbackProxy=this.createPlaybackProxy();null!=this.playbackProxy&&(this.sendNotification(d.INITIALIZED),
a=this.facade.player.retrieveProxy(ba.NAME),a.registerPlaybackCore(this.playbackProxy))};bd.prototype.destroy=function(){var a;null!=(a=this.playbackProxy)&&a.destroy()};var re=function(a){re.__super__.constructor.call(this,a)};f(re,bd);re.NAME=v.NAME;re.prototype.defaults={types:["application/dash+xml"],buffer:null};re.prototype.createPlaybackProxy=function(){if(null!=(window.MediaSource||window.WebKitMediaSource))return new sa(this.getConfigurationData())};var S=function(a){var b,c,d;this.shim=
a;S.__super__.constructor.call(this);this.state=cast.receiver.media.PlayerState.IDLE;try{d=document.createElement("style"),d.type="text/css",d.appendChild(document.createTextNode("")),document.head.appendChild(d),c=d.sheet,b=c.insertRule(".akamai-html5.akamai-video::cue {color: #FFFFFF; background: #000000; visibility: hidden;}",0),this.cssRule=c.rules[b]}catch(f){ha.error(f)}};f(S,gb);S.prototype.player=null;S.prototype.callbackMap=null;S.prototype.state=null;S.prototype.activeTrackId=null;S.prototype.cssRule=
null;S.prototype.textTrackStyle=null;S.prototype.ccHandler=null;S.prototype.feed=null;S.prototype.media=null;S.prototype.tracks=null;S.prototype.registerPlayer=function(a){var b,c=this;this.player=a;b=this.dispatchEvent.bind(this);["loadedmetadata","ended","error"].forEach(function(c){return a.addEventListener(c,b)});this.player.once("ready",function(){c.applyMedia();c.applyFeed();c.applyClassName()});this.player.addEventListener("playing",this.setState.bind(this,cast.receiver.media.PlayerState.PLAYING));
this.player.addEventListener("pause",this.setState.bind(this,cast.receiver.media.PlayerState.PAUSED));this.player.addEventListener("waiting",this.setState.bind(this,cast.receiver.media.PlayerState.BUFFERING))};S.prototype.setState=function(a){if(a!==this.state)return this.state=a,this.shim.mediaManager.broadcastStatus(!0),a};S.prototype.registerErrorCallback=function(a){this.onerror=a};S.prototype.registerEndedCallback=function(a){this.onended=a};S.prototype.registerLoadCallback=function(a){this.onloadedmetadata=
a};S.prototype.unregisterErrorCallback=function(){this.onerror=null};S.prototype.unregisterEndedCallback=function(){this.onended=null};S.prototype.unregisterLoadCallback=function(){this.onloadedmetadata=null};S.prototype.load=function(a,b,c,d){var f,g,h,k,l,n,p;g=this.shim.mediaManager.getMediaInformation();f=g.customData||{};k=g.metadata||{};null!=d?this.editTracksInfo(d):this.activeTrackId=null;if(null!=f.feed&&null!=(null!=(l=this.player)?l.feed:void 0))this.feed=f.feed,this.media=null,this.applyFeed();
else{this.feed=null;a={src:a,type:g.contentType,title:k.title,poster:null!=(n=k.images)?n.url:void 0,description:k.subtitle,pubDate:new Date(g.releaseDate),metadata:f,duration:g.duration,startTime:c||(null!=(p=f.media)?p.startTime:void 0),autoplay:b};if(null!=f.media)for(h in n=f.media,n)f=n[h],null==a[h]&&(a[h]=f);this.tracks=g.tracks;this.media=a;this.applyMedia()}};S.prototype.applyMedia=function(){null!=this.player&&null!=this.media&&(this.player.once("loadedmetadata",this.loadTracks.bind(this,
this.tracks)),this.player.setMedia(this.media),this.setState(cast.receiver.media.PlayerState.BUFFERING))};S.prototype.loadTracks=function(a,b){var c,d,f;0<(null!=a?a.length:void 0)&&(d=this.getTrack(0),null!=d&&(f=/ttml/.test(d.trackContentType)?"ttml":d.trackContentType,c=this.player.retrieveProxy("PlayerProxy").getActivePlaybackCore(),c.player.enableCaptions(!0,f,d.trackContentId)))};S.prototype.applyFeed=function(){null!=this.player&&null!=this.feed&&(this.player.once("mediachange",this.mediachangeHandler.bind(this)),
null!=this.feed.data?this.player.feed.setData(this.feed.data):null!=feed.url&&this.player.feed.setURL(this.feed.url))};S.prototype.mediachangeHandler=function(a){var b;a=this.player.getMedia();b=new cast.receiver.media.MediaInformation;b.contentId=a.src;b.contentType=a.type;b.customData=a.metadata;b.duration=a.duration;b.metadata={title:a.title,subtitle:a.description,images:[{url:a.poster}],releaseDate:a.pubDate.toISOString()};this.media=a;this.shim.mediaManager.setMediaInformation(b,!0)};S.prototype.reset=
function(){};S.prototype.play=function(){this.player.play()};S.prototype.seek=function(a,b){this.player.setCurrentTime(a);switch(b){case cast.receiver.media.SeekResumeState.PLAYBACK_PAUSE:this.player.pause();break;case cast.receiver.media.SeekResumeState.PLAYBACK_START:this.player.play()}};S.prototype.pause=function(){return this.player.pause()};S.prototype.getState=function(){return this.state};S.prototype.getCurrentTimeSec=function(){return null!=this.player?this.player.getCurrentTime():0};S.prototype.getDurationSec=
function(){return null!=this.player?this.player.getDuration():0};S.prototype.getVolume=function(){var a;a=new cast.receiver.media.Volume;a.level=this.player.getVolume();a.muted=this.player.getMuted();return a};S.prototype.setVolume=function(a){null!=a.level&&this.player.setVolume(a.level);!0===a.muted?this.player.setMuted(!0):!0===this.player.getMuted()&&this.player.setMuted(!1);return a};S.prototype.editTracksInfo=function(a){var b;null!=a.activeTrackIds&&(b=a.activeTrackIds[0],this.activeTrackId!==
b&&(this.activeTrackId=b,this.applyClassName()));a=a.textTrackStyle;null!=a&&null!=this.cssRule&&(this.textTrackStyle=a,null!=a.foregroundColor&&(this.cssRule.style.color=this.hexToRgba(a.foregroundColor)),null!=a.backgroundColor&&(this.cssRule.style.backgroundColor=this.hexToRgba(a.backgroundColor)),a.windowType===cast.receiver.media.TextTrackWindowType.ROUNDED_CORNERS&&(this.cssRule.style.borderRadius=a.windowRoundedCornerRadius+"px"),null!=a.fontScale&&(this.cssRule.style.fontSize=a.fontScale+
"em"),null!=a.fontFamily&&(this.cssRule.style.fontFamily=a.fontFamily))};S.prototype.applyClassName=function(a){null!=this.player&&(a=this.player.getMediaElement().classList,null!=this.activeTrackId?a.add("akamai-cc"):a.remove("akamai-cc"))};S.prototype.hexToRgba=function(a){var b,c,d;if(!/^#[A-Fa-f0-9]{6}([A-Fa-f0-9]{2})?$/.test(a))return a;d=parseInt(a.substring(1,3),16);c=parseInt(a.substring(3,5),16);b=parseInt(a.substring(5,7),16);a=9===a.length?parseInt(a.substring(7,9),16)/256:1;return"rgba("+
d+","+c+","+b+","+a+")"};S.prototype.getTrack=function(a){var b;null==a&&(a=this.activeTrackId);b=this.tracks.filter(function(b){return b.trackId===a})[0];null!=b&&null==b.trackContentType&&(b.trackContentType=cast.player.api.CaptionsType.CEA608);return b};var wi=[g.mimeTypes.m3u8,g.mimeTypes.mp4,g.mimeTypes.mpd,g.mimeTypes.ism,g.mimeTypes.webm,g.mimeTypes.mp3],G=function(a){this.messageBus=a.messageBus||"urn:x-cast:com.akamai.amp.cast";G.__super__.constructor.call(this,a.sender)};f(G,Q);G.NAME=v.NAME;
G.prototype.defaults={applicationID:"CC1AD845"};G.prototype.session=null;G.prototype.media=null;G.prototype.messageBus=null;G.prototype.feed=null;G.prototype.currentTime=null;G.prototype.duration=null;G.prototype.receiverAvailable=!1;G.prototype.currentTime=0;G.prototype.duration=0;G.prototype.playerState=null;G.prototype.displayTimeTimeout=null;G.prototype.initialize=function(){var a,b=this;"undefined"!==typeof chrome&&null!==chrome&&null!=(a=chrome.cast)&&a.isAvailable?this.initializeCastApi():
window.__onGCastApiAvailable=function(a,d){!0===a?b.initializeCastApi():b.logError("cast load error",d)}};G.prototype.initializeCastApi=function(){var a;a=this.getConfigurationData().applicationID;a=new chrome.cast.SessionRequest(a);a=new chrome.cast.ApiConfig(a,this.sessionListener.bind(this),this.receiverListener.bind(this),chrome.cast.AutoJoinPolicy.ORIGIN_SCOPED);chrome.cast.initialize(a,this.onInitSuccess.bind(this),this.onInitError.bind(this))};G.prototype.onInitSuccess=function(a){this.logEvent("init success",
a)};G.prototype.onInitError=function(a){this.logError("init error",a)};G.prototype.receiverListener=function(a){this.receiverAvailable="available"===a;this.sendNotification(oc.AVAILABILITY_CHANGE,this.receiverAvailable);this.logEvent("receiver "+(this.receiverAvailable?"found":"list empty"))};G.prototype.sessionListener=function(a){this.logEvent("session listener",a);if(0!==a.media.length)this.onMediaDiscovered(a.media[0]);else this.onRequestSessionSuccess(a)};G.prototype.launch=function(){chrome.cast.requestSession(this.onRequestSessionSuccess.bind(this),
this.onLaunchError.bind(this))};G.prototype.send=function(a){var b;null!=(b=this.session)&&"function"===typeof b.sendMessage&&b.sendMessage(this.messageBus,a,this.onMessageSuccess.bind(this),this.onMessageError.bind(this))};G.prototype.onLaunchError=function(a){this.logError("launch error.",a)};G.prototype.onRequestSessionSuccess=function(a){this.logEvent("request session success.",a);this.session=a;this.session.addMessageListener(this.messageBus,this.onMessage.bind(this));this.session.addUpdateListener(this.onUpdate.bind(this));
this.session.sendMessage(this.messageBus,{type:"createPlayer",config:this.facade.player.getConfig()},this.onCreateSucess.bind(this),this.onMessageError.bind(this));a=this.facade.player.retrieveProxy(r.NAME);0===this.session.media.length&&this.loadMedia(a.getCurrentTime())};G.prototype.onUpdate=function(a){a||(this.sendNotification(d.CHANGE_PLAYBACK_TARGET,"amp"),this.stopDisplayTimeUpdate())};G.prototype.onCreateSucess=function(a){this.logEvent("MPL created",a);this.sendNotification(d.CHANGE_PLAYBACK_TARGET,
"chromecast")};G.prototype.onMessageSuccess=function(a){this.logEvent("message sent",a)};G.prototype.onMessageError=function(a){this.logError("message error",a)};G.prototype.onMessage=function(a,b){var c,e;b=JSON.parse(b);e=b.type;c=b.detail||{};switch(e){case "dispatchevent":e="player"===c.target?this.facade.player:this.facade.player[c.target],null!=e&&e.dispatchEvent(c.event)}this.sendNotification(d.DISPATCH_EVENT,{type:"message",message:b})};G.prototype.onStop=function(a){this.logEvent("stop");
this.session.stop(this.onStopSuccess.bind(this),this.onStopError.bind(this))};G.prototype.onStopSuccess=function(a){this.logEvent("stop success",a)};G.prototype.onStopError=function(a){this.logError("stop error",a)};G.prototype.logEvent=function(a,b){null==a&&(a=b.type||"");this.facade.logger.log("[AMP CHROMECAST] "+a,b)};G.prototype.logError=function(a,b){this.facade.logger.error("[AMP CHROMECAST ERROR] "+a,b)};G.prototype.loadMedia=function(a){var b,c,d,f,k;null==a&&(a=0);d=this.facade.player.retrieveProxy(s.NAME).getData();
null!=d&&(b=function(a){return-1<wi.indexOf(a)?"maybe":""},f=g.selectSource(d.source,b),null!=f&&(b={media:d},c=null!=(k=this.facade.player.getModules())?k.feed:void 0,null!=c&&(b.feed={data:c.getData(),url:c.getURL()}),a=this.mediaToLoadRequest(d,f,a,b),this.session.loadMedia(a,this.onMediaDiscovered.bind(this),this.onMediaError.bind(this))))};G.prototype.mediaToLoadRequest=function(a,b,c,d){var f,g,h;g=new chrome.cast.media.GenericMediaMetadata;g.title=a.title;g.subtitle=a.description;g.image=[new chrome.cast.Image(a.poster)];
g.releaseDate=null!=(f=a.pubDate)?"function"===typeof f.toISOString?f.toISOString():void 0:void 0;b=new chrome.cast.media.MediaInfo(b.src,b.type);b.duration=a.duration;b.customData=d;b.metadata=g;if(0<(null!=(h=a.track)?h.length:void 0))for(b.tracks=[],h=a.track,f=d=0,g=h.length;d<g;f=++d)a=h[f],f=new chrome.cast.media.Track(f,chrome.cast.media.TrackType.TEXT),f.subtype=chrome.cast.media.TextTrackType.CAPTIONS,f.name="Closed Captions",f.language=a.srclang,f.customData=a,f.trackContentId=a.src,f.trackContentType=
a.type,b.tracks.push(f);b=new chrome.cast.media.LoadRequest(b);b.currentTime=c;return b};G.prototype.onMediaDiscovered=function(a){null!=this.media&&this.media.removeUpdateListener(this.mediaStatusUpdate);this.media=a;this.mediaStatusUpdate=this.onMediaStatusUpdate.bind(this);this.media.addUpdateListener(this.mediaStatusUpdate);this.sendNotification(d.CHANGE_PLAYBACK_TARGET,"chromecast")};G.prototype.onMediaStatusUpdate=function(a){this.logEvent("mediastatusupdate",a);this.updatePlayerState(this.media.playerState);
this.updateDisplayTime();!1===a&&this.stopDisplayTimeUpdate()};G.prototype.updatePlayerState=function(a){var b;if(a!==this.playerState){this.playerState=a;switch(this.playerState){case chrome.cast.media.PlayerState.BUFFERING:b=P.WAITING;break;case chrome.cast.media.PlayerState.PLAYING:b=P.PLAYING;break;case chrome.cast.media.PlayerState.PAUSED:b=P.PAUSED}this.sendNotification(d.CHANGE_PLAY_STATE,b);this.playerState===chrome.cast.media.PlayerState.PLAYING?this.startDisplayTimeUpdate():this.stopDisplayTimeUpdate()}};
G.prototype.startDisplayTimeUpdate=function(){this.stopDisplayTimeUpdate();this.displayTimeTimeout=setInterval(this.updateDisplayTime.bind(this),100)};G.prototype.stopDisplayTimeUpdate=function(){clearInterval(this.displayTimeTimeout);this.displayTimeTimeout=null};G.prototype.updateDisplayTime=function(){var a,b,c;a=this.media.getEstimatedTime()||0;b=(null!=(c=this.media.media)?c.duration:void 0)||a;b!==this.duration?(this.duration=b,this.sendNotification(d.CHANGE_DURATION,this.duration)):a!==this.currentTime&&
(this.currentTime=a,this.sendNotification(d.DISPLAY_TIME,{currentTime:this.currentTime,duration:this.duration}))};G.prototype.onMediaError=function(a){this.logError("media error",a);this.stopDisplayTimeUpdate()};G.prototype.play=function(){this.media.play()};G.prototype.pause=function(){this.media.pause()};G.prototype.setCurrentTime=function(a){var b;b=new chrome.cast.media.SeekRequest;b.currentTime=a;this.media.seek(b)};G.prototype.getCurrentTime=function(){return this.currentTime};G.prototype.isReceiverAvailable=
function(){return this.receiverAvailable};var sf=function(){sf.__super__.constructor.call(this)};f(sf,y);sf.prototype.execute=function(a){this.proxy.launch()};var xh=function(){xh.__super__.constructor.call(this)};f(xh,y);xh.prototype.execute=function(a){this.proxy.send({type:"captioning.visibilitychange",detail:{visibility:a.getBody()}})};var yh=function(){yh.__super__.constructor.call(this)};f(yh,y);yh.prototype.execute=function(a){this.proxy.send({type:"captioning.settingschange",detail:a.getBody()})};
var zh=function(){zh.__super__.constructor.call(this)};f(zh,y);zh.prototype.execute=function(a){this.facade.player.getViewComponent().hidden=!1;this.proxy.ready()};var Ah=function(){Ah.__super__.constructor.call(this)};f(Ah,y);Ah.prototype.execute=function(a){this.facade.logger.debug("ChromeCastBreakStartCommand");a=this.facade.player.retrieveProxy(ba.NAME).getActivePlaybackCore();"chromecast"===a.getPlaybackCoreName()&&(a.unload(),a.src=null)};var Ua=function(a,b){this.receiver=b;Ua.__super__.constructor.call(this,
a)};f(Ua,xa);Ua.prototype.initialized=!0;Ua.prototype.player=null;Ua.prototype.host=null;Ua.prototype.protocol=null;Ua.prototype.playbackCoreName="chromecast";Ua.prototype.manifest=null;Ua.prototype.xhr=null;Ua.prototype.trackInfo=null;Ua.prototype.receiver=null;Ua.prototype.reset=function(){Ua.__super__.reset.call(this);this.manifest=this.xhr=null};Ua.prototype.unload=function(){null!=this.player&&(this.trackInfo={activeTrackIds:[this.receiver.chromecastPlayer.activeTrackId],textTrackStyle:this.receiver.chromecastPlayer.textTrackStyle},
this.receiver.chromecastPlayer.activeTrackId=null,this.receiver.chromecastPlayer.textTrackStyle=null,this.player.unload(),this.player=null)};Ua.prototype.load=function(){var a=this;null!=this.xhr?null!=this.manifest&&this.loadMediaPlayer():(this.xhr=new XMLHttpRequest,this.xhr.onload=function(b){200===a.xhr.status&&(a.manifest=a.xhr.responseText,a.loadMediaPlayer())},this.xhr.onerror=function(b){a.facade.logger.error(b);a.player.unload()},this.xhr.open("GET",this.getSrc()),this.xhr.send())};Ua.prototype.loadMediaPlayer=
function(){var a,b,c=this;this.playWhenLoaded=this.data.loading=!0;this.unload();a=this.facade.getMediaElement();a.addEventListener("loadedmetadata",this.resumeHandlers.loadedmetadata);a.addEventListener("loadedmetadata",this.handlers.loadedmetadata);a.addEventListener("durationchange",this.handlers.durationchange);a.addEventListener("canplaythrough",this.handlers.canplaythrough);null!=a.src&&(a.src=null);!0===ha.enabled&&cast.player.api.setLoggerLevel(cast.player.api.LoggerLevel.DEBUG);this.host=
new cast.player.api.Host({mediaElement:a,url:this.getSrc()});this.host.updateManifestRequestInfo=function(a){a.url===c.getSrc()&&(a.skipRequest=!0,a.setResponse(c.manifest))};this.host.onError=function(a){c.facade.logger.error("Google Media Player Fatal Error - "+a);c.player.unload()};a=this.facade.retrieveProxy(s.NAME).getType();b=g.mimeTypes;switch(a){case b.m3u8:this.protocol=cast.player.api.CreateHlsStreamingProtocol(this.host);break;case b.mpd:this.protocol=cast.player.api.CreateDashStreamingProtocol(this.host);
break;case b.ism:this.protocol=cast.player.api.CreateSmoothStreamingProtocol(this.host)}null!=this.protocol?(this.player=new cast.player.api.Player(this.host),this.player.load(this.protocol,0)):this.facade.logger.error("Google Media Player Error: Could not create protocol")};Ua.prototype.resumecomplete=function(){Ua.__super__.resumecomplete.call(this)};var Bh=function(){Bh.__super__.constructor.call(this)};f(Bh,y);Bh.prototype.execute=function(a){"chromecast"===this.applicationState.getPlaybackTarget()&&
(this.facade.logger.debug("ChromeCastMediaChangeCommand"),this.proxy.loadMedia())};var tf=function(){tf.__super__.constructor.call(this)};f(tf,wb);tf.prototype.onRegister=function(){tf.__super__.onRegister.call(this);this.sendNotification(d.ADD_APPLICATION_STATE,"chromecast-receiver")};var pc=function(){pc.__super__.constructor.call(this)};f(pc,wb);pc.prototype.componentName="chromecast";pc.prototype.controls=null;pc.prototype.onRegister=function(){pc.__super__.onRegister.call(this);this.controls=
new qc};pc.prototype.registerOverlay=function(){};pc.prototype.listNotificationInterests=function(){return[d.PLAYBACK_TARGET_CHANGE,d.CHANGE_PLAY_STATE]};pc.prototype.handleNotification=function(a){var b;b=a.getName();a=a.getBody();switch(b){case d.PLAYBACK_TARGET_CHANGE:b=a.value;"chromecast"===b?this.facade.registerMediator(this.controls):this.facade.removeMediator(this.controls.getMediatorName());break;case d.CHANGE_PLAY_STATE:this.controls.setState(a)}};var Oc=function(){Oc.__super__.constructor.call(this)};
f(Oc,pc);Oc.prototype.chromeCastButton=null;Oc.prototype.onRegister=function(){Oc.__super__.onRegister.call(this);this.chromeCastButton=new se;this.facade.registerMediator(this.chromeCastButton)};Oc.prototype.listNotificationInterests=function(){return Oc.__super__.listNotificationInterests.call(this).concat([oc.AVAILABILITY_CHANGE])};Oc.prototype.handleNotification=function(a){var b;Oc.__super__.handleNotification.call(this,a);b=a.getName();a=a.getBody();switch(b){case oc.AVAILABILITY_CHANGE:!0===
a?(this.sendNotification(d.ADD_CONTROL_STATE,"chromecast"),this.facade.player.sendNotification(d.ADD_CONTROL,this.chromeCastButton.getViewComponent())):(this.sendNotification(d.REMOVE_CONTROL_STATE,"chromecast"),this.facade.player.sendNotification(d.REMOVE_CONTROL,this.chromeCastButton.getViewComponent()))}};var fa=function(a){this.messageBus=a.messageBus||"urn:x-cast:com.akamai.amp.cast";fa.__super__.constructor.call(this,a.receiver)};f(fa,Q);fa.NAME=v.NAME;fa.prototype.defaults={shim:null,types:["application/x-mpegURL",
"application/dash+xml","application/vnd.ms-sstr+xml"]};fa.prototype.messageBus=null;fa.prototype.castReceiverManager=null;fa.prototype.castMessageBus=null;fa.prototype.startTime=0;fa.prototype.currentTime=0;fa.prototype.boundHandler=null;fa.prototype.amp=null;fa.prototype.mediaManager=null;fa.prototype.playbackCore=null;fa.prototype.teardownTimeout=null;fa.prototype.chromecastPlayer=null;fa.prototype.initialize=function(){var a;fa.__super__.initialize.call(this);this.sendNotification(d.INITIALIZED);
a=new Ua(this.getConfigurationData().types,this);this.facade.player.retrieveProxy(ba.NAME).registerPlaybackCore(a)};fa.prototype.ready=function(){!0===this.facade.logger.enabled&&cast.receiver.logger.setLevelValue(cast.receiver.LoggerLevel.DEBUG);this.shim=Db.getInstance();this.castReceiverManager=this.shim.castReceiverManager;this.castReceiverManager.onReady=this.castReceiverManager.onSystemVolumeChanged=this.castReceiverManager.onVisibilityChanged=this.logEvent.bind(this);this.castReceiverManager.onSenderConnected=
this.onSenderConnected.bind(this);this.castReceiverManager.onSenderDisconnected=this.onSenderDisconnected.bind(this);this.amp=this.facade.player;this.chromecastPlayer=this.shim.player;this.chromecastPlayer.registerPlayer(this.amp);this.mediaManager=this.shim.mediaManager;this.castMessageBus=this.shim.castMessageBuses[this.messageBus];this.castMessageBus.onMessage=this.onMessage.bind(this);this.amp.addEventListener("seeking",this.eventHandler.bind(this));this.amp.addEventListener("seeked",this.eventHandler.bind(this));
this.amp.addEventListener("pause",this.startTeardownTimeout.bind(this,1200));this.amp.addEventListener("ended",this.startTeardownTimeout.bind(this,300));this.amp.addEventListener("error",this.startTeardownTimeout.bind(this,300));this.amp.addEventListener("playing",this.stopTeardownTimeout.bind(this));this.amp.addEventListener("loadedmetadata",this.stopTeardownTimeout.bind(this));null!=this.amp.ads&&(this.amp.ads.addEventListener("breakstart",this.dispatchEvent.bind(this,"ads")),this.amp.ads.addEventListener("breakend",
this.onBreakEnd.bind(this)),this.amp.ads.addEventListener("started",this.dispatchEvent.bind(this,"ads")),this.amp.ads.addEventListener("ended",this.dispatchEvent.bind(this,"ads")),this.amp.ads.addEventListener("companion",this.dispatchEvent.bind(this,"ads")));this.startTeardownTimeout(300)};fa.prototype.onBreakEnd=function(a){this.dispatchEvent("ads",a);!0===this.amp.getEnded()&&this.startTeardownTimeout(300)};fa.prototype.logEvent=function(a,b){null==a?a=b.type||"":null==b&&(b=a.data,a=b.type);this.facade.logger.log("[CHROMECAST] ",
a,b)};fa.prototype.onSenderConnected=function(a){this.logEvent("senderconnected",a);setTimeout(this.sendNotification.bind(this,d.DISPATCH_EVENT,new V("senderconnected",a)),0)};fa.prototype.onSenderDisconnected=function(a){this.logEvent("sender disconnected",a);0===this.castReceiverManager.getSenders().length&&a.reason===cast.receiver.system.DisconnectReason.REQUESTED_BY_SENDER&&this.teardown();setTimeout(this.sendNotification.bind(this,d.DISPATCH_EVENT,new V("senderdisconnected",a)),0)};fa.prototype.onMessage=
function(a){var b,c,e,f,g;this.logEvent("message from sender",a);try{if(e=a.data||a.message,null!=e&&(g=e.type,b=e.detail,"string"===typeof b&&(b=JSON.parse(b)),null!=b)){switch(g){case "captioning.visibilitychange":c=[];!0===b.visibility&&c.push(0);this.chromecastPlayer.editTracksInfo({activeTrackIds:c});break;case "captioning.settingschange":f=new cast.receiver.media.TextTrackStyle;f.foregroundColor=b.fontColor;f.backgroundColor=b.backgroundColor;f.fontScale=b.size;f.windowColor=b.windowColor;f.fontFamily=
b.fontFamily;f.edgeColor=b.edgeColor;f.edgeType=b.edgeType;this.chromecastPlayer.editTracksInfo({textTrackStyle:f});break;case "stats.visibilitychange":this.amp.stats.setHidden(!b.visibility)}this.sendNotification(d.DISPATCH_EVENT,a)}}catch(h){this.error(h)}};fa.prototype.onClose=function(a){this.logEvent("message channel closed",a)};fa.prototype.eventHandler=function(a){var b;b={type:a.type};null!=a.detail&&(b.detail=a.detail);this.send(b)};fa.prototype.dispatchEvent=function(a,b){this.send({type:"dispatchevent",
detail:{target:a,event:{type:b.type,detail:b.detail}}})};fa.prototype.send=function(a){this.castMessageBus.broadcast(a)};fa.prototype.startTeardownTimeout=function(a){this.stopTeardownTimeout();this.teardownTimeout=setTimeout(this.teardown.bind(this),1E3*a)};fa.prototype.stopTeardownTimeout=function(){clearTimeout(this.teardownTimeout)};fa.prototype.teardown=function(){window.close()};var Ch=function(){Ch.__super__.constructor.call(this)};f(Ch,y);Ch.prototype.execute=function(a){var b;"function"===
typeof(b=this.proxy).setFeed&&b.setFeed(a.getBody())};var uf=function(){uf.__super__.constructor.call(this)};f(uf,y);uf.prototype.execute=function(a){this.facade.logger.debug("ChromeCastSeekCommand");this.plugin.setCurrentTime(a.getBody())};var se=function(){se.__super__.constructor.call(this)};f(se,Ca);se.prototype.componentName="chromecast";se.prototype.onclick=function(a){a.stopImmediatePropagation();this.sendNotification(oc.LAUNCH);return!1};var vf=function(){vf.__super__.constructor.call(this)};
f(vf,y);vf.prototype.execute=function(a){switch(this.applicationState.getPlayState()){case P.ENDED:this.plugin.setCurrentTime(0);this.plugin.play();break;case P.PAUSED:case P.READY:this.plugin.play();break;case P.PLAYING:case P.WAITING:this.plugin.pause()}};var qc=function(){qc.__super__.constructor.call(this)};f(qc,Sb);qc.prototype.componentName="chromecast-controls";qc.prototype.message=null;qc.prototype.messageContainer=null;qc.prototype.button=null;qc.prototype.captioningActive=!1;qc.prototype.onRegister=
function(){var a,b,c;qc.__super__.onRegister.call(this);this.messageContainer=this.create("chromecast-message-container");this.message=this.createText("chromecast-message",this.localizationManager.getString("MSG_CHROMECAST_MESSAGE"),this.messageContainer);this.button=new se;this.facade.registerMediator(this.button);a=new Dc(this.controlBar);this.facade.registerMediator(a);a.setDisabled(!0);this.sendNotification(d.ADD_CONTROL,this.button.getViewComponent());this.viewComponent.getElementsByClassName("akamai-caption akamai-button").length||
!0!==(null!=(b=this.facade.player.captioning)?null!=(c=b.config)?c.enabled:void 0:void 0)||(a=new Ca(this.localizationManager.getString(B.MSG_CC),this.viewComponent.getElementsByClassName("akamai-control-bar")[0],null,"caption",this.captionButtonClick.bind(this)),this.facade.registerMediator(a),this.captionButton=a.getViewComponent(),this.sendNotification(d.ADD_CONTROL,this.captionButton),this.sendNotification(d.ADD_CONTROL_STATE,"cc-enabled"))};qc.prototype.captionButtonClick=function(){this.captioningActive=
!this.captioningActive;try{this.facade.player.parent.chromecast.postMessage({type:"captioning.visibilitychange",detail:{visibility:this.captioningActive}})}catch(a){this.facade.logger.error("[AMP Chromecast Captioning Error]",a)}this.sendNotification(this.captioningActive?d.ADD_APPLICATION_STATE:d.REMOVE_APPLICATION_STATE,"cc-active")};var wf=function(){wf.__super__.constructor.call(this)};f(wf,y);wf.prototype.execute=function(a){var b,c=this;a=a.getBody().target;"chromecast"===a?this.player.pause():
"amp"===a&&(a=this.proxy.getCurrentTime(),b=this.player.getDuration(),0!==a&&(a!==b&&(this.seekedHandler=this.seeked.bind(this),this.player.once("seeked",function(a){c.player.play()})),this.player.setCurrentTime(a)))};var oa=function(){oa.__super__.constructor.call(this)};f(oa,L);oa.prototype.moduleName="chromecast";oa.prototype.isAvailable=function(){return this.isSender()||this.isReceiver()};oa.prototype.createModel=function(){this.proxy=this.isSender()?new G(this.config):new fa(this.config);this.registerProxy(this.proxy)};
oa.prototype.createController=function(){oa.__super__.createController.call(this);this.isSender()?(this.registerCommand(d.PLAYBACK_TARGET_CHANGE,wf),this.registerCommand(oc.LAUNCH,sf),this.registerCommand(X.TOGGLE_PLAY_PAUSE,vf),this.registerCommand(X.SEEK,uf),this.registerCommand(F.VISIBILITY_CHANGE,xh),this.registerCommand(F.SETTINGS_CHANGE,yh),this.registerCommand(d.MEDIA_CHANGE,Bh),this.registerCommand(oc.AVAILABILITY_CHANGE,w)):this.isReceiver()&&(this.registerCommand(d.READY,zh),this.registerCommand(k.BREAK_START,
Ah))};oa.prototype.createView=function(){this.isSender()?this.registerMediator(new Oc):this.isReceiver()&&this.registerMediator(new tf)};oa.prototype.isSender=function(){return!oa.prototype.isReceiver()&&/Chrome/.test(navigator.userAgent)};oa.prototype.isReceiver=function(){return/CrKey/.test(navigator.userAgent)};oa.prototype.listNotificationInterests=function(){return[d.READY,F.VISIBILITY_CHANGE,F.SETTINGS_CHANGE,k.BREAK_START,d.PLAYBACK_TARGET_CHANGE,d.MEDIA_CHANGE]};oa.prototype.listNotificationPublications=
function(){return oa.__super__.listNotificationPublications.apply(this,arguments).concat([d.INITIALIZED,d.ADD_CONTROL,d.REMOVE_CONTROL,d.ADD_CONTROL_STATE,d.REMOVE_CONTROL_STATE,d.CHANGE_PLAYBACK_TARGET,oc.AVAILABILITY_CHANGE,d.CHANGE_PLAY_STATE,d.CHANGE_DURATION,d.DISPLAY_TIME])};oa.prototype.play=function(){var a;"function"===typeof(a=this.proxy).play&&a.play()};oa.prototype.pause=function(){var a;"function"===typeof(a=this.proxy).pause&&a.pause()};oa.prototype.setCurrentTime=function(a){this.proxy.setCurrentTime(a);
return a};oa.prototype.isReceiverAvailable=function(){var a;return(null!=(a=this.proxy)?"function"===typeof a.isReceiverAvailable?a.isReceiverAvailable():void 0:void 0)||!1};oa.prototype.getMedia=function(){return this.proxy.media};oa.prototype.getSession=function(){return this.proxy.session};oa.prototype.getMediaManager=function(){return this.proxy.mediaManager};oa.prototype.getCastReceiverManager=function(){return this.proxy.castReceiverManager};oa.prototype.getCastMessageBus=function(){return this.proxy.shim.castMessageBuses[this.proxy.messageBus]};
oa.prototype.postMessage=function(a){this.proxy.send(a)};n.registerPlugin("chromecast","html",oa);var cd=function(){cd.__super__.constructor.call(this)};f(cd,oa);cd.NAME="ChromeCastFlashPlugin";cd.prototype.createModel=function(){this.proxy=new G(this.config);this.registerProxy(this.proxy)};cd.prototype.createController=function(){cd.__super__.createController.call(this);this.registerCommand(d.PLAYBACK_TARGET_CHANGE,wf);this.registerCommand(oc.LAUNCH,sf);this.registerCommand(La.FEED_CHANGED,Ch);this.registerCommand(X.TOGGLE_PLAY_PAUSE,
vf);this.registerCommand(X.SEEK,uf)};cd.prototype.createView=function(){this.registerMediator(new pc)};cd.prototype.listNotificationInterests=function(){return[La.FEED_CHANGED,d.CHANGE_MEDIA,d.PLAYBACK_TARGET_CHANGE]};var oc={LAUNCH:"launch",AVAILABILITY_CHANGE:"availabilitychange"},Pa=function(a,b){if(!oa.prototype.isSender())throw Error("Chromecast not supported on this platform. Skipping plugin initialization.");Pa.__super__.constructor.call(this,a,b);this.plugin=new cd;this.plugin.initialize(b,
this.player);a.registerModule(this.plugin)};f(Pa,H);Pa.NAME="ChromeCastWrapper";Pa.prototype.buttonId="chromecastBtn";Pa.prototype.plugin=null;Pa.prototype.flashView={elements:{controls:{elements:{chromecastBtn:{}}}}};Pa.prototype.listNotificationInterests=function(){return Pa.__super__.listNotificationInterests.call(this).concat([q.ELEMENT_EVENT,q.LOAD_STATE_READY,q.LOAD_STATE_LOADING,q.APPLICATION_STATE_CHANGE,oc.AVAILABILITY_CHANGE])};Pa.prototype.handleNotification=function(a){var b,c;Pa.__super__.handleNotification.call(this,
a);b=a.getName();a=a.getBody();switch(b){case q.ELEMENT_EVENT:"click"===a.type&&a.element===this.buttonId&&this.plugin.sendNotification(oc.LAUNCH);break;case oc.AVAILABILITY_CHANGE:null!=(null!=(c=this.player.mediaElement)?c.setPlayerProperty:void 0)&&this.player.mediaElement.setPlayerProperty(this.buttonId,{visible:a});break;case q.APPLICATION_STATE_CHANGE:case q.LOAD_STATE_READY:case q.LOAD_STATE_LOADING:(b=this.plugin.isReceiverAvailable())&&this.player.mediaElement.setPlayerProperty(this.buttonId,
{state:1}),this.player.mediaElement.setPlayerProperty(this.buttonId,{visible:b})}};Pa.prototype.play=function(){this.plugin.play()};Pa.prototype.pause=function(){this.plugin.pause()};Pa.prototype.setCurrentTime=function(a){this.plugin.setCurrentTime(a);return a};Pa.prototype.getMedia=function(){return this.plugin.getMedia()};Pa.prototype.getSession=function(){return this.plugin.getSession()};Pa.prototype.getMediaManager=function(){return this.plugin.getMediaManager()};Pa.prototype.getCastReceiverManager=
function(){return this.plugin.getCastReceiverManager()};Pa.prototype.getCastMessageBus=function(){return this.plugin.getCastMessageBuses()};Pa.prototype.postMessage=function(a){this.plugin.postMessage(a)};n.registerPlugin("chromecast","flash",Pa);var td=function(){td.__super__.constructor.call(this)};f(td,L);td.prototype.moduleName="moat";td.prototype.createModel=function(){this.proxy=new Hd(this.config);this.registerProxy(this.proxy)};td.prototype.createController=function(){td.__super__.createController.call(this);
return this.registerCommand(k.AD_MANAGER_LOADED,vh)};td.prototype.listNotificationInterests=function(){return[k.AD_MANAGER_LOADED]};n.registerPlugin("moat","html",td);n.registerPlugin("moat","flash",qe);var Db=function(a,b){var c,d;if(/CrKey/.test(navigator.userAgent)&&"undefined"!==typeof cast&&null!==cast){Db.__super__.constructor.call(this);this.castReceiverManager=cast.receiver.CastReceiverManager.getInstance();this.castReceiverManager.onReady=this.dispatchEvent.bind(this,{type:"ready"});this.castReceiverManager.onSenderConnected=
this.dispatchEvent.bind(this,{type:"senderconnected"});this.castReceiverManager.onSenderDisconnected=this.dispatchEvent.bind(this,{type:"senderdisconnected"});this.castReceiverManager.onShutdown=this.dispatchEvent.bind(this,{type:"shutdown"});this.castReceiverManager.onStandbyChanged=this.dispatchEvent.bind(this,{type:"standbychange"});this.castReceiverManager.onSystemVolumeChanged=this.dispatchEvent.bind(this,{type:"systemvolumechanged"});this.castReceiverManager.onVisibilityChanged=this.dispatchEvent.bind(this,
{type:"visibilitychanged"});this.player=new S(this);this.mediaManager=new cast.receiver.MediaManager(this.player);null==b&&(b={});b["urn:x-cast:com.akamai.amp.cast"]=cast.receiver.CastMessageBus.MessageType.JSON;this.castMessageBuses={};for(c in b)d=b[c],this.castMessageBuses[c]=this.castReceiverManager.getCastMessageBus(c,d),this.castMessageBuses[c].addEventListener("message",this.dispatchEvent.bind(this));this.castReceiverManager.start(a)}};f(Db,gb);Db.prototype.castReceiverManager=null;Db.prototype.mediaManager=
null;Db.prototype.castMessageBuses=null;Db.prototype.player=null;Db.prototype.isSender=function(){return!this.isReceiver()&&/Chrome/.test(navigator.userAgent)};Db.prototype.isReceiver=function(){return/CrKey/.test(navigator.userAgent)};Db.getInstance=function(){return this.instance};Db.instance=new Db;var rc=function(){rc.__super__.constructor.call(this)};f(rc,L);rc.prototype.moduleName="dash";rc.prototype.createModel=function(){this.registerProxy(new re(this.config))};rc.prototype.getPlaybackProxy=
function(){return this.proxy.playbackProxy};rc.prototype.getInstance=function(){return this.getPlaybackProxy().player};rc.prototype.registered=function(){this.player.registerCommand(d.CHANGE_DISPLAY_STATE,wh);rc.__super__.registered.call(this)};rc.prototype.listNotificationPublications=function(){return rc.__super__.listNotificationPublications.call(this).concat([d.FRAGMENT_LOAD_START,d.FRAGMENT_LOADED])};n.registerPlugin("dash","html",rc);var xf=function(){xf.__super__.constructor.call(this)};f(xf,
L);xf.prototype.listNotificationPublications=function(){return xf.__super__.listNotificationPublications.apply(this,arguments).concat([d.ADD_CONTROL,d.REMOVE_CONTROL,d.ADD_CONTROL_STATE,d.REMOVE_CONTROL_STATE])};var Eb=function(a){Eb.__super__.constructor.call(this,null,null,null,a,onclick)};f(Eb,Ca);Eb.prototype.panel=null;Eb.prototype.timeout=null;Eb.prototype.closePanelDelayed=null;Eb.prototype.onRegister=function(){this.closePanelDelayed=this.delayedClosePanel.bind(this);"desktop"===g.getDevice()?
(this.onmouseleave=this.closePanelDelayed,this.onmouseenter=this.openPanel,this.onclick=this.clickHandler):this.onclick=this.togglePanel;Eb.__super__.onRegister.call(this);this.sendNotification(d.ADD_CONTROL_STATE,""+this.componentName+"-enabled");this.sendNotification(d.ADD_CONTROL,this.viewComponent)};Eb.prototype.openPanel=function(){clearTimeout(this.timeout);this.sendNotification($a.OPEN_PANEL,this.panel);this.panel.viewComponent.addEventListener("mouseleave",this.closePanelDelayed)};Eb.prototype.closePanel=
function(){g.isMouseOverElement(this.panel.viewComponent)||g.isMouseOverElement(this.viewComponent)||this.facade.player.retrieveProxy(C.NAME).getIsUserActive()||(this.panel.viewComponent.addEventListener("mouseleave",this.closePanelDelayed),this.sendNotification($a.CLOSE_PANEL,this.panel))};Eb.prototype.delayedClosePanel=function(){this.timeout=setTimeout(this.closePanel.bind(this),350)};Eb.prototype.togglePanel=function(a){a.stopImmediatePropagation();this.sendNotification($a.TOGGLE_PANEL,this.panel)};
Eb.prototype.clickPanel=function(){};var Jd=function(a){Jd.__super__.constructor.call(this,a,null,null,null)};f(Jd,$);Jd.prototype.componentType="panel";Jd.prototype.control=null;Jd.prototype.onRegister=function(){Jd.__super__.onRegister.call(this);this.sendNotification($a.ADD_PANEL,this)};var ud=function(a){ud.__super__.constructor.call(this,a)};f(ud,Q);ud.NAME=v.NAME;ud.prototype.loaded=!0;ud.prototype.controlName=null;ud.prototype.getControlName=function(){return this.controlName};ud.prototype.setControlName=
function(a){return this.controlName=a};var Kd=function(a){Kd.__super__.constructor.call(this,a)};f(Kd,ud);Kd.NAME=v.NAME;Kd.prototype.hidden=!0;Kd.prototype.getHidden=function(){return this.hidden};Kd.prototype.setHidden=function(a){return this.hidden=a};var Ld=function(a){Ld.__super__.constructor.call(this,a)};f(Ld,Kd);Ld.NAME=v.NAME;Ld.prototype.controlName="volume";Ld.prototype.defaults={direction:"vertical"};Ld.prototype.getDirection=function(){return this.data.direction};var Dh=function(a,b){null==
b&&(b={});Dh.__super__.constructor.call(this,a,b)};f(Dh,H);Dh.NAME="VolumePanelWrapper";n.registerPlugin("volumepanel","flash",Dh);var Eh=function(a){Eh.__super__.constructor.call(this,a)};f(Eh,Eb);Eh.prototype.clickHandler=function(){this.sendNotification(d.TOGGLE_MUTED)};var vd=function(a,b){vd.__super__.constructor.call(this,a,b)};f(vd,R);vd.prototype.componentName="volume";vd.prototype.draggable=!0;vd.prototype.valueChanged=function(){this.sendNotification(d.CHANGE_VOLUME,this.value);this.sendNotification("updatesettings",
{volume:this.value})};vd.prototype.listNotificationInterests=function(){return[d.VOLUME_CHANGE,d.READY]};vd.prototype.handleNotification=function(a){switch(a.getName()){case d.READY:this.updateValue(this.facade.player.retrieveProxy(r.NAME).getVolume());break;case d.VOLUME_CHANGE:this.updateValue(a.getBody())}};var Xa=function(){Xa.__super__.constructor.call(this);this.controls={}};f(Xa,wb);Xa.prototype.panel=null;Xa.prototype.control=null;Xa.prototype.separator=null;Xa.prototype.controls=null;Xa.prototype.labels=
null;Xa.prototype.closed=!0;Xa.prototype.panelClass=Jd;Xa.prototype.controlClass=Eb;Xa.prototype.onRegister=function(){this.panel=this.createPanel(this.componentName);this.control=this.createControl(this.componentName);this.separator=this.createSeparator(this.componentName);this.panel.control=this.control;this.control.panel=this.panel;null==this.labels&&(this.labels={});this.createPanelControls(name)};Xa.prototype.createControl=function(a){a=new this.controlClass(a);this.facade.registerMediator(a);
return a};Xa.prototype.createPanel=function(a){a=new this.panelClass(a);this.facade.registerMediator(a);return a};Xa.prototype.createSeparator=function(a){return this.create(["separator","icon"],this.panel)};Xa.prototype.createPanelControls=function(a){var b,c,d;a=this.plugin.getConfigurationData();for(b in a)c=a[b],!0===c&&(this.controls[b]=this.addPanelControl(new Ca(this.localizationManager.getString(this.labels[b]),null,null,b,null!=(d=this.panelButtonClickHandler)?"function"===typeof d.bind?
d.bind(this,b):void 0:void 0)))};Xa.prototype.addPanelControl=function(a){this.facade.registerMediator(a);this.panel.getViewComponent().appendChild(a.getViewComponent());return a};Xa.prototype.panelButtonClickHandler=function(){this.sendNotification($a.CLOSE_PANEL,this.panel)};var Fb=function(){Fb.__super__.constructor.call(this)};f(Fb,Xa);Fb.prototype.componentName="volume";Fb.prototype.slider=null;Fb.prototype.level=null;Fb.prototype.controlClass=Eh;Fb.prototype.onRegister=function(){Fb.__super__.onRegister.call(this);
this.slider=new vd(this.panel,this.plugin.getDirection());this.facade.registerMediator(this.slider)};Fb.prototype.updateVolumeButton=function(a){a=Math.ceil(10*a);a!==this.level&&(null!=this.level&&this.sendNotification(d.REMOVE_CONTROL_STATE,"volume-"+this.level),this.level=a,this.sendNotification(d.ADD_CONTROL_STATE,"volume-"+this.level))};Fb.prototype.listNotificationInterests=function(){return Fb.__super__.listNotificationInterests.apply(this,arguments).concat([d.VOLUME_CHANGE])};Fb.prototype.handleNotification=
function(a){Fb.__super__.handleNotification.call(this,a);switch(a.getName()){case d.VOLUME_CHANGE:this.updateVolumeButton(a.body)}};var yf=function(){yf.__super__.constructor.call(this)};f(yf,xf);yf.prototype.listNotificationPublications=function(){var a,b;return yf.__super__.listNotificationPublications.call(this).concat(function(){var c;c=[];for(a in $a)b=$a[a],c.push(b);return c}())};var wd=function(a){wd.__super__.constructor.call(this,a)};f(wd,wb);wd.prototype.componentName="playlist";wd.prototype.playlistButton=
null;wd.prototype.onRegister=function(){var a;a=new Ca(null,this.viewComponent,null,"playlist",this.playlistOnClick.bind(this));this.facade.registerMediator(a);this.playlistButton=a.getViewComponent();this.sendNotification(d.ADD_CONTROL,this.playlistButton);this.sendNotification(d.ADD_CONTROL_STATE,"playlist-enabled");wd.__super__.onRegister.call(this)};wd.prototype.playlistOnClick=function(a){this.facade.logger.debug("AMP Event: Playlist Clicked")};var Yb=function(){Yb.__super__.constructor.call(this)};
f(Yb,yf);Yb.prototype.moduleName="volumepanel";Yb.prototype.createFramework=function(){g.isVolumeSettable()&&Yb.__super__.createFramework.call(this)};Yb.prototype.createModel=function(){this.registerProxy(new Ld(this.config))};Yb.prototype.createView=function(){g.isVolumeSettable()&&this.registerMediator(new Fb)};Yb.prototype.listNotificationPublications=function(){return Yb.__super__.listNotificationPublications.apply(this,arguments).concat([d.CHANGE_VOLUME,d.TOGGLE_MUTED,"updatesettings"])};Yb.prototype.listNotificationInterests=
function(){return Yb.__super__.listNotificationInterests.apply(this,arguments).concat([d.VOLUME_CHANGE,d.READY])};n.registerPlugin("volumepanel","html",Yb);var Md=function(a){Md.__super__.constructor.call(this,a)};f(Md,Ra);Md.NAME=v.NAME;Md.prototype.data={url:null,target:null,apiKey:null,jsWidgetId:null};Md.prototype.createRecommendations=function(a){var b,c,d,f;c=[];f=a.documents.doc;a=0;for(d=f.length;a<d;a++)b=f[a],b=new kc(b.video.id,b.url,b.video.title,b.video.title,b.thumbnail.url,0,null,this.getTarget(),
b),c.push(b);return c};Md.prototype.getURL=function(){var a,b,c;c=encodeURIComponent(this.data.jsWidgetId);b=encodeURIComponent(this.data.apiKey);a=encodeURIComponent(document.location.href);return this.data.url+"?format\x3djson\x26widgetJSId\x3d"+c+"\x26settings\x3dfalse\x26url\x3d"+a+"\x26idx\x3d0\x26key\x3d"+b+"\x26rand\x3d"+Date.now()+"\x26recs\x3dtrue"};var Nd=function(a,b){null==b&&(b={});Nd.__super__.constructor.call(this,a,b)};f(Nd,Fa);Nd.NAME="OutbrainWrapper";Nd.prototype.createFlashVars=
function(a){Nd.__super__.createFlashVars.call(this,a);a.recommendations_partner="outbrain";return a};Nd.prototype.createXML=function(a){var b,c,d,f,g;b=a.firstChild;c=a.getElementsByTagName("recommendations")[0];null==c&&(c=a.createElement("recommendations"),b.appendChild(c));b=a.createElement("vendor");b.setAttribute("id","outbrain");c.appendChild(b);d=[{value:this.config.url,key:"OUTBRAIN_BASE_URL"},{value:this.config.apiKey,key:"OUTBRAIN_API_KEY"},{value:this.config.jsWidgetId,key:"OUTBRAIN_WIDGET_JS_ID"},
{value:this.config.mode,key:"OUTBRAIN_MODE"},{value:this.config.playerSrcId,key:"OUTBRAIN_PLAYER_SRC_ID"},{value:"internal",key:"OUTBRAIN_VIEW_PROVIDER"},{value:this.config.videoData,key:"videoData"}];f=0;for(g=d.length;f<g;f++)c=d[f],null!=c.value&&this.createProperty(a,c.key,c.value,b);return a};var Od=function(){Od.__super__.constructor.call(this)};f(Od,L);Od.prototype.moduleName="playlist";Od.prototype.createView=function(){this.registerMediator(new wd)};Od.prototype.listNotificationPublications=
function(){return Od.__super__.listNotificationPublications.call(this).concat([d.ADD_CONTROL,d.REMOVE_CONTROL,d.ADD_CONTROL_STATE,d.REMOVE_CONTROL_STATE])};n.registerPlugin("playlist","html",Od);var zf=function(){return zf.__super__.constructor.apply(this,arguments)};f(zf,H);zf.NAME="AdChoicesWrapper";zf.prototype.flashView={elements:{adOptions:{elements:{adChoices:{attributes:{target:"http://www.akamai.com/"}}}}}};var sc=function(){sc.__super__.constructor.call(this)};f(sc,$);sc.prototype.componentName=
"ad-choices";sc.prototype.icon=null;sc.prototype.text=null;sc.prototype.container=null;sc.prototype.onRegister=function(){var a;sc.__super__.onRegister.call(this);a=this.facade.retrieveProxy(v.NAME);this.container=this.create("ad-choices-link",this,"a");this.container.target="_blank";this.container.href=a.getTarget();this.text=this.createText("ad-choices-text","AdChoices",this.container);this.icon=this.create("ad-choices-icon",this.container)};sc.prototype.listNotificationInterests=function(){return[k.AD_CONTAINER_CREATED]};
sc.prototype.handleNotification=function(a){switch(a.getName()){case k.AD_CONTAINER_CREATED:a=a.getBody(),null!=a&&a.appendChild(this.viewComponent)}};var Pd=function(a){Pd.__super__.constructor.call(this,a)};f(Pd,v);Pd.NAME=v.NAME;Pd.prototype.defaults={target:null};Pd.prototype.getTarget=function(){return this.data.target};Pd.prototype.setTarget=function(a){return this.data.target=a};var te=function(){te.__super__.constructor.call(this)};f(te,Sa);te.prototype.moduleName="outbrain";te.prototype.createModel=
function(){te.__super__.createModel.call(this);this.registerProxy(new Md(this.config))};n.registerPlugin("outbrain","html",te);n.registerPlugin("outbrain","flash",Nd);var Af=function(a,b){Af.__super__.constructor.call(this,a,b)};f(Af,H);Af.NAME="UplynkWrapper";Af.prototype.flashPlugins=[{id:"UplynkStreamingPlugin",src:"#{paths.resources}plugins/latest_upLynkOsmfPlugin.swf",host:"osmf",main:"#{paths.resources}plugins/latest_upLynkOsmfPlugin.swf",type:"application/x-shockwave-flash"}];var Qd=function(){Qd.__super__.constructor.call(this)};
f(Qd,L);Qd.prototype.moduleName="adchoices";Qd.prototype.createModel=function(){this.registerProxy(new Pd(this.config))};Qd.prototype.createView=function(){this.registerMediator(new sc)};Qd.prototype.listNotificationInterests=function(){return[k.AD_CONTAINER_CREATED]};n.registerPlugin("adchoices","html",Qd);n.registerPlugin("adchoices","flash",zf);var Bf=function(a,b){Bf.__super__.constructor.call(this,a,b)};f(Bf,H);Bf.NAME="OctoshapeWrapper";Bf.prototype.flashPlugins=[{id:"OctoShapeStreamingPlugin",
src:"#{paths.resources}plugins/infinitehd-osmf-plugin-1511180@v330-OSMF_1_6_MA.swf",host:"osmf",main:"com.octoshape.osmf.streamingplugin.OctoshapeStreamingPluginInfo"}];n.registerPlugin("octoshape","flash",Bf);var Fh=function(){Fh.__super__.constructor.call(this)};f(Fh,L);Fh.prototype.moduleName="uplynk";n.registerPlugin("uplynk","html",Fh);n.registerPlugin("uplynk","flash",Af);var Cf=function(a,b){Cf.__super__.constructor.call(this,a,b)};f(Cf,H);Cf.NAME="CustomAuthWrapper";Cf.prototype.flashPlugins=
[{id:"AuthenticationSamplePlugin",src:"#{paths.resources}plugins/AuthenticationSamplePlugin.swf",blocking:!1,host:"akamai",main:"AuthenticationSamplePlugin",type:"application/x-shockwave-flash"}];n.registerPlugin("customauth","flash",Cf);var Gh=function(){Gh.__super__.constructor.call(this)};f(Gh,L);Gh.prototype.moduleName="octoshape";n.registerPlugin("octoshape","html",Gh);var Df=function(a,b){null==b&&(b={});Df.__super__.constructor.call(this,a,b)};f(Df,H);Df.NAME="LinkedMenuWrapper";Df.prototype.flashPlugins=
[{id:"LinkedMenuPlugin",src:"#{paths.resources}plugins/LinkedMenuPlugin.swf",blocking:!1,host:"akamai",main:"LinkedMenuPlugin"}];n.registerPlugin("linkedmenu","flash",Df);var Hh=function(){Hh.__super__.constructor.call(this)};f(Hh,L);Hh.prototype.moduleName="customauth";n.registerPlugin("customauth","html",Hh);var tc=function(a){this.name=this.playbackCoreName+"-"+Date.now();tc.__super__.constructor.call(this,a.types)};f(tc,xa);tc.prototype.playbackCoreName="rapt";tc.prototype.mediaElement=null;tc.prototype.mediator=
null;tc.prototype.getMediaElement=function(){return this.mediaElement};tc.prototype.onRegister=function(){var a;null==this.mediator&&(this.mediator=new dc("rapt","iframe"),this.mediator.onRegister(),a=this.mediator.getViewComponent(),a.player=this.facade,a.name=this.name,a.setAttribute("allowfullscreen","true"),a.setAttribute("webkitallowfullscreen","true"),a.setAttribute("mozallowfullscreen","true"),a.setAttribute("scrolling","no"),a.setAttribute("frameborder","0"),a.setAttribute("marginwidth","0"),
a.setAttribute("marginheight","0"),this.sendNotification(d.PLAYBACK_CORE_CHANGE,this.mediator),this.mediaElement=new Zb(this.name),this.mediaElement.addEventListener("interactivebreakstart",this.oninteractivebreakstart.bind(this)),this.mediaElement.addEventListener("interactivebreakend",this.oninteractivebreakend.bind(this)),this.initialized=!0)};tc.prototype.replay=function(){this.mediaElement.replay()};tc.prototype.oninteractivebreakstart=function(){this.sendNotification(d.ADD_APPLICATION_STATE,
"interactive")};tc.prototype.oninteractivebreakend=function(){this.sendNotification(d.REMOVE_APPLICATION_STATE,"interactive")};var Zb=function(a){var b=this;this.name=a;this.data={paused:!1,ended:!1,error:null,duration:0,currentTime:0,src:null};this.startNode=null;this.iframe=document.querySelector("iframe[name\x3d"+this.name+"]");this.iframe.video=this;this.iframe.onload=function(){raptor.api.init(b.iframe)};raptor.api.on("ready",function(a,d){raptor.settings("defaultIFrame",b.name);raptor.api.load()});
raptor.api.on("play",function(a,d){d.frameName===b.name&&(b.data.paused=!1,b.dispatchEvent("play"),b.dispatchEvent("playing"))});raptor.api.on("pause",function(a,d){d.frameName===b.name&&(b.updateData(),b.data.paused=!0,b.dispatchEvent("pause"))});raptor.api.on("error",function(a,d){d.frameName===b.name&&(b.data.error=d,b.dispatchEvent("error"))});raptor.api.on("inboundReady",function(a,d){d&&d.frameName!==b.name||(b.updateData(),b.dispatchEvent("loadedmetadata"),b.dispatchEvent("canplaythrough"))});
raptor.api.on("timeUpdate",function(a,d){d&&d.frameName!==b.name||b.updateData(d)});raptor.api.on("clipEnd",function(a,d){d&&d.frameName!==b.name||b.dispatchEvent("interactivebreakstart")});raptor.api.on("clipStart",function(a,d){d&&d.frameName!==b.name||("true"===d.isStart&&(b.startNode=raptor.api.nodes(b.name)[d.clipname]),b.dispatchEvent("interactivebreakend"))});raptor.api.on("projectEnd",function(a,d){d&&d.frameName!==b.name||(b.data.ended=!0,b.dispatchEvent("ended"))});a=function(a,b){console.log("RAPT: ",
a.type,a,b)};raptor.api.on("inboundReady",a);raptor.api.on("play",a);raptor.api.on("pause",a);raptor.api.on("error",a);raptor.api.on("clipStart",a);raptor.api.on("clipEnd",a);raptor.api.on("clipSwitch",a);raptor.api.on("projectStart",a);raptor.api.on("projectEnd",a);raptor.api.on("progress",a);raptor.api.on("button",a);raptor.api.on("windowed",a);raptor.api.on("userTimed",a);raptor.api.on("fullscreen",a);raptor.api.on("volume",a);raptor.api.on("mute",a);raptor.api.on("unmute",a)};Zb.prototype.updateData=
function(a){var b;null==a&&(a=raptor.api.state(this.name));null!=a&&(b=parseFloat(a.duration),b!==this.data.duration&&(this.data.duration=b,this.dispatchEvent("durationchange")),b=parseFloat(a.time||a.progressTime),b!==this.data.currentTime&&(this.data.currentTime=b,this.dispatchEvent("timeupdate")))};Zb.prototype.load=function(){this.iframe.src=this.src};Zb.prototype.play=function(){raptor.api.play(this.name)};Zb.prototype.pause=function(){raptor.api.pause(this.name);this.updateData()};Zb.prototype.replay=
function(){raptor.api.setNode(this.startNode,this.name)};Zb.prototype.canPlayType=function(a){return"application/rapt"===a?"maybe":""};Zb.prototype.addEventListener=function(a,b,c){this.iframe.addEventListener(a,b,c)};Zb.prototype.once=function(a,b){this.iframe.once(a,b)};Zb.prototype.dispatchEvent=function(a){"string"===typeof a&&(a=new CustomEvent(a));return this.iframe.dispatchEvent(a)};Zb.prototype.removeEventListener=function(a,b,c){this.iframe.removeEventListener(a,b,c)};null!=Object.defineProperties&&
Object.defineProperties(Zb.prototype,{src:{set:function(a){this.data.src=a},get:function(){return this.data.src}},currentTime:{set:function(a){raptor.api.setTime(a,this.name)},get:function(){return this.data.currentTime}},duration:{get:function(){return this.data.duration}},paused:{get:function(){return this.data.paused}},ended:{get:function(){return this.data.ended}},error:{get:function(){return this.data.error}},readyState:{get:function(){return 1}}});var Rd=function(a){Rd.__super__.constructor.call(this,
a)};f(Rd,Q);Rd.NAME=v.NAME;Rd.prototype.defaults={types:["application/rapt"]};Rd.prototype.player=null;Rd.prototype.initialize=function(){this.sendNotification(d.INITIALIZED);this.player=new tc(this.getConfigurationData());this.facade.player.retrieveProxy(ba.NAME).registerPlaybackCore(this.player)};var Ih=function(){Ih.__super__.constructor.call(this)};f(Ih,L);Ih.prototype.moduleName="linkedmenu";n.registerPlugin("linkedmenu","html",Ih);var W=function(a,b){this.hlsConfig=a.data;!0===a.withCredentials&&
(this.hlsConfig.xhrSetup=function(a,b){a.withCredentials=!0});this.plugin=b;W.__super__.constructor.call(this,a.types,a);this.temporalTypes=["vod","live","dvr"]};f(W,xa);W.prototype.playbackCoreName="hls";W.prototype.player=null;W.prototype.hlsConfig=null;W.prototype.fragErrorTime=0;W.prototype.timedMedatadata=null;W.prototype.currentMedatadata=null;W.prototype.id3Track=null;W.prototype.load=function(){var a,b,c,d,f,g=this;null!=this.player&&this.destroy();a=new Hls(this.hlsConfig);a.attachMedia(this.getMediaElement());
d=Hls.Events;for(b in d)c=d[b],a.on(c,function(a,b){g.plugin.dispatcher.dispatchEvent(new V(a,b))});a.on(Hls.Events.MANIFEST_PARSED,this.onManifestParsed.bind(this));a.on(Hls.Events.ERROR,this.onError.bind(this));a.on(Hls.Events.FRAG_PARSING_METADATA,this.onFragParsingMetadata.bind(this));a.on(Hls.Events.LEVEL_LOADED,this.onLevelLoaded.bind(this));a.on(Hls.Events.LEVEL_SWITCH,this.onLevelSwitch.bind(this));a.on(Hls.Events.FRAG_LOADING,this.onFragmentLoadStart.bind(this));a.on(Hls.Events.FRAG_LOADED,
this.onFragmentLoaded.bind(this));try{for(b in f=this.config.quality,f)c=f[b],a[b]=c}catch(h){}this.player=a;W.__super__.load.call(this)};W.prototype.applyTextTrackHandlers=function(a){if(null==this.id3Track||!a){W.__super__.applyTextTrackHandlers.call(this,a);if(!1===a)return this.id3Track=null;this.addMTextTrack()}};W.prototype.addMTextTrack=function(){null!=this.getMediaElement().addTextTrack&&null==this.id3Track&&(this.id3Track=this.getMediaElement().addTextTrack("metadata"))};W.prototype.applySrc=
function(){this.currentMedatadata=null;this.player.loadSource(this.getSrc())};W.prototype.onManifestParsed=function(a,b){this.sendNotification(d.BITRATE_LEVELS_LOADED,b);this.player.loadLevel=-1};W.prototype.onLevelLoaded=function(a,b){this.player.levels[b.level].level=b.level;this.sendNotification(d.BITRATE_CHANGE,this.player.levels[b.level]);!0===b.details.live&&this.facade.mediaProxy.setTemporalType("live")};W.prototype.onLevelSwitch=function(a,b){this.sendNotification(d.BITRATE_CHANGING,this.player.levels[b.level])};
W.prototype.onFragParsingMetadata=function(a,b){var c,d,f,g,h,k,l;null==this.id3Track&&this.applyTextTrackHandlers(!0);k=b.samples;g=0;for(h=k.length;g<h;g++)if(b=k[g],f=b.dts,null!=(null!=b?b.data:void 0)){d=String.fromCharCode.apply(null,b.data.subarray(0,-1));d=d.replace(/\0/g,"");d={startTime:f,endTime:f,key:d.replace(/(\S*)\{.*/,"$1").split(" ")[1],info:d.replace(/[^\{]+\{/,""),data:b};try{c=window.VTTCue||window.TextTrackCue,window.TextTrackCue===c&&(d.endTime+=0.5),null!=(l=this.id3Track)&&
l.addCue(new c(d.startTime,d.endTime,JSON.stringify(d)))}catch(n){}}};W.prototype.onFragmentLoadStart=function(a,b){this.sendNotification(d.FRAGMENT_LOAD_START,this.player.levels[b.frag.level].bitrate)};W.prototype.onFragmentLoaded=function(a,b){this.sendNotification(d.FRAGMENT_LOADED,this.player.levels[b.frag.level].bitrate)};W.prototype.seek=function(a){return W.__super__.seek.call(this,a+this.getStartTime())};W.prototype.getCurrentTime=function(){return this.getMediaElement().currentTime-this.getStartTime()};
W.prototype.getDuration=function(){var a,b,c,d;return(null!=(a=this.player)?null!=(b=a.levels)?null!=(c=b[this.player.currentLevel])?null!=(d=c.details)?d.totalduration:void 0:void 0:void 0:void 0)||this.getMediaElement().duration};W.prototype.getStartTime=function(){return this.getMediaElement().duration-this.getDuration()};W.prototype.onplaying=function(a){W.__super__.onplaying.call(this);this.retried=!1};W.prototype.onError=function(a,b){this.plugin.sendNotification(d.DISPATCH_EVENT,new V("error",
b));if(!1===this.config.retryOnError||!0===this.retried)this.retried=!1,this.error(b);else if(b.fatal)switch(b.type){case Hls.ErrorTypes.NETWORK_ERROR:this.retried=!0;this.player.startLoad();this.facade.logger.error("[AMP HLS] Playback Error trying to recover:",a);break;case Hls.ErrorTypes.MEDIA_ERROR:this.retried=!0;this.player.recoverMediaError();this.facade.logger.error("[AMP HLS] Playback Error trying to recover:",a);break;default:this.facade.logger.error("[AMP HLS] Playback Error:",a),this.error(b)}else b.details===
Hls.ErrorDetails.FRAG_LOOP_LOADING_ERROR&&(this.fragErrorTime===this.getMediaElement().currentTime?(this.getMediaElement().currentTime++,this.facade.logger.error("[AMP HLS] Frag Loop Load Error, Seeking to :",this.getMediaElement().currentTime)):this.fragErrorTime=this.getMediaElement().currentTime)};W.prototype.error=function(a){switch(a.type){case Hls.ErrorTypes.NETWORK_ERROR:a.code=MediaError.MEDIA_ERR_NETWORK;break;case Hls.ErrorTypes.MEDIA_ERROR:a.code=MediaError.MEDIA_ERR_DECODE;break;default:a.toString=
function(){return a.details}}this.sendNotification(d.ERROR,a)};W.prototype.setQuality=function(a){var b;return null!=(b=this.player)?b.currentLevel=a:void 0};W.prototype.getQuality=function(){var a;return null!=(a=this.player)?a.currentLevel:void 0};W.prototype.getQualityLevels=function(){var a;return(null!=(a=this.player)?a.levels:void 0)||W.__super__.getQualityLevels.call(this)};W.prototype.destroy=function(){null!=this.player&&(this.player.destroy(),this.player=null)};var Ef=function(a,b){Ef.__super__.constructor.call(this,
a,b);g.flashTypes.push(g.mimeTypes.m3u8)};f(Ef,H);Ef.NAME="HLSWrapper";Ef.prototype.flashPlugins=[{id:"flashlsOSMF",src:"#{paths.resources}plugins/flashlsOSMF.swf",host:"osmf",type:"application/x-shockwave-flash"}];n.registerPlugin("hls","flash",Ef);var Jh=function(){Jh.__super__.constructor.call(this)};f(Jh,y);Jh.prototype.execute=function(a){var b;"freewheel"===(null!=(b=a.getBody())?b.partner:void 0)&&this.proxy.destroy()};var ue=function(a){ue.__super__.constructor.call(this,a)};f(ue,bd);ue.NAME=
v.NAME;ue.prototype.defaults={types:["application/x-mpegURL"],data:{enableWorker:!0,enableSoftwareAES:!0,enableCEA708Captions:!0},buffer:null,quality:null,withCredentials:null};ue.prototype.createPlaybackProxy=function(){if(null!=(window.MediaSource||window.WebKitMediaSource)&&Hls.isSupported())return new W(this.getConfigurationData(),this.facade)};var Ff=function(){Ff.__super__.constructor.call(this)};f(Ff,L);Ff.prototype.moduleName="rapt";Ff.prototype.createModel=function(){this.registerProxy(new Rd(this.config))};
n.registerPlugin("rapt","html",Ff);var aa=function(a){aa.__super__.constructor.call(this,a)};f(aa,Q);aa.NAME=v.NAME;aa.prototype.defaults={data:null,events:null,plugin:{js:"//secure-dcr-cert.imrworldwide.com/novms/js/2/ggcmb500.js"}};aa.prototype.nielsendcrSDK=null;aa.prototype.end_flag=!1;aa.prototype.mediaChange_flag=!1;aa.prototype.adVO=null;aa.prototype.cur_position=0;aa.prototype.timer=null;aa.prototype.isLive=null;aa.prototype.isFlash=!1;aa.prototype.initialize=function(){aa.__super__.initialize.call(this);
this.nielsendcrSDK=window.NOLCMB.getInstance();this.nielsendcrSDK.ggInitialize(this.value.data);this.facade.logger.log("[AMP Nielsen DCR Event] : SDKInitialize");this.isFlash="flash"===this.facade.player.playerType;this.bindBeforeUnload()};aa.prototype.generateNielsenVO=function(a){var b;b={};switch(a){case "content":null!=this.value.events.video&&(b=this.value.events.video);break;case "static":b=this.value.events["static"];break;default:b=this.value.events.ad,b.type=a}return b};aa.prototype.fireBeacon=
function(a,b){var c;switch(a){case "loadmetadata":c=3;break;case "play":c=5;break;case "stop":c=7;break;case "timeupdate":c=49;break;case "end":c=57}this.facade.logger.log("[AMP Nielsen DCR Event] : Event - "+a,b);this.nielsendcrSDK.ggPM(c,b)};aa.prototype.bindBeforeUnload=function(){window.addEventListener("beforeunload",function(){return this.fireBeacon("end",this.cur_position.toFixed(0))})};aa.prototype.adStart=function(a){this.adVO=a;"midroll"===this.adVO.type&&1===this.adVO.position&&this.fireBeacon("stop",
this.cur_position.toFixed(0));"preroll"===this.adVO.type&&this.fireBeacon("loadmetadata",this.generateNielsenVO("content"));null!=this.adVO&&("postroll"===this.adVO.type&&this.isFlash&&this.end(),this.fireBeacon("loadmetadata",this.generateNielsenVO(a.type)))};aa.prototype.adEnd=function(a){this.fireBeacon("stop",this.cur_position.toFixed(0));"midroll"===(null!=a?a.type:void 0)&&a.totalAds===a.position&&this.fireBeacon("loadmetadata",this.generateNielsenVO("content"))};aa.prototype.staticStart=function(){};
aa.prototype.start=function(a){var b;"midroll"===(null!=(b=this.adVO)?b.type:void 0)?this.fireBeacon("stop",this.generateNielsenVO(this.adVO.type)):(this.fireBeacon("loadmetadata",this.generateNielsenVO("content")),this.end_flag=this.mediaChange_flag=!0)};aa.prototype.end=function(){this.end_flag&&this.fireBeacon("end",this.cur_position.toFixed(0));this.end_flag=!1};aa.prototype.mediaChange=function(){this.mediaChange_flag&&this.fireBeacon("end",this.cur_position.toFixed(0))};aa.prototype.timeupdate=
function(a){var b;this.isFlash?(b=a.body.currentTime,a=a.name===la.AD_TIME_UPDATE):(b=a.body,a=a.name===k.AD_TIME_REMAINING);this.isLive()&&!a?this.fireBeacon("timeupdate",Math.floor(Date.now()/1E3)):(this.cur_position=a&&!this.isFlash?this.adVO.duration-b:b,this.timer===this.cur_position.toFixed(0)||a&&(this.cur_position>this.adVO.duration||1>this.cur_position)||(this.timer=this.cur_position.toFixed(0),this.fireBeacon("timeupdate",this.timer)))};aa.prototype.getPlayheadPosition=function(){return this.isLive()?
Math.floor(Date.now()/1E3):this.facade.player.getCurrentTime().toFixed(1)};aa.prototype.isLive=function(){return this.facade.player.getMedia().isLive};var Kh=function(){Kh.__super__.constructor.call(this)};f(Kh,puremvc.SimpleCommand);Kh.prototype.execute=function(a){this.facade.retrieveProxy(aa.NAME).adStart(a.body)};var Lh=function(){Lh.__super__.constructor.call(this)};f(Lh,puremvc.SimpleCommand);Lh.prototype.execute=function(a){this.facade.retrieveProxy(aa.NAME).adEnd(a.body)};var oi=function(){oi.__super__.constructor.call(this)};
f(oi,puremvc.SimpleCommand);oi.prototype.execute=function(a){this.facade.retrieveProxy(aa.NAME).staticStart()};var Mh=function(){Mh.__super__.constructor.call(this)};f(Mh,puremvc.SimpleCommand);Mh.prototype.execute=function(a){this.facade.retrieveProxy(aa.NAME).start()};var Nh=function(){Nh.__super__.constructor.call(this)};f(Nh,puremvc.SimpleCommand);Nh.prototype.execute=function(a){this.facade.retrieveProxy(aa.NAME).end()};var Sd=function(){Sd.__super__.constructor.call(this)};f(Sd,puremvc.SimpleCommand);
Sd.prototype.execute=function(a){this.facade.retrieveProxy(aa.NAME).timeupdate(a)};var Gf=function(){Gf.__super__.constructor.call(this)};f(Gf,puremvc.SimpleCommand);Gf.prototype.execute=function(a){this.facade.retrieveProxy(aa.NAME).mediaChange()};var Oh=function(a,b){this.plugin=new dd;this.plugin.oninitialized=a.registerModule.bind(a,this.plugin);this.plugin.initialize(b,a);Oh.__super__.constructor.call(this,a,b)};f(Oh,H);Oh.NAME="NielsendcrWrapper";var Hf=function(){Hf.__super__.constructor.call(this)};
f(Hf,Ca);Hf.prototype.componentName="airplay";Hf.prototype.onclick=function(a){a.stopImmediatePropagation();this.sendNotification("launch");return!1};var Ph=function(){Ph.__super__.constructor.call(this)};f(Ph,y);Ph.prototype.execute=function(a){this.proxy.ready()};var Qh=function(){Qh.__super__.constructor.call(this)};f(Qh,y);Qh.prototype.execute=function(a){this.proxy.launch()};var uc=function(a){uc.__super__.constructor.call(this,a);this.handlers={availabilitychanged:this.availabilitychanged.bind(this),
playbacktargetchanged:this.playbacktargetchanged.bind(this)}};f(uc,Q);uc.NAME=v.NAME;uc.prototype.handlers=null;uc.prototype.ready=function(){var a;a=this.getVideo();a.setAttribute("x-webkit-airplay","allow");a.addEventListener("webkitplaybacktargetavailabilitychanged",this.handlers.availabilitychanged);a.addEventListener("webkitcurrentplaybacktargetiswireless",this.handlers.playbacktargetchanged)};uc.prototype.destroy=function(){video.removeEventListener("webkitplaybacktargetavailabilitychanged",
this.handlers.availabilitychanged);video.removeEventListener("webkitcurrentplaybacktargetiswireless",this.handlers.playbacktargetchanged)};uc.prototype.availabilitychanged=function(a){this.sendNotification("availabilitychange","available"===a.availability)};uc.prototype.playbacktargetchanged=function(a){console.log(this.getVideo().webkitCurrentPlaybackTargetIsWireless)};uc.prototype.getVideo=function(){return this.facade.player.getMediaElement()};uc.prototype.launch=function(){this.getVideo().webkitShowPlaybackTargetPicker()};
var Ob=function(){Ob.__super__.constructor.call(this)};f(Ob,L);Ob.prototype.moduleName="hls";Ob.prototype.createModel=function(){this.proxy=new ue(this.config);this.registerProxy(this.proxy)};Ob.prototype.createController=function(){this.registerCommand(k.BREAK_START,Jh);Ob.__super__.createController.call(this)};Ob.prototype.getPlaybackProxy=function(){return this.proxy.playbackProxy};Ob.prototype.getInstance=function(){return this.getPlaybackProxy().player};Ob.prototype.listNotificationInterests=
function(){return Ob.__super__.listNotificationInterests.call(this).concat([k.BREAK_START])};Ob.prototype.listNotificationPublications=function(){return Ob.__super__.listNotificationPublications.call(this).concat([d.TIMED_METADATA,d.BITRATE_LEVELS_LOADED,d.BITRATE_CHANGE,d.BITRATE_CHANGING,d.FRAGMENT_LOAD_START,d.FRAGMENT_LOADED])};n.registerPlugin("hls","html",Ob);var Pc=function(){Pc.__super__.constructor.call(this)};f(Pc,wb);Pc.prototype.button=null;Pc.prototype.onRegister=function(){Pc.__super__.onRegister.call(this);
this.button=new Hf;this.facade.registerMediator(this.button)};Pc.prototype.listNotificationInterests=function(){return Pc.__super__.listNotificationInterests.call(this).concat(["availabilitychange"])};Pc.prototype.handleNotification=function(a){var b;Pc.__super__.handleNotification.call(this,a);b=a.getName();a=a.getBody();switch(b){case "availabilitychange":!0===a?(this.sendNotification(d.ADD_CONTROL_STATE,"airplay"),this.facade.player.sendNotification(d.ADD_CONTROL,this.button.getViewComponent())):
(this.sendNotification(d.REMOVE_CONTROL_STATE,"airplay"),this.facade.player.sendNotification(d.REMOVE_CONTROL,this.button.getViewComponent()))}};var dd=function(){dd.__super__.constructor.call(this)};f(dd,L);dd.prototype.moduleName="nielsendcr";dd.prototype.createModel=function(){this.registerProxy(new aa(this.config))};dd.prototype.createController=function(){dd.__super__.createController.call(this);this.registerCommand(k.AD_STARTED,Kh);this.registerCommand(k.AD_ENDED,Lh);this.registerCommand(d.STARTED,
Mh);this.registerCommand(d.ENDED,Nh);this.registerCommand(d.TIME_UPDATE,Sd);this.registerCommand(k.AD_TIME_REMAINING,Sd);this.registerCommand(q.TIME_UPDATE,Sd);this.registerCommand(la.AD_TIME_UPDATE,Sd);this.registerCommand(d.MEDIA_CHANGE,Gf);this.registerCommand(q.FEED_LOADED,Gf)};dd.prototype.listNotificationInterests=function(){return[k.AD_STARTED,k.AD_ENDED,k.BREAK_START,d.MEDIA_CHANGE,d.STARTED,d.ENDED,d.TIME_UPDATE,k.AD_TIME_REMAINING,q.FEED_LOADED,q.TIME_UPDATE,la.AD_TIME_UPDATE]};n.registerPlugin("nielsendcr",
"html",dd);n.registerPlugin("nielsendcr","flash",Oh);var If,ta=function(a){ta.__super__.constructor.call(this,a)};f(ta,Q);ta.NAME=v.NAME;ta.prototype.defaults={data:null};ta.prototype.googleanalyticsSDK=null;ta.prototype.isLive=null;ta.prototype.config=null;ta.prototype.started=!1;ta.prototype.timeViewed=0;ta.prototype.currentTime=0;ta.prototype.onRegister=function(){ta.__super__.onRegister.call(this);this.config=this.facade.getConfig();(function(a,b,c,d,f,g,h){a.GoogleAnalyticsObject=f;a[f]=a[f]||
function(){(a[f].q=a[f].q||[]).push(arguments)};a[f].l=1*new Date;g=b.createElement(c);h=b.getElementsByTagName(c)[0];g.async=1;g.src=d;h.parentNode.insertBefore(g,h)})(window,document,"script",this.config.resources.src,"ga")};ta.prototype.initialize=function(){ga("create",this.config.plugin.trackingId,"auto");ga("send","pageview")};ta.prototype.generateGoogleAnalyticsVO=function(a,b){var c,d,f,g,h,k,l,n,p,q,r;null==b&&(b=null);n={};c=this.facade.player.getMedia();this.facade.player.getMediaElement();
this.isLive=c.isLive;g=!1;c={};n.trackingid=this.config.plugin.trackingId;r=this.config.events;for(l in r)if(h=r[l],null!=b&&null!=h&&0<h.length)for(p=0,q=h.length;p<q;p++)if(f=h[p],(null!=f?f.type:void 0)===b)for(k in g=!0,f.data)if("customDimension"===k){for(d in f.data.customDimension)"viewDuration"===f.data.customDimension[d]?(ga("set",d,this.timeViewed),c[d]=this.timeViewed):(ga("set",d,this.facade.player.evaluateBinding(f.data.customDimension[d])),c[d]=this.facade.player.evaluateBinding(f.data.customDimension[d]));
n.customDimension=c}else n[k.toLowerCase()]=this.facade.player.evaluateBinding(f.data[k]);return!0===g?n:null};If=function(a){var b;if(a&&(ga("send","event",a.eventcategory,a.eventaction,a.eventlabel,a.eventvalue),a.customDimension))for(b in a.customDimension)ga("set",b,null)};ta.prototype.adStart=function(a){If(this.generateGoogleAnalyticsVO(a,"adStarted"))};ta.prototype.adEnd=function(a){If(this.generateGoogleAnalyticsVO(a,"adEnded"))};ta.prototype.start=function(){this.started=!0;this.timeViewed=
this.currentTime=0;If(this.generateGoogleAnalyticsVO(null,"started"))};ta.prototype.end=function(){!0===this.started&&(this.started=!1,If(this.generateGoogleAnalyticsVO(null,"ended")))};ta.prototype.timeUpdate=function(a){a=isNaN(a)&&!isNaN(a.currentTime)?a.currentTime:a;Math.round(a)>this.currentTime&&(this.timeViewed++,this.currentTime=Math.round(a))};var Rh=function(){Rh.__super__.constructor.call(this)};f(Rh,puremvc.SimpleCommand);Rh.prototype.execute=function(a){this.facade.retrieveProxy(ta.NAME).start()};
var Jf=function(){Jf.__super__.constructor.call(this)};f(Jf,puremvc.SimpleCommand);Jf.prototype.execute=function(a){this.facade.retrieveProxy(ta.NAME).end()};var Sh=function(a,b){this.plugin=new ed;this.plugin.oninitialized=a.registerModule.bind(a,this.plugin);this.plugin.initialize(b,a);Sh.__super__.constructor.call(this,a,b)};f(Sh,H);Sh.NAME="GoogleAnalyticsWrapper";var pi=function(){pi.__super__.constructor.call(this)};f(pi,puremvc.SimpleCommand);pi.prototype.execute=function(a){this.facade.retrieveProxy(ta.NAME).end()};
var Th=function(){Th.__super__.constructor.call(this)};f(Th,puremvc.SimpleCommand);Th.prototype.execute=function(a){this.facade.retrieveProxy(ta.NAME).adStart(a.body)};var Uh=function(){Uh.__super__.constructor.call(this)};f(Uh,puremvc.SimpleCommand);Uh.prototype.execute=function(a){this.facade.retrieveProxy(ta.NAME).timeUpdate(a.body)};var Vh=function(){Vh.__super__.constructor.call(this)};f(Vh,puremvc.SimpleCommand);Vh.prototype.execute=function(a){this.facade.retrieveProxy(ta.NAME).adEnd(a.body)};
var Pb=function(){Pb.__super__.constructor.call(this)};f(Pb,L);Pb.prototype.moduleName="airplay";Pb.prototype.isAvailable=function(){return null!==window.WebKitPlaybackTargetAvailabilityEvent};Pb.prototype.createModel=function(){Pb.__super__.createModel.call(this);this.registerProxy(new uc(this.config))};Pb.prototype.createController=function(){Pb.__super__.createController.call(this);this.registerCommand(d.READY,Ph);this.registerCommand("launch",Qh)};Pb.prototype.createView=function(){this.registerMediator(new Pc)};
Pb.prototype.listNotificationInterests=function(){return[d.READY]};Pb.prototype.listNotificationPublications=function(){return Pb.__super__.listNotificationPublications.apply(this,arguments).concat([d.ADD_CONTROL,d.REMOVE_CONTROL,d.ADD_CONTROL_STATE,d.REMOVE_CONTROL_STATE,d.CHANGE_PLAYBACK_TARGET])};n.registerPlugin("airplay","html",Pb);var Z=function(a){Z.__super__.constructor.call(this,a)};f(Z,Q);Z.NAME=v.NAME;Z.prototype.defaults={data:null,events:null,plugin:{js:"../resources/js/conviva-core-sdk-2.119.0.32091.min.js"},
conviva:null};Z.prototype.convivaVideoSession=null;Z.prototype.serviceURL=null;Z.prototype.customerKey=null;Z.prototype.media=null;Z.prototype.mediaElement=null;Z.prototype.systemSettings=null;Z.prototype.systemInterface=null;Z.prototype.systemFactory=null;Z.prototype.clientSettings=null;Z.prototype.client=null;Z.prototype.playerStateManager=null;Z.prototype.sessionKey=null;Z.prototype.html5PlayerInterface=null;Z.prototype.contentMetadata=null;Z.prototype.initialize=function(){var a,b,c,d;Z.__super__.initialize.call(this);
this.customerKey=null!=(a=this.value)?null!=(b=a.data)?b.customerKey:void 0:void 0;this.serviceURL=null!=(c=this.value)?null!=(d=c.data)?d.serviceUrl:void 0:void 0;"undefined"!==typeof Conviva&&null!==Conviva&&(this.systemSettings=new Conviva.SystemSettings,this.systemInterface=(new Html5SystemInterfaceFactory).build(),this.systemFactory=new Conviva.SystemFactory(this.systemInterface,this.systemSettings),this.clientSettings=new Conviva.ClientSettings(this.customerKey),this.clientSettings.gatewayUrl=
this.serviceURL,this.client=new Conviva.Client(this.clientSettings,this.systemFactory),this.playerStateManager=this.client.getPlayerStateManager())};Z.prototype.contentChanged=function(){var a;"undefined"!==typeof Conviva&&null!==Conviva&&(this.mediaElement=null,this.media=this.facade.player.getMedia(),this.mediaElement=this.facade.player.getMediaElement(),this.contentMetadata=this.generateConvivaSessionMetadata(),null!=this.client&&null!=this.sessionKey&&this.client.cleanupSession(this.sessionKey),
this.sessionKey=this.client.createSession(this.contentMetadata),this.html5PlayerInterface=new Html5PlayerInterface(this.playerStateManager,this.mediaElement),this.client.attachPlayer(this.sessionKey,this.playerStateManager),a=this,this.mediaElement.addEventListener("error",function(){a.cleanupSession()}),this.mediaElement.addEventListener("ended",function(){a.cleanupSession()}))};Z.prototype.cleanupSession=function(){return this.client.cleanupSession(this.sessionKey)};Z.prototype.generateConvivaSessionMetadata=
function(){var a,b,c;"undefined"!==typeof Conviva&&null!==Conviva&&(b=new Conviva.ContentMetadata,b.assetName=this.media.guid,b.streamUrl=this.media.src,b.streamType=this.media.isLive?Conviva.ContentMetadata.StreamType.LIVE:Conviva.ContentMetadata.StreamType.VOD,b.duration=this.media.duration,a=null!=(c=this.value)?c.data:void 0,null!=a&&this.getMetadataFromConfig(b));return b};Z.prototype.getMetadataFromConfig=function(a){var b,c,d,f;b=null!=(d=this.value)?null!=(f=d.data)?f.metadata:void 0:void 0;
if(null!=b)for(c in b)d=b[c],"null"!==d&&(a.hasOwnProperty(c)||this.facade.logger.warn("[AMP Conviva] : ''"+c+"'' is not an eplicit property of convivaMetadata obejct"),a[c]=d)};Z.prototype.adStart=function(a){"undefined"!==typeof Conviva&&null!==Conviva&&null!=this.client&&null!=this.sessionKey&&("preroll"===(null!=a?a.type:void 0)?this.client.adStart(this.sessionKey,Conviva.Client.AdStream.SEPARATE,Conviva.Client.AdPlayer.SEPARATE,Conviva.Client.AdPosition.PREROLL):this.client.detachStreamer(this.sessionKey))};
Z.prototype.adEnd=function(a){"undefined"!==typeof Conviva&&null!==Conviva&&null!=this.sessionKey&&this.client&&("preroll"===(null!=a?a.type:void 0)?this.client.adEnd(this.sessionKey):"midroll"===(null!=a?a.type:void 0)?this.client.attachPlayer(this.sessionKey,this.playerStateManager):"postroll"===(null!=a?a.type:void 0)&&this.client.cleanupSession(this.sessionKey))};Z.prototype.bitrateSwitch=function(a){this.playerStateManager.setBitrateKbps(a.bitrate)};Z.prototype.reportError=function(a){"undefined"!==
typeof Conviva&&null!==Conviva&&this.client&&null!=a&&this.client.reportError(this.sessionKey,a,Conviva.Client.ErrorSeverity.FATAL)};var Wh=function(){Wh.__super__.constructor.call(this)};f(Wh,puremvc.SimpleCommand);Wh.prototype.execute=function(a){this.facade.retrieveProxy(Z.NAME)};var Xh=function(){Xh.__super__.constructor.call(this)};f(Xh,puremvc.SimpleCommand);Xh.prototype.execute=function(a){this.facade.retrieveProxy(Z.NAME).adStart(a.body)};var Yh=function(){Yh.__super__.constructor.call(this)};
f(Yh,puremvc.SimpleCommand);Yh.prototype.execute=function(a){this.facade.retrieveProxy(Z.NAME).adEnd(a.body)};var Zh=function(){Zh.__super__.constructor.call(this)};f(Zh,puremvc.SimpleCommand);Zh.prototype.execute=function(a){this.facade.retrieveProxy(Z.NAME)};var $h=function(){$h.__super__.constructor.call(this)};f($h,puremvc.SimpleCommand);$h.prototype.execute=function(a){this.facade.retrieveProxy(Z.NAME).contentChanged(a.body)};var ai=function(){ai.__super__.constructor.call(this)};f(ai,y);ai.prototype.execute=
function(a){this.proxy.bitrateSwitch(a.getBody())};var D=function(a){this._player=a};D.prototype.ContentType={AD:"ad",CONTENT:"ct"};D.prototype.AdPosition={PREROLL:"a1",MIDROLL:"a2",POSTROLL:"a3",OVERLAY:"a4",SPECIAL:"a5"};D.prototype.VideoState={UNPLAYED:"s1",PLAYED:"s2",STOPPED:"s3",COMPLETED:"s4"};D.prototype.media=null;D.prototype.facade=null;D.prototype.cur_position=0;D.prototype.queryInterval=2;D.prototype.timer=null;D.prototype.isPlayerReady=!1;D.prototype._player=null;D.prototype.contentType=
null;D.prototype.adType="";D.prototype.playbackState=D.prototype.VideoState.UNPLAYED;D.prototype.videoStartTime=null;D.prototype.isReady=function(){return this.isPlayerReady};D.prototype.getTitle=function(){var a;return null!=(a=this.media)?a.title:void 0};D.prototype.getVideoPath=function(){var a;return null!=(a=this.media)?a.src:void 0};D.prototype.getContentType=function(){return this.contentType};D.prototype.getAdPosition=function(){return this.adType};D.prototype.getTotalDuration=function(){var a;
return 1E3*(null!=(a=this.media)?a.duration:NaN)};D.prototype.getState=function(){return this.playbackState};D.prototype.getCurrentPlayTime=function(){this.media.isLive?this.cur_position=Math.floor(Date.now()/1E3):(this.cur_position=this.facade.player.getCurrentTime().toFixed(1),Math.abs(this.timer-this.cur_position)>this.queryInterval&&(this.timer=this.cur_position));return this.cur_position};D.prototype.getBitrate=function(){var a;a=NaN;try{a=this.facade.player.getQuality()}catch(b){}return a};
D.prototype.getThumbnailPath=function(){return this.facade.player.getMedia().poster};D.prototype.getViewStartTime=function(){return null!=this.videoStartTime?Math.round((new Date).getTime()-this.videoStartTime):0};D.verify=function(a){return!0};D.prototype.onVideoStart=function(){this.videoStartTime=(new Date).getTime()};D.prototype.onVideoEnd=function(){this.videoStartTime=null};var ed=function(){ed.__super__.constructor.call(this)};f(ed,L);ed.prototype.moduleName="googleanalytics";ed.prototype.createModel=
function(){this.registerProxy(new ta(this.config))};ed.prototype.createController=function(){ed.__super__.createController.call(this);this.registerCommand(d.STARTED,Rh);this.registerCommand(d.MEDIA_SEQUENCE_ABORTED,Jf);this.registerCommand(d.ENDED,Jf);this.registerCommand(k.AD_STARTED,Th);this.registerCommand(d.TIME_UPDATE,Uh);this.registerCommand(k.AD_ENDED,Vh)};ed.prototype.listNotificationInterests=function(){return[k.AD_STARTED,k.AD_ENDED,k.BREAK_END,d.STARTED,d.ENDED,d.LOADED_METADATA,d.TIME_UPDATE,
d.CONTENT_CHANGED,d.MEDIA_CHANGE,d.CHANGE_CONTENT,k.AD_TIME_REMAINING,d.MEDIA_SEQUENCE_ABORTED]};n.registerPlugin("googleanalytics","html",ed);n.registerPlugin("googleanalytics","flash",Sh);var bi=function(){bi.__super__.constructor.call(this)};f(bi,puremvc.SimpleCommand);bi.prototype.execute=function(a){this.facade.retrieveProxy(pa.NAME).start()};var ci=function(){ci.__super__.constructor.call(this)};f(ci,puremvc.SimpleCommand);ci.prototype.execute=function(a){this.facade.retrieveProxy(pa.NAME).adStart(a.body)};
var di=function(){di.__super__.constructor.call(this)};f(di,puremvc.SimpleCommand);di.prototype.execute=function(a){this.facade.retrieveProxy(pa.NAME).adEnd(a.body)};var ei=function(){ei.__super__.constructor.call(this)};f(ei,puremvc.SimpleCommand);ei.prototype.execute=function(a){this.facade.retrieveProxy(pa.NAME).end()};var fi=function(){fi.__super__.constructor.call(this)};f(fi,puremvc.SimpleCommand);fi.prototype.execute=function(a){this.facade.retrieveProxy(pa.NAME).contentChanged(a.body)};var gi=
function(){gi.__super__.constructor.call(this)};f(gi,puremvc.SimpleCommand);gi.prototype.execute=function(a){this.facade.retrieveProxy(pa.NAME).paused()};var hi=function(){hi.__super__.constructor.call(this)};f(hi,puremvc.SimpleCommand);hi.prototype.execute=function(a){this.facade.retrieveProxy(pa.NAME).canPlay(a.body)};var ii=function(){ii.__super__.constructor.call(this)};f(ii,puremvc.SimpleCommand);ii.prototype.execute=function(a){this.facade.retrieveProxy(pa.NAME).playing()};var ji=function(a,
b){this.plugin=new $b;this.plugin.oninitialized=a.registerModule.bind(a,this.plugin);this.plugin.initialize(b,a);ji.__super__.constructor.call(this,a,b)};f(ji,H);ji.NAME="ChartbeatAnalyticsWrapper";var pa=function(a){pa.__super__.constructor.call(this,a)};f(pa,Q);pa.NAME=v.NAME;pa.prototype.defaults={data:null,events:null,plugin:{js:"//static.chartbeat.com/js/chartbeat_video.js"}};pa.prototype.media=null;pa.prototype.initialize=function(){var a,b;try{a=this.facade.player.getMediaElement(),D.prototype._player=
a,D.prototype.facade=this.facade,window._cbv_strategies=window._cbv_strategies||[],window._cbv_strategies.push(D),b=window._cbv||(window._cbv=[]),b.push(a),this.setConfigMetadata()}catch(c){}n.addResources(this.facade.pluginResources,this.resourcesLoaded.bind(this),this.resourcesError.bind(this));pa.__super__.initialize.call(this)};pa.prototype.setConfigMetadata=function(){var a,b,c,d;d=window._sf_async_config={};a=null!=(c=this.value)?c.data:void 0;if(null!=a)for(b in a)c=a[b],"null"!==c&&(d[b]=
c)};pa.prototype.resourcesLoaded=function(){};pa.prototype.resourcesError=function(){};pa.prototype.contentChanged=function(){this.media=this.facade.player.getMedia();this.setConfigMetadata();D.prototype.media=this.media;D.prototype.playbackState=D.prototype.VideoState.UNPLAYED;D.prototype.isPlayerReady=!0};pa.prototype.adStart=function(a){D.prototype.contentType=D.prototype.ContentType.AD;"preroll"===(null!=a?a.type:void 0)&&(D.prototype.adType=D.prototype.AdPosition.PREROLL);"midroll"===(null!=
a?a.type:void 0)&&(D.prototype.adType=D.prototype.AdPosition.MIDROLL);"postroll"===(null!=a?a.type:void 0)&&(D.prototype.adType=D.prototype.AdPosition.POSTROLL)};pa.prototype.adEnd=function(a){"postroll"===(null!=a?a.type:void 0)&&(D.prototype.contentType=D.prototype.ContentType.CONTENT)};pa.prototype.start=function(a){D.prototype.contentType=D.prototype.ContentType.CONTENT;D.prototype.onVideoStart()};pa.prototype.playing=function(a){D.prototype.contentType=D.prototype.ContentType.CONTENT;D.prototype.playbackState=
D.prototype.VideoState.PLAYED};pa.prototype.end=function(a){D.prototype.playbackState=D.prototype.VideoState.COMPLETED;D.prototype.onVideoEnd()};pa.prototype.paused=function(a){D.prototype.playbackState=D.prototype.VideoState.STOPPED};pa.prototype.canPlay=function(a){D.prototype.playbackReady=!0};var fd=function(){fd.__super__.constructor.call(this)};f(fd,L);fd.prototype.moduleName="conviva";fd.prototype.createModel=function(){this.registerProxy(new Z(this.config))};fd.prototype.createController=
function(){fd.__super__.createController.call(this);this.registerCommand(k.BREAK_END,Yh);this.registerCommand(k.AD_STARTED,Xh);this.registerCommand(d.STARTED,Wh);this.registerCommand(d.ENDED,Zh);this.registerCommand(d.MEDIA_CHANGE,$h);this.registerCommand(d.BITRATE_SWITCH,ai)};fd.prototype.listNotificationInterests=function(){return[k.AD_STARTED,k.BREAK_END,d.STARTED,d.ENDED,d.MEDIA_CHANGE,d.BITRATE_SWITCH]};fd.prototype.reportError=function(a){this.convivaProxy=this.model.retrieveProxy(Z.NAME);null!=
this.convivaProxy&&null!=a&&this.convivaProxy.reportError(a)};n.registerPlugin("conviva","html",fd);var $b=function(){$b.__super__.constructor.call(this)};f($b,L);$b.prototype.moduleName="chartbeatanalytics";$b.prototype.pluginResources=null;$b.prototype.createModel=function(){this.registerProxy(new pa(this.config))};$b.prototype.loadModuleResources=function(){var a;this.pluginResources=null!=(a=this.config)?a.resources:void 0;this.config.resources=null;$b.__super__.loadModuleResources.call(this)};
$b.prototype.createController=function(){$b.__super__.createController.call(this);this.registerCommand(k.BREAK_END,di);this.registerCommand(k.AD_STARTED,ci);this.registerCommand(d.ENDED,ei);this.registerCommand(d.MEDIA_CHANGE,fi);this.registerCommand(d.CAN_PLAY_THROUGH,hi);this.registerCommand(d.STARTED,bi);this.registerCommand(d.PLAYING,ii);this.registerCommand(d.PAUSED,gi)};$b.prototype.listNotificationInterests=function(){return[k.AD_STARTED,k.BREAK_END,d.STARTED,d.ENDED,d.MEDIA_CHANGE,d.PLAYING,
d.PAUSED,d.CAN_PLAY_THROUGH]};n.registerPlugin("chartbeatanalytics","html",$b);n.registerPlugin("chartbeatanalytics","flash",ji);ki.akamai={amp:{AMP:n,utils:{Utils:g,QueryString:vc,Logger:ha},Utils:g,QueryString:vc,Logger:ha,Config:xc,chromecast:{ChromeCastShim:"undefined"!=typeof Db?Db.getInstance():null},XHR:Ja,Resource:de,Media:Ia,Authorization:Kf,Events:Events,AdEvents:function(){var a,b,c={values:[]};for(a in k)b=k[a].replace(/^ads/,""),c[a.replace(/^AD_/,"")]=b,c.values.push(b);return c}(),
EventDispatcher:gb,Plugin:function(a){function b(a,d){babelHelpers.classCallCheck(this,b);var f=babelHelpers.possibleConstructorReturn(this,(b.__proto__||Object.getPrototypeOf(b)).call(this));f.player=a;f.config=d;var g=Events.values,h=void 0,k=void 0,l=!0,n=!1,p=void 0;try{for(var q=g[Symbol.iterator](),r;!(l=(r=q.next()).done);l=!0)k=r.value,h=f["on"+k],null!=h&&"function"==typeof h&&(h=f["on"+k]=h.bind(f),f.player.addEventListener(k,h))}catch(s){n=!0,p=s}finally{try{!l&&q.return&&q.return()}finally{if(n)throw p;
}}return f}babelHelpers.inherits(b,a);babelHelpers.createClass(b,null,[{key:"create",value:function(a,b){var d=this;return new Promise(function(f,g){try{var k=new d(a,b);f(k)}catch(l){g(l)}})}},{key:"factory",get:function(){return this.create.bind(this)}}]);return b}(gb)}};window.AKAMAI_MEDIA_PLAYER.saveSDK("AMP Premier v2.68.16",ki)}window.AKAMAI_MEDIA_PLAYER.setVersion("AMP Premier v2.68.16")})();